/*! aliyun webrtc sdk - ver 1.16.0 created:2021-7-15 4:16:13 PM */
!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=177)}([function(e,t,r){"use strict";(function(n){var i,o,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r,n){"object"===s(t)?e.exports=t=n():(o=[],i=n,void 0!==(a="function"==typeof i?i.apply(t,o):i)&&(e.exports=a))}(0,function(){var e=e||function(e,t){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==n&&n.crypto&&(i=n.crypto),!i)try{i=r(240)}catch(e){}var o=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),s={},c=s.lib={},u=c.Base=function(){return{extend:function(e){var t=a(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=c.WordArray=u.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var a=r[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=a<<24-(n+o)%4*8}else for(var o=0;o<i;o+=4)t[n+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(o());return new f.init(t,e)}}),d=s.enc={},l=d.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new f.init(r,t/2)}},h=d.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new f.init(r,t)}},p=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},_=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,n=this._data,i=n.words,o=n.sigBytes,a=this.blockSize,s=4*a,c=o/s;c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0);var u=c*a,d=e.min(4*u,o);if(u){for(var l=0;l<u;l+=a)this._doProcessBlock(i,l);r=i.splice(0,u),n.sigBytes-=d}return new f.init(r,d)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(c.Hasher=_.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){_.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new m.HMAC.init(e,r).finalize(t)}}}),s.algo={});return s}(Math);return e})}).call(t,r(19))},function(e,t,r){"use strict";"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(10)):(i=[r(0),r(10)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){e.lib.Cipher||function(t){var r=e,n=r.lib,i=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,s=r.enc,c=(s.Utf8,s.Base64),u=r.algo,f=u.EvpKDF,d=n.Cipher=a.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?k:g}return function(t){return{encrypt:function(r,n,i){return e(n).encrypt(t,r,n,i)},decrypt:function(r,n,i){return e(n).decrypt(t,r,n,i)}}}}()}),l=(n.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),r.mode={}),h=n.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=l.CBC=function(){function e(e,r,n){var i,o=this._iv;o?(i=o,this._iv=t):i=this._prevBlock;for(var a=0;a<n;a++)e[r+a]^=i[a]}var r=h.extend();return r.Encryptor=r.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize;e.call(this,t,r,i),n.encryptBlock(t,r),this._prevBlock=t.slice(r,r+i)}}),r.Decryptor=r.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize,o=t.slice(r,r+i);n.decryptBlock(t,r),e.call(this,t,r,i),this._prevBlock=o}}),r}(),_=r.pad={},m=_.Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,i=n<<24|n<<16|n<<8|n,a=[],s=0;s<n;s+=4)a.push(i);var c=o.create(a,n);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},v=(n.BlockCipher=d.extend({cfg:d.cfg.extend({mode:p,padding:m}),reset:function(){var e;d.reset.call(this);var t=this.cfg,r=t.iv,n=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,r&&r.words):(this._mode=e.call(n,this,r&&r.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),n.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),b=r.format={},y=b.OpenSSL={stringify:function(e){var t,r=e.ciphertext,n=e.salt;return t=n?o.create([1398893684,1701076831]).concat(n).concat(r):r,t.toString(c)},parse:function(e){var t,r=c.parse(e),n=r.words;return 1398893684==n[0]&&1701076831==n[1]&&(t=o.create(n.slice(2,4)),n.splice(0,4),r.sigBytes-=16),v.create({ciphertext:r,salt:t})}},g=n.SerializableCipher=i.extend({cfg:i.extend({format:y}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n),o=i.finalize(t),a=i.cfg;return v.create({ciphertext:o,key:r,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),S=r.kdf={},w=S.OpenSSL={execute:function(e,t,r,n){n||(n=o.random(8));var i=f.create({keySize:t+r}).compute(e,n),a=o.create(i.words.slice(t),4*r);return i.sigBytes=4*t,v.create({key:i,iv:a,salt:n})}},k=n.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:w}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=n.kdf.execute(r,e.keySize,e.ivSize);n.iv=i.iv;var o=g.encrypt.call(this,e,t,i.key,n);return o.mixIn(i),o},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var i=n.kdf.execute(r,e.keySize,e.ivSize,t.salt);return n.iv=i.iv,g.decrypt.call(this,e,t,i.key,n)}})}()})},function(e,t,r){"use strict";function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,r){return a(e,t,r)}var o=r(4),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=o:(n(o,t),t.Buffer=i),n(a,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=a(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(e,t,r){"use strict";(function(e){function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return a(this,e,t,r)}function a(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?l(e,t,r,n):"string"==typeof t?f(e,t,r):h(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,r,n){return s(t),t<=0?i(e,t):void 0!==r?"string"==typeof n?i(e,t).fill(r,n):i(e,t).fill(r):i(e,t)}function u(e,t){if(s(t),e=i(e,t<0?0:0|p(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|m(t,r);e=i(e,n);var a=e.write(t,r);return a!==n&&(e=e.slice(0,a)),e}function d(e,t){var r=t.length<0?0:0|p(t.length);e=i(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function l(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=d(e,t),e}function h(e,t){if(o.isBuffer(t)){var r=0|p(t.length);return e=i(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Y(t.length)?i(e,0):d(e,t);if("Buffer"===t.type&&Q(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function _(e){return+e!=e&&(e=0),o.alloc(+e)}function m(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return K(e).length;default:if(n)return q(e).length;t=(""+t).toLowerCase(),n=!0}}function v(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return M(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,r/=2}var u;if(i){var f=-1;for(u=r;u<s;u++)if(o(e,u)===o(t,-1===f?0:u-f)){if(-1===f&&(f=u),u-f+1===c)return f*a}else-1!==f&&(u-=u-f),f=-1}else for(r+c>s&&(r=s-c),u=r;u>=0;u--){for(var d=!0,l=0;l<c;l++)if(o(e,u+l)!==o(t,l)){d=!1;break}if(d)return u}return-1}function S(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function w(e,t,r,n){return J(q(t,e.length-r),e,r,n)}function k(e,t,r,n){return J(W(t),e,r,n)}function E(e,t,r,n){return k(e,t,r,n)}function R(e,t,r,n){return J(K(t),e,r,n)}function C(e,t,r,n){return J(G(t,e.length-r),e,r,n)}function A(e,t,r){return 0===t&&r===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=r){var c,u,f,d;switch(s){case 1:o<128&&(a=o);break;case 2:c=e[i+1],128==(192&c)&&(d=(31&o)<<6|63&c)>127&&(a=d);break;case 3:c=e[i+1],u=e[i+2],128==(192&c)&&128==(192&u)&&(d=(15&o)<<12|(63&c)<<6|63&u)>2047&&(d<55296||d>57343)&&(a=d);break;case 4:c=e[i+1],u=e[i+2],f=e[i+3],128==(192&c)&&128==(192&u)&&128==(192&f)&&(d=(15&o)<<18|(63&c)<<12|(63&u)<<6|63&f)>65535&&d<1114112&&(a=d)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return T(n)}function T(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=$));return r}function M(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function P(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function I(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=z(e[o]);return i}function x(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function D(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,r,n,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function B(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function j(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(e,t,r,n,i){return i||j(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(e,t,r,n,23,4),r+4}function V(e,t,r,n,i){return i||j(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(e,t,r,n,52,8),r+8}function H(e){if(e=F(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function F(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function q(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function G(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function K(e){return X.toByteArray(H(e))}function J(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Y(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var X=r(241),Z=r(242),Q=r(243);t.Buffer=o,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=n(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,r){return a(null,e,t,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,r){return c(null,e,t,r)},o.allocUnsafe=function(e){return u(null,e)},o.allocUnsafeSlow=function(e){return u(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},o.byteLength=m,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):v.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,n,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var a=i-n,s=r-t,c=Math.min(a,s),u=this.slice(n,i),f=e.slice(t,r),d=0;d<c;++d)if(u[d]!==f[d]){a=u[d],s=f[d];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return S(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return k(this,e,t,r);case"latin1":case"binary":return E(this,e,t,r);case"base64":return R(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=o.prototype;else{var i=t-e;n=new o(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},o.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},o.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),Z.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),Z.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),Z.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),Z.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){L(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){L(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):B(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):B(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return U(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return U(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return V(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return V(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=o.isBuffer(e)?e:q(new o(e,n).toString()),c=s.length;for(a=0;a<r-t;++a)this[a+t]=s[a%c]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,r(19))},function(e,t,r){"use strict";(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,n){function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function o(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function a(e,t,r){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}function s(e,t,r){for(var n=0,i=Math.min(e.length,r),o=t;o<i;o++){var a=e.charCodeAt(o)-48;n<<=4,n|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return n}function c(e,t,r,n){for(var i=0,o=Math.min(e.length,r),a=t;a<o;a++){var s=e.charCodeAt(a)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}function u(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}function f(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,c=a/67108864|0;r.words[0]=s;for(var u=1;u<n;u++){for(var f=c>>>26,d=67108863&c,l=Math.min(u,t.length-1),h=Math.max(0,u-e.length+1);h<=l;h++){var p=u-h|0;i=0|e.words[p],o=0|t.words[h],a=i*o+d,f+=a/67108864|0,d=67108863&a}r.words[u]=0|d,c=0|f}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}function d(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,c=Math.min(o,t.length-1),u=Math.max(0,o-e.length+1);u<=c;u++){var f=o-u,d=0|e.words[f],l=0|t.words[u],h=d*l,p=67108863&h;a=a+(h/67108864|0)|0,p=p+s|0,s=67108863&p,a=a+(p>>>26)|0,i+=a>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}function l(e,t,r){return(new h).mulp(e,t,r)}function h(e,t){this.x=e,this.y=t}function p(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){p.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function m(){p.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function v(){p.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function b(){p.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function y(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function g(e){y.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}"object"===(void 0===e?"undefined":t(e))?e.exports=a:n.BN=a,a.BN=a,a.wordSize=26;var S;try{S=r(284).Buffer}catch(e){}a.isBN=function(e){return e instanceof a||null!==e&&"object"===(void 0===e?"undefined":t(e))&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,r,n){if("number"==typeof e)return this._initNumber(e,r,n);if("object"===(void 0===e?"undefined":t(e)))return this._initArray(e,r,n);"hex"===r&&(r=16),i(r===(0|r)&&r>=2&&r<=36),e=e.toString().replace(/\s+/g,"");var o=0;"-"===e[0]&&o++,16===r?this._parseHex(e,o):this._parseBase(e,r,o),"-"===e[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),r,n)},a.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},a.prototype._initArray=function(e,t,r){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===r)for(n=e.length-1,o=0;n>=0;n-=3)a=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(n=0,o=0;n<e.length;n+=3)a=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},a.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,i,o=0;for(r=e.length-6,n=0;r>=t;r-=6)i=s(e,r,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,n++);r+6!==t&&(i=s(e,t,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303),this.strip()},a.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,a=o%n,s=Math.min(o,o-a)+r,u=0,f=r;f<s;f+=n)u=c(e,f,f+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var d=1;for(u=c(e,f,e.length,t),f=0;f<a;f++)d*=t;this.imuln(d),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(e,t){e=e||10,t=0|t||1;var r;if(16===e||"hex"===e){r="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],c=(16777215&(s<<n|o)).toString(16);o=s>>>24-n&16777215,r=0!==o||a!==this.length-1?w[6-c.length]+c+r:c+r,n+=2,n>=26&&(n-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var u=k[e],f=E[e];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var l=d.modn(f).toString(e);d=d.idivn(f),r=d.isZero()?l+r:w[u-l.length]+l+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(e,t){return i(void 0!==S),this.toArrayLike(S,e,t)},a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,r){var n=this.byteLength(),o=r||Math.max(1,n);i(n<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0"),this.strip();var a,s,c="le"===t,u=new e(o),f=this.clone();if(c){for(s=0;!f.isZero();s++)a=f.andln(255),f.iushrn(8),u[s]=a;for(;s<o;s++)u[s]=0}else{for(s=0;s<o-n;s++)u[s]=0;for(s=0;!f.isZero();s++)a=f.andln(255),f.iushrn(8),u[o-s-1]=a}return u},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},a.prototype.ior=function(e){return i(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},a.prototype.iand=function(e){return i(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},a.prototype.ixor=function(e){return i(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var r=e/26|0,n=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<n:this.words[r]&~(1<<n),this.strip()},a.prototype.iadd=function(e){var t;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();var r,n;this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var n,i;r>0?(n=this,i=e):(n=e,i=this);for(var o=0,a=0;a<i.length;a++)t=(0|n.words[a])-(0|i.words[a])+o,o=t>>26,this.words[a]=67108863&t;for(;0!==o&&a<n.length;a++)t=(0|n.words[a])+o,o=t>>26,this.words[a]=67108863&t;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var R=function(e,t,r){var n,i,o,a=e.words,s=t.words,c=r.words,u=0,f=0|a[0],d=8191&f,l=f>>>13,h=0|a[1],p=8191&h,_=h>>>13,m=0|a[2],v=8191&m,b=m>>>13,y=0|a[3],g=8191&y,S=y>>>13,w=0|a[4],k=8191&w,E=w>>>13,R=0|a[5],C=8191&R,A=R>>>13,O=0|a[6],T=8191&O,M=O>>>13,P=0|a[7],I=8191&P,x=P>>>13,D=0|a[8],L=8191&D,N=D>>>13,B=0|a[9],j=8191&B,U=B>>>13,V=0|s[0],H=8191&V,F=V>>>13,z=0|s[1],q=8191&z,W=z>>>13,G=0|s[2],K=8191&G,J=G>>>13,Y=0|s[3],X=8191&Y,Z=Y>>>13,Q=0|s[4],$=8191&Q,ee=Q>>>13,te=0|s[5],re=8191&te,ne=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ce=8191&se,ue=se>>>13,fe=0|s[8],de=8191&fe,le=fe>>>13,he=0|s[9],pe=8191&he,_e=he>>>13;r.negative=e.negative^t.negative,r.length=19,n=Math.imul(d,H),i=Math.imul(d,F),i=i+Math.imul(l,H)|0,o=Math.imul(l,F);var me=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(p,H),i=Math.imul(p,F),i=i+Math.imul(_,H)|0,o=Math.imul(_,F),n=n+Math.imul(d,q)|0,i=i+Math.imul(d,W)|0,i=i+Math.imul(l,q)|0,o=o+Math.imul(l,W)|0;var ve=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(v,H),i=Math.imul(v,F),i=i+Math.imul(b,H)|0,o=Math.imul(b,F),n=n+Math.imul(p,q)|0,i=i+Math.imul(p,W)|0,i=i+Math.imul(_,q)|0,o=o+Math.imul(_,W)|0,n=n+Math.imul(d,K)|0,i=i+Math.imul(d,J)|0,i=i+Math.imul(l,K)|0,o=o+Math.imul(l,J)|0;var be=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(g,H),i=Math.imul(g,F),i=i+Math.imul(S,H)|0,o=Math.imul(S,F),n=n+Math.imul(v,q)|0,i=i+Math.imul(v,W)|0,i=i+Math.imul(b,q)|0,o=o+Math.imul(b,W)|0,n=n+Math.imul(p,K)|0,i=i+Math.imul(p,J)|0,i=i+Math.imul(_,K)|0,o=o+Math.imul(_,J)|0,n=n+Math.imul(d,X)|0,i=i+Math.imul(d,Z)|0,i=i+Math.imul(l,X)|0,o=o+Math.imul(l,Z)|0;var ye=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(k,H),i=Math.imul(k,F),i=i+Math.imul(E,H)|0,o=Math.imul(E,F),n=n+Math.imul(g,q)|0,i=i+Math.imul(g,W)|0,i=i+Math.imul(S,q)|0,o=o+Math.imul(S,W)|0,n=n+Math.imul(v,K)|0,i=i+Math.imul(v,J)|0,i=i+Math.imul(b,K)|0,o=o+Math.imul(b,J)|0,n=n+Math.imul(p,X)|0,i=i+Math.imul(p,Z)|0,i=i+Math.imul(_,X)|0,o=o+Math.imul(_,Z)|0,n=n+Math.imul(d,$)|0,i=i+Math.imul(d,ee)|0,i=i+Math.imul(l,$)|0,o=o+Math.imul(l,ee)|0;var ge=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(C,H),i=Math.imul(C,F),i=i+Math.imul(A,H)|0,o=Math.imul(A,F),n=n+Math.imul(k,q)|0,i=i+Math.imul(k,W)|0,i=i+Math.imul(E,q)|0,o=o+Math.imul(E,W)|0,n=n+Math.imul(g,K)|0,i=i+Math.imul(g,J)|0,i=i+Math.imul(S,K)|0,o=o+Math.imul(S,J)|0,n=n+Math.imul(v,X)|0,i=i+Math.imul(v,Z)|0,i=i+Math.imul(b,X)|0,o=o+Math.imul(b,Z)|0,n=n+Math.imul(p,$)|0,i=i+Math.imul(p,ee)|0,i=i+Math.imul(_,$)|0,o=o+Math.imul(_,ee)|0,n=n+Math.imul(d,re)|0,i=i+Math.imul(d,ne)|0,i=i+Math.imul(l,re)|0,o=o+Math.imul(l,ne)|0;var Se=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(T,H),i=Math.imul(T,F),i=i+Math.imul(M,H)|0,o=Math.imul(M,F),n=n+Math.imul(C,q)|0,i=i+Math.imul(C,W)|0,i=i+Math.imul(A,q)|0,o=o+Math.imul(A,W)|0,n=n+Math.imul(k,K)|0,i=i+Math.imul(k,J)|0,i=i+Math.imul(E,K)|0,o=o+Math.imul(E,J)|0,n=n+Math.imul(g,X)|0,i=i+Math.imul(g,Z)|0,i=i+Math.imul(S,X)|0,o=o+Math.imul(S,Z)|0,n=n+Math.imul(v,$)|0,i=i+Math.imul(v,ee)|0,i=i+Math.imul(b,$)|0,o=o+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,i=i+Math.imul(p,ne)|0,i=i+Math.imul(_,re)|0,o=o+Math.imul(_,ne)|0,n=n+Math.imul(d,oe)|0,i=i+Math.imul(d,ae)|0,i=i+Math.imul(l,oe)|0,o=o+Math.imul(l,ae)|0;var we=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(I,H),i=Math.imul(I,F),i=i+Math.imul(x,H)|0,o=Math.imul(x,F),n=n+Math.imul(T,q)|0,i=i+Math.imul(T,W)|0,i=i+Math.imul(M,q)|0,o=o+Math.imul(M,W)|0,n=n+Math.imul(C,K)|0,i=i+Math.imul(C,J)|0,i=i+Math.imul(A,K)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(k,X)|0,i=i+Math.imul(k,Z)|0,i=i+Math.imul(E,X)|0,o=o+Math.imul(E,Z)|0,n=n+Math.imul(g,$)|0,i=i+Math.imul(g,ee)|0,i=i+Math.imul(S,$)|0,o=o+Math.imul(S,ee)|0,n=n+Math.imul(v,re)|0,i=i+Math.imul(v,ne)|0,i=i+Math.imul(b,re)|0,o=o+Math.imul(b,ne)|0,n=n+Math.imul(p,oe)|0,i=i+Math.imul(p,ae)|0,i=i+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,n=n+Math.imul(d,ce)|0,i=i+Math.imul(d,ue)|0,i=i+Math.imul(l,ce)|0,o=o+Math.imul(l,ue)|0;var ke=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(L,H),i=Math.imul(L,F),i=i+Math.imul(N,H)|0,o=Math.imul(N,F),n=n+Math.imul(I,q)|0,i=i+Math.imul(I,W)|0,i=i+Math.imul(x,q)|0,o=o+Math.imul(x,W)|0,n=n+Math.imul(T,K)|0,i=i+Math.imul(T,J)|0,i=i+Math.imul(M,K)|0,o=o+Math.imul(M,J)|0,n=n+Math.imul(C,X)|0,i=i+Math.imul(C,Z)|0,i=i+Math.imul(A,X)|0,o=o+Math.imul(A,Z)|0,n=n+Math.imul(k,$)|0,i=i+Math.imul(k,ee)|0,i=i+Math.imul(E,$)|0,o=o+Math.imul(E,ee)|0,n=n+Math.imul(g,re)|0,i=i+Math.imul(g,ne)|0,i=i+Math.imul(S,re)|0,o=o+Math.imul(S,ne)|0,n=n+Math.imul(v,oe)|0,i=i+Math.imul(v,ae)|0,i=i+Math.imul(b,oe)|0,o=o+Math.imul(b,ae)|0,n=n+Math.imul(p,ce)|0,i=i+Math.imul(p,ue)|0,i=i+Math.imul(_,ce)|0,o=o+Math.imul(_,ue)|0,n=n+Math.imul(d,de)|0,i=i+Math.imul(d,le)|0,i=i+Math.imul(l,de)|0,o=o+Math.imul(l,le)|0;var Ee=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(j,H),i=Math.imul(j,F),i=i+Math.imul(U,H)|0,o=Math.imul(U,F),n=n+Math.imul(L,q)|0,i=i+Math.imul(L,W)|0,i=i+Math.imul(N,q)|0,o=o+Math.imul(N,W)|0,n=n+Math.imul(I,K)|0,i=i+Math.imul(I,J)|0,i=i+Math.imul(x,K)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(T,X)|0,i=i+Math.imul(T,Z)|0,i=i+Math.imul(M,X)|0,o=o+Math.imul(M,Z)|0,n=n+Math.imul(C,$)|0,i=i+Math.imul(C,ee)|0,i=i+Math.imul(A,$)|0,o=o+Math.imul(A,ee)|0,n=n+Math.imul(k,re)|0,i=i+Math.imul(k,ne)|0,i=i+Math.imul(E,re)|0,o=o+Math.imul(E,ne)|0,n=n+Math.imul(g,oe)|0,i=i+Math.imul(g,ae)|0,i=i+Math.imul(S,oe)|0,o=o+Math.imul(S,ae)|0,n=n+Math.imul(v,ce)|0,i=i+Math.imul(v,ue)|0,i=i+Math.imul(b,ce)|0,o=o+Math.imul(b,ue)|0,n=n+Math.imul(p,de)|0,i=i+Math.imul(p,le)|0,i=i+Math.imul(_,de)|0,o=o+Math.imul(_,le)|0,n=n+Math.imul(d,pe)|0,i=i+Math.imul(d,_e)|0,i=i+Math.imul(l,pe)|0,o=o+Math.imul(l,_e)|0;var Re=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(j,q),i=Math.imul(j,W),i=i+Math.imul(U,q)|0,o=Math.imul(U,W),n=n+Math.imul(L,K)|0,i=i+Math.imul(L,J)|0,i=i+Math.imul(N,K)|0,o=o+Math.imul(N,J)|0,n=n+Math.imul(I,X)|0,i=i+Math.imul(I,Z)|0,i=i+Math.imul(x,X)|0,o=o+Math.imul(x,Z)|0,n=n+Math.imul(T,$)|0,i=i+Math.imul(T,ee)|0,i=i+Math.imul(M,$)|0,o=o+Math.imul(M,ee)|0,n=n+Math.imul(C,re)|0,i=i+Math.imul(C,ne)|0,i=i+Math.imul(A,re)|0,o=o+Math.imul(A,ne)|0,n=n+Math.imul(k,oe)|0,i=i+Math.imul(k,ae)|0,i=i+Math.imul(E,oe)|0,o=o+Math.imul(E,ae)|0,n=n+Math.imul(g,ce)|0,i=i+Math.imul(g,ue)|0,i=i+Math.imul(S,ce)|0,o=o+Math.imul(S,ue)|0,n=n+Math.imul(v,de)|0,i=i+Math.imul(v,le)|0,i=i+Math.imul(b,de)|0,o=o+Math.imul(b,le)|0,n=n+Math.imul(p,pe)|0,i=i+Math.imul(p,_e)|0,i=i+Math.imul(_,pe)|0,o=o+Math.imul(_,_e)|0;var Ce=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(j,K),i=Math.imul(j,J),i=i+Math.imul(U,K)|0,o=Math.imul(U,J),n=n+Math.imul(L,X)|0,i=i+Math.imul(L,Z)|0,i=i+Math.imul(N,X)|0,o=o+Math.imul(N,Z)|0,n=n+Math.imul(I,$)|0,i=i+Math.imul(I,ee)|0,i=i+Math.imul(x,$)|0,o=o+Math.imul(x,ee)|0,n=n+Math.imul(T,re)|0,i=i+Math.imul(T,ne)|0,i=i+Math.imul(M,re)|0,o=o+Math.imul(M,ne)|0,n=n+Math.imul(C,oe)|0,i=i+Math.imul(C,ae)|0,i=i+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,n=n+Math.imul(k,ce)|0,i=i+Math.imul(k,ue)|0,i=i+Math.imul(E,ce)|0,o=o+Math.imul(E,ue)|0,n=n+Math.imul(g,de)|0,i=i+Math.imul(g,le)|0,i=i+Math.imul(S,de)|0,o=o+Math.imul(S,le)|0,n=n+Math.imul(v,pe)|0,i=i+Math.imul(v,_e)|0,i=i+Math.imul(b,pe)|0,o=o+Math.imul(b,_e)|0;var Ae=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(j,X),i=Math.imul(j,Z),i=i+Math.imul(U,X)|0,o=Math.imul(U,Z),n=n+Math.imul(L,$)|0,i=i+Math.imul(L,ee)|0,i=i+Math.imul(N,$)|0,o=o+Math.imul(N,ee)|0,n=n+Math.imul(I,re)|0,i=i+Math.imul(I,ne)|0,i=i+Math.imul(x,re)|0,o=o+Math.imul(x,ne)|0,n=n+Math.imul(T,oe)|0,i=i+Math.imul(T,ae)|0,i=i+Math.imul(M,oe)|0,o=o+Math.imul(M,ae)|0,n=n+Math.imul(C,ce)|0,i=i+Math.imul(C,ue)|0,i=i+Math.imul(A,ce)|0,o=o+Math.imul(A,ue)|0,n=n+Math.imul(k,de)|0,i=i+Math.imul(k,le)|0,i=i+Math.imul(E,de)|0,o=o+Math.imul(E,le)|0,n=n+Math.imul(g,pe)|0,i=i+Math.imul(g,_e)|0,i=i+Math.imul(S,pe)|0,o=o+Math.imul(S,_e)|0;var Oe=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(j,$),i=Math.imul(j,ee),i=i+Math.imul(U,$)|0,o=Math.imul(U,ee),n=n+Math.imul(L,re)|0,i=i+Math.imul(L,ne)|0,i=i+Math.imul(N,re)|0,o=o+Math.imul(N,ne)|0,n=n+Math.imul(I,oe)|0,i=i+Math.imul(I,ae)|0,i=i+Math.imul(x,oe)|0,o=o+Math.imul(x,ae)|0,n=n+Math.imul(T,ce)|0,i=i+Math.imul(T,ue)|0,i=i+Math.imul(M,ce)|0,o=o+Math.imul(M,ue)|0,n=n+Math.imul(C,de)|0,i=i+Math.imul(C,le)|0,i=i+Math.imul(A,de)|0,o=o+Math.imul(A,le)|0,n=n+Math.imul(k,pe)|0,i=i+Math.imul(k,_e)|0,i=i+Math.imul(E,pe)|0,o=o+Math.imul(E,_e)|0;var Te=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(j,re),i=Math.imul(j,ne),i=i+Math.imul(U,re)|0,o=Math.imul(U,ne),n=n+Math.imul(L,oe)|0,i=i+Math.imul(L,ae)|0,i=i+Math.imul(N,oe)|0,o=o+Math.imul(N,ae)|0,n=n+Math.imul(I,ce)|0,i=i+Math.imul(I,ue)|0,i=i+Math.imul(x,ce)|0,o=o+Math.imul(x,ue)|0,n=n+Math.imul(T,de)|0,i=i+Math.imul(T,le)|0,i=i+Math.imul(M,de)|0,o=o+Math.imul(M,le)|0,n=n+Math.imul(C,pe)|0,i=i+Math.imul(C,_e)|0,i=i+Math.imul(A,pe)|0,o=o+Math.imul(A,_e)|0;var Me=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(j,oe),i=Math.imul(j,ae),i=i+Math.imul(U,oe)|0,o=Math.imul(U,ae),n=n+Math.imul(L,ce)|0,i=i+Math.imul(L,ue)|0,i=i+Math.imul(N,ce)|0,o=o+Math.imul(N,ue)|0,n=n+Math.imul(I,de)|0,i=i+Math.imul(I,le)|0,i=i+Math.imul(x,de)|0,o=o+Math.imul(x,le)|0,n=n+Math.imul(T,pe)|0,i=i+Math.imul(T,_e)|0,i=i+Math.imul(M,pe)|0,o=o+Math.imul(M,_e)|0;var Pe=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(j,ce),i=Math.imul(j,ue),i=i+Math.imul(U,ce)|0,o=Math.imul(U,ue),n=n+Math.imul(L,de)|0,i=i+Math.imul(L,le)|0,i=i+Math.imul(N,de)|0,o=o+Math.imul(N,le)|0,n=n+Math.imul(I,pe)|0,i=i+Math.imul(I,_e)|0,i=i+Math.imul(x,pe)|0,o=o+Math.imul(x,_e)|0;var Ie=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(j,de),i=Math.imul(j,le),i=i+Math.imul(U,de)|0,o=Math.imul(U,le),n=n+Math.imul(L,pe)|0,i=i+Math.imul(L,_e)|0,i=i+Math.imul(N,pe)|0,o=o+Math.imul(N,_e)|0;var xe=(u+n|0)+((8191&i)<<13)|0;u=(o+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(j,pe),i=Math.imul(j,_e),i=i+Math.imul(U,pe)|0,o=Math.imul(U,_e);var De=(u+n|0)+((8191&i)<<13)|0;return u=(o+(i>>>13)|0)+(De>>>26)|0,De&=67108863,c[0]=me,c[1]=ve,c[2]=be,c[3]=ye,c[4]=ge,c[5]=Se,c[6]=we,c[7]=ke,c[8]=Ee,c[9]=Re,c[10]=Ce,c[11]=Ae,c[12]=Oe,c[13]=Te,c[14]=Me,c[15]=Pe,c[16]=Ie,c[17]=xe,c[18]=De,0!==u&&(c[19]=u,r.length++),r};Math.imul||(R=f),a.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?R(this,e,t):r<63?f(this,e,t):r<1024?d(this,e,t):l(this,e,t)},h.prototype.makeRBT=function(e){for(var t=new Array(e),r=a.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},h.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},h.prototype.permute=function(e,t,r,n,i,o){for(var a=0;a<o;a++)n[a]=t[e[a]],i[a]=r[e[a]]},h.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,c=Math.cos(2*Math.PI/s),u=Math.sin(2*Math.PI/s),f=0;f<i;f+=s)for(var d=c,l=u,h=0;h<a;h++){var p=r[f+h],_=n[f+h],m=r[f+h+a],v=n[f+h+a],b=d*m-l*v;v=d*v+l*m,m=b,r[f+h]=p+m,n[f+h]=_+v,r[f+h+a]=p-m,n[f+h+a]=_-v,h!==s&&(b=c*d-u*l,l=c*l+u*d,d=b)}},h.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},h.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},h.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},h.prototype.convert13b=function(e,t,r,n){for(var o=0,a=0;a<t;a++)o+=0|e[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<n;++a)r[a]=0;i(0===o),i(0==(-8192&o))},h.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},h.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),c=new Array(n),u=new Array(n),f=new Array(n),d=new Array(n),l=r.words;l.length=n,this.convert13b(e.words,e.length,a,n),this.convert13b(t.words,t.length,u,n),this.transform(a,o,s,c,n,i),this.transform(u,o,f,d,n,i);for(var h=0;h<n;h++){var p=s[h]*f[h]-c[h]*d[h];c[h]=s[h]*d[h]+c[h]*f[h],s[h]=p}return this.conjugate(s,c,n),this.transform(s,c,l,o,n,i),this.conjugate(l,o,n),this.normalize13b(l,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),l(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){i("number"==typeof e),i(e<67108864);for(var t=0,r=0;r<this.length;r++){var n=(0|this.words[r])*e,o=(67108863&n)+(67108863&t);t>>=26,t+=n/67108864|0,t+=o>>>26,this.words[r]=67108863&o}return 0!==t&&(this.words[r]=t,this.length++),this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=u(e);if(0===t.length)return new a(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},a.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,r=e%26,n=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,c=(0|this.words[t])-s<<r;this.words[t]=c|a,a=s>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this.strip()},a.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,r){i("number"==typeof e&&e>=0);var n;n=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,c=r;if(n-=a,n=Math.max(0,n),c){for(var u=0;u<a;u++)c.words[u]=this.words[u];c.length=a}if(0===a);else if(this.length>a)for(this.length-=a,u=0;u<this.length;u++)this.words[u]=this.words[u+a];else this.words[0]=0,this.length=1;var f=0;for(u=this.length-1;u>=0&&(0!==f||u>=n);u--){var d=0|this.words[u];this.words[u]=f<<26-o|d>>>o,f=d&s}return c&&0!==f&&(c.words[c.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(e,t,r){return i(0===this.negative),this.iushrn(e,t,r)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,n=1<<t;return!(this.length<=r)&&!!(this.words[r]&n)},a.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this.strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return i("number"==typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(i("number"==typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,r){var n,o=e.length+r;this._expand(o);var a,s=0;for(n=0;n<e.length;n++){a=(0|this.words[n+r])+s;var c=(0|e.words[n])*t;a-=67108863&c,s=(a>>26)-(c/67108864|0),this.words[n+r]=67108863&a}for(;n<this.length-r;n++)a=(0|this.words[n+r])+s,s=a>>26,this.words[n+r]=67108863&a;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)a=-(0|this.words[n])+s,s=a>>26,this.words[n]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(e,t){var r=this.length-e.length,n=this.clone(),i=e,o=0|i.words[i.length-1];0!==(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var s,c=n.length-i.length;if("mod"!==t){s=new a(null),s.length=c+1,s.words=new Array(s.length);for(var u=0;u<s.length;u++)s.words[u]=0}var f=n.clone()._ishlnsubmul(i,1,c);0===f.negative&&(n=f,s&&(s.words[c]=1));for(var d=c-1;d>=0;d--){var l=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);for(l=Math.min(l/o|0,67108863),n._ishlnsubmul(i,l,d);0!==n.negative;)l--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);s&&(s.words[d]=l)}return s&&s.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},a.prototype.divmod=function(e,t,r){if(i(!e.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var n,o,s;return 0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(n=s.div.neg()),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:n,mod:o}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(n=s.div.neg()),{div:n,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:s.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modn(e.words[0]))}:this._wordDiv(e,t)},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modn=function(e){i(e<=67108863);for(var t=(1<<26)%e,r=0,n=this.length-1;n>=0;n--)r=(t*r+(0|this.words[n]))%e;return r},a.prototype.idivn=function(e){i(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*t;this.words[r]=n/e|0,t=n%e}return this.strip()},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new a(1),o=new a(0),s=new a(0),c=new a(1),u=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++u;for(var f=r.clone(),d=t.clone();!t.isZero();){for(var l=0,h=1;0==(t.words[0]&h)&&l<26;++l,h<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(f),o.isub(d)),n.iushrn(1),o.iushrn(1);for(var p=0,_=1;0==(r.words[0]&_)&&p<26;++p,_<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||c.isOdd())&&(s.iadd(f),c.isub(d)),s.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),n.isub(s),o.isub(c)):(r.isub(t),s.isub(n),c.isub(o))}return{a:s,b:c,gcd:r.iushln(u)}},a.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new a(1),o=new a(0),s=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,u=1;0==(t.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(t.iushrn(c);c-- >0;)n.isOdd()&&n.iadd(s),n.iushrn(1);for(var f=0,d=1;0==(r.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(r.iushrn(f);f-- >0;)o.isOdd()&&o.iadd(s),o.iushrn(1);t.cmp(r)>=0?(t.isub(r),n.isub(o)):(r.isub(t),o.isub(n))}var l;return l=0===t.cmpn(1)?n:o,l.cmpn(0)<0&&l.iadd(e),l},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,r=(e-t)/26,n=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];s+=o,o=s>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t=e<0;if(0!==this.negative&&!t)return-1;if(0===this.negative&&t)return 1;this.strip();var r;if(this.length>1)r=1;else{t&&(e=-e),i(e<=67108863,"Number is too big");var n=0|this.words[0];r=n===e?0:n<e?-1:1}return 0!==this.negative?0|-r:r},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new y(e)},a.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var C={k256:null,p224:null,p192:null,p25519:null};p.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},p.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),t=r.bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},p.prototype.split=function(e,t){e.iushrn(this.n,0,t)},p.prototype.imulK=function(e){return e.imul(this.k)},o(_,p),_.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,n=10;n<e.length;n++){var o=0|e.words[n];e.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[n-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},_.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},o(m,p),o(v,p),o(b,p),b.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(C[e])return C[e];var t;if("k256"===e)t=new _;else if("p224"===e)t=new m;else if("p192"===e)t=new v;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new b}return C[e]=t,t},y.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},y.prototype._verify2=function(e,t){i(0==(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},y.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},y.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},y.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},y.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},y.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},y.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},y.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},y.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},y.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},y.prototype.isqr=function(e){return this.imul(e,e.clone())},y.prototype.sqr=function(e){return this.mul(e,e)},y.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2==1),3===t){var r=this.m.add(new a(1)).iushrn(2);return this.pow(e,r)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);i(!n.isZero());var s=new a(1).toRed(this),c=s.redNeg(),u=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new a(2*f*f).toRed(this);0!==this.pow(f,u).cmp(c);)f.redIAdd(c);for(var d=this.pow(f,n),l=this.pow(e,n.addn(1).iushrn(1)),h=this.pow(e,n),p=o;0!==h.cmp(s);){for(var _=h,m=0;0!==_.cmp(s);m++)_=_.redSqr();i(m<p);var v=this.pow(d,new a(1).iushln(p-m-1));l=l.redMul(v),d=v.redSqr(),h=h.redMul(d),p=m}return l},y.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},y.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new a(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],o=0,s=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],f=c-1;f>=0;f--){var d=u>>f&1;i!==r[0]&&(i=this.sqr(i)),0!==d||0!==o?(o<<=1,o|=d,(4===++s||0===n&&0===f)&&(i=this.mul(i,r[o]),s=0,o=0)):s=0}c=26}return i},y.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},y.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new g(e)},o(g,y),g.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},g.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},g.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},g.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},g.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===e||e,void 0)}).call(t,r(40)(e))},function(e,t,r){"use strict";var n,i,o=e.exports=r(22),a=r(102);o.codegen=r(225),o.fetch=r(226),o.path=r(227),o.fs=o.inquire("fs"),o.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},o.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],i=e[r++];void 0!==i&&(t[n]=i)}return t};var s=/\\/g,c=/"/g;o.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},o.safeProp=function(e){return!/^[$\w_]+$/.test(e)||o.isReserved(e)?'["'+e.replace(s,"\\\\").replace(c,'\\"')+'"]':"."+e},o.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;o.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,function(e,t){return t.toUpperCase()})},o.compareFieldsById=function(e,t){return e.id-t.id},o.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(o.decorateRoot.remove(e.$type),e.$type.name=t,o.decorateRoot.add(e.$type)),e.$type;n||(n=r(66));var i=new n(t||e.name);return o.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var f=0;o.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=r(20));var t=new i("Enum"+f++,e);return o.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},Object.defineProperty(o,"decorateRoot",{get:function(){return a.decorated||(a.decorated=new(r(71)))}})},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(87),a=r(17),s=function(e){return e&&e.__esModule?e:{default:e}}(a),c=function(){function e(){n(this,e)}return i(e,null,[{key:"_getBrowserInfo",value:function(){if(!e._browserName||!e._browserVersion)if(navigator&&navigator.userAgent){var t=navigator.userAgent.toLowerCase(),r={},n=void 0;if((n=t.match(/edge?\/([\d.]+)/))?r.edge=n[1]:(n=t.match(/vivobrowser\/([\d.]+)/))?r.vivobrowser=n[1]:(n=t.match(/miuibrowser\/([\d.]+)/))?r.mibrowser=n[1]:(n=t.match(/heytapbrowser\/([\d.]+)/))?r.oppobrowser=n[1]:(n=t.match(/mzbrowser\/([\d.]+)/))?r.mzbrowser=n[1]:(n=t.match(/firefox\/([\d.]+)/))?r.firefox=n[1]:(n=t.match(/electron\/([\d.]+)/))?r.electron=n[1]:(n=t.match(/chrome\/([\d.]+)/))&&this._isChrome(t)?r.chrome=n[1]:(n=t.match(/crios\/([\d.]+)/))&&this._isChrome(t)?r.chrome=n[1]:(n=t.match(/metasr\s([\d.]+)/))?r.sogou=n[1]:(n=t.match(/sogoumobilebrowser\/([\d.]+)/))?r.sogou=n[1]:(n=t.match(/micromessenger.([\d.]+)/))?r.micromessenger=n[1]:(n=t.match(/qq\/([\d.]+)/))?r.qq=n[1]:(n=t.match(/m?qqbrowser\/([\d.]+)/))?r.qqbrowser=n[1]:(n=t.match(/qqbrowserlite\/([\d.]+)/))?r.qqbrowser=n[1]:(n=t.match(/version\/([\d.]+).*safari/))&&this._isSafari(t)&&(r.safari=n[1]),r.safari)e._browserName="Safari",e._browserVersion=r.safari;else if(r.firefox)e._browserName="Firefox",e._browserVersion=r.firefox;else if(r.electron)e._browserName="Electron",e._browserVersion=r.electron;else if(r.chrome)e._browserName="Chrome",e._browserVersion=r.chrome;else if(r.edge)e._browserName="Edge",e._browserVersion=r.edge;else if(r.sogou)e._browserName="Sogou",e._browserVersion=(n=t.match(/chrome\/([\d.]+)/))?n[1]:"0.0";else if(r.micromessenger)e._browserName="MicroMessenger",e._browserVersion=r.micromessenger;else if(r.qq)e._browserName="QQ",e._browserVersion=r.qq;else if(r.qqbrowser){e._browserName="QQBrowser";var i=void 0;s.default.isIos||s.default.isMacOS?e._browserVersion=(i=t.match(/version\/([\d.]+).*safari/))?i[1]:"0.0":(s.default.isAndroid||s.default.isWindows)&&(e._browserVersion=(i=t.match(/chrome\/([\d.]+)/))?i[1]:"0.0")}else r.vivobrowser?(e._browserName="VivoBrowser",e._browserVersion=r.vivobrowser):r.oppobrowser?(e._browserName="OppoBrowser",e._browserVersion=r.oppobrowser):r.mibrowser?(e._browserName="MiBrowser",e._browserVersion=r.mibrowser):r.mzbrowser?(e._browserName="MZBrowser",e._browserVersion=r.mzbrowser):(e._browserName="unknown",e._browserVersion="0.0")}else e._browserName="unknown",e._browserVersion="0.0"}},{key:"_isChrome",value:function(e){var t=e.split(/\(|\)/);if(5==t.length){var r=t[4].trim().split(" ");if(2==r.length){if(r[0].indexOf("chrome")>-1&&r[1].indexOf("safari")>-1)return!0}else if(3==r.length&&r[1].indexOf("mobile")>-1&&r[2].indexOf("safari")>-1&&(r[0].indexOf("chrome")>-1||r[0].indexOf("crios")>-1))return!0}return!1}},{key:"_isSafari",value:function(e){var t=e.split(/\(|\)/);if(5==t.length){var r=t[4].trim().split(" ");if(2==r.length){if(r[0].indexOf("version")>-1&&r[1].indexOf("safari")>-1)return!0}else if(3==r.length&&r[0].indexOf("version")>-1&&r[1].indexOf("mobile")>-1&&r[2].indexOf("safari")>-1)return!0}return!1}},{key:"isBrowser",get:function(){return"undefined"!=typeof document}},{key:"domain",get:function(){return window.location.protocol+window.location.host}},{key:"isHttps",get:function(){return this.isBrowser&&document.location&&("https:"==document.location.protocol||(0===document.location.host.indexOf("127.0.0.1:")||0===document.location.host.indexOf("localhost:")))}},{key:"isSupportScreenShare",get:function(){e._getBrowserInfo();var t=!1;return!!e.isElectron||(e.isChrome||e.isSogou?e.browserMainVersion>=o.SCREENSHARE_VERSION.CHROME&&(t=!0):e.isEdge&&e.browserMainVersion>=o.SCREENSHARE_VERSION.EDGE&&(t=!0),!!(t&&navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia))}},{key:"isChrome",get:function(){return e._getBrowserInfo(),"Chrome"===e.browserName}},{key:"isSafari",get:function(){return e._getBrowserInfo(),"Safari"===e.browserName}},{key:"isFirefox",get:function(){return e._getBrowserInfo(),"Firefox"===e.browserName}},{key:"isEdge",get:function(){return e._getBrowserInfo(),"Edge"===e.browserName}},{key:"isSogou",get:function(){return e._getBrowserInfo(),"Sogou"===e.browserName}},{key:"isVivoBroswer",get:function(){return e._getBrowserInfo(),"VivoBrowser"===e.browserName}},{key:"isOppoBrowser",get:function(){return e._getBrowserInfo(),"OppoBrowser"===e.browserName}},{key:"isMiBrowser",get:function(){return e._getBrowserInfo(),"MiBrowser"===e.browserName}},{key:"isMZBrowser",get:function(){return e._getBrowserInfo(),"MZBrowser"===e._browserName}},{key:"isMicroMessenger",get:function(){return e._getBrowserInfo(),"MicroMessenger"===e.browserName}},{key:"isQQ",get:function(){return e._getBrowserInfo(),"QQ"===e.browserName}},{key:"isQQBrowser",get:function(){return e._getBrowserInfo(),"QQBrowser"===e.browserName}},{key:"isUnknow",get:function(){return e._getBrowserInfo(),"unknown"===e.browserName}},{key:"browserName",get:function(){return e._getBrowserInfo(),e._browserName}},{key:"browserVersion",get:function(){return e._getBrowserInfo(),e._browserVersion}},{key:"browserMainVersion",get:function(){return e._getBrowserInfo(),e._browserVersion?parseInt(e._browserVersion.split(".")[0]):0}},{key:"isElectron",get:function(){return e._getBrowserInfo(),"Electron"===e.browserName}},{key:"chromeMainVersion",get:function(){var e=navigator.userAgent.toLowerCase(),t=void 0,r=(t=e.match(/chrome\/([\d.]+)/))?t[1]:"0.0";return parseInt(r.split(".")[0])}}]),e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={MsLabel:"H5streamLabel",SmallVideo:"sophon_video_camera_small",LargeVideo:"sophon_video_camera_large",ScreenShareVideo:"sophon_video_screen_share",SuperVideo:"sophon_video_camera_super",Audio:"sophon_audio"};t.default=n},function(e,t,r){"use strict";var n=t;n.version=r(290).version,n.utils=r(291),n.rand=r(133),n.curve=r(56),n.curves=r(296),n.ec=r(304),n.eddsa=r(308)},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(35),r(36)):(i=[r(0),r(35),r(36)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(){var t=e,r=t.lib,n=r.Base,i=r.WordArray,o=t.algo,a=o.MD5,s=o.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,n=this.cfg,o=n.hasher.create(),a=i.create(),s=a.words,c=n.keySize,u=n.iterations;s.length<c;){r&&o.update(r),r=o.update(e).finalize(t),o.reset();for(var f=1;f<u;f++)r=o.finalize(r),o.reset();a.concat(r)}return a.sigBytes=4*c,a}});t.EvpKDF=function(e,t,r){return s.create(r).compute(e,t)}}(),e.EvpKDF})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ERROR_DEVICE_UNKNOWNERROR:1e4,ERROR_DEVICE_AUDIODEVICENOTFOUND:10001,ERROR_DEVICE_VIDEODEVICENOTFOUND:10002,ERROR_DEVICE_AUDIODEVICENOTALLOWED:10003,ERROR_DEVICE_VIDEODEVICENOTALLOWED:10004,ERROR_DEVICE_AUDIODEVICENOTREADABLE:10005,ERROR_DEVICE_VIDEODEVICENOTREADABLE:10006,ERROR_DEVICE_CONSTRAINEDDERROR:10007,ERROR_DEVICE_AUDIO_ENDED:10008,ERROR_DEVICE_VIDEO_ENDED:10009,ERROR_SCREENSHARE_UNKNOWNERROR:10010,ERROR_SCREENSHARE_NOTALLOWED:10011,ERROR_SCREENSHARE_ENDED:10012,ERROR_SCREENSHARE_NOPERMISSION:10013,ERROR_SCREENSHARE_INVALIDACCESS:10014,ERROR_SCREENSHARE_ABORTERROR:10015,ERROR_SCREENSHARE_INVALIDSTATEERROR:10016,ERROR_SCREENSHARE_TYPEERROR:10017,ERROR_NOTSUPPORT_WEBRTC:10020,ERROR_NEEDHTTPS:10021,ERROR_NOTSUPPORT_DEVICE:10022,ERROR_NOTSUPPORT_H264:10023,ERROR_NOTSUPPORT_BROWSER:10024,ERROR_NOTSUPPORT_SCREENSHARE:10025,ERROR_NOTSUPPORT_SETOUTPUTDEVICE:10030,ERROR_NOTSUPPORT_SETSINKID:10040,ERROR_OPTIONS_CHANNELPROFILE_CDNLIVE:10101,ERROR_OPTIONS_CHANNELPROFILE_RTC:10111,ERROR_OPTIONS_LIVE_CANNOT_PUBLISH:10112,ERROR_OPTIONS_AUDIO_ONLY:10120,ERROR_OPTIONS_ENABLECAMERA:10130,ERROR_NO_USER:10140,ERROR_NO_ROOMSERVER:10150,ERROR_NO_MATCH_ROOMSERVER:10151,ERROR_AUTOPLAY_UNKNOWN_ERROR:10200,ERROR_AUTOPLAY_ERROR:10201,ERROR_ICE_DISCONNECTED:10300,ERROR_ICE_PUBLISH_DISCONNECTED:10301,ERROR_ICE_SUBSCRIBE_DISCONNECTED:10302,ERROR_HEARTBEAT_TIMEOUT:10310,ERROR_NOSESSION:10311,ERROR_PUBLISH_NOSTREAM:10400,ERROR_ANSWER_FAIL:10401,ERROR_FREQUENTLY_OPERATION:10500,ERROR_H5_COMPATIBLE_MODE:10501,ERROR_AUDIOMIXING_UNKNOWN_ERROR:10600,ERROR_LOAD_AUDIO_FAILED:10601,ERROR_INVALID_AUDIO_MIXING_STATE:10602,ERROR_NOTSUPPORT_AUDIOCONTEXT:10603,ERROR_AUTOPLAY_FAIL:10604,ERROR_NOT_ARRAYBUFFER:10605,ERROR_AUDIO_MIXING_MISSING_PARAME:10606,ERROR_START_MIX_FAIL:10607,ERROR_RESUME_AUDIO_FAIL:10608};t.default=n},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c){"object"===a(t)?e.exports=t=c(r(0)):(i=[r(0)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(){function t(e,t,r){for(var n=[],o=0,a=0;a<t;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2,c=r[e.charCodeAt(a)]>>>6-a%4*2,u=s|c;n[o>>>2]|=u<<24-o%4*8,o++}return i.create(n,o)}var r=e,n=r.lib,i=n.WordArray,o=r.enc;o.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var i=[],o=0;o<r;o+=3)for(var a=t[o>>>2]>>>24-o%4*8&255,s=t[o+1>>>2]>>>24-(o+1)%4*8&255,c=t[o+2>>>2]>>>24-(o+2)%4*8&255,u=a<<16|s<<8|c,f=0;f<4&&o+.75*f<r;f++)i.push(n.charAt(u>>>6*(3-f)&63));var d=n.charAt(64);if(d)for(;i.length%4;)i.push(d);return i.join("")},parse:function(e){var r=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(r=s)}return t(e,r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={OnPublisher:"onPublisher",OnMediaStream:"onMediaStream",OnError:"onError",OnUnPublisher:"onUnPublisher",OnLeave:"onLeave",OnJoin:"onJoin",OnBye:"onBye",OnNotify:"onNotify",OnConnecting:"OnConnecting",OnConnected:"OnConnected",OnLiveStream:"onLiveStream",OnUpdateRole:"onUpdateRole",OnAudioLevel:"onAudioLevel",OnMedia:"onMedia",OnDeviceChange:"onDeviceChange",OnNetworkQuality:"onNetworkQuality",OnAudioMixingPlayed:"onAudioMixingPlayed",OnAudioMixingFinished:"onAudioMixingFinished",OnMediaStreamUpdate:"onMediaStreamUpdate"}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this._eventListener={}}return i(e,[{key:"has",value:function(e){return!!this._eventListener[e]}},{key:"hasEventListener",value:function(e,t,r){return!(!this._checkFunction(t)||void 0===this._eventListener[e]||-1===this._eventListener[e].indexOf(t))}},{key:"addEventListener",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._checkFunction(t)){void 0===this._eventListener[e]&&(this._eventListener[e]=[]);for(var i=this._eventListener[e],o=0;o<i.length;++o)if(i[o].func===t&&i[o].context===r)return!1;return this._eventListener[e].push({func:t,context:r,once:n}),!0}return!1}},{key:"replaceEventListener",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._checkFunction(t)){void 0===this._eventListener[e]?this._eventListener[e]=[]:this._eventListener[e].splice(0);for(var i=this._eventListener[e],o=0;o<i.length;++o)if(i[o].func===t&&i[o].context===r)return!1;return this._eventListener[e].push({func:t,context:r,once:n}),!0}return!1}},{key:"removeEventListener",value:function(e,t,r){if(this._checkFunction(t)&&void 0!==this._eventListener[e])for(var n=this._eventListener[e],i=0;i<n.length;++i)if(n[i].func===t&&r===n[i].context)return void n.splice(i,1)}},{key:"dispatchEvent",value:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();if(t&&void 0!==this._eventListener[t]&&this._eventListener[t].length)for(var r=this._eventListener[t],n=r.length-1;n>=0;--n){var i=r[n].func,o=r[n].context;r[n].once&&r.splice(n,1),i.apply(o,e)}}},{key:"_checkFunction",value:function(e){return!(!e||"function"!=typeof e)}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=n,n.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c){"object"===a(t)?e.exports=t=c(r(0)):(i=[r(0)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(t){function r(e,t,r,n,i,o,a){var s=e+(t&r|~t&n)+i+a;return(s<<o|s>>>32-o)+t}function n(e,t,r,n,i,o,a){var s=e+(t&n|r&~n)+i+a;return(s<<o|s>>>32-o)+t}function i(e,t,r,n,i,o,a){var s=e+(t^r^n)+i+a;return(s<<o|s>>>32-o)+t}function o(e,t,r,n,i,o,a){var s=e+(r^(t|~n))+i+a;return(s<<o|s>>>32-o)+t}var a=e,s=a.lib,c=s.WordArray,u=s.Hasher,f=a.algo,d=[];!function(){for(var e=0;e<64;e++)d[e]=4294967296*t.abs(t.sin(e+1))|0}();var l=f.MD5=u.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var a=0;a<16;a++){var s=t+a,c=e[s];e[s]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var u=this._hash.words,f=e[t+0],l=e[t+1],h=e[t+2],p=e[t+3],_=e[t+4],m=e[t+5],v=e[t+6],b=e[t+7],y=e[t+8],g=e[t+9],S=e[t+10],w=e[t+11],k=e[t+12],E=e[t+13],R=e[t+14],C=e[t+15],A=u[0],O=u[1],T=u[2],M=u[3];A=r(A,O,T,M,f,7,d[0]),M=r(M,A,O,T,l,12,d[1]),T=r(T,M,A,O,h,17,d[2]),O=r(O,T,M,A,p,22,d[3]),A=r(A,O,T,M,_,7,d[4]),M=r(M,A,O,T,m,12,d[5]),T=r(T,M,A,O,v,17,d[6]),O=r(O,T,M,A,b,22,d[7]),A=r(A,O,T,M,y,7,d[8]),M=r(M,A,O,T,g,12,d[9]),T=r(T,M,A,O,S,17,d[10]),O=r(O,T,M,A,w,22,d[11]),A=r(A,O,T,M,k,7,d[12]),M=r(M,A,O,T,E,12,d[13]),T=r(T,M,A,O,R,17,d[14]),O=r(O,T,M,A,C,22,d[15]),A=n(A,O,T,M,l,5,d[16]),M=n(M,A,O,T,v,9,d[17]),T=n(T,M,A,O,w,14,d[18]),O=n(O,T,M,A,f,20,d[19]),A=n(A,O,T,M,m,5,d[20]),M=n(M,A,O,T,S,9,d[21]),T=n(T,M,A,O,C,14,d[22]),O=n(O,T,M,A,_,20,d[23]),A=n(A,O,T,M,g,5,d[24]),M=n(M,A,O,T,R,9,d[25]),T=n(T,M,A,O,p,14,d[26]),O=n(O,T,M,A,y,20,d[27]),A=n(A,O,T,M,E,5,d[28]),M=n(M,A,O,T,h,9,d[29]),T=n(T,M,A,O,b,14,d[30]),O=n(O,T,M,A,k,20,d[31]),A=i(A,O,T,M,m,4,d[32]),M=i(M,A,O,T,y,11,d[33]),T=i(T,M,A,O,w,16,d[34]),O=i(O,T,M,A,R,23,d[35]),A=i(A,O,T,M,l,4,d[36]),M=i(M,A,O,T,_,11,d[37]),T=i(T,M,A,O,b,16,d[38]),O=i(O,T,M,A,S,23,d[39]),A=i(A,O,T,M,E,4,d[40]),M=i(M,A,O,T,f,11,d[41]),T=i(T,M,A,O,p,16,d[42]),O=i(O,T,M,A,v,23,d[43]),A=i(A,O,T,M,g,4,d[44]),M=i(M,A,O,T,k,11,d[45]),T=i(T,M,A,O,C,16,d[46]),O=i(O,T,M,A,h,23,d[47]),A=o(A,O,T,M,f,6,d[48]),M=o(M,A,O,T,b,10,d[49]),T=o(T,M,A,O,R,15,d[50]),O=o(O,T,M,A,m,21,d[51]),A=o(A,O,T,M,k,6,d[52]),M=o(M,A,O,T,p,10,d[53]),T=o(T,M,A,O,S,15,d[54]),O=o(O,T,M,A,l,21,d[55]),A=o(A,O,T,M,y,6,d[56]),M=o(M,A,O,T,C,10,d[57]),T=o(T,M,A,O,v,15,d[58]),O=o(O,T,M,A,E,21,d[59]),A=o(A,O,T,M,_,6,d[60]),M=o(M,A,O,T,w,10,d[61]),T=o(T,M,A,O,h,15,d[62]),O=o(O,T,M,A,g,21,d[63]),u[0]=u[0]+A|0,u[1]=u[1]+O|0,u[2]=u[2]+T|0,u[3]=u[3]+M|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(n/4294967296),a=n;r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(r.length+1),this._process();for(var s=this._hash,c=s.words,u=0;u<4;u++){var f=c[u];c[u]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}return s},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}});a.MD5=u._createHelper(l),a.HmacMD5=u._createHmacHelper(l)}(Math),e.MD5})},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e)}return i(e,null,[{key:"_getSystemInfo",value:function(){if(!e._systemName||!e._systemVersion)if(navigator&&navigator.userAgent){var t=navigator.userAgent.toLowerCase();t.indexOf("ipad")>-1?(e._systemName="ipad",e._platform="iOS",e._systemVersion=e._getIosSystemVersion(t)):t.indexOf("iphone")>-1?(e._systemName="iphone",e._platform="iOS",e._systemVersion=e._getIosSystemVersion(t)):t.indexOf("android")>-1?(e._platform="Android",e._systemName="Android",e._systemVersion=e._getAndroidSystemVersion(t)):t.indexOf("win")>-1?t.indexOf("windwos nt 10")>-1||t.indexOf("windows 10")?(e._systemName="Windows 10",e._platform="Windows",e._systemVersion="10"):t.indexOf("windows nt 6.1")>-1||t.indexOf("windows 7")>-1?(e._systemName="Windows 7",e._platform="Windows",e._systemVersion="7"):t.indexOf("windows nt 6.0")>-1||t.indexOf("windows vista")>-1?(e._systemName="Windows vista",e._platform="Windows",e._systemVersion="vista"):t.indexOf("widows nt 5.1")>-1||t.indexOf("windows xp")>-1?(e._systemName="Windows xp",e._platform="Windows",e._systemVersion="xp"):(e._platform="Windows",e._systemName="Windows",e._systemVersion="0.0"):t.indexOf("mac")>-1?(e._platform="Mac",e._systemName="Mac",e._systemVersion=e._getMacSystemVersion(t)):t.indexOf("linux")>-1?(e._platform="Linux",e._systemName="Linux",e._systemVersion="0.0"):t.indexOf("cros")>-1?(e._platform="Linux",e._systemName="ChromeOS",e._systemVersion="0.0"):(e._systemName="unknown",e._platform="Other",e._systemVersion="0.0")}else e._systemName="unknown",e._systemVersion="0.0"}},{key:"_getIosSystemVersion",value:function(e){var t=/OS [\d._]*/gi;return(e.match(t)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".")}},{key:"_getMacSystemVersion",value:function(e){var t=/OS X [\d._]*/gi;return(e.match(t)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".")}},{key:"_getAndroidSystemVersion",value:function(e){return e.substr(e.indexOf("android")+8,e.indexOf(";",e.indexOf("android"))-e.indexOf("android")-8)}},{key:"networkType",get:function(){if(!e._networkType&&navigator&&navigator.userAgent){var t=navigator.userAgent.match(/NetType\/\w+/)?ua.match(/NetType\/\w+/)[0]:"NetType/other";switch(t=t.toLowerCase().replace("nettype/","")){case"wifi":case"4g":case"3g":case"2g":e._networkType=t;break;default:e._networkType="other"}}return e._networkType}},{key:"isMacOS",get:function(){return"Mac"===e.systemName}},{key:"isWindows",get:function(){return e.systemName&&e.systemName.indexOf("Windows")>-1}},{key:"isIos",get:function(){return"iphone"===e.systemName||"ipad"===e.systemName}},{key:"isAndroid",get:function(){return"Android"===e.systemName}},{key:"isLinux",get:function(){return"Linux"===e.systemName||"Linux"===e._platform}},{key:"systemName",get:function(){return e._getSystemInfo(),e._systemName}},{key:"systemVersion",get:function(){return e._getSystemInfo(),e._systemVersion}},{key:"systemMainVersion",get:function(){return e._getSystemInfo(),e._systemVersion?parseInt(e._systemVersion.split(".")[0]):0}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(11),s=n(a),c=r(191),u=n(c),f=r(7),d=(n(f),function(){function e(){i(this,e)}return o(e,null,[{key:"parseOptionError",value:function(e){var t={errorCode:e,message:""};switch(e){case s.default.ERROR_OPTIONS_CHANNELPROFILE_CDNLIVE:t.message="channelProfile is not cdn_live";break;case s.default.ERROR_OPTIONS_CHANNELPROFILE_RTC:t.message="channelProfile is not rtc";break;case s.default.ERROR_OPTIONS_LIVE_CANNOT_PUBLISH:t.message="role live can not publish";break;case s.default.ERROR_OPTIONS_AUDIO_ONLY:t.message="audio only can not publish or subscribe video";break;case s.default.ERROR_OPTIONS_ENABLECAMERA:t.message="enableCamera is false, can not publish camera video"}return t}},{key:"parseAudioDeviceError",value:function(e){if(e){if(e.message==u.default.ERRORMESSAGE_DEVICENOTFOUND||e.name==u.default.ERRORNAME_DEVICENOTFOUND)return{errorCode:s.default.ERROR_DEVICE_AUDIODEVICENOTFOUND,message:"audio device not found"};if(e.message==u.default.ERRORMESSAGE_DEVICENOTALLOWED||e.message==u.default.ERRORMESSAGE_MACSAFARIDEVICENOTALLOWED)return{errorCode:s.default.ERROR_DEVICE_AUDIODEVICENOTALLOWED,message:"audio device not allowed"};if(e.message==u.default.ERRORMESSAGE_MACCHROMEDEVICENOTREADABLE||e.message==u.default.ERRORMESSAGE_AUDIODEVICENOTREADABLE||e.name==u.default.ERRORNAME_DEVICENOTREADABLE)return{errorCode:s.default.ERROR_DEVICE_AUDIODEVICENOTREADABLE,message:"audio device not readable"}}return{errorCode:s.default.ERROR_DEVICE_UNKNOWNERROR,message:e.message?e.message:"device unknown error"}}},{key:"parseVideoDeviceError",value:function(e){if(e){if(e.message==u.default.ERRORMESSAGE_DEVICENOTFOUND||e.name==u.default.ERRORNAME_DEVICENOTFOUND)return{errorCode:s.default.ERROR_DEVICE_VIDEODEVICENOTFOUND,message:"video device not found"};if(e.message==u.default.ERRORMESSAGE_DEVICENOTALLOWED||e.message==u.default.ERRORMESSAGE_MOBILEDEVICE_NOTALLOWED||e.message==u.default.ERRORMESSAGE_MACSAFARIDEVICENOTALLOWED)return{errorCode:s.default.ERROR_DEVICE_VIDEODEVICENOTALLOWED,message:"video device not allowed"};if(e.message==u.default.ERRORMESSAGE_MACCHROMEDEVICENOTREADABLE||e.message==u.default.ERRORMESSAGE_VIDEODEVICENOTREADABLE||e.name==u.default.ERRORNAME_DEVICENOTREADABLE)return{errorCode:s.default.ERROR_DEVICE_VIDEODEVICENOTREADABLE,message:"video device not readable"};if(e.name==u.default.ERRORNAME_DEVICEOVERCONSTRAINED)return{errorCode:s.default.ERROR_DEVICE_CONSTRAINEDDERROR,message:"constraints "+e.constraint+" error"}}return{errorCode:s.default.ERROR_DEVICE_UNKNOWNERROR,message:e.message?e.message:"device unknown error"}}},{key:"parseScreenShareDeviceError",value:function(e){if(e){if("ended"==e.type)return{errorCode:s.default.ERROR_SCREENSHARE_ENDED,message:"screenshare ended"};if(u.default.ERRORNAME_DEVICENOTALLOWED===e.name)return e.message==u.default.ERRORMESSAGE_DEVICENOTALLOWED?{errorCode:s.default.ERROR_SCREENSHARE_NOTALLOWED,message:e.message}:{errorCode:s.default.ERROR_SCREENSHARE_NOPERMISSION,message:e.message};if(u.default.ERRORNAME_INVALID_ACCESS===e.name)return{errorCode:s.default.ERROR_SCREENSHARE_INVALIDACCESS,message:e.message?e.message:""};if(u.default.ERRORNAME_ABORTEERROR===e.name)return{errorCode:s.default.ERROR_SCREENSHARE_ABORTERROR,message:e.message?e.message:""};if(u.default.ERRORNAME_INVALIDSTATEERROR===e.name)return{errorCode:s.default.ERROR_SCREENSHARE_INVALIDSTATEERROR,message:e.message?e.message:""};if(u.default.ERRORNAME_TYPEERROR===e.name)return{errorCode:s.default.ERROR_SCREENSHARE_TYPEERROR,message:e.message?e.message:""}}return{errorCode:s.default.ERROR_SCREENSHARE_UNKNOWNERROR,message:"name:"+e.name+"   message: "+e.message}}},{key:"parseAuoPlayError",value:function(e){return!e||0!=e.code&&"NotAllowedError"!=e.name?{errorCode:s.default.ERROR_AUTOPLAY_UNKNOWN_ERROR,message:e.message?e.message:"unkown autoplay error"}:{errorCode:s.default.ERROR_AUTOPLAY_ERROR,message:e.message?e.message:"autoplay failed"}}}]),e}());t.default=d},function(e,t,r){"use strict";var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(n=window)}e.exports=n},function(e,t,r){"use strict";function n(e,t,r,n,a){if(o.call(this,e,r),t&&"object"!==(void 0===t?"undefined":i(t)))throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=a||{},this.reserved=void 0,t)for(var s=Object.keys(t),c=0;c<s.length;++c)"number"==typeof t[s[c]]&&(this.valuesById[this.values[s[c]]=t[s[c]]]=s[c])}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=n;var o=r(31);((n.prototype=Object.create(o.prototype)).constructor=n).className="Enum";var a=r(43),s=r(6);n.fromJSON=function(e,t){var r=new n(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},n.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},n.prototype.add=function(e,t,r){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=r||null,this},n.prototype.remove=function(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},n.prototype.isReservedId=function(e){return a.isReservedId(this.reserved,e)},n.prototype.isReservedName=function(e){return a.isReservedName(this.reserved,e)}},function(e,t,r){"use strict";function n(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for(e=e.replace(/[^a-z0-9]+/gi,""),e.length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(var n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,a=255&i;o?r.push(o,a):r.push(a)}else for(n=0;n<e.length;n++)r[n]=0|e[n];return r}function i(e){for(var t="",r=0;r<e.length;r++)t+=s(e[r].toString(16));return t}function o(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function a(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=o(i)),r+=c(i.toString(16))}return r}function s(e){return 1===e.length?"0"+e:e}function c(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}function u(e,t,r,n){var i=r-t;O(i%4==0);for(var o=new Array(i/4),a=0,s=t;a<o.length;a++,s+=4){var c;c="big"===n?e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3]:e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s],o[a]=c>>>0}return o}function f(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var o=e[n];"big"===t?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r}function d(e,t){return e>>>t|e<<32-t}function l(e,t){return e<<t|e>>>32-t}function h(e,t){return e+t>>>0}function p(e,t,r){return e+t+r>>>0}function _(e,t,r,n){return e+t+r+n>>>0}function m(e,t,r,n,i){return e+t+r+n+i>>>0}function v(e,t,r,n){var i=e[t],o=e[t+1],a=n+o>>>0,s=(a<n?1:0)+r+i;e[t]=s>>>0,e[t+1]=a}function b(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0}function y(e,t,r,n){return t+n>>>0}function g(e,t,r,n,i,o,a,s){var c=0,u=t;return u=u+n>>>0,c+=u<t?1:0,u=u+o>>>0,c+=u<o?1:0,u=u+s>>>0,c+=u<s?1:0,e+r+i+a+c>>>0}function S(e,t,r,n,i,o,a,s){return t+n+o+s>>>0}function w(e,t,r,n,i,o,a,s,c,u){var f=0,d=t;return d=d+n>>>0,f+=d<t?1:0,d=d+o>>>0,f+=d<o?1:0,d=d+s>>>0,f+=d<s?1:0,d=d+u>>>0,f+=d<u?1:0,e+r+i+a+c+f>>>0}function k(e,t,r,n,i,o,a,s,c,u){return t+n+o+s+u>>>0}function E(e,t,r){return(t<<32-r|e>>>r)>>>0}function R(e,t,r){return(e<<32-r|t>>>r)>>>0}function C(e,t,r){return e>>>r}function A(e,t,r){return(e<<32-r|t>>>r)>>>0}var O=r(15),T=r(1);t.inherits=T,t.toArray=n,t.toHex=i,t.htonl=o,t.toHex32=a,t.zero2=s,t.zero8=c,t.join32=u,t.split32=f,t.rotr32=d,t.rotl32=l,t.sum32=h,t.sum32_3=p,t.sum32_4=_,t.sum32_5=m,t.sum64=v,t.sum64_hi=b,t.sum64_lo=y,t.sum64_4_hi=g,t.sum64_4_lo=S,t.sum64_5_hi=w,t.sum64_5_lo=k,t.rotr64_hi=E,t.rotr64_lo=R,t.shr64_hi=C,t.shr64_lo=A},function(e,t,r){"use strict";(function(e){function n(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=t;a.asPromise=r(99),a.base64=r(216),a.EventEmitter=r(217),a.float=r(218),a.inquire=r(100),a.utf8=r(219),a.pool=r(220),a.LongBits=r(221),a.global="undefined"!=typeof window&&window||void 0!==e&&e||"undefined"!=typeof self&&self||void 0,a.emptyArray=Object.freeze?Object.freeze([]):[],a.emptyObject=Object.freeze?Object.freeze({}):{},a.isNode=Boolean(a.global.process&&a.global.process.versions&&a.global.process.versions.node),a.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},a.isString=function(e){return"string"==typeof e||e instanceof String},a.isObject=function(e){return e&&"object"===(void 0===e?"undefined":o(e))},a.isset=a.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==(void 0===r?"undefined":o(r))||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},a.Buffer=function(){try{var e=a.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),a._Buffer_from=null,a._Buffer_allocUnsafe=null,a.newBuffer=function(e){return"number"==typeof e?a.Buffer?a._Buffer_allocUnsafe(e):new a.Array(e):a.Buffer?a._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},a.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,a.Long=a.global.dcodeIO&&a.global.dcodeIO.Long||a.global.Long||a.inquire("long"),a.key2Re=/^true|false|0|1$/,a.key32Re=/^-?(?:0|[1-9][0-9]*)$/,a.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,a.longToHash=function(e){return e?a.LongBits.from(e).toHash():a.LongBits.zeroHash},a.longFromHash=function(e,t){var r=a.LongBits.fromHash(e);return a.Long?a.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},a.merge=n,a.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},a.newError=i,a.ProtocolError=i("ProtocolError"),a.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},a.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},a.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},a._configure=function(){var e=a.Buffer;if(!e)return void(a._Buffer_from=a._Buffer_allocUnsafe=null);a._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},a._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}}}).call(t,r(19))},function(e,t,r){"use strict";function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(d===setTimeout)return setTimeout(e,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(e){if(l===clearTimeout)return clearTimeout(e);if((l===i||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function s(){m&&p&&(m=!1,p.length?_=p.concat(_):v=-1,_.length&&c())}function c(){if(!m){var e=o(s);m=!0;for(var t=_.length;t;){for(p=_,_=[];++v<t;)p&&p[v].run();v=-1,t=_.length}p=null,m=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function f(){}var d,l,h=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(e){d=n}try{l="function"==typeof clearTimeout?clearTimeout:i}catch(e){l=i}}();var p,_=[],m=!1,v=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];_.push(new u(e,t)),1!==_.length||m||o(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=f,h.addListener=f,h.once=f,h.off=f,h.removeListener=f,h.removeAllListeners=f,h.emit=f,h.prependListener=f,h.prependOnceListener=f,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==(void 0===r?"undefined":i(r)))throw new TypeError(r+"must be non-object");for(var o in r)n(r,o)&&(e[o]=r[o])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(r,r+n),i);for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){var t,r,n,i,o,a;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(a=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)o=e[t],a.set(o,i),i+=o.length;return a}},s={arraySet:function(e,t,r,n,i){for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(o)},function(e,t,r){"use strict";function n(e){o.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}var i=r(3).Buffer,o=r(52).Transform,a=r(78).StringDecoder;r(1)(n,o),n.prototype.update=function(e,t,r){"string"==typeof e&&(e=i.from(e,t));var n=this._update(e);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)},n.prototype.setAutoPadding=function(){},n.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},n.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},n.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},n.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){n=e}finally{r(n)}},n.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},n.prototype._finalOrDigest=function(e){var t=this.__final()||i.alloc(0);return e&&(t=this._toString(t,e,!0)),t},n.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new a(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n},e.exports=n},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c){"object"===a(t)?e.exports=t=c(r(0)):(i=[r(0)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(t){var r=e,n=r.lib,i=n.Base,o=n.WordArray,a=r.x64={};a.Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0;n<t;n++){var i=e[n];r.push(i.high),r.push(i.low)}return o.create(r,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),r=t.length,n=0;n<r;n++)t[n]=t[n].clone();return e}})}(),e})},function(e,t,r){"use strict";function n(e,t,r,n,i,a,s){if(u.isObject(n)?(s=i,a=n,n=i=void 0):u.isObject(i)&&(s=a,a=i,i=void 0),o.call(this,e,a),!u.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!u.isString(r))throw TypeError("type must be a string");if(void 0!==n&&!f.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==i&&!u.isString(i))throw TypeError("extend must be a string");this.rule=n&&"optional"!==n?n:void 0,this.type=r,this.id=t,this.extend=i||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!u.Long&&void 0!==c.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=s}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=n;var o=r(31);((n.prototype=Object.create(o.prototype)).constructor=n).className="Field";var a,s=r(20),c=r(32),u=r(6),f=/^required|optional|repeated$/;n.fromJSON=function(e,t){return new n(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(n.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),n.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),o.prototype.setOption.call(this,e,t,r)},n.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return u.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},n.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=c.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof a?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof s&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof s)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=u.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;u.base64.test(this.typeDefault)?u.base64.decode(this.typeDefault,e=u.newBuffer(u.base64.length(this.typeDefault)),0):u.utf8.write(this.typeDefault,e=u.newBuffer(u.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=u.emptyObject:this.repeated?this.defaultValue=u.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof a&&(this.parent.ctor.prototype[this.name]=this.defaultValue),o.prototype.resolve.call(this)},n.d=function(e,t,r,o){return"function"==typeof t?t=u.decorateType(t).name:t&&"object"===(void 0===t?"undefined":i(t))&&(t=u.decorateEnum(t).name),function(i,a){u.decorateType(i.constructor).add(new n(a,e,t,r,{default:o}))}},n._configure=function(e){a=e}},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);u.call(this,e),f.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(e){e.end()}var a=r(53),s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=n;var c=r(45);c.inherits=r(1);var u=r(114),f=r(77);c.inherits(n,u);for(var d=s(f.prototype),l=0;l<d.length;l++){var h=d[l];n.prototype[h]||(n.prototype[h]=f.prototype[h])}Object.defineProperty(n.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),n.prototype._destroy=function(e,t){this.push(null),this.end(),a(t,e)}},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t,r){var n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function o(e,t,r){if(e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=r(e);t&&(n.handleEvent?n.handleEvent(t):n(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(n,o),i.apply(this,[e,o])};var o=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(r))return o.apply(this,arguments);var n=this._eventMap[t].get(r);return this._eventMap[t].delete(r),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function a(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":_(e))+". Please use a boolean."):(m=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function s(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":_(e))+". Please use a boolean."):(v=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function c(){if("object"===("undefined"==typeof window?"undefined":_(window))){if(m)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function u(e,t){v&&console.warn(e+" is deprecated, please use "+t+" instead.")}function f(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var r=e.navigator;if(r.mozGetUserMedia)t.browser="firefox",t.version=i(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=i(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!r.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=i(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function d(e){return"[object Object]"===Object.prototype.toString.call(e)}function l(e){return d(e)?Object.keys(e).reduce(function(t,r){var i=d(e[r]),o=i?l(e[r]):e[r],a=i&&!Object.keys(o).length;return void 0===o||a?t:Object.assign(t,n({},r,o))},{}):e}function h(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach(function(n){n.endsWith("Id")?h(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach(function(t){h(e,e.get(t),r)})}))}function p(e,t,r){var n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(function(t){e.forEach(function(r){r.type===n&&r.trackId===t.id&&h(e,r,i)})}),i}Object.defineProperty(t,"__esModule",{value:!0});var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.extractVersion=i,t.wrapPeerConnectionEvent=o,t.disableLog=a,t.disableWarnings=s,t.log=c,t.deprecated=u,t.detectBrowser=f,t.compactObject=l,t.walkStats=h,t.filterStats=p;var m=!0,v=!0},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(7),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(){n(this,e)}return i(e,null,[{key:"random",value:function(e){for(var t="";t.length<e;)t+=Math.random().toString(36).replace(/[^a-zA-Z0-9]+/g,"").substr(0,e);return t.substr(0,e)}},{key:"getUrlVars",value:function(){for(var e=[],t=void 0,r=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),n=0;n<r.length;n++)t=r[n].split("="),e.push(t[0]),e[t[0]]=t[1];return e}},{key:"getUrlVar",value:function(t){return e.getUrlVars()[t]}},{key:"trace",value:function(e){if("\n"===e[e.length-1]&&(e=e.substring(0,e.length-1)),window.performance){(window.performance.now()/1e3).toFixed(3)}}}]),e}();s.prefixAPI=function(e){if(!a.default.isBrowser)return e;var t=[];for(var r in e){var n=e[r];if(n&&void 0!==n.indexOf){var i=document.createElement("a");i.href=window.location.href,i.search=i.hash="",-1==n.indexOf(":")?i.host=i.hostname+":"+n:-1==n.indexOf("://")?i.host=n:i.href=n;var o=i.protocol+"//"+i.host;t.push(o)}}return t},t.default=s},function(e,t,r){"use strict";function n(e,t){if(!o.isString(e))throw TypeError("name must be a string");if(t&&!o.isObject(t))throw TypeError("options must be an object");this.options=t,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}e.exports=n,n.className="ReflectionObject";var i,o=r(6);Object.defineProperties(n.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),n.prototype.toJSON=function(){throw Error()},n.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof i&&t._handleAdd(this)},n.prototype.onRemove=function(e){var t=e.root;t instanceof i&&t._handleRemove(this),this.parent=null,this.resolved=!1},n.prototype.resolve=function(){return this.resolved?this:(this.root instanceof i&&(this.resolved=!0),this)},n.prototype.getOption=function(e){if(this.options)return this.options[e]},n.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},n.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},n.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},n._configure=function(e){i=e}},function(e,t,r){"use strict";function n(e,t){var r=0,n={};for(t|=0;r<e.length;)n[a[r+t]]=e[r++];return n}var i=t,o=r(6),a=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];i.basic=n([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),i.defaults=n([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",o.emptyArray,null]),i.long=n([0,0,0,1,1],7),i.mapKey=n([0,0,0,5,5,0,0,0,1,1,0,2],2),i.packed=n([1,5,0,0,0,5,5,0,0,0,1,1,0])},function(e,t,r){"use strict";(function(t,n){function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}function o(e,r){if(e>65536)throw new Error("requested too many random bytes");var i=new t.Uint8Array(e);e>0&&s.getRandomValues(i);var o=a.from(i.buffer);return"function"==typeof r?n.nextTick(function(){r(null,o)}):o}var a=r(3).Buffer,s=t.crypto||t.msCrypto;s&&s.getRandomValues?e.exports=o:e.exports=i}).call(t,r(19),r(23))},function(e,t,r){"use strict";function n(e,t){this._block=i.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}var i=r(3).Buffer;n.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=i.from(e,t));for(var r=this._block,n=this._blockSize,o=e.length,a=this._len,s=0;s<o;){for(var c=a%n,u=Math.min(o-s,n-c),f=0;f<u;f++)r[c+f]=e[s+f];a+=u,s+=u,a%n==0&&this._update(r)}return this._len+=o,this},n.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=4294967295&r,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return e?o.toString(e):o},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=n},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c){"object"===a(t)?e.exports=t=c(r(0)):(i=[r(0)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(){var t=e,r=t.lib,n=r.WordArray,i=r.Hasher,o=t.algo,a=[],s=o.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],c=r[4],u=0;u<80;u++){if(u<16)a[u]=0|e[t+u];else{var f=a[u-3]^a[u-8]^a[u-14]^a[u-16];a[u]=f<<1|f>>>31}var d=(n<<5|n>>>27)+c+a[u];d+=u<20?1518500249+(i&o|~i&s):u<40?1859775393+(i^o^s):u<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,c=s,s=o,o=i<<30|i>>>2,i=n,n=d}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=i._createHelper(s),t.HmacSHA1=i._createHmacHelper(s)}(),e.SHA1})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c){"object"===a(t)?e.exports=t=c(r(0)):(i=[r(0)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){!function(){var t=e,r=t.lib,n=r.Base,i=t.enc,o=i.Utf8,a=t.algo;a.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),s=i.words,c=a.words,u=0;u<r;u++)s[u]^=1549556828,c[u]^=909522486;i.sigBytes=a.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})}()})},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(17),a=(function(e){e&&e.__esModule}(o),function(){function e(){n(this,e)}return i(e,null,[{key:"mergeConstraints",value:function(e,t){if(!e||!t)return e||t;var r=e;for(var n in t)r[n]=t[n];return r}},{key:"iceCandidateType",value:function(e){return e.split(" ")[7]}},{key:"matchSDP",value:function(t,r){var n=[];return e._matchSdp(n,t,!0),e._matchSdp(n,r,!1),n}},{key:"_matchSdp",value:function(t,r,n){var i=r.split("\r\n"),o=e.findLine(i,"m=","video");if(null!==o)for(;o>0&&o<i.length;)o=e._getVideoName(i,o,t,n)}},{key:"_getVideoName",value:function(t,r,n,i){var o=e.findLineInRange(t,r+1,-1,"m=video");null===o&&(o=t.length);var a=e.findLineInRange(t,r,o,"a=mid:");if(null!==a){var s=t[a].replace("a=mid:","");for(a=e.findLineInRange(t,r,o,"a=ssrc");a>0&&a<t.length&&t[a].indexOf("a=ssrc")>=0;){var c=t[a].indexOf("label:");if(c>0){for(var u=!1,f=0;f<n.length;++f)if(n[f].key===s){i?n[f].label=t[a].substring(c+6,t[a].length):n[f].cname=t[a].substring(c+6,t[a].length),u=!0;break}u||(i?n.push({key:s,label:t[a].substring(c+6,t[a].length)}):n.push({key:s,cname:t[a].substring(c+6,t[a].length)}));break}if(!i&&(c=t[a].indexOf("cname:"))>0){for(var d=!1,l=0;l<n.length;++l)if(n[l].key===s){i?n[l].label=t[a].substring(c+6,t[a].length):n[l].cname=t[a].substring(c+6,t[a].length),d=!0;break}d||(i?n.push({key:s,label:t[a].substring(c+6,t[a].length)}):n.push({key:s,cname:t[a].substring(c+6,t[a].length)}));break}++a}}return o+1}},{key:"completionSDPSSRC",value:function(t){var r=t.split("\r\n"),n=e.findLine(r,"m=","audio");if(null===n)return t;var i=e.findLineInRange(r,n+1,-1,"m=");return null===i&&(i=r.length),i+=e._completionSSRC(r,n,i),n=i,i=e.findLineInRange(r,n+1,-1,"m="),null===i&&(i=r.length),e._completionSSRC(r,n,i),r.join("\r\n")}},{key:"_completionSSRC",value:function(t,r,n){var i="",o=e.findLineInRange(t,r+1,n,"a=msid");if(!o)return 0;i=t[o].substring(2,t[o].length);var a=!1,s=!1,c=!1,u="",f=0;if((o=e.findLineInRange(t,r+1,n,"a=ssrc"))>-1){u=t[o].split(" ")[0]+" ";for(var d=o;d<n&&t[d].indexOf("a=ssrc")>-1;++d)t[d].indexOf("cname:")>-1?(!0,++o):t[d].indexOf("msid:")>-1?(a=!0,++o):t[d].indexOf("mslabel:")>-1?(s=!0,++o):t[d].indexOf("label")>-1&&(c=!0,++o);if(a||(t.splice(o,0,u+i),++o,++f),!s){var l=i.split(" ")[0];l=l.replace("msid","mslabel"),t.splice(o,0,u+l),++o,++f}c||(t.splice(o,0,u+"label:"+i.split(" ")[1]),++f)}return f}},{key:"maybeSetOpusOptions",value:function(t,r){return"true"===r.opusStereo?t=e.setCodecParam(t,"opus/48000","stereo","1"):"false"===r.opusStereo&&(t=e.removeCodecParam(t,"opus/48000","stereo")),"true"===r.opusFec?t=e.setCodecParam(t,"opus/48000","useinbandfec","1"):"false"===r.opusFec&&(t=e.removeCodecParam(t,"opus/48000","useinbandfec")),"true"===r.opusDtx?t=e.setCodecParam(t,"opus/48000","usedtx","1"):"false"===r.opusDtx&&(t=e.removeCodecParam(t,"opus/48000","usedtx")),r.opusMaxPbr&&(t=e.setCodecParam(t,"opus/48000","maxplaybackrate",r.opusMaxPbr)),t}},{key:"maybeSetAudioSendBitRate",value:function(t,r){return r.audioSendBitrate?e.preferBitRate(t,r.audioSendBitrate,"audio"):t}},{key:"maybeSetAudioReceiveBitRate",value:function(t,r){return r.audioRecvBitrate?(consolog.log("Prefer audio receive bitrate: "+r.audioRecvBitrate),e.preferBitRate(t,r.audioRecvBitrate,"audio")):t}},{key:"maybeSetVideoSendBitRate",value:function(t,r){return r.videoSendBitrate?(cosole.log("Prefer video send bitrate: "+r.videoSendBitrate),e.preferBitRate(t,r.videoSendBitrate,"video")):t}},{key:"maybeSetVideoReceiveBitRate",value:function(t,r){return r.videoRecvBitrate?e.preferBitRate(t,r.videoRecvBitrate,"video"):t}},{key:"preferBitRate",value:function(t,r,n){var i=t.split("\r\n"),o=e.findLine(i,"m=",n);if(null===o)return t;var a=e.findLineInRange(i,o+1,-1,"m=");null===a&&(a=i.length);var s=e.findLineInRange(i,o+1,a,"c=");if(null===s)return t;var c=e.findLineInRange(i,s+1,a,"b=AS");c&&i.splice(c,1);var u="b=AS:"+r;return i.splice(s+1,0,u),t=i.join("\r\n")}},{key:"maybeSetVideoSendInitialBitRate",value:function(t,r){var n=parseInt(r.videoSendInitialBitrate);if(!n)return t;var i=parseInt(n),o=parseInt(r.videoSendBitrate);o&&(n>o&&(n=o,r.videoSendInitialBitrate=n),i=o);var a=t.split("\r\n"),s=e.findLine(a,"m=","video");if(null===s)return t;var c=a[s],u=new RegExp("m=video\\s\\d+\\s[A-Z/]+\\s"),f=c.split(u)[1].split(" ")[0],d=a[e.findLine(a,"a=rtpmap",f)],l=d.split("a=rtpmap:"+f)[1].split("/")[0],h=r.videoSendCodec||l;return t=e.setCodecParam(t,h,"x-google-min-bitrate",r.videoSendInitialBitrate.toString()),t=e.setCodecParam(t,h,"x-google-max-bitrate",i.toString())}},{key:"removePayloadTypeFromMline",value:function(e,t){e=e.split(" ");for(var r=0;r<e.length;++r)e[r]===t.toString()&&e.splice(r,1);return e.join(" ")}},{key:"removeCodecByName",value:function(t,r){var n=e.findLine(t,"a=rtpmap",r);if(null===n)return t;var i=e.getCodecPayloadTypeFromLine(t[n]);t.splice(n,1);var o=e.findLine(t,"m=","video");return null===o?t:(t[o]=e.removePayloadTypeFromMline(t[o],i),t)}},{key:"removeCodecByPayloadType",value:function(t,r){var n=e.findLine(t,"a=rtpmap",r.toString());if(null===n)return t;t.splice(n,1);var i=e.findLine(t,"m=","video");return null===i?t:(t[i]=e.removePayloadTypeFromMline(t[i],r),t)}},{key:"maybeRemoveVideoFec",value:function(t,r){if("false"!==r.videoFec)return t;var n=t.split("\r\n"),i=e.findLine(n,"a=rtpmap","red");if(null===i)return t;var o=e.getCodecPayloadTypeFromLine(n[i]);if(n=e.removeCodecByPayloadType(n,o),n=e.removeCodecByName(n,"ulpfec"),null===(i=e.findLine(n,"a=fmtp",o.toString())))return t;var a=e.parseFmtpLine(n[i]),s=a.pt;return null===s?t:(n.splice(i,1),n=e.removeCodecByPayloadType(n,s),n.join("\r\n"))}},{key:"maybePreferAudioSendCodec",value:function(t,r){return e.maybePreferCodec(t,"audio","send",r.audioSendCodec)}},{key:"maybePreferAudioReceiveCodec",value:function(t,r){return e.maybePreferCodec(t,"audio","receive",r.audioRecvCodec)}},{key:"maybePreferVideoSendCodec",value:function(t,r){return e.maybePreferCodec(t,"video","send",r.videoSendCodec)}},{key:"maybePreferVideoReceiveCodec",value:function(t,r){return e.maybePreferCodec(t,"video","receive",r.videoRecvCodec)}},{key:"maybePreferCodec",value:function(t,r,n,i){if(!i)return t;var o=t.split("\r\n"),a=e.findLine(o,"m=",r);if(null===a)return t;var s=e.getCodecPayloadType(o,i);return s&&(o[a]=e.setDefaultCodec(o[a],s)),t=o.join("\r\n")}},{key:"setCodecParam",value:function(t,r,n,i){var o=t.split("\r\n"),a=e.findFmtpLine(o,r),s={};if(null===a){var c=e.findLine(o,"a=rtpmap",r);if(null===c)return t;var u=e.getCodecPayloadTypeFromLine(o[c]);s.pt=u.toString(),s.params={},s.params[n]=i,o.splice(c+1,0,e.writeFmtpLine(s))}else s=e.parseFmtpLine(o[a]),s.params[n]=i,o[a]=e.writeFmtpLine(s);return t=o.join("\r\n")}},{key:"removeCodecParam",value:function(t,r,n){var i=t.split("\r\n"),o=e.findFmtpLine(i,r);if(null===o)return t;var a=e.parseFmtpLine(i[o]);delete a.params[n];var s=e.writeFmtpLine(a);return null===s?i.splice(o,1):i[o]=s,t=i.join("\r\n")}},{key:"parseFmtpLine",value:function(e){var t={},r=e.indexOf(" "),n=e.substring(r+1).split(";"),i=new RegExp("a=fmtp:(\\d+)"),o=e.match(i);if(!o||2!==o.length)return null;t.pt=o[1];for(var a={},s=0;s<n.length;++s){var c=n[s].split("=");2===c.length&&(a[c[0]]=c[1])}return t.params=a,t}},{key:"writeFmtpLine",value:function(e){if(!e.hasOwnProperty("pt")||!e.hasOwnProperty("params"))return null;var t=e.pt,r=e.params,n=[],i=0;for(var o in r)n[i]=o+"="+r[o],++i;return 0===i?null:"a=fmtp:"+t.toString()+" "+n.join(";")}},{key:"findFmtpLine",value:function(t,r){var n=e.getCodecPayloadType(t,r);return n?e.findLine(t,"a=fmtp:"+n.toString()):null}},{key:"findLine",value:function(t,r,n){return e.findLineInRange(t,0,-1,r,n)}},{key:"findLineInRange",value:function(e,t,r,n,i){for(var o=-1!==r?r:e.length,a=t;a<o;++a)if(0===e[a].indexOf(n)&&(!i||-1!==e[a].toLowerCase().indexOf(i.toLowerCase())))return a;return null}},{key:"getCodecPayloadType",value:function(t,r){var n=e.findLine(t,"a=rtpmap",r);return n?e.getCodecPayloadTypeFromLine(t[n]):null}},{key:"getCodecPayloadTypeFromLine",value:function(e){var t=new RegExp("a=rtpmap:(\\d+) [a-zA-Z0-9-]+\\/\\d+"),r=e.match(t);return r&&2===r.length?r[1]:null}},{key:"setDefaultCodec",value:function(e,t){var r=e.split(" "),n=r.slice(0,3);n.push(t);for(var i=3;i<r.length;i++)r[i]!==t&&n.push(r[i]);return n.join(" ")}},{key:"hasH264",value:function(e){return-1==e.indexOf("mid:video")||(e.indexOf("H264")>0||e.indexOf("h264")>0)}},{key:"replace42e01fTo42001f",value:function(e){return e}},{key:"supportH264",value:function(e){return-1==e.indexOf("m=video")?-1:e.indexOf("H264")>0||e.indexOf("h264")>0||e.indexOf("H.264")>0||e.indexOf("h.264")>0?1:0}},{key:"needUnifiedSDPPlan",value:function(e){var t=e.indexOf("a=mid:");if(t>-1){var r=e.indexOf("\r",t);-1==r&&(r=e.indexOf("\n",t));var n=e.substring(t+6,r);return-1==n.indexOf("audio")&&-1==n.indexOf("video")}return!1}},{key:"replaceGoogRemb",value:function(e){if(e.indexOf("transport-cc")){for(var t=e.split("\r\n"),r=t.length-1;r>=0;--r)-1!=t[r].indexOf("goog-remb")&&t.splice(r,1);return t.join("\r\n")}return e}},{key:"replaceTransportCC",value:function(e){if(-1!=e.indexOf("goog-remb")){for(var t=e.split("\r\n"),r=t.length-1;r>=0;--r)-1!=t[r].indexOf("transport-cc")&&t.splice(r,1);return t.join("\r\n")}return e}},{key:"addAudioNack",value:function(e){for(var t=e.split("\r\n"),r=0;r<t.length;++r)if(-1!=t[r].indexOf("opus")&&-1!=t[r+1].indexOf("rtcp-fb")){var n=t[r+1],i=n.split(" ");2==i.length&&(-1!=t[r+2].indexOf("rtcp-fb")?t.splice(r+2,0,i[0]+" nack"):t.splice(r+1,0,i[0]+" nack"))}return t.join("\r\n")}},{key:"supportStereo",value:function(e){for(var t=e.split("\r\n"),r=0;r<t.length;++r)if(t[r].indexOf("a=fmtp:")>-1){t[r]+=";stereo=1;sprop-stereo=1;";break}return t.join("\r\n")}},{key:"DEFAULT_SDP_OFFER_OPTIONS",get:function(){return{offerToReceiveAudio:!0,offerToReceiveVideo:!0}}}]),e}());t.default=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(7),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(){if(n(this,e),this._isPause=!1,this._hasStart=!1,this._level=0,this._statisticsBuffer=!0,this._buffer=[],!e._context&&(window.AudioContext||window.webkitAudioContext)){var t=window.AudioContext||window.webkitAudioContext;e._context=new t}this._context=e._context,this._script=this._context.createScriptProcessor(4096,1,1)}return i(e,[{key:"resumeContext",value:function(){"suspended"==this._context.state&&this._context.resume()}},{key:"startAudioInputLevel",value:function(e){var t=this;(a.default.isSafari||a.default.isMicroMessenger)&&(this._hasStart=!0,this._isPause&&(this._isPause=!1),this._mic)||e&&e.getAudioTracks().length&&this._context&&(this.resumeContext(),this._script.onaudioprocess=function(e){t._onAudioProcessing(e)},this._mic=this._context.createMediaStreamSource(e),this._mic.connect(this._script),this._script.connect(this._context.destination))}},{key:"stopAudioInputLevel",value:function(e){if(a.default.isSafari||a.default.isMicroMessenger){if(!this._hasStart)return;if(!e)return void(this._isPause=!0);this._isPause=!1,this._hasStart=!1}this._script&&this._mic&&(this._script.onaudioprocess=function(){},this._mic.disconnect(),this._script.disconnect()),this._mic=null}},{key:"clearLevel",value:function(){this._level=0}},{key:"_onAudioProcessing",value:function(e){if(!this._isPause||!a.default.isSafari&&!a.default.isMicroMessenger){for(var t=0,r=e.inputBuffer.getChannelData(0),n=0;n<r.length;++n)t<r[n]&&(t=r[n]);t>1&&(t=1),this._level<t&&(this._level=t),this._statisticsBuffer&&this._buffer.push(new Float32Array(r))}}},{key:"statisticsBuffer",set:function(e){this._statisticsBuffer=e}},{key:"level",get:function(){var e=this._level;return this._level=0,e}},{key:"buffer",get:function(){return this._buffer.splice(0,this._buffer.length)}}]),e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={AudioTrackChange:"AudioTrackChange",ScreenTrackEnded:"ScreenTrackEnded",DeviceChange:"DeviceChange"}},function(e,t,r){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={evn:"PRODUCT",version:"1.16.0",protocol_version:1,sdk_version:"0.0.1"};t.default=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e)}return i(e,null,[{key:"postBody",value:function(t,r,n){t=e._getUrl(t,r);var i={};i.headers||(i.headers={}),i.headers.Accept="application/json",i.headers["Content-Type"]="application/json";var o="";return new Promise(function(r,i){e.requestBody("POST",t,n).then(function(e){return o=e,e.ok?e.json():e.text()}).then(function(t){o.ok?t.code?(t=e._intercept(t),i(t)):r(t.data):i(e._httpErrorMessage(o,t))}).catch(function(t){t=e._httpErrorMessage(t),i(t)})})}},{key:"get",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=e._getUrl(t,r),n.headers||(n.headers={}),n.headers["Content-Type"]="application/json";var i="";return new Promise(function(r,o){e.request("GET",t,n).then(function(e){return i=e,e.ok?e.json():e.text()}).then(function(t){i.ok?t.code?(t=e._intercept(t),o(t)):r(t.data):o(e._httpErrorMessage(i,t))}).catch(function(t){t=e._httpErrorMessage(t),o(t)})})}},{key:"post",value:function(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=e._getUrl(t,r),i.headers||(i.headers={}),i.body=n,i.headers.Accept="application/json",i.headers["Content-Type"]="application/json";var o="";return new Promise(function(r,n){e.request("POST",t,i).then(function(e){return o=e,e.ok?e.json():e.text()}).then(function(t){o.ok?t.code?(t=e._intercept(t),n(t)):r(t.data):n(e._httpErrorMessage(o,t))}).catch(function(t){t=e._httpErrorMessage(t),n(t)})})}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",t=arguments[1],r=arguments[2],n=new Headers(r.headers),i={method:e,headers:n},o=new Request(t,i);return fetch(o)}},{key:"requestBody",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",t=arguments[1],r=arguments[2];return fetch(t,{method:e,body:r,headers:new Headers({"Content-Type":"application/json"})})}},{key:"ajaxPost",value:function(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t=e._getUrl(t,r),i.headers||(i.headers={}),i.headers.Accept="application/json",i.headers["Content-Type"]="application/json",e.ajax("POST",t,n,i)}},{key:"logPost",value:function(t,r,n){var i={headers:r};return e.ajax("POST",t,n,i)}},{key:"ajax",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",r=arguments[1],n=arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")});var o=new XMLHttpRequest;return new Promise(function(a,s){o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var t=JSON.parse(o.responseText);t.code?(t=e._intercept(t),s(t)):a(t)}else s({message:o.responseText||":"+r})},o.open(t,r,!0);try{if(i.withCredentials&&(o.withCredentials=!0),i.headers)for(var c in i.headers)o.setRequestHeader(c,i.headers[c])}catch(e){return void s(e)}try{o.send(n)}catch(e){s(e)}})}},{key:"_getUrl",value:function(e,t){var r=[];if(t)for(var n in t)r.push(n+"="+t[n]);var i=r.join("&");return e=(-1!=e.indexOf("?")?e:e+"?")+i}},{key:"_httpErrorMessage",value:function(e,t){return e.message||(e.message="HTTP "+e.status+"("+e.statusText+") : "+t),e}},{key:"_intercept",value:function(e){var t=e.data;return e.code&&(t=t||{},t.data=e.data,t.code=e.code,t.description=e.description,t.message="0x"+Number(e.code).toString(16)+", "+e.description,t.tid&&(t.message+=", tid="+t.tid)),t}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function i(e,t){a.call(this,e,t),this.nested=void 0,this._nestedArray=null}function o(e){return e._nestedArray=null,e}e.exports=i;var a=r(31);((i.prototype=Object.create(a.prototype)).constructor=i).className="Namespace";var s,c,u,f=r(27),d=r(6);i.fromJSON=function(e,t){return new i(e,t.options).addJSON(t.nested)},i.arrayToJSON=n,i.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0;return!1},i.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(i.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=d.toArray(this.nested))}}),i.prototype.toJSON=function(e){return d.toObject(["options",this.options,"nested",n(this.nestedArray,e)])},i.prototype.addJSON=function(e){var t=this;if(e)for(var r,n=Object.keys(e),o=0;o<n.length;++o)r=e[n[o]],t.add((void 0!==r.fields?s.fromJSON:void 0!==r.values?u.fromJSON:void 0!==r.methods?c.fromJSON:void 0!==r.id?f.fromJSON:i.fromJSON)(n[o],r));return this},i.prototype.get=function(e){return this.nested&&this.nested[e]||null},i.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof u)return this.nested[e].values;throw Error("no such enum: "+e)},i.prototype.add=function(e){if(!(e instanceof f&&void 0!==e.extend||e instanceof s||e instanceof u||e instanceof c||e instanceof i))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof i&&e instanceof i)||t instanceof s||t instanceof c)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,n=0;n<r.length;++n)e.add(r[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),o(this)},i.prototype.remove=function(e){if(!(e instanceof a))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),o(this)},i.prototype.define=function(e,t){if(d.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof i))throw Error("path conflicts with non-namespace objects")}else r.add(r=new i(n))}return t&&r.addJSON(t),r},i.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof i?e[t++].resolveAll():e[t++].resolve();return this.resolve()},i.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),d.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof i&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var o=0;o<this.nestedArray.length;++o)if(this._nestedArray[o]instanceof i&&(n=this._nestedArray[o].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},i.prototype.lookupType=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such type: "+e);return t},i.prototype.lookupEnum=function(e){var t=this.lookup(e,[u]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},i.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[s,u]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},i.prototype.lookupService=function(e){var t=this.lookup(e,[c]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},i._configure=function(e,t,r){s=e,c=t,u=r}},function(e,t,r){"use strict";(function(t){function n(e){u.call(this,"digest"),this._hash=e,this.buffers=[]}function i(e){u.call(this,"digest"),this._hash=e}var o=r(1),a=r(73),s=r(74),c=r(79),u=r(25);o(n,u),n.prototype._update=function(e){this.buffers.push(e)},n.prototype._final=function(){var e=t.concat(this.buffers),r=this._hash(e);return this.buffers=null,r},o(i,u),i.prototype._update=function(e){this._hash.update(e)},i.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return e=e.toLowerCase(),"md5"===e?new n(a):new i("rmd160"===e||"ripemd160"===e?new s:c(e))}}).call(t,r(4).Buffer)},function(e,t,r){"use strict";(function(e){function r(e){return Array.isArray?Array.isArray(e):"[object Array]"===m(e)}function n(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function c(e){return"symbol"===(void 0===e?"undefined":v(e))}function u(e){return void 0===e}function f(e){return"[object RegExp]"===m(e)}function d(e){return"object"===(void 0===e?"undefined":v(e))&&null!==e}function l(e){return"[object Date]"===m(e)}function h(e){return"[object Error]"===m(e)||e instanceof Error}function p(e){return"function"==typeof e}function _(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===(void 0===e?"undefined":v(e))||void 0===e}function m(e){return Object.prototype.toString.call(e)}var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isArray=r,t.isBoolean=n,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=a,t.isString=s,t.isSymbol=c,t.isUndefined=u,t.isRegExp=f,t.isObject=d,t.isDate=l,t.isError=h,t.isFunction=p,t.isPrimitive=_,t.isBuffer=e.isBuffer}).call(t,r(4).Buffer)},function(e,t,r){"use strict";(function(t){e.exports=function(e,r){for(var n=Math.min(e.length,r.length),i=new t(n),o=0;o<n;++o)i[o]=e[o]^r[o];return i}}).call(t,r(4).Buffer)},function(e,t,r){"use strict";function n(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var i=r(21),o=r(15);t.BlockHash=n,n.prototype.update=function(e,t){if(e=i.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var r=e.length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=i.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},n.prototype.digest=function(e){return this.update(this._pad()),o(null===this.pending),this._digest(e)},n.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n}},function(e,t,r){"use strict";var n=t;n.bignum=r(5),n.define=r(312).define,n.base=r(49),n.constants=r(139),n.decoders=r(318),n.encoders=r(320)},function(e,t,r){"use strict";var n=t;n.Reporter=r(315).Reporter,n.DecoderBuffer=r(138).DecoderBuffer,n.EncoderBuffer=r(138).EncoderBuffer,n.Node=r(316)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ListenerTimeOut:"TimeOut",Publishers:"publishers",UnPublish:"unpublish",Offer:"offer",SignalError:"signalError",Leave:"leave",Join:"join",Bye:"bye",UnSubscribe:"unsubscribe",StatusNotify:"statusnotify",TimeOut:"timeout"};t.default=n},function(e,t,r){"use strict";function n(e,t,r,n){if(Array.isArray(t)||(r=t,t=void 0),o.call(this,e,r),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=n}function i(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}e.exports=n;var o=r(31);((n.prototype=Object.create(o.prototype)).constructor=n).className="OneOf";var a=r(27),s=r(6);n.fromJSON=function(e,t){return new n(e,t.oneof,t.options,t.comment)},n.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},n.prototype.add=function(e){if(!(e instanceof a))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,i(this),this},n.prototype.remove=function(e){if(!(e instanceof a))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),t=this.oneof.indexOf(e.name),t>-1&&this.oneof.splice(t,1),e.partOf=null,this},n.prototype.onAdd=function(e){o.prototype.onAdd.call(this,e);for(var t=this,r=0;r<this.oneof.length;++r){var n=e.get(this.oneof[r]);n&&!n.partOf&&(n.partOf=t,t.fieldsArray.push(n))}i(this)},n.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);o.prototype.onRemove.call(this,e)},n.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){s.decorateType(t.constructor).add(new n(r,e)),Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},function(e,t,r){"use strict";function n(){i.call(this)}e.exports=n;var i=r(75).EventEmitter;r(1)(n,i),n.Readable=r(76),n.Writable=r(253),n.Duplex=r(254),n.Transform=r(255),n.PassThrough=r(256),n.Stream=n,n.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function n(){u.readable&&u.resume&&u.resume()}function o(){f||(f=!0,e.end())}function a(){f||(f=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(c(),0===i.listenerCount(this,"error"))throw e}function c(){u.removeListener("data",r),e.removeListener("drain",n),u.removeListener("end",o),u.removeListener("close",a),u.removeListener("error",s),e.removeListener("error",s),u.removeListener("end",c),u.removeListener("close",c),e.removeListener("close",c)}var u=this;u.on("data",r),e.on("drain",n),e._isStdio||t&&!1===t.end||(u.on("end",o),u.on("close",a));var f=!1;return u.on("error",s),e.on("error",s),u.on("end",c),u.on("close",c),e.on("close",c),e.emit("pipe",u),e}},function(e,t,r){"use strict";(function(t){function r(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,r)});case 3:return t.nextTick(function(){e.call(null,r,n)});case 4:return t.nextTick(function(){e.call(null,r,n,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=r:e.exports=t.nextTick}).call(t,r(23))},function(e,t,r){"use strict";function n(e,t,r,n){if(i.isBuffer(e)||(e=i.from(e,"binary")),t&&(i.isBuffer(t)||(t=i.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=r/8,s=i.alloc(a),c=i.alloc(n||0),u=i.alloc(0);a>0||n>0;){var f=new o;f.update(u),f.update(e),t&&f.update(t),u=f.digest();var d=0;if(a>0){var l=s.length-a;d=Math.min(a,u.length),u.copy(s,l,0,d),a-=d}if(d<u.length&&n>0){var h=c.length-n,p=Math.min(n,u.length-d);u.copy(c,h,d,d+p),n-=p}}return u.fill(0),{key:s,iv:c}}var i=r(3).Buffer,o=r(265);e.exports=n},function(e,t,r){"use strict";function n(e){s.isBuffer(e)||(e=s.from(e));for(var t=e.length/4|0,r=new Array(t),n=0;n<t;n++)r[n]=e.readUInt32BE(4*n);return r}function i(e){for(;0<e.length;e++)e[0]=0}function o(e,t,r,n,i){for(var o,a,s,c,u=r[0],f=r[1],d=r[2],l=r[3],h=e[0]^t[0],p=e[1]^t[1],_=e[2]^t[2],m=e[3]^t[3],v=4,b=1;b<i;b++)o=u[h>>>24]^f[p>>>16&255]^d[_>>>8&255]^l[255&m]^t[v++],a=u[p>>>24]^f[_>>>16&255]^d[m>>>8&255]^l[255&h]^t[v++],s=u[_>>>24]^f[m>>>16&255]^d[h>>>8&255]^l[255&p]^t[v++],c=u[m>>>24]^f[h>>>16&255]^d[p>>>8&255]^l[255&_]^t[v++],h=o,p=a,_=s,m=c;return o=(n[h>>>24]<<24|n[p>>>16&255]<<16|n[_>>>8&255]<<8|n[255&m])^t[v++],a=(n[p>>>24]<<24|n[_>>>16&255]<<16|n[m>>>8&255]<<8|n[255&h])^t[v++],s=(n[_>>>24]<<24|n[m>>>16&255]<<16|n[h>>>8&255]<<8|n[255&p])^t[v++],c=(n[m>>>24]<<24|n[h>>>16&255]<<16|n[p>>>8&255]<<8|n[255&_])^t[v++],o>>>=0,a>>>=0,s>>>=0,c>>>=0,[o,a,s,c]}function a(e){this._key=n(e),this._reset()}var s=r(3).Buffer,c=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var r=[],n=[],i=[[],[],[],[]],o=[[],[],[],[]],a=0,s=0,c=0;c<256;++c){var u=s^s<<1^s<<2^s<<3^s<<4;u=u>>>8^255&u^99,r[a]=u,n[u]=a;var f=e[a],d=e[f],l=e[d],h=257*e[u]^16843008*u;i[0][a]=h<<24|h>>>8,i[1][a]=h<<16|h>>>16,i[2][a]=h<<8|h>>>24,i[3][a]=h,h=16843009*l^65537*d^257*f^16843008*a,o[0][u]=h<<24|h>>>8,o[1][u]=h<<16|h>>>16,o[2][u]=h<<8|h>>>24,o[3][u]=h,0===a?a=s=1:(a=f^e[e[e[l^f]]],s^=e[e[s]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:i,INV_SUB_MIX:o}}();a.blockSize=16,a.keySize=32,a.prototype.blockSize=a.blockSize,a.prototype.keySize=a.keySize,a.prototype._reset=function(){for(var e=this._key,t=e.length,r=t+6,n=4*(r+1),i=[],o=0;o<t;o++)i[o]=e[o];for(o=t;o<n;o++){var a=i[o-1];o%t==0?(a=a<<8|a>>>24,a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a],a^=c[o/t|0]<<24):t>6&&o%t==4&&(a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a]),i[o]=i[o-t]^a}for(var s=[],f=0;f<n;f++){var d=n-f,l=i[d-(f%4?0:4)];s[f]=f<4||d<=4?l:u.INV_SUB_MIX[0][u.SBOX[l>>>24]]^u.INV_SUB_MIX[1][u.SBOX[l>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[l>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&l]]}this._nRounds=r,this._keySchedule=i,this._invKeySchedule=s},a.prototype.encryptBlockRaw=function(e){return e=n(e),o(e,this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},a.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),r=s.allocUnsafe(16);return r.writeUInt32BE(t[0],0),r.writeUInt32BE(t[1],4),r.writeUInt32BE(t[2],8),r.writeUInt32BE(t[3],12),r},a.prototype.decryptBlock=function(e){e=n(e);var t=e[1];e[1]=e[3],e[3]=t;var r=o(e,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),i=s.allocUnsafe(16);return i.writeUInt32BE(r[0],0),i.writeUInt32BE(r[3],4),i.writeUInt32BE(r[2],8),i.writeUInt32BE(r[1],12),i},a.prototype.scrub=function(){i(this._keySchedule),i(this._invKeySchedule),i(this._key)},e.exports.AES=a},function(e,t,r){"use strict";var n=t;n.base=r(292),n.short=r(293),n.mont=r(294),n.edwards=r(295)},function(e,t,r){"use strict";(function(t){function n(e){var r;"object"!==(void 0===e?"undefined":o(e))||t.isBuffer(e)||(r=e.passphrase,e=e.key),"string"==typeof e&&(e=new t(e));var n,s,u=c(e,r),f=u.tag,d=u.data;switch(f){case"CERTIFICATE":s=a.certificate.decode(d,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(s||(s=a.PublicKey.decode(d,"der")),n=s.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return a.RSAPublicKey.decode(s.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return s.subjectPrivateKey=s.subjectPublicKey,{type:"ec",data:s};case"1.2.840.10040.4.1":return s.algorithm.params.pub_key=a.DSAparam.decode(s.subjectPublicKey.data,"der"),{type:"dsa",data:s.algorithm.params};default:throw new Error("unknown key id "+n)}throw new Error("unknown key type "+f);case"ENCRYPTED PRIVATE KEY":d=a.EncryptedPrivateKey.decode(d,"der"),d=i(d,r);case"PRIVATE KEY":switch(s=a.PrivateKey.decode(d,"der"),n=s.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return a.RSAPrivateKey.decode(s.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:s.algorithm.curve,privateKey:a.ECPrivateKey.decode(s.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return s.algorithm.params.priv_key=a.DSAparam.decode(s.subjectPrivateKey,"der"),{type:"dsa",params:s.algorithm.params};default:throw new Error("unknown key id "+n)}throw new Error("unknown key type "+f);case"RSA PUBLIC KEY":return a.RSAPublicKey.decode(d,"der");case"RSA PRIVATE KEY":return a.RSAPrivateKey.decode(d,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:a.DSAPrivateKey.decode(d,"der")};case"EC PRIVATE KEY":return d=a.ECPrivateKey.decode(d,"der"),{curve:d.parameters.value,privateKey:d.privateKey};default:throw new Error("unknown key type "+f)}}function i(e,r){var n=e.algorithm.decrypt.kde.kdeparams.salt,i=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=s[e.algorithm.decrypt.cipher.algo.join(".")],a=e.algorithm.decrypt.cipher.iv,c=e.subjectPrivateKey,d=parseInt(o.split("-")[1],10)/8,l=f.pbkdf2Sync(r,n,i,d),h=u.createDecipheriv(o,l,a),p=[];return p.push(h.update(c)),p.push(h.final()),t.concat(p)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=r(311),s=r(323),c=r(324),u=r(80),f=r(122);e.exports=n,n.signature=a.signature}).call(t,r(4).Buffer)},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c){"object"===a(t)?e.exports=t=c(r(0)):(i=[r(0)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(t){var r=e,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,s=[],c=[];!function(){function e(e){return 4294967296*(e-(0|e))|0}for(var r=2,n=0;n<64;)(function(e){for(var r=t.sqrt(e),n=2;n<=r;n++)if(!(e%n))return!1;return!0})(r)&&(n<8&&(s[n]=e(t.pow(r,.5))),c[n]=e(t.pow(r,1/3)),n++),r++}();var u=[],f=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],f=r[5],d=r[6],l=r[7],h=0;h<64;h++){if(h<16)u[h]=0|e[t+h];else{var p=u[h-15],_=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=u[h-2],v=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;u[h]=_+u[h-7]+v+u[h-16]}var b=s&f^~s&d,y=n&i^n&o^i&o,g=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),S=(s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25),w=l+S+b+c[h]+u[h],k=g+y;l=d,d=f,f=s,s=a+w|0,a=o,o=i,i=n,n=w+k|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+s|0,r[5]=r[5]+f|0,r[6]=r[6]+d|0,r[7]=r[7]+l|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=t.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});r.SHA256=o._createHelper(f),r.HmacSHA256=o._createHmacHelper(f)}(Math),e.SHA256})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(26)):(i=[r(0),r(26)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(){function t(){return a.create.apply(a,arguments)}var r=e,n=r.lib,i=n.Hasher,o=r.x64,a=o.Word,s=o.WordArray,c=r.algo,u=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],f=[];!function(){for(var e=0;e<80;e++)f[e]=t()}();var d=c.SHA512=i.extend({_doReset:function(){this._hash=new s.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],c=r[5],d=r[6],l=r[7],h=n.high,p=n.low,_=i.high,m=i.low,v=o.high,b=o.low,y=a.high,g=a.low,S=s.high,w=s.low,k=c.high,E=c.low,R=d.high,C=d.low,A=l.high,O=l.low,T=h,M=p,P=_,I=m,x=v,D=b,L=y,N=g,B=S,j=w,U=k,V=E,H=R,F=C,z=A,q=O,W=0;W<80;W++){var G,K,J=f[W];if(W<16)K=J.high=0|e[t+2*W],G=J.low=0|e[t+2*W+1];else{var Y=f[W-15],X=Y.high,Z=Y.low,Q=(X>>>1|Z<<31)^(X>>>8|Z<<24)^X>>>7,$=(Z>>>1|X<<31)^(Z>>>8|X<<24)^(Z>>>7|X<<25),ee=f[W-2],te=ee.high,re=ee.low,ne=(te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6,ie=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),oe=f[W-7],ae=oe.high,se=oe.low,ce=f[W-16],ue=ce.high,fe=ce.low;G=$+se,K=Q+ae+(G>>>0<$>>>0?1:0),G+=ie,K=K+ne+(G>>>0<ie>>>0?1:0),G+=fe,K=K+ue+(G>>>0<fe>>>0?1:0),J.high=K,J.low=G}var de=B&U^~B&H,le=j&V^~j&F,he=T&P^T&x^P&x,pe=M&I^M&D^I&D,_e=(T>>>28|M<<4)^(T<<30|M>>>2)^(T<<25|M>>>7),me=(M>>>28|T<<4)^(M<<30|T>>>2)^(M<<25|T>>>7),ve=(B>>>14|j<<18)^(B>>>18|j<<14)^(B<<23|j>>>9),be=(j>>>14|B<<18)^(j>>>18|B<<14)^(j<<23|B>>>9),ye=u[W],ge=ye.high,Se=ye.low,we=q+be,ke=z+ve+(we>>>0<q>>>0?1:0),we=we+le,ke=ke+de+(we>>>0<le>>>0?1:0),we=we+Se,ke=ke+ge+(we>>>0<Se>>>0?1:0),we=we+G,ke=ke+K+(we>>>0<G>>>0?1:0),Ee=me+pe,Re=_e+he+(Ee>>>0<me>>>0?1:0);z=H,q=F,H=U,F=V,U=B,V=j,j=N+we|0,B=L+ke+(j>>>0<N>>>0?1:0)|0,L=x,N=D,x=P,D=I,P=T,I=M,M=we+Ee|0,T=ke+Re+(M>>>0<we>>>0?1:0)|0}p=n.low=p+M,n.high=h+T+(p>>>0<M>>>0?1:0),m=i.low=m+I,i.high=_+P+(m>>>0<I>>>0?1:0),b=o.low=b+D,o.high=v+x+(b>>>0<D>>>0?1:0),g=a.low=g+N,a.high=y+L+(g>>>0<N>>>0?1:0),w=s.low=w+j,s.high=S+B+(w>>>0<j>>>0?1:0),E=c.low=E+V,c.high=k+U+(E>>>0<V>>>0?1:0),C=d.low=C+F,d.high=R+H+(C>>>0<F>>>0?1:0),O=l.low=O+q,l.high=A+z+(O>>>0<q>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(n+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});r.SHA512=i._createHelper(d),r.HmacSHA512=i._createHmacHelper(d)}(),e.SHA512})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(173),u=n(c),f=r(359),d=n(f),l=r(39),h=n(l),p=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n._canvasScreenShare=new d.default(n._screenShareProfile,function(e){n.dispatchEvent(h.default.ScreenTrackEnded,e)}),n._resolutionArr=[{width:1280,height:720},{width:960,height:540},{width:640,height:480},{width:320,height:240}],n}return a(t,e),s(t,[{key:"enableHighDefinitionPreview",value:function(e){return this._enableHighDefinitionPreview=e,this._preViewStream&&this._localVideoElement&&(this._releasePreviewStream(),this.getPreViewStream(this._localVideoElement)),!0}},{key:"startPublishScreenShare",value:function(){return this._externalScreenTrack?new Promise(function(e,t){e()}):this._canvasScreenShare.startScreenShare()}},{key:"stopPublishScreenShare",value:function(){this._externalScreenTrack||this._canvasScreenShare.stopScreenShare()}}]),t}(u.default);t.default=p},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.StatusParser=function(){function e(){n(this,e)}return i(e,null,[{key:"getCurrentStatus",value:function(e,t,r){var n=void 0;if(r){var i=e?0:8,o=t?0:16;for(n=(5+i+o).toString(16);n.length<16;)n="0"+n}else n="0000000000000000";return n}},{key:"parseStatus",value:function(e){var t=parseInt(e,16),r=!!(2&t),n=!!(8&t),i=!!(16&t);return{micMute:r||n,cameraMute:i}}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={FirstPackage:"FirstPackage",FirstFrame:"FirstFrame"}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(97),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(){n(this,e)}return i(e,null,[{key:"get",value:function(e){for(var t=e+"",r=document.cookie.split(";"),n=0;n<r.length;n++){var i=r[n].trim();if(0==i.indexOf(t))return unescape(i.substring(t.length+1,i.length))}return""}},{key:"set",value:function(e,t,r){var n=new Date;n.setTime(n.getTime()+24*r*60*60*1e3);var i="expires="+n.toGMTString();document.cookie=e+"="+escape(t)+"; "+i}},{key:"uuid",get:function(){var t=e.get("rtc_uuid");return t||(t=a.default.create(32),e.set("rtc_uuid",t,365)),t}}]),e}();t.default=s},function(e,t,r){"use strict";function n(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function i(){}function o(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function a(){this.len=0,this.head=new n(i,0,0),this.tail=this.head,this.states=null}function s(e,t,r){t[r]=255&e}function c(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function u(e,t){this.len=e,this.next=void 0,this.val=t}function f(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function d(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}e.exports=a;var l,h=r(22),p=h.LongBits,_=h.base64,m=h.utf8,v=function(){return h.Buffer?function(){return(a.create=function(){return new l})()}:function(){return new a}};a.create=v(),a.alloc=function(e){return new h.Array(e)},h.Array!==Array&&(a.alloc=h.pool(a.alloc,h.Array.prototype.subarray)),a.prototype._push=function(e,t,r){return this.tail=this.tail.next=new n(e,t,r),this.len+=t,this},u.prototype=Object.create(n.prototype),u.prototype.fn=c,a.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new u((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},a.prototype.int32=function(e){return e<0?this._push(f,10,p.fromNumber(e)):this.uint32(e)},a.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},a.prototype.uint64=function(e){var t=p.from(e);return this._push(f,t.length(),t)},a.prototype.int64=a.prototype.uint64,a.prototype.sint64=function(e){var t=p.from(e).zzEncode();return this._push(f,t.length(),t)},a.prototype.bool=function(e){return this._push(s,1,e?1:0)},a.prototype.fixed32=function(e){return this._push(d,4,e>>>0)},a.prototype.sfixed32=a.prototype.fixed32,a.prototype.fixed64=function(e){var t=p.from(e);return this._push(d,4,t.lo)._push(d,4,t.hi)},a.prototype.sfixed64=a.prototype.fixed64,a.prototype.float=function(e){return this._push(h.float.writeFloatLE,4,e)},a.prototype.double=function(e){return this._push(h.float.writeDoubleLE,8,e)};var b=h.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};a.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(s,1,0);if(h.isString(e)){var r=a.alloc(t=_.length(e));_.decode(e,r,0),e=r}return this.uint32(t)._push(b,t,e)},a.prototype.string=function(e){var t=m.length(e);return t?this.uint32(t)._push(m.write,t,e):this._push(s,1,0)},a.prototype.fork=function(){return this.states=new o(this),this.head=this.tail=new n(i,0,0),this.len=0,this},a.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new n(i,0,0),this.len=0),this},a.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},a.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},a._configure=function(e){l=e,a.create=v(),l._configure()}},function(e,t,r){"use strict";function n(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function i(e){this.buf=e,this.pos=0,this.len=e.length}function o(){var e=new f(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw n(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw n(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function a(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function s(){if(this.pos+8>this.len)throw n(this,8);return new f(a(this.buf,this.pos+=4),a(this.buf,this.pos+=4))}e.exports=i;var c,u=r(22),f=u.LongBits,d=u.utf8,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new i(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new i(e);throw Error("illegal buffer")},h=function(){return u.Buffer?function(e){return(i.create=function(e){return u.Buffer.isBuffer(e)?new c(e):l(e)})(e)}:l};i.create=h(),i.prototype._slice=u.Array.prototype.subarray||u.Array.prototype.slice,i.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,n(this,10);return e}}(),i.prototype.int32=function(){return 0|this.uint32()},i.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},i.prototype.bool=function(){return 0!==this.uint32()},i.prototype.fixed32=function(){if(this.pos+4>this.len)throw n(this,4);return a(this.buf,this.pos+=4)},i.prototype.sfixed32=function(){if(this.pos+4>this.len)throw n(this,4);return 0|a(this.buf,this.pos+=4)},i.prototype.float=function(){if(this.pos+4>this.len)throw n(this,4);var e=u.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},i.prototype.double=function(){if(this.pos+8>this.len)throw n(this,4);var e=u.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},i.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw n(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},i.prototype.string=function(){var e=this.bytes();return d.read(e,0,e.length)},i.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw n(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw n(this)}while(128&this.buf[this.pos++]);return this},i.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},i._configure=function(e){c=e,i.create=h(),c._configure();var t=u.Long?"toLong":"toNumber";u.merge(i.prototype,{int64:function(){return o.call(this)[t](!1)},uint64:function(){return o.call(this)[t](!0)},sint64:function(){return o.call(this).zzDecode()[t](!1)},fixed64:function(){return s.call(this)[t](!0)},sfixed64:function(){return s.call(this)[t](!1)}})}},function(e,t,r){"use strict";function n(e,t){o.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function i(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}e.exports=n;var o=r(43);((n.prototype=Object.create(o.prototype)).constructor=n).className="Type";var a=r(20),s=r(51),c=r(27),u=r(67),f=r(68),d=r(70),l=r(65),h=r(64),p=r(6),_=r(103),m=r(104),v=r(105),b=r(106),y=r(107);Object.defineProperties(n.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=p.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=p.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=n.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof d||((e.prototype=new d).constructor=e,p.merge(e.prototype,t)),e.$type=e.prototype.$type=this,p.merge(e,d,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:p.oneOfGetter(this._oneofsArray[r].oneof),set:p.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),n.generateConstructor=function(e){for(var t,r=p.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",p.safeProp(t.name)):t.repeated&&r("this%s=[]",p.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},n.fromJSON=function(e,t){var r=new n(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var i=Object.keys(t.fields),d=0;d<i.length;++d)r.add((void 0!==t.fields[i[d]].keyType?u.fromJSON:c.fromJSON)(i[d],t.fields[i[d]]));if(t.oneofs)for(i=Object.keys(t.oneofs),d=0;d<i.length;++d)r.add(s.fromJSON(i[d],t.oneofs[i[d]]));if(t.nested)for(i=Object.keys(t.nested),d=0;d<i.length;++d){var l=t.nested[i[d]];r.add((void 0!==l.id?c.fromJSON:void 0!==l.fields?n.fromJSON:void 0!==l.values?a.fromJSON:void 0!==l.methods?f.fromJSON:o.fromJSON)(i[d],l))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},n.prototype.toJSON=function(e){var t=o.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return p.toObject(["options",t&&t.options||void 0,"oneofs",o.arrayToJSON(this.oneofsArray,e),"fields",o.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},n.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return o.prototype.resolveAll.call(this)},n.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},n.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof c&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),i(this)}return e instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),i(this)):o.prototype.add.call(this,e)},n.prototype.remove=function(e){if(e instanceof c&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),i(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),i(this)}return o.prototype.remove.call(this,e)},n.prototype.isReservedId=function(e){return o.isReservedId(this.reserved,e)},n.prototype.isReservedName=function(e){return o.isReservedName(this.reserved,e)},n.prototype.create=function(e){return new this.ctor(e)},n.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=_(this)({Writer:h,types:t,util:p}),this.decode=m(this)({Reader:l,types:t,util:p}),this.verify=v(this)({types:t,util:p}),this.fromObject=b.fromObject(this)({types:t,util:p}),this.toObject=b.toObject(this)({types:t,util:p});var n=y[e];if(n){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(i),i.toObject=this.toObject,this.toObject=n.toObject.bind(i)}return this},n.prototype.encode=function(e,t){return this.setup().encode(e,t)},n.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},n.prototype.decode=function(e,t){return this.setup().decode(e,t)},n.prototype.decodeDelimited=function(e){return e instanceof l||(e=l.create(e)),this.decode(e,e.uint32())},n.prototype.verify=function(e){return this.setup().verify(e)},n.prototype.fromObject=function(e){return this.setup().fromObject(e)},n.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},n.d=function(e){return function(t){p.decorateType(t,e)}}},function(e,t,r){"use strict";function n(e,t,r,n,i,a){if(o.call(this,e,t,n,void 0,void 0,i,a),!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=n;var o=r(27);((n.prototype=Object.create(o.prototype)).constructor=n).className="MapField";var a=r(32),s=r(6);n.fromJSON=function(e,t){return new n(e,t.id,t.keyType,t.type,t.options,t.comment)},n.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},n.prototype.resolve=function(){if(this.resolved)return this;if(void 0===a.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return o.prototype.resolve.call(this)},n.d=function(e,t,r){return"function"==typeof r?r=s.decorateType(r).name:r&&"object"===(void 0===r?"undefined":i(r))&&(r=s.decorateEnum(r).name),function(i,o){s.decorateType(i.constructor).add(new n(o,e,t,r))}}},function(e,t,r){"use strict";function n(e,t){o.call(this,e,t),this.methods={},this._methodsArray=null}function i(e){return e._methodsArray=null,e}e.exports=n;var o=r(43);((n.prototype=Object.create(o.prototype)).constructor=n).className="Service";var a=r(69),s=r(6),c=r(101);n.fromJSON=function(e,t){var r=new n(e,t.options);if(t.methods)for(var i=Object.keys(t.methods),o=0;o<i.length;++o)r.add(a.fromJSON(i[o],t.methods[i[o]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},n.prototype.toJSON=function(e){var t=o.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return s.toObject(["options",t&&t.options||void 0,"methods",o.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(n.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}}),n.prototype.get=function(e){return this.methods[e]||o.prototype.get.call(this,e)},n.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return o.prototype.resolve.call(this)},n.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof a?(this.methods[e.name]=e,e.parent=this,i(this)):o.prototype.add.call(this,e)},n.prototype.remove=function(e){if(e instanceof a){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,i(this)}return o.prototype.remove.call(this,e)},n.prototype.create=function(e,t,r){for(var n,i=new c.Service(e,t,r),o=0;o<this.methodsArray.length;++o){var a=s.lcFirst((n=this._methodsArray[o]).resolve().name).replace(/[^$\w_]/g,"");i[a]=s.codegen(["r","c"],s.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return i}},function(e,t,r){"use strict";function n(e,t,r,n,a,s,c,u){if(o.isObject(a)?(c=a,a=s=void 0):o.isObject(s)&&(c=s,s=void 0),void 0!==t&&!o.isString(t))throw TypeError("type must be a string");if(!o.isString(r))throw TypeError("requestType must be a string");if(!o.isString(n))throw TypeError("responseType must be a string");i.call(this,e,c),this.type=t||"rpc",this.requestType=r,this.requestStream=!!a||void 0,this.responseType=n,this.responseStream=!!s||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u}e.exports=n;var i=r(31);((n.prototype=Object.create(i.prototype)).constructor=n).className="Method";var o=r(6);n.fromJSON=function(e,t){return new n(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment)},n.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0])},n.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),i.prototype.resolve.call(this))}},function(e,t,r){"use strict";function n(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}e.exports=n;var i=r(22);n.create=function(e){return this.$type.create(e)},n.encode=function(e,t){return this.$type.encode(e,t)},n.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},n.decode=function(e){return this.$type.decode(e)},n.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},n.verify=function(e){return this.$type.verify(e)},n.fromObject=function(e){return this.$type.fromObject(e)},n.toObject=function(e,t){return this.$type.toObject(e,t)},n.prototype.toJSON=function(){return this.$type.toObject(this,i.toJSONOptions)}},function(e,t,r){"use strict";function n(e){a.call(this,"",e),this.deferred=[],this.files=[]}function i(){}function o(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new f(t.fullName,t.id,t.type,t.rule,void 0,t.options);return n.declaringField=t,t.extensionField=n,r.add(n),!0}return!1}e.exports=n;var a=r(43);((n.prototype=Object.create(a.prototype)).constructor=n).className="Root";var s,c,u,f=r(27),d=r(20),l=r(51),h=r(6);n.fromJSON=function(e,t){return t||(t=new n),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},n.prototype.resolvePath=h.path.resolve,n.prototype.load=function e(t,r,n){function o(e,t){if(n){var r=n;if(n=null,l)throw e;r(e,t)}}function a(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in u)return r}return null}function s(e,t){try{if(h.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),h.isString(t)){c.filename=e;var n,i=c(t,d,r),s=0;if(i.imports)for(;s<i.imports.length;++s)(n=a(i.imports[s])||d.resolvePath(e,i.imports[s]))&&f(n);if(i.weakImports)for(s=0;s<i.weakImports.length;++s)(n=a(i.weakImports[s])||d.resolvePath(e,i.weakImports[s]))&&f(n,!0)}else d.setOptions(t.options).addJSON(t.nested)}catch(e){o(e)}l||p||o(null,d)}function f(e,t){if(!(d.files.indexOf(e)>-1)){if(d.files.push(e),e in u)return void(l?s(e,u[e]):(++p,setTimeout(function(){--p,s(e,u[e])})));if(l){var r;try{r=h.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||o(e))}s(e,r)}else++p,h.fetch(e,function(r,i){if(--p,n)return r?void(t?p||o(null,d):o(r)):void s(e,i)})}}"function"==typeof r&&(n=r,r=void 0);var d=this;if(!n)return h.asPromise(e,d,t,r);var l=n===i,p=0;h.isString(t)&&(t=[t]);for(var _,m=0;m<t.length;++m)(_=d.resolvePath("",t[m]))&&f(_);if(l)return d;p||o(null,d)},n.prototype.loadSync=function(e,t){if(!h.isNode)throw Error("not supported");return this.load(e,t,i)},n.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return a.prototype.resolveAll.call(this)};var p=/^[A-Z]/;n.prototype._handleAdd=function(e){if(e instanceof f)void 0===e.extend||e.extensionField||o(this,e)||this.deferred.push(e);else if(e instanceof d)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof l)){if(e instanceof s)for(var t=0;t<this.deferred.length;)o(this,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);p.test(e.name)&&(e.parent[e.name]=e)}},n.prototype._handleRemove=function(e){if(e instanceof f){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof d)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof a){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);p.test(e.name)&&delete e.parent[e.name]}},n._configure=function(e,t,r){s=e,c=t,u=r}},function(e,t,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,r){"use strict";function n(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,n=-271733879,i=-1732584194,f=271733878,d=0;d<e.length;d+=16){var l=r,h=n,p=i,_=f;r=o(r,n,i,f,e[d+0],7,-680876936),f=o(f,r,n,i,e[d+1],12,-389564586),i=o(i,f,r,n,e[d+2],17,606105819),n=o(n,i,f,r,e[d+3],22,-1044525330),r=o(r,n,i,f,e[d+4],7,-176418897),f=o(f,r,n,i,e[d+5],12,1200080426),i=o(i,f,r,n,e[d+6],17,-1473231341),n=o(n,i,f,r,e[d+7],22,-45705983),r=o(r,n,i,f,e[d+8],7,1770035416),f=o(f,r,n,i,e[d+9],12,-1958414417),i=o(i,f,r,n,e[d+10],17,-42063),n=o(n,i,f,r,e[d+11],22,-1990404162),r=o(r,n,i,f,e[d+12],7,1804603682),f=o(f,r,n,i,e[d+13],12,-40341101),i=o(i,f,r,n,e[d+14],17,-1502002290),n=o(n,i,f,r,e[d+15],22,1236535329),r=a(r,n,i,f,e[d+1],5,-165796510),f=a(f,r,n,i,e[d+6],9,-1069501632),i=a(i,f,r,n,e[d+11],14,643717713),n=a(n,i,f,r,e[d+0],20,-373897302),r=a(r,n,i,f,e[d+5],5,-701558691),f=a(f,r,n,i,e[d+10],9,38016083),i=a(i,f,r,n,e[d+15],14,-660478335),n=a(n,i,f,r,e[d+4],20,-405537848),r=a(r,n,i,f,e[d+9],5,568446438),f=a(f,r,n,i,e[d+14],9,-1019803690),i=a(i,f,r,n,e[d+3],14,-187363961),n=a(n,i,f,r,e[d+8],20,1163531501),r=a(r,n,i,f,e[d+13],5,-1444681467),f=a(f,r,n,i,e[d+2],9,-51403784),i=a(i,f,r,n,e[d+7],14,1735328473),n=a(n,i,f,r,e[d+12],20,-1926607734),r=s(r,n,i,f,e[d+5],4,-378558),f=s(f,r,n,i,e[d+8],11,-2022574463),i=s(i,f,r,n,e[d+11],16,1839030562),n=s(n,i,f,r,e[d+14],23,-35309556),r=s(r,n,i,f,e[d+1],4,-1530992060),f=s(f,r,n,i,e[d+4],11,1272893353),i=s(i,f,r,n,e[d+7],16,-155497632),n=s(n,i,f,r,e[d+10],23,-1094730640),r=s(r,n,i,f,e[d+13],4,681279174),f=s(f,r,n,i,e[d+0],11,-358537222),i=s(i,f,r,n,e[d+3],16,-722521979),n=s(n,i,f,r,e[d+6],23,76029189),r=s(r,n,i,f,e[d+9],4,-640364487),f=s(f,r,n,i,e[d+12],11,-421815835),i=s(i,f,r,n,e[d+15],16,530742520),n=s(n,i,f,r,e[d+2],23,-995338651),r=c(r,n,i,f,e[d+0],6,-198630844),f=c(f,r,n,i,e[d+7],10,1126891415),i=c(i,f,r,n,e[d+14],15,-1416354905),n=c(n,i,f,r,e[d+5],21,-57434055),r=c(r,n,i,f,e[d+12],6,1700485571),f=c(f,r,n,i,e[d+3],10,-1894986606),i=c(i,f,r,n,e[d+10],15,-1051523),n=c(n,i,f,r,e[d+1],21,-2054922799),r=c(r,n,i,f,e[d+8],6,1873313359),f=c(f,r,n,i,e[d+15],10,-30611744),i=c(i,f,r,n,e[d+6],15,-1560198380),n=c(n,i,f,r,e[d+13],21,1309151649),r=c(r,n,i,f,e[d+4],6,-145523070),f=c(f,r,n,i,e[d+11],10,-1120210379),i=c(i,f,r,n,e[d+2],15,718787259),n=c(n,i,f,r,e[d+9],21,-343485551),r=u(r,l),n=u(n,h),i=u(i,p),f=u(f,_)}return[r,n,i,f]}function i(e,t,r,n,i,o){return u(f(u(u(t,e),u(n,o)),i),r)}function o(e,t,r,n,o,a,s){return i(t&r|~t&n,e,t,o,a,s)}function a(e,t,r,n,o,a,s){return i(t&n|r&~n,e,t,o,a,s)}function s(e,t,r,n,o,a,s){return i(t^r^n,e,t,o,a,s)}function c(e,t,r,n,o,a,s){return i(r^(t|~n),e,t,o,a,s)}function u(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function f(e,t){return e<<t|e>>>32-t}var d=r(244);e.exports=function(e){return d(e,n)}},function(e,t,r){"use strict";(function(t){function n(){d.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function i(e,t){return e<<t|e>>>32-t}function o(e,t,r,n,o,a,s,c){return i(e+(t^r^n)+a+s|0,c)+o|0}function a(e,t,r,n,o,a,s,c){return i(e+(t&r|~t&n)+a+s|0,c)+o|0}function s(e,t,r,n,o,a,s,c){return i(e+((t|~r)^n)+a+s|0,c)+o|0}function c(e,t,r,n,o,a,s,c){return i(e+(t&n|r&~n)+a+s|0,c)+o|0}function u(e,t,r,n,o,a,s,c){return i(e+(t^(r|~n))+a+s|0,c)+o|0}var f=r(1),d=r(245);f(n,d),n.prototype._update=function(){for(var e=new Array(16),t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,f=this._c,d=this._d,l=this._e;r=o(r,n,f,d,l,e[0],0,11),f=i(f,10),l=o(l,r,n,f,d,e[1],0,14),n=i(n,10),d=o(d,l,r,n,f,e[2],0,15),r=i(r,10),f=o(f,d,l,r,n,e[3],0,12),l=i(l,10),n=o(n,f,d,l,r,e[4],0,5),d=i(d,10),r=o(r,n,f,d,l,e[5],0,8),f=i(f,10),l=o(l,r,n,f,d,e[6],0,7),n=i(n,10),d=o(d,l,r,n,f,e[7],0,9),r=i(r,10),f=o(f,d,l,r,n,e[8],0,11),l=i(l,10),n=o(n,f,d,l,r,e[9],0,13),d=i(d,10),r=o(r,n,f,d,l,e[10],0,14),f=i(f,10),l=o(l,r,n,f,d,e[11],0,15),n=i(n,10),d=o(d,l,r,n,f,e[12],0,6),r=i(r,10),f=o(f,d,l,r,n,e[13],0,7),l=i(l,10),n=o(n,f,d,l,r,e[14],0,9),d=i(d,10),r=o(r,n,f,d,l,e[15],0,8),f=i(f,10),l=a(l,r,n,f,d,e[7],1518500249,7),n=i(n,10),d=a(d,l,r,n,f,e[4],1518500249,6),r=i(r,10),f=a(f,d,l,r,n,e[13],1518500249,8),l=i(l,10),n=a(n,f,d,l,r,e[1],1518500249,13),d=i(d,10),r=a(r,n,f,d,l,e[10],1518500249,11),f=i(f,10),l=a(l,r,n,f,d,e[6],1518500249,9),n=i(n,10),d=a(d,l,r,n,f,e[15],1518500249,7),r=i(r,10),f=a(f,d,l,r,n,e[3],1518500249,15),l=i(l,10),n=a(n,f,d,l,r,e[12],1518500249,7),d=i(d,10),r=a(r,n,f,d,l,e[0],1518500249,12),f=i(f,10),l=a(l,r,n,f,d,e[9],1518500249,15),n=i(n,10),d=a(d,l,r,n,f,e[5],1518500249,9),r=i(r,10),f=a(f,d,l,r,n,e[2],1518500249,11),l=i(l,10),n=a(n,f,d,l,r,e[14],1518500249,7),d=i(d,10),r=a(r,n,f,d,l,e[11],1518500249,13),f=i(f,10),l=a(l,r,n,f,d,e[8],1518500249,12),n=i(n,10),d=s(d,l,r,n,f,e[3],1859775393,11),r=i(r,10),f=s(f,d,l,r,n,e[10],1859775393,13),l=i(l,10),n=s(n,f,d,l,r,e[14],1859775393,6),d=i(d,10),r=s(r,n,f,d,l,e[4],1859775393,7),f=i(f,10),l=s(l,r,n,f,d,e[9],1859775393,14),n=i(n,10),d=s(d,l,r,n,f,e[15],1859775393,9),r=i(r,10),f=s(f,d,l,r,n,e[8],1859775393,13),l=i(l,10),n=s(n,f,d,l,r,e[1],1859775393,15),d=i(d,10),r=s(r,n,f,d,l,e[2],1859775393,14),f=i(f,10),l=s(l,r,n,f,d,e[7],1859775393,8),n=i(n,10),d=s(d,l,r,n,f,e[0],1859775393,13),r=i(r,10),f=s(f,d,l,r,n,e[6],1859775393,6),l=i(l,10),n=s(n,f,d,l,r,e[13],1859775393,5),d=i(d,10),r=s(r,n,f,d,l,e[11],1859775393,12),f=i(f,10),l=s(l,r,n,f,d,e[5],1859775393,7),n=i(n,10),d=s(d,l,r,n,f,e[12],1859775393,5),r=i(r,10),f=c(f,d,l,r,n,e[1],2400959708,11),l=i(l,10),n=c(n,f,d,l,r,e[9],2400959708,12),d=i(d,10),r=c(r,n,f,d,l,e[11],2400959708,14),f=i(f,10),l=c(l,r,n,f,d,e[10],2400959708,15),n=i(n,10),d=c(d,l,r,n,f,e[0],2400959708,14),r=i(r,10),f=c(f,d,l,r,n,e[8],2400959708,15),l=i(l,10),n=c(n,f,d,l,r,e[12],2400959708,9),d=i(d,10),r=c(r,n,f,d,l,e[4],2400959708,8),f=i(f,10),l=c(l,r,n,f,d,e[13],2400959708,9),n=i(n,10),d=c(d,l,r,n,f,e[3],2400959708,14),r=i(r,10),f=c(f,d,l,r,n,e[7],2400959708,5),l=i(l,10),n=c(n,f,d,l,r,e[15],2400959708,6),d=i(d,10),r=c(r,n,f,d,l,e[14],2400959708,8),f=i(f,10),l=c(l,r,n,f,d,e[5],2400959708,6),n=i(n,10),d=c(d,l,r,n,f,e[6],2400959708,5),r=i(r,10),f=c(f,d,l,r,n,e[2],2400959708,12),l=i(l,10),n=u(n,f,d,l,r,e[4],2840853838,9),d=i(d,10),r=u(r,n,f,d,l,e[0],2840853838,15),f=i(f,10),l=u(l,r,n,f,d,e[5],2840853838,5),n=i(n,10),d=u(d,l,r,n,f,e[9],2840853838,11),r=i(r,10),f=u(f,d,l,r,n,e[7],2840853838,6),l=i(l,10),n=u(n,f,d,l,r,e[12],2840853838,8),d=i(d,10),r=u(r,n,f,d,l,e[2],2840853838,13),f=i(f,10),l=u(l,r,n,f,d,e[10],2840853838,12),n=i(n,10),d=u(d,l,r,n,f,e[14],2840853838,5),r=i(r,10),f=u(f,d,l,r,n,e[1],2840853838,12),l=i(l,10),n=u(n,f,d,l,r,e[3],2840853838,13),d=i(d,10),r=u(r,n,f,d,l,e[8],2840853838,14),f=i(f,10),l=u(l,r,n,f,d,e[11],2840853838,11),n=i(n,10),d=u(d,l,r,n,f,e[6],2840853838,8),r=i(r,10),f=u(f,d,l,r,n,e[15],2840853838,5),l=i(l,10),n=u(n,f,d,l,r,e[13],2840853838,6),d=i(d,10);var h=this._a,p=this._b,_=this._c,m=this._d,v=this._e;h=u(h,p,_,m,v,e[5],1352829926,8),_=i(_,10),v=u(v,h,p,_,m,e[14],1352829926,9),p=i(p,10),m=u(m,v,h,p,_,e[7],1352829926,9),h=i(h,10),_=u(_,m,v,h,p,e[0],1352829926,11),v=i(v,10),p=u(p,_,m,v,h,e[9],1352829926,13),m=i(m,10),h=u(h,p,_,m,v,e[2],1352829926,15),_=i(_,10),v=u(v,h,p,_,m,e[11],1352829926,15),p=i(p,10),m=u(m,v,h,p,_,e[4],1352829926,5),h=i(h,10),_=u(_,m,v,h,p,e[13],1352829926,7),v=i(v,10),p=u(p,_,m,v,h,e[6],1352829926,7),m=i(m,10),h=u(h,p,_,m,v,e[15],1352829926,8),_=i(_,10),v=u(v,h,p,_,m,e[8],1352829926,11),p=i(p,10),m=u(m,v,h,p,_,e[1],1352829926,14),h=i(h,10),_=u(_,m,v,h,p,e[10],1352829926,14),v=i(v,10),p=u(p,_,m,v,h,e[3],1352829926,12),m=i(m,10),h=u(h,p,_,m,v,e[12],1352829926,6),_=i(_,10),v=c(v,h,p,_,m,e[6],1548603684,9),p=i(p,10),m=c(m,v,h,p,_,e[11],1548603684,13),h=i(h,10),_=c(_,m,v,h,p,e[3],1548603684,15),v=i(v,10),p=c(p,_,m,v,h,e[7],1548603684,7),m=i(m,10),h=c(h,p,_,m,v,e[0],1548603684,12),_=i(_,10),v=c(v,h,p,_,m,e[13],1548603684,8),p=i(p,10),m=c(m,v,h,p,_,e[5],1548603684,9),h=i(h,10),_=c(_,m,v,h,p,e[10],1548603684,11),v=i(v,10),p=c(p,_,m,v,h,e[14],1548603684,7),m=i(m,10),h=c(h,p,_,m,v,e[15],1548603684,7),_=i(_,10),v=c(v,h,p,_,m,e[8],1548603684,12),p=i(p,10),m=c(m,v,h,p,_,e[12],1548603684,7),h=i(h,10),_=c(_,m,v,h,p,e[4],1548603684,6),v=i(v,10),p=c(p,_,m,v,h,e[9],1548603684,15),m=i(m,10),h=c(h,p,_,m,v,e[1],1548603684,13),_=i(_,10),v=c(v,h,p,_,m,e[2],1548603684,11),p=i(p,10),m=s(m,v,h,p,_,e[15],1836072691,9),h=i(h,10),_=s(_,m,v,h,p,e[5],1836072691,7),v=i(v,10),p=s(p,_,m,v,h,e[1],1836072691,15),m=i(m,10),h=s(h,p,_,m,v,e[3],1836072691,11),_=i(_,10),v=s(v,h,p,_,m,e[7],1836072691,8),p=i(p,10),m=s(m,v,h,p,_,e[14],1836072691,6),h=i(h,10),_=s(_,m,v,h,p,e[6],1836072691,6),v=i(v,10),p=s(p,_,m,v,h,e[9],1836072691,14),m=i(m,10),h=s(h,p,_,m,v,e[11],1836072691,12),_=i(_,10),v=s(v,h,p,_,m,e[8],1836072691,13),p=i(p,10),m=s(m,v,h,p,_,e[12],1836072691,5),h=i(h,10),_=s(_,m,v,h,p,e[2],1836072691,14),v=i(v,10),p=s(p,_,m,v,h,e[10],1836072691,13),m=i(m,10),h=s(h,p,_,m,v,e[0],1836072691,13),_=i(_,10),v=s(v,h,p,_,m,e[4],1836072691,7),p=i(p,10),m=s(m,v,h,p,_,e[13],1836072691,5),h=i(h,10),_=a(_,m,v,h,p,e[8],2053994217,15),v=i(v,10),p=a(p,_,m,v,h,e[6],2053994217,5),m=i(m,10),h=a(h,p,_,m,v,e[4],2053994217,8),_=i(_,10),v=a(v,h,p,_,m,e[1],2053994217,11),p=i(p,10),m=a(m,v,h,p,_,e[3],2053994217,14),h=i(h,10),_=a(_,m,v,h,p,e[11],2053994217,14),v=i(v,10),p=a(p,_,m,v,h,e[15],2053994217,6),m=i(m,10),h=a(h,p,_,m,v,e[0],2053994217,14),_=i(_,10),v=a(v,h,p,_,m,e[5],2053994217,6),p=i(p,10),m=a(m,v,h,p,_,e[12],2053994217,9),h=i(h,10),_=a(_,m,v,h,p,e[2],2053994217,12),v=i(v,10),p=a(p,_,m,v,h,e[13],2053994217,9),m=i(m,10),h=a(h,p,_,m,v,e[9],2053994217,12),_=i(_,10),v=a(v,h,p,_,m,e[7],2053994217,5),p=i(p,10),m=a(m,v,h,p,_,e[10],2053994217,15),h=i(h,10),_=a(_,m,v,h,p,e[14],2053994217,8),v=i(v,10),p=o(p,_,m,v,h,e[12],0,8),m=i(m,10),h=o(h,p,_,m,v,e[15],0,5),_=i(_,10),v=o(v,h,p,_,m,e[10],0,12),p=i(p,10),m=o(m,v,h,p,_,e[4],0,9),h=i(h,10),_=o(_,m,v,h,p,e[1],0,12),v=i(v,10),p=o(p,_,m,v,h,e[5],0,5),m=i(m,10),h=o(h,p,_,m,v,e[8],0,14),_=i(_,10),v=o(v,h,p,_,m,e[7],0,6),p=i(p,10),m=o(m,v,h,p,_,e[6],0,8),h=i(h,10),_=o(_,m,v,h,p,e[2],0,13),v=i(v,10),p=o(p,_,m,v,h,e[13],0,6),m=i(m,10),h=o(h,p,_,m,v,e[14],0,5),_=i(_,10),v=o(v,h,p,_,m,e[0],0,15),p=i(p,10),m=o(m,v,h,p,_,e[3],0,13),h=i(h,10),_=o(_,m,v,h,p,e[9],0,11),v=i(v,10),p=o(p,_,m,v,h,e[11],0,11),m=i(m,10);var b=this._b+f+m|0;this._b=this._c+d+v|0,this._c=this._d+l+h|0,this._d=this._e+r+p|0,this._e=this._a+n+_|0,this._a=b},n.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=new t(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=n}).call(t,r(4).Buffer)},function(e,t,r){"use strict";function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"===(void 0===e?"undefined":c(e))&&null!==e}function s(e){return void 0===e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,o,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}if(r=this._events[e],s(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(a(r))for(o=Array.prototype.slice.call(arguments,1),u=r.slice(),n=u.length,c=0;c<n;c++)u[c].apply(this,o);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(s=o;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){"use strict";t=e.exports=r(114),t.Stream=t,t.Readable=t,t.Writable=r(77),t.Duplex=r(28),t.Transform=r(117),t.PassThrough=r(252)},function(e,t,r){"use strict";(function(t,n,i){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){A(t,e)}}function a(e){return D.from(e)}function s(e){return D.isBuffer(e)||e instanceof L}function c(){}function u(e,t){T=T||r(28),e=e||{},this.objectMode=!!e.objectMode,t instanceof T&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){b(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function f(e){if(T=T||r(28),!(B.call(f,this)||this instanceof T))return new f(e);this._writableState=new u(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),x.call(this)}function d(e,t){var r=new Error("write after end");e.emit("error",r),O(t,r)}function l(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),O(n,o),i=!1),i}function h(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=D.from(t,r)),t}function p(e,t,r,n,i,o){if(!r){var a=h(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else _(e,t,!1,s,n,i,o);return c}function _(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function m(e,t,r,n,i){--t.pendingcb,r?(O(i,n),O(R,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),R(e,t))}function v(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function b(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(v(r),t)m(e,r,n,t,i);else{var o=w(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||S(e,r),n?M(y,e,r,o,i):y(e,r,o,i)}}function y(e,t,r,n){r||g(e,t),t.pendingcb--,n(),R(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function S(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var s=0,c=!0;r;)i[s]=r,r.isBuf||(c=!1),r=r.next,s+=1;i.allBuffers=c,_(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t)}else{for(;r;){var u=r.chunk,f=r.encoding,d=r.callback;if(_(e,t,!1,t.objectMode?1:u.length,u,f,d),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function k(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),R(e,t)})}function E(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,O(k,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function R(e,t){var r=w(t);return r&&(E(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function C(e,t,r){t.ending=!0,R(e,t),r&&(t.finished?O(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function A(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var O=r(53);e.exports=f;var T,M=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:O;f.WritableState=u;var P=r(45);P.inherits=r(1);var I={deprecate:r(251)},x=r(115),D=r(3).Buffer,L=i.Uint8Array||function(){},N=r(116);P.inherits(f,x),u.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(u.prototype,"buffer",{get:I.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var B;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(B=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(e){return!!B.call(this,e)||e&&e._writableState instanceof u}})):B=function(e){return e instanceof this},f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},f.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=s(e)&&!n.objectMode;return o&&!D.isBuffer(e)&&(e=a(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=c),n.ended?d(this,r):(o||l(this,n,e,r))&&(n.pendingcb++,i=p(this,n,o,e,t,r)),i},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||S(this,e))},f.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},f.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},f.prototype._writev=null,f.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||C(this,n,r)},Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),f.prototype.destroy=N.destroy,f.prototype._undestroy=N.undestroy,f.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,r(23),r(249).setImmediate,r(19))},function(e,t,r){"use strict";function n(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=n(e);if("string"!=typeof t&&(b.isEncoding===y||!y(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=i(e);var t;switch(this.encoding){case"utf16le":this.text=l,this.end=h,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=p,this.end=_,t=3;break;default:return this.write=m,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=b.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function s(e,t,r){var n=t.length-1;if(n<r)return 0;var i=a(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r?0:(i=a(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r?0:(i=a(t[n]),i>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0)}function c(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"".repeat(r);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"".repeat(r+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"".repeat(r+2)}}function u(e){var t=this.lastTotal-this.lastNeed,r=c(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function f(e,t){var r=s(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"".repeat(this.lastTotal-this.lastNeed):t}function l(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function h(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function p(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function _(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function m(e){return e.toString(this.encoding)}function v(e){return e&&e.length?this.write(e):""}var b=r(3).Buffer,y=b.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=d,o.prototype.text=f,o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){"use strict";var n=e.exports=function(e){e=e.toLowerCase();var t=n[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};n.sha=r(257),n.sha1=r(258),n.sha224=r(259),n.sha256=r(118),n.sha384=r(260),n.sha512=r(119)},function(e,t,r){"use strict";function n(){return Object.keys(a)}var i=r(267),o=r(275),a=r(128);t.createCipher=t.Cipher=i.createCipher,t.createCipheriv=t.Cipheriv=i.createCipheriv,t.createDecipher=t.Decipher=o.createDecipher,t.createDecipheriv=t.Decipheriv=o.createDecipheriv,t.listCiphers=t.getCiphers=n},function(e,t,r){"use strict";var n={ECB:r(268),CBC:r(269),CFB:r(270),CFB8:r(271),CFB1:r(272),OFB:r(273),CTR:r(126),GCM:r(126)},i=r(128);for(var o in i)i[o].module=n[i[o].mode];e.exports=i},function(e,t,r){"use strict";t.utils=r(277),t.Cipher=r(278),t.DES=r(279),t.CBC=r(280),t.EDE=r(281)},function(e,t,r){"use strict";(function(t){function n(e){var t=o(e);return{blinder:t.toRed(a.mont(e.modulus)).redPow(new a(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}function i(e,r){var i=n(r),o=r.modulus.byteLength(),s=(a.mont(r.modulus),new a(e).mul(i.blinder).umod(r.modulus)),c=s.toRed(a.mont(r.prime1)),u=s.toRed(a.mont(r.prime2)),f=r.coefficient,d=r.prime1,l=r.prime2,h=c.redPow(r.exponent1),p=u.redPow(r.exponent2);h=h.fromRed(),p=p.fromRed();var _=h.isub(p).imul(f).umod(d);return _.imul(l),p.iadd(_),new t(p.imul(i.unblinder).umod(r.modulus).toArray(!1,o))}function o(e){for(var t=e.modulus.byteLength(),r=new a(s(t));r.cmp(e.modulus)>=0||!r.umod(e.prime1)||!r.umod(e.prime2);)r=new a(s(t));return r}var a=r(5),s=r(33);e.exports=i,i.getr=o}).call(t,r(4).Buffer)},function(e,t,r){"use strict";var n=t;n.utils=r(21),n.common=r(47),n.sha=r(297),n.ripemd=r(301),n.hmac=r(302),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(339),s=n(a),c=r(91),u=n(c),f=function(){function e(t){i(this,e),this._dispatcher=t,this._configLocalCameraPublish=!0,this._configLocalScreenPublish=!1,this._configLocalAudioPublish=!0,this._isScreenSharing=!1,this._isAudioOnly=!1,this._options=null,this._enableAudioVolumeIndicator=!1,this._outputDeviceId=""}return o(e,[{key:"InitOption",value:function(e){this._options?this._options.initOption(e):this._options=new s.default(e)}},{key:"dispatchEvent",value:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();t&&this._dispatcher&&(1===e.length?this._dispatcher.dispatchEvent(t,e[0]):2===e.length?this._dispatcher.dispatchEvent(t,e[0],e[1]):3===e.length?this._dispatcher.dispatchEvent(t,e[0],e[1],e[2]):this._dispatcher.dispatchEvent(t,e))}},{key:"isDebug",get:function(){return this._options.isDebug}},{key:"isReceiveOnly",get:function(){return this._options.isReceiveOnly}},{key:"customPlay",get:function(){return this._options.customPlay}},{key:"isScreenSharing",set:function(e){this._isScreenSharing=e},get:function(){return this._isScreenSharing}},{key:"configLocalCameraPublish",set:function(e){this._configLocalCameraPublish=e},get:function(){return this._configLocalCameraPublish}},{key:"configLocalScreenPublish",set:function(e){this._configLocalScreenPublish=e},get:function(){return this._configLocalScreenPublish}},{key:"configLocalAudioPublish",set:function(e){this._configLocalAudioPublish=e},get:function(){return this._configLocalAudioPublish}},{key:"bandwidthEstimation",set:function(e){e!=u.default.TransportCC&&e!=u.default.GoogRemb||(this._bandwidthEstimation=e)},get:function(){return this._bandwidthEstimation}},{key:"isAudioOnly",set:function(e){this._isAudioOnly=e},get:function(){return this._isAudioOnly}},{key:"enableAudioVolumeIndicator",set:function(e){this._enableAudioVolumeIndicator=e},get:function(){return this._enableAudioVolumeIndicator}},{key:"outputDeviceId",get:function(){return this._outputDeviceId},set:function(e){this._outputDeviceId=e}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(37),s=n(a),c=r(7),u=n(c),f=r(8),d=n(f),l=function(){function e(t,r,n,o,a,s){i(this,e),this._log=s,this._userId=t,this._common=a,this._streamConfig=[],this._authInfo=n,this._displayName=r,this._signalingManager=o,this._pcMonitor=null,this._iceConnectionStateTimer=0,this._params=null,this._conn=null}return o(e,[{key:"setAudioVolume",value:function(e){return!1}},{key:"getAudioVolume",value:function(){return-1}},{key:"getUserInfo",value:function(){var e={userId:this._userId,displayName:this._displayName,streamConfigs:[]};return this._streamConfig.forEach(function(t){e.streamConfigs.push({label:t.label,type:t.type,state:t.state,subscribed:t.subscribed,muted:!!t.muted})}),e}},{key:"updateStatus",value:function(e){0==this._streamConfig.length&&(this._streamConfig=[{label:d.default.Audio,state:"inactive",type:"audio"},{label:d.default.LargeVideo,state:"inactive",type:"video"},{label:d.default.SmallVideo,state:"inactive",type:"video"}]);for(var t=0;t<this._streamConfig.length;++t)this._streamConfig[t].label===d.default.Audio?this._streamConfig[t].muted=e.micMute:this._streamConfig[t].label!==d.default.LargeVideo&&this._streamConfig[t].label!=d.default.SmallVideo||(this._streamConfig[t].muted=e.cameraMute)}},{key:"clear",value:function(){this._conn&&(this._conn.onremovestream=function(){},this._conn.oniceconnectionstatechange=function(){},this._conn.onsignalingstatechange=function(){},this._conn.onicegatheringstatechange=function(){}),this._conn&&(this._conn.close(),this._conn=null)}},{key:"_createPeerConnection",value:function(){var e=[];e.push(this._authInfo.turn),this._params={peerConnectionConfig:{iceServers:e,iceTransportPolicy:"relay",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",iceCandidatePoolSize:0}};var t=this._params.peerConnectionConfig,r=void 0;try{if(u.default.isFirefox){r={sdpSemantics:"unified-plan",iceTransportPolicy:"relay",iceServers:[]};for(var n=t.iceServers[0].urls,i=0;i<n.length;++i)r.iceServers.push({username:t.iceServers[0].username,credential:t.iceServers[0].credential,urls:n[i]})}else r={iceServers:t.iceServers,googCpuOveruseDetection:!1,iceTransportPolicy:"relay"};this._conn=new RTCPeerConnection(r)}catch(e){}}},{key:"_filterIceCandidate",value:function(e){var t=e.candidate;return-1===t.indexOf("tcp")&&("relay"!==this._params.peerConnectionConfig.iceTransports||"relay"===s.default.iceCandidateType(t))}},{key:"_setRemoteDescription",value:function(e){return e.sdp=s.default.replace42e01fTo42001f(e.sdp),e.sdp=s.default.maybeSetOpusOptions(e.sdp,this._params),e.sdp=s.default.maybePreferAudioSendCodec(e.sdp,this._params),e.sdp=s.default.maybePreferVideoSendCodec(e.sdp,this._params),e.sdp=s.default.maybeSetAudioSendBitRate(e.sdp,this._params),e.sdp=s.default.maybeSetVideoSendBitRate(e.sdp,this._params),e.sdp=s.default.maybeSetVideoSendInitialBitRate(e.sdp,this._params),e.sdp=s.default.maybeRemoveVideoFec(e.sdp,this._params),this._conn.setRemoteDescription(new RTCSessionDescription(e))}},{key:"_setLocalDescription",value:function(e){var t=this;return e.sdp=s.default.replace42e01fTo42001f(e.sdp),e.sdp=s.default.maybePreferAudioReceiveCodec(e.sdp,this._params),e.sdp=s.default.maybePreferVideoReceiveCodec(e.sdp,this._params),e.sdp=s.default.maybeSetAudioReceiveBitRate(e.sdp,this._params),e.sdp=s.default.maybeSetVideoReceiveBitRate(e.sdp,this._params),e.sdp=s.default.maybeRemoveVideoFec(e.sdp,this._params),new Promise(function(r,n){s.default.hasH264(e.sdp)||n({message:"Does not support webrtc, because device can not support h264"}),t._conn.setLocalDescription(e).then(function(){r()}).catch(function(e){n(e)})})}},{key:"_clearIceConnectionStateTimer",value:function(){this._iceConnectionStateTimer&&(clearTimeout(this._iceConnectionStateTimer),this._iceConnectionStateTimer=0)}},{key:"userId",get:function(){return this._userId}},{key:"displayName",get:function(){return this._displayName}},{key:"conn",get:function(){return this._conn}},{key:"streamConfig",get:function(){return this._streamConfig},set:function(e){this._streamConfig=e}},{key:"isConnecting",get:function(){return null!=this._conn}}]),e}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={IOS_SAFARI:11,ANDROAD_CHROME:63,MACOS_SAFARI:11,MACOS_CHROME:60,MACOS_EDGE:80,WINDOWS_CHROME:60,WINDOWS_EDGE:80,LINUX_CHROME:60},i={CHROME:70,EDGE:80},o={CHROME:75,EDGE:80};t.BASE_VERSION=n,t.SCREENSHARE_VERSION=i,t.AUDIOMIX_VERSION=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(14),c=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(e,r,o,a){n(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s._common=e,s._userId=o,s._log=r,s._timerId=0,s._timerIndex=0,s._interval=1e3,s._monitor=null,s._monitorData=a,s._startMonitor(),s}return o(t,e),a(t,[{key:"_startMonitor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this._stopMonitor(),this._interval=e,this._startMonitorTimer()}},{key:"_stopMonitor",value:function(){this._stopMonitorTimer()}},{key:"releaseMonitor",value:function(){this._stopMonitor(),this._monitor&&this._monitor.dispose(),this._monitor=null}},{key:"_startMonitorTimer",value:function(){var e=this;this._stopMonitorTimer(),this._timerId=setInterval(function(){e._onMonitorTimer()},this._interval)}},{key:"_stopMonitorTimer",value:function(){this._timerId&&clearInterval(this._timerId),this._timerId=0}},{key:"_onMonitorTimer",value:function(){}},{key:"dispose",value:function(){}}]),t}(c.default);t.default=u},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this._peerConnection=t}return i(e,[{key:"getNetworkInfo",value:function(){return{lostrate:-1,rtt:-1}}},{key:"getStats",value:function(){return null}},{key:"dispose",value:function(){}},{key:"_getAudioInfo",value:function(e,t,r){}},{key:"_getVideoInfo",value:function(e,t,r,n){}}]),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CandidatePair:"candidate-pair",Certificate:"certificate",Codec:"codec",Csrc:"csrc",DataCahnnel:"data-channel",InboundRtp:"inbound-rtp",LocalCandidate:"local-candidate",OutboundRtp:"outbound-rtp",PeerConnection:"peer-connection",Receiver:"receiver",RemoteCandidate:"remote-candidate",RemoteInboundRtp:"remote-inbound-rtp",RemoteOutboundRtp:"remote-outbound-rtp",Sender:"sender",Stream:"stream",Track:"track",Transport:"transport",MediaSource:"media-source"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={GoogRemb:"goog-remb",TransportCC:"transport-cc"};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={AudioMixingPlayed:"AudioMixingPlayed",AudioMixingPaused:"AudioMixingPaused",AudioMixingFinished:"AudioMixingFinished",SetAudioMixingPosition:"SetAudioMixingPosition"}},function(e,t,r){"use strict";(function(e){var r,n,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*! audioutil - ver 1.1.11 created:2021-7-12 7:49:08 PM */
!function(a,s){if("object"==o(t)&&"object"==o(e))e.exports=s();else{n=[],r=s,void 0!==(i="function"==typeof r?r.apply(t,n):r)&&(e.exports=i)}}(self,function(){return function(){function e(n){var i=r[n];if(void 0!==i)return i.exports;var o=r[n]={exports:{}};return t[n].call(o.exports,o,o.exports,e),o.exports}var t={355:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioContextUtil=void 0;var r=function(){function e(){}return e.getAudioContext=function(){if(!e.audioContext){var t=window.AudioContext||window.webkitAudioContext;t&&(e.audioContext=new t({sampleRate:48e3}))}return e.audioContext},e}();t.AudioContextUtil=r},515:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioMixer=void 0;var n=r(355),i=r(603),o=function(){function e(){this.audioContext=n.AudioContextUtil.getAudioContext()}return e.prototype.startMix=function(e,t){var r=this;return new Promise(function(n,o){r.audioContext?(r.mediaStreamSource=r.audioContext.createMediaStreamSource(e),r.mediaStreamDest=r.audioContext.createMediaStreamDestination(),r.musicNode=t.getGainNode(),r.musicNode?(r.mediaStreamSource.connect(r.mediaStreamDest),r.musicNode.connect(r.mediaStreamDest),r.player=t,n(r.mediaStreamDest.stream)):o({code:i.ErrorCode.ERROR_NOTSUPPORT_AUDIOCONTEXT,message:"not support AudioContext"})):o({code:i.ErrorCode.ERROR_NOTSUPPORT_AUDIOCONTEXT,message:"not support AudioContext"})})},e.prototype.stopMix=function(){this.audioContext&&this.musicNode&&(this.musicNode.disconnect(),this.player&&(this.player.mute=!1))},e}();t.AudioMixer=o},603:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorCode=void 0,function(e){e[e.ERROR_NOTSUPPORT_AUDIOCONTEXT=1e3]="ERROR_NOTSUPPORT_AUDIOCONTEXT",e[e.ERROR_AUTOPLAY_FAIL=1001]="ERROR_AUTOPLAY_FAIL",e[e.ERROR_NOT_ARRAYBUFFER=1101]="ERROR_NOT_ARRAYBUFFER",e[e.ERROR_PLAYTIME_ERROR=1102]="ERROR_PLAYTIME_ERROR"}(t.ErrorCode||(t.ErrorCode={}))},554:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AudioBufferPlayer=void 0;var o=r(603),a=r(314),s=function(e){function t(){var t=e.call(this)||this;return t.playbackTime=0,t.offsetTime=0,t}return i(t,e),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this.playerState===a.PlayerState.Playing||this.playerState===a.PlayerState.Loading},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var e=this.sourceNode;return e&&e.buffer?Math.round(1e3*e.buffer.duration):-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){var e=this.sourceNode;if(e&&e.context&&(a.PlayerState.Playing===this.playerState||a.PlayerState.Pause===this.playerState)){var t=Math.round(1e3*(e.context.currentTime-this.offsetTime+this.playbackTime));return t>this.duration?this.duration:t}return-1},set:function(e){this.sourceNode&&this.arrayBuffer&&(this.playbackTime=e/1e3,e<0?this.emit("error",{code:o.ErrorCode.ERROR_PLAYTIME_ERROR,reason:"currentTime out of range"}):e>=this.duration?(this.stop(),this.playerState=a.PlayerState.End,this.emit("ended")):(this.stop(),this.initPlay(this.arrayBuffer)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playbackRate",{get:function(){return this.sourceNode?this.sourceNode.playbackRate.value:1},set:function(e){this.sourceNode&&(this.sourceNode.playbackRate.value=e)},enumerable:!1,configurable:!0}),t.prototype.getGainNode=function(){return this.gainNode},t.prototype.play=function(e,t){var r=this;return void 0===t&&(t=0),new Promise(function(n,i){r.playerState===a.PlayerState.Loading?setTimeout(function(){r.play(e,t).then(function(){n()})},100):(r.playbackTime=t/1e3,r.stop(),r.audioContext?r.isArrayBuffer(e)?r.playArrayBuffer(e).then(function(){n()}).catch(function(e){i(e)}):i({code:o.ErrorCode.ERROR_NOT_ARRAYBUFFER,message:"source not ArrayBuffer"}):i({code:o.ErrorCode.ERROR_NOTSUPPORT_AUDIOCONTEXT,message:"not support AudioContext"}))})},t.prototype.pause=function(){var e;this.audioContext&&a.PlayerState.Playing===this.playerState&&(null===(e=this.audioContext)||void 0===e||e.suspend(),this.playerState=a.PlayerState.Pause)},t.prototype.stop=function(){var t;this.state===a.PlayerState.Pause&&(null===(t=this.audioContext)||void 0===t||t.resume()),this.sourceNode&&(this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode=void 0),e.prototype.stop.call(this)},t.prototype.isArrayBuffer=function(e){return e instanceof ArrayBuffer},t.prototype.playArrayBuffer=function(e){var t=this;return this.playerState=a.PlayerState.Loading,new Promise(function(r,n){t.audioContext?t.audioContext.decodeAudioData(e,function(e){t.initPlay(e),r()},function(e){t.playerState=a.PlayerState.End,n(e)}):(t.playerState=a.PlayerState.End,n({code:o.ErrorCode.ERROR_NOTSUPPORT_AUDIOCONTEXT,message:"not support AudioContext"}))})},t.prototype.initPlay=function(e){var t=this;this.audioContext&&(this.sourceNode=this.audioContext.createBufferSource(),this.arrayBuffer=e,this.sourceNode.buffer=this.arrayBuffer,this.playbackTime<0?(this.playerState=a.PlayerState.End,setTimeout(function(){t.emit("error",{code:o.ErrorCode.ERROR_PLAYTIME_ERROR,reason:"playTime out of range"})},10)):1e3*this.playbackTime>this.duration?(this.sourceNode=void 0,this.playerState=a.PlayerState.End,setTimeout(function(){t.emit("ended")},10)):(this.sourceNode.onended=function(){t.playerState=a.PlayerState.End,t.emit("ended")},this.playNode()))},t.prototype.playNode=function(){if(e.prototype.playNode.call(this),this.sourceNode){var t=this.sourceNode;t.start(0,this.playbackTime),this.playerState=a.PlayerState.Playing,t.context&&(this.offsetTime=t.context.currentTime)}},t}(a.BasePlayer);t.AudioBufferPlayer=s},159:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AudioMediaStreamPlayer=void 0;var o=function(e){function t(){var t=e.call(this)||this;return t.audioVolume=1,t.audioMuted=!1,t}return i(t,e),t.prototype.initMediaStream=function(e){return!!(this.audioContext&&this.isMediaStream(e)&&(this.sourceNode=this.audioContext.createMediaStreamSource(e),this.sourceNode))},t.prototype.play=function(e){return this.stop(),!!this.initMediaStream(e)&&(this.playNode(),!0)},t.prototype.stop=function(){this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),e.prototype.stop.call(this)},t.prototype.isMediaStream=function(e){return e instanceof MediaStream},t}(r(314).BasePlayer);t.AudioMediaStreamPlayer=o},314:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.BasePlayer=t.PlayerState=void 0;var o,a=r(125),s=r(603),c=r(355);!function(e){e[e.Init=0]="Init",e[e.Loading=1]="Loading",e[e.Playing=2]="Playing",e[e.Pause=3]="Pause",e[e.Stop=4]="Stop",e[e.End=5]="End"}(o=t.PlayerState||(t.PlayerState={}));var u=function(e){function t(){var t=e.call(this)||this;return t.playerState=o.Init,t.audioLevelTimerId=0,t.audioVolume=1,t.audioMuted=!1,t.audioContext=c.AudioContextUtil.getAudioContext(),t.audioContext&&(t.gainNode=t.audioContext.createGain(),t.analyser=t.audioContext.createAnalyser(),t.biquadFilter=t.audioContext.createBiquadFilter(),t.timeDomainData=new Uint8Array(t.analyser.frequencyBinCount)),t}return i(t,e),Object.defineProperty(t.prototype,"volume",{get:function(){return this.audioVolume},set:function(e){this.audioVolume=e,this.gainNode&&(this.gainNode.gain.value=this.audioVolume)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mute",{set:function(e){this.audioMuted=e,this.audioMuted?this.gainNode&&this.audioContext&&this.gainNode.disconnect(this.audioContext.destination):this.gainNode&&this.audioContext&&this.gainNode.connect(this.audioContext.destination)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.playerState},enumerable:!1,configurable:!0}),t.prototype.resume=function(){var e=this;return new Promise(function(t,r){var n;o.Pause===e.playerState?null===(n=e.audioContext)||void 0===n||n.resume().then(function(){e.checkPlaying(),t()}).catch(function(e){r(e)}):r()})},t.prototype.stop=function(){this.gainNode&&this.gainNode.disconnect(),this.analyser&&this.analyser.disconnect(),this.playerState=o.Stop},t.prototype.startAudioLevel=function(e){var t=this;return void 0===e&&(e=500),this.audioLevelTimerId=window.setInterval(function(){var e=0;if(t.analyser&&t.timeDomainData){t.analyser.getByteTimeDomainData(t.timeDomainData);for(var r=0;r<t.timeDomainData.length;++r)e=Math.max(e,Math.abs(t.timeDomainData[r]-128))}t.emit("audioLevel",e)},e),!1},t.prototype.stopAudioLevel=function(){this.audioLevelTimerId&&(clearInterval(this.audioLevelTimerId),this.audioLevelTimerId=0)},t.prototype.playNode=function(){this.audioContext&&this.sourceNode&&this.gainNode&&this.analyser&&this.biquadFilter&&(this.sourceNode.connect(this.gainNode),this.audioMuted||this.gainNode.connect(this.audioContext.destination)),this.checkPlaying()},t.prototype.checkPlaying=function(){this.audioContext&&"suspended"===this.audioContext.state?(this.playerState=o.Pause,this.emit("autoPlayFail",{code:s.ErrorCode.ERROR_AUTOPLAY_FAIL,reason:"autoplay fail"})):this.playerState=o.Playing},t}(a.EventEmitter);t.BasePlayer=u},125:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;var r=function(){function e(){this._eventMap={}}return e.prototype.listeners=function(e){return this._eventMap[e]||[]},e.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=this._eventMap[e];return!!Array.isArray(i)&&(i.forEach(function(e){return e.apply(t,r)}),!0)},e.prototype.off=function(e,t){var r=this._eventMap[e];return Array.isArray(r)&&(this._eventMap[e]=r.filter(function(e){return e!==t})),this},e.prototype.removeAllListeners=function(e){return void 0===e?this._eventMap={}:this._eventMap[e]&&(this._eventMap[e]=[]),this},e.prototype.on=function(e,t){this._eventMap[e]?this._eventMap[e].push(t):this._eventMap[e]=[t]},e.prototype.once=function(e,t){var r=this,n=function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];r.off(e,n),t.apply(r,i)};return this.on(e,n),this},e}();t.EventEmitter=r}},r={},n={};return function(){var t=n;Object.defineProperty(t,"__esModule",{value:!0}),t.AudioMixer=t.AudioMediaStreamPlayer=t.AudioBufferPlayer=t.AudioContextUtil=void 0;var r=e(355);Object.defineProperty(t,"AudioContextUtil",{enumerable:!0,get:function(){return r.AudioContextUtil}});var i=e(159);Object.defineProperty(t,"AudioMediaStreamPlayer",{enumerable:!0,get:function(){return i.AudioMediaStreamPlayer}});var o=e(554);Object.defineProperty(t,"AudioBufferPlayer",{enumerable:!0,get:function(){return o.AudioBufferPlayer}});var a=e(515);Object.defineProperty(t,"AudioMixer",{enumerable:!0,get:function(){return a.AudioMixer}}),window&&(window.AudioContextUtil=r.AudioContextUtil,window.AudioMediaStreamPlayer=i.AudioMediaStreamPlayer,window.AudioBufferPlayer=o.AudioBufferPlayer,window.AudioMixer=a.AudioMixer)}(),n}()})}).call(t,r(40)(e))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={Init:0,Loading:1,Playing:2,Pause:3,Stop:4,End:5};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={CAMERA:1,SCREEN:2};t.default=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(205),a=function(){function e(){n(this,e)}return i(e,null,[{key:"isSupported",value:function(t,r,n,i){return new Promise(function(o,a){if(e.supportInfo.isChecking)return void a(e.supportInfo.checkresult);e.supportInfo.checkStart(t,r,i).then(function(e){n.reportSupportInfo(e),o(e)}).catch(function(e){n.reportSupportInfo(e),a(e)})})}}]),e}();t.default=a,a.supportInfo=new o.SupportInfo},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e)}return i(e,null,[{key:"create",value:function(e,t){var r,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||n.length,e)for(r=0;r<e;r++)i[r]=n[0|Math.random()*t];else{var o;for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",r=0;r<36;r++)i[r]||(o=0|16*Math.random(),i[r]=n[19==r?3&o|8:o])}return i.join("")}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.MessageCache=function(){function e(){n(this,e),this._cacheArr=[]}return i(e,[{key:"getCacheLength",value:function(){return this._cacheArr.length}},{key:"addCache",value:function(e){this._cacheArr.push(e)}},{key:"getAllCache",value:function(){return this._cacheArr.splice(0)}},{key:"getCache",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return e<=0||e>this._cacheArr.length?this._cacheArr.splice(0):this._cacheArr.splice(0,e)}}]),e}()},function(e,t,r){"use strict";function n(e,t){for(var r=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(i,a){r[n]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(e){o&&(o=!1,a(e))}})}e.exports=n},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,r){"use strict";t.Service=r(224)},function(e,t,r){"use strict";e.exports={}},function(e,t,r){"use strict";function n(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}function i(e){for(var t,r,i=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),c=e.fieldsArray.slice().sort(s.compareFieldsById),t=0;t<c.length;++t){var u=c[t].resolve(),f=e._fieldsArray.indexOf(u),d=u.resolvedType instanceof o?"int32":u.type,l=a.basic[d];r="m"+s.safeProp(u.name),u.map?(i("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",r,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",r)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|a.mapKey[u.keyType],u.keyType),void 0===l?i("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",f,r):i(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|l,d,r),i("}")("}")):u.repeated?(i("if(%s!=null&&%s.length){",r,r),u.packed&&void 0!==a.packed[d]?i("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",r)("w.%s(%s[i])",d,r)("w.ldelim()"):(i("for(var i=0;i<%s.length;++i)",r),void 0===l?n(i,u,f,r+"[i]"):i("w.uint32(%i).%s(%s[i])",(u.id<<3|l)>>>0,d,r)),i("}")):(u.optional&&i("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",r,u.name),void 0===l?n(i,u,f,r):i("w.uint32(%i).%s(%s)",(u.id<<3|l)>>>0,d,r))}return i("return w")}e.exports=i;var o=r(20),a=r(32),s=r(6)},function(e,t,r){"use strict";function n(e){return"missing required '"+e.name+"'"}function i(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var i=e._fieldsArray[r].resolve(),c=i.resolvedType instanceof o?"int32":i.type,u="m"+s.safeProp(i.name);t("case %i:",i.id),i.map?(t("r.skip().pos++")("if(%s===util.emptyObject)",u)("%s={}",u)("k=r.%s()",i.keyType)("r.pos++"),void 0!==a.long[i.keyType]?void 0===a.basic[c]?t('%s[typeof k==="object"?util.longToHash(k):k]=types[%i].decode(r,r.uint32())',u,r):t('%s[typeof k==="object"?util.longToHash(k):k]=r.%s()',u,c):void 0===a.basic[c]?t("%s[k]=types[%i].decode(r,r.uint32())",u,r):t("%s[k]=r.%s()",u,c)):i.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==a.packed[c]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,c)("}else"),void 0===a.basic[c]?t(i.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,r):t("%s.push(r.%s())",u,c)):void 0===a.basic[c]?t(i.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,r):t("%s=r.%s()",u,c),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var f=e._fieldsArray[r];f.required&&t("if(!m.hasOwnProperty(%j))",f.name)("throw util.ProtocolError(%j,{instance:m})",n(f))}return t("return m")}e.exports=i;var o=r(20),a=r(32),s=r(6)},function(e,t,r){"use strict";function n(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function i(e,t,r,i){if(t.resolvedType)if(t.resolvedType instanceof s){e("switch(%s){",i)("default:")("return%j",n(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),a=0;a<o.length;++a)e("case %i:",t.resolvedType.values[o[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",n(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",n(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",n(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",n(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",n(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",n(t,"buffer"))}return e}function o(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",n(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",n(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",n(t,"boolean key"))}return e}function a(e){var t=c.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,a={};r.length&&t("var p={}");for(var s=0;s<e.fieldsArray.length;++s){var u=e._fieldsArray[s].resolve(),f="m"+c.safeProp(u.name);if(u.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",f,u.name),u.map)t("if(!util.isObject(%s))",f)("return%j",n(u,"object"))("var k=Object.keys(%s)",f)("for(var i=0;i<k.length;++i){"),o(t,u,"k[i]"),i(t,u,s,f+"[k[i]]")("}");else if(u.repeated)t("if(!Array.isArray(%s))",f)("return%j",n(u,"array"))("for(var i=0;i<%s.length;++i){",f),i(t,u,s,f+"[i]")("}");else{if(u.partOf){var d=c.safeProp(u.partOf.name);1===a[u.partOf.name]&&t("if(p%s===1)",d)("return%j",u.partOf.name+": multiple values"),a[u.partOf.name]=1,t("p%s=1",d)}i(t,u,s,f)}u.optional&&t("}")}return t("return null")}e.exports=a;var s=r(20),c=r(6)},function(e,t,r){"use strict";function n(e,t,r,n){if(t.resolvedType)if(t.resolvedType instanceof a){e("switch(d%s){",n);for(var i=t.resolvedType.values,o=Object.keys(i),s=0;s<o.length;++s)t.repeated&&i[o[s]]===t.typeDefault&&e("default:"),e("case%j:",o[s])("case %i:",i[o[s]])("m%s=%j",n,i[o[s]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,c)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function i(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof a?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var i=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,i?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}var o=t,a=r(20),s=r(6);o.fromObject=function(e){var t=e.fieldsArray,r=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var i=0;i<t.length;++i){var o=t[i].resolve(),c=s.safeProp(o.name);o.map?(r("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),n(r,o,i,c+"[ks[i]]")("}")("}")):o.repeated?(r("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),n(r,o,i,c+"[i]")("}")("}")):(o.resolvedType instanceof a||r("if(d%s!=null){",c),n(r,o,i,c),o.resolvedType instanceof a||r("}"))}return r("return m")},o.toObject=function(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");for(var r=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],o=[],c=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?n:t[u].map?o:c).push(t[u]);if(n.length){for(r("if(o.arrays||o.defaults){"),u=0;u<n.length;++u)r("d%s=[]",s.safeProp(n[u].name));r("}")}if(o.length){for(r("if(o.objects||o.defaults){"),u=0;u<o.length;++u)r("d%s={}",s.safeProp(o[u].name));r("}")}if(c.length){for(r("if(o.defaults){"),u=0;u<c.length;++u){var f=c[u],d=s.safeProp(f.name);if(f.resolvedType instanceof a)r("d%s=o.enums===String?%j:%j",d,f.resolvedType.valuesById[f.typeDefault],f.typeDefault);else if(f.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",f.typeDefault.low,f.typeDefault.high,f.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,f.typeDefault.toString(),f.typeDefault.toNumber());else if(f.bytes){var l="["+Array.prototype.slice.call(f.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,f.typeDefault))("else{")("d%s=%s",d,l)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else r("d%s=%j",d,f.typeDefault)}r("}")}var h=!1;for(u=0;u<t.length;++u){var f=t[u],p=e._fieldsArray.indexOf(f),d=s.safeProp(f.name);f.map?(h||(h=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),i(r,f,p,d+"[ks2[j]]")("}")):f.repeated?(r("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),i(r,f,p,d+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",d,f.name),i(r,f,p,d),f.partOf&&r("if(o.oneofs)")("d%s=%j",s.safeProp(f.partOf.name),f.name)),r("}")}return r("return d")}},function(e,t,r){"use strict";var n=t,i=r(70);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=this.lookup(e["@type"]);if(t){var r="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return this.create({type_url:"/"+r,value:t.encode(t.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){if(t&&t.json&&e.type_url&&e.value){var r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=this.lookup(r);n&&(e=n.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var o=e.$type.toObject(e,t);return o["@type"]=e.$type.fullName,o}return this.toObject(e,t)}}},function(e,t,r){"use strict";function n(e){return e.replace(l,function(e,t){switch(t){case"\\":case"":return t;default:return h[t]||""}})}function i(e,t){function r(e){return Error("illegal "+e+" (line "+k+")")}function i(){var t="'"===T?s:a;t.lastIndex=S-1;var i=t.exec(e);if(!i)throw r("string");return S=t.lastIndex,v(T),T=null,n(i[1])}function l(t){return e.charAt(t)}function h(r,n){E=e.charAt(r++),C=k,A=!1;var i;i=t?2:3;var o,a=r-i;do{if(--a<0||"\n"===(o=e.charAt(a))){A=!0;break}}while(" "===o||"\t"===o);for(var s=e.substring(r,n).split(f),d=0;d<s.length;++d)s[d]=s[d].replace(t?u:c,"").trim();R=s.join("\n").trim()}function p(t){var r=_(t);return/^\s*\/{1,2}/.test(e.substring(t,r))}function _(e){for(var t=e;t<w&&"\n"!==l(t);)t++;return t}function m(){if(O.length>0)return O.shift();if(T)return i();var n,a,s,c,u;do{if(S===w)return null;for(n=!1;d.test(s=l(S));)if("\n"===s&&++k,++S===w)return null;if("/"===l(S)){if(++S===w)throw r("comment");if("/"===l(S))if(t){if(c=S,u=!1,p(S)){u=!0;do{if((S=_(S))===w)break;S++}while(p(S))}else S=Math.min(w,_(S)+1);u&&h(c,S),k++,n=!0}else{for(u="/"===l(c=S+1);"\n"!==l(++S);)if(S===w)return null;++S,u&&h(c,S-1),++k,n=!0}else{if("*"!==(s=l(S)))return"/";c=S+1,u=t||"*"===l(c);do{if("\n"===s&&++k,++S===w)throw r("comment");a=s,s=l(S)}while("*"!==a||"/"!==s);++S,u&&h(c,S-2),n=!0}}}while(n);var f=S;if(o.lastIndex=0,!o.test(l(f++)))for(;f<w&&!o.test(l(f));)++f;var m=e.substring(S,S=f);return'"'!==m&&"'"!==m||(T=m),m}function v(e){O.push(e)}function b(){if(!O.length){var e=m();if(null===e)return null;v(e)}return O[0]}function y(e,t){var n=b();if(n===e)return m(),!0;if(!t)throw r("token '"+n+"', '"+e+"' expected");return!1}function g(e){var r=null;return void 0===e?C===k-1&&(t||"*"===E||A)&&(r=R):(C<e&&b(),C!==e||A||!t&&"/"!==E||(r=R)),r}e=e.toString();var S=0,w=e.length,k=1,E=null,R=null,C=0,A=!1,O=[],T=null;return Object.defineProperty({next:m,peek:b,push:v,skip:y,cmnt:g},"line",{get:function(){return k}})}e.exports=i;var o=/[\s{}=;:[\],'"()<>]/g,a=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,s=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,c=/^ *[*\/]+ */,u=/^\s*\*?\/*/,f=/\n/g,d=/\s/,l=/\\(.?)/g,h={0:"\0",r:"\r",n:"\n",t:"\t"};i.unescape=n},function(e,t,r){"use strict";function n(e,t,r,n){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==r;){a=r>2e3?2e3:r,r-=a;do{i=i+t[n++]|0,o=o+i|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}e.exports=n},function(e,t,r){"use strict";function n(e,t,r,n){var o=i,a=n+r;e^=-1;for(var s=n;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}var i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=n},function(e,t,r){"use strict";function n(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}var i=r(24),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new i.Buf8(256),c=0;c<256;c++)s[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;s[254]=s[254]=1,t.string2buf=function(e){var t,r,n,o,a,s=e.length,c=0;for(o=0;o<s;o++)r=e.charCodeAt(o),55296==(64512&r)&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=new i.Buf8(c),a=0,o=0;a<c;o++)r=e.charCodeAt(o),55296==(64512&r)&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},t.buf2binstring=function(e){return n(e,e.length)},t.binstring2buf=function(e){for(var t=new i.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},t.buf2string=function(e,t){var r,i,o,a,c=t||e.length,u=new Array(2*c);for(i=0,r=0;r<c;)if((o=e[r++])<128)u[i++]=o;else if((a=s[o])>4)u[i++]=65533,r+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&r<c;)o=o<<6|63&e[r++],a--;a>1?u[i++]=65533:o<65536?u[i++]=o:(o-=65536,u[i++]=55296|o>>10&1023,u[i++]=56320|1023&o)}return n(u,i)},t.utf8border=function(e,t){var r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0?t:0===r?t:r+s[e[r]]>t?r:t}},function(e,t,r){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n},function(e,t,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,r){"use strict";(function(t,n){function i(e){return B.from(e)}function o(e){return B.isBuffer(e)||e instanceof j}function a(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?D(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function s(e,t){x=x||r(28),e=e||{},this.objectMode=!!e.objectMode,t instanceof x&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new z,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(F||(F=r(78).StringDecoder),this.decoder=new F(e.encoding),this.encoding=e.encoding)}function c(e){if(x=x||r(28),!(this instanceof c))return new c(e);this._readableState=new s(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),N.call(this)}function u(e,t,r,n,o){var a=e._readableState;if(null===t)a.reading=!1,_(e,a);else{var s;o||(s=d(a,t)),s?e.emit("error",s):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===B.prototype||(t=i(t)),n?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):f(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?f(e,a,t,!1):b(e,a)):f(e,a,t,!1))):n||(a.reading=!1)}return l(a)}function f(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&m(e)),b(e,t)}function d(e,t){var r;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function l(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function h(e){return e>=G?e=G:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function p(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=h(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function _(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,m(e)}}function m(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(H("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?I(v,e):v(e))}function v(e){H("emit readable"),e.emit("readable"),E(e)}function b(e,t){t.readingMore||(t.readingMore=!0,I(y,e,t))}function y(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(H("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;H("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&L(e,"data")&&(t.flowing=!0,E(e))}}function S(e){H("readable nexttick read 0"),e.read(0)}function w(e,t){t.resumeScheduled||(t.resumeScheduled=!0,I(k,e,t))}function k(e,t){t.reading||(H("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),E(e),t.flowing&&!t.reading&&e.read(0)}function E(e){var t=e._readableState;for(H("flow",t.flowing);t.flowing&&null!==e.read(););}function R(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=C(e,t.buffer,t.decoder),r}function C(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?A(e,t):O(e,t),n}function A(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++n}return t.length-=n,i}function O(e,t){var r=B.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),0===(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}function T(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,I(M,t,e))}function M(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function P(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}var I=r(53);e.exports=c;var x,D=r(246);c.ReadableState=s;var L=(r(75).EventEmitter,function(e,t){return e.listeners(t).length}),N=r(115),B=r(3).Buffer,j=t.Uint8Array||function(){},U=r(45);U.inherits=r(1);var V=r(247),H=void 0;H=V&&V.debuglog?V.debuglog("stream"):function(){};var F,z=r(248),q=r(116);U.inherits(c,N);var W=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),c.prototype.destroy=q.destroy,c.prototype._undestroy=q.undestroy,c.prototype._destroy=function(e,t){this.push(null),t(e)},c.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=B.from(e,t),t=""),r=!0),u(this,e,t,!1,r)},c.prototype.unshift=function(e){return u(this,e,null,!0,!1)},c.prototype.isPaused=function(){return!1===this._readableState.flowing},c.prototype.setEncoding=function(e){return F||(F=r(78).StringDecoder),this._readableState.decoder=new F(e),this._readableState.encoding=e,this};var G=8388608;c.prototype.read=function(e){H("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return H("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?T(this):m(this),null;if(0===(e=p(e,t))&&t.ended)return 0===t.length&&T(this),null;var n=t.needReadable;H("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,H("length less than watermark",n)),t.ended||t.reading?(n=!1,H("reading or ended",n)):n&&(H("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=p(r,t)));var i;return i=e>0?R(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&T(this)),null!==i&&this.emit("data",i),i},c.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},c.prototype.pipe=function(e,t){function r(e,t){H("onunpipe"),e===l&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function i(){H("onend"),e.end()}function o(){H("cleanup"),e.removeListener("close",u),e.removeListener("finish",f),e.removeListener("drain",m),e.removeListener("error",c),e.removeListener("unpipe",r),l.removeListener("end",i),l.removeListener("end",d),l.removeListener("data",s),v=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||m()}function s(t){H("ondata"),b=!1,!1!==e.write(t)||b||((1===h.pipesCount&&h.pipes===e||h.pipesCount>1&&-1!==P(h.pipes,e))&&!v&&(H("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,b=!0),l.pause())}function c(t){H("onerror",t),d(),e.removeListener("error",c),0===L(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",f),d()}function f(){H("onfinish"),e.removeListener("close",u),d()}function d(){H("unpipe"),l.unpipe(e)}var l=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,H("pipe count=%d opts=%j",h.pipesCount,t);var p=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr,_=p?i:d;h.endEmitted?I(_):l.once("end",_),e.on("unpipe",r);var m=g(l);e.on("drain",m);var v=!1,b=!1;return l.on("data",s),a(e,"error",c),e.once("close",u),e.once("finish",f),e.emit("pipe",l),h.flowing||(H("pipe resume"),l.resume()),e},c.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var a=P(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},c.prototype.on=function(e,t){var r=N.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&m(this):I(S,this))}return r},c.prototype.addListener=c.prototype.on,c.prototype.resume=function(){var e=this._readableState;return e.flowing||(H("resume"),e.flowing=!0,w(this,e)),this},c.prototype.pause=function(){return H("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(H("pause"),this._readableState.flowing=!1,this.emit("pause")),this},c.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(H("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(H("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){n.push(i)||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<W.length;o++)e.on(W[o],n.emit.bind(n,W[o]));return n._read=function(t){H("wrapped _read",t),r&&(r=!1,e.resume())},n},c._fromList=R}).call(t,r(19),r(23))},function(e,t,r){"use strict";e.exports=r(75).EventEmitter},function(e,t,r){"use strict";function n(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;if(n||i)return void(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||a(o,this,e));this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(a(o,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(e,t){e.emit("error",t)}var a=r(53);e.exports={destroy:n,undestroy:i}},function(e,t,r){"use strict";function n(e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,r){a(t,e,r)}):a(t)})}function a(e,t,r){if(t)return e.emit("error",t);null!==r&&void 0!==r&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=o;var s=r(28),c=r(45);c.inherits=r(1),c.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var r=this;s.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},function(e,t,r){"use strict";function n(){this.init(),this._w=p,d.call(this,64,56)}function i(e,t,r){return r^e&(t^r)}function o(e,t,r){return e&t|r&(e|t)}function a(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function s(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function c(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function u(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}var f=r(1),d=r(34),l=r(3).Buffer,h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=new Array(64);f(n,d),n.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},n.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,f=0|this._c,d=0|this._d,l=0|this._e,p=0|this._f,_=0|this._g,m=0|this._h,v=0;v<16;++v)t[v]=e.readInt32BE(4*v);for(;v<64;++v)t[v]=u(t[v-2])+t[v-7]+c(t[v-15])+t[v-16]|0;for(var b=0;b<64;++b){var y=m+s(l)+i(l,p,_)+h[b]+t[b]|0,g=a(r)+o(r,n,f)|0;m=_,_=p,p=l,l=d+y|0,d=f,f=n,n=r,r=y+g|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=f+this._c|0,this._d=d+this._d|0,this._e=l+this._e|0,this._f=p+this._f|0,this._g=_+this._g|0,this._h=m+this._h|0},n.prototype._hash=function(){var e=l.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=n},function(e,t,r){"use strict";function n(){this.init(),this._w=v,p.call(this,128,112)}function i(e,t,r){return r^e&(t^r)}function o(e,t,r){return e&t|r&(e|t)}function a(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function s(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function c(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function u(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function f(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function d(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function l(e,t){return e>>>0<t>>>0?1:0}var h=r(1),p=r(34),_=r(3).Buffer,m=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],v=new Array(160);h(n,p),n.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},n.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,h=0|this._ch,p=0|this._dh,_=0|this._eh,v=0|this._fh,b=0|this._gh,y=0|this._hh,g=0|this._al,S=0|this._bl,w=0|this._cl,k=0|this._dl,E=0|this._el,R=0|this._fl,C=0|this._gl,A=0|this._hl,O=0;O<32;O+=2)t[O]=e.readInt32BE(4*O),t[O+1]=e.readInt32BE(4*O+4);for(;O<160;O+=2){var T=t[O-30],M=t[O-30+1],P=c(T,M),I=u(M,T);T=t[O-4],M=t[O-4+1];var x=f(T,M),D=d(M,T),L=t[O-14],N=t[O-14+1],B=t[O-32],j=t[O-32+1],U=I+N|0,V=P+L+l(U,I)|0;U=U+D|0,V=V+x+l(U,D)|0,U=U+j|0,V=V+B+l(U,j)|0,t[O]=V,t[O+1]=U}for(var H=0;H<160;H+=2){V=t[H],U=t[H+1];var F=o(r,n,h),z=o(g,S,w),q=a(r,g),W=a(g,r),G=s(_,E),K=s(E,_),J=m[H],Y=m[H+1],X=i(_,v,b),Z=i(E,R,C),Q=A+K|0,$=y+G+l(Q,A)|0;Q=Q+Z|0,$=$+X+l(Q,Z)|0,Q=Q+Y|0,$=$+J+l(Q,Y)|0,Q=Q+U|0,$=$+V+l(Q,U)|0;var ee=W+z|0,te=q+F+l(ee,W)|0;y=b,A=C,b=v,C=R,v=_,R=E,E=k+Q|0,_=p+$+l(E,k)|0,p=h,k=w,h=n,w=S,n=r,S=g,g=Q+ee|0,r=$+te+l(g,Q)|0}this._al=this._al+g|0,this._bl=this._bl+S|0,this._cl=this._cl+w|0,this._dl=this._dl+k|0,this._el=this._el+E|0,this._fl=this._fl+R|0,this._gl=this._gl+C|0,this._hl=this._hl+A|0,this._ah=this._ah+r+l(this._al,g)|0,this._bh=this._bh+n+l(this._bl,S)|0,this._ch=this._ch+h+l(this._cl,w)|0,this._dh=this._dh+p+l(this._dl,k)|0,this._eh=this._eh+_+l(this._el,E)|0,this._fh=this._fh+v+l(this._fl,R)|0,this._gh=this._gh+b+l(this._gl,C)|0,this._hh=this._hh+y+l(this._hl,A)|0},n.prototype._hash=function(){function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}var t=_.allocUnsafe(64);return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},e.exports=n},function(e,t,r){"use strict";function n(e,t){a.call(this,"digest"),"string"==typeof t&&(t=s.from(t));var r="sha512"===e||"sha384"===e?128:64;if(this._alg=e,this._key=t,t.length>r){t=("rmd160"===e?new u:f(e)).update(t).digest()}else t.length<r&&(t=s.concat([t,d],r));for(var n=this._ipad=s.allocUnsafe(r),i=this._opad=s.allocUnsafe(r),o=0;o<r;o++)n[o]=54^t[o],i[o]=92^t[o];this._hash="rmd160"===e?new u:f(e),this._hash.update(n)}var i=r(1),o=r(261),a=r(25),s=r(3).Buffer,c=r(73),u=r(74),f=r(79),d=s.alloc(128);i(n,a),n.prototype._update=function(e){this._hash.update(e)},n.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new u:f(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return e=e.toLowerCase(),"rmd160"===e||"ripemd160"===e?new n("rmd160",t):"md5"===e?new o(c,t):new n(e,t)}},function(e,t){e.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},function(e,t,r){"use strict";t.pbkdf2=r(263),t.pbkdf2Sync=r(125)},function(e,t,r){"use strict";var n=Math.pow(2,30)-1;e.exports=function(e,t){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!=typeof t)throw new TypeError("Key length not a number");if(t<0||t>n||t!==t)throw new TypeError("Bad key length")}},function(e,t,r){"use strict";(function(t){var r;if(t.browser)r="utf-8";else{r=parseInt(t.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}e.exports=r}).call(t,r(23))},function(e,t,r){"use strict";function n(e,t,r){var n=i(e),o="sha512"===e||"sha384"===e?128:64;t.length>o?t=n(t):t.length<o&&(t=d.concat([t,l],o));for(var a=d.allocUnsafe(o+h[e]),s=d.allocUnsafe(o+h[e]),c=0;c<o;c++)a[c]=54^t[c],s[c]=92^t[c];var u=d.allocUnsafe(o+r+4);a.copy(u,0,0,o),this.ipad1=u,this.ipad2=a,this.opad=s,this.alg=e,this.blocksize=o,this.hash=n,this.size=h[e]}function i(e){function t(t){return c(e).update(t).digest()}return"rmd160"===e||"ripemd160"===e?s:"md5"===e?a:t}function o(e,t,r,i,o){d.isBuffer(e)||(e=d.from(e,f)),d.isBuffer(t)||(t=d.from(t,f)),u(r,i),o=o||"sha1";var a=new n(o,e,t.length),s=d.allocUnsafe(i),c=d.allocUnsafe(t.length+4);t.copy(c,0,0,t.length);for(var l=0,p=h[o],_=Math.ceil(i/p),m=1;m<=_;m++){c.writeUInt32BE(m,t.length);for(var v=a.run(c,a.ipad1),b=v,y=1;y<r;y++){b=a.run(b,a.ipad2);for(var g=0;g<p;g++)v[g]^=b[g]}v.copy(s,l),l+=p}return s}var a=r(73),s=r(74),c=r(79),u=r(123),f=r(124),d=r(3).Buffer,l=d.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};n.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},e.exports=o},function(e,t,r){"use strict";function n(e){var t=e._cipher.encryptBlockRaw(e._prev);return a(e._prev),t}var i=r(46),o=r(3).Buffer,a=r(127);t.encrypt=function(e,t){var r=Math.ceil(t.length/16),a=e._cache.length;e._cache=o.concat([e._cache,o.allocUnsafe(16*r)]);for(var s=0;s<r;s++){var c=n(e),u=a+16*s;e._cache.writeUInt32BE(c[0],u+0),e._cache.writeUInt32BE(c[1],u+4),e._cache.writeUInt32BE(c[2],u+8),e._cache.writeUInt32BE(c[3],u+12)}var f=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),i(t,f)}},function(e,t,r){"use strict";function n(e){for(var t,r=e.length;r--;){if(255!==(t=e.readUInt8(r))){t++,e.writeUInt8(t,r);break}e.writeUInt8(0,r)}}e.exports=n},function(e,t){e.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},function(e,t,r){"use strict";function n(e,t){var r=0;e.length!==t.length&&r++;for(var n=Math.min(e.length,t.length),i=0;i<n;++i)r+=e[i]^t[i];return r}function i(e,t,r){if(12===t.length)return e._finID=s.concat([t,s.from([0,0,0,1])]),s.concat([t,s.from([0,0,0,2])]);var n=new f(r),i=t.length,o=i%16;n.update(t),o&&(o=16-o,n.update(s.alloc(o,0))),n.update(s.alloc(8,0));var a=8*i,c=s.alloc(8);c.writeUIntBE(a,0,8),n.update(c),e._finID=n.state;var u=s.from(e._finID);return l(u),u}function o(e,t,r,n){c.call(this);var o=s.alloc(4,0);this._cipher=new a.AES(t);var u=this._cipher.encryptBlock(o);this._ghash=new f(u),r=i(this,r,u),this._prev=s.from(r),this._cache=s.allocUnsafe(0),this._secCache=s.allocUnsafe(0),this._decrypt=n,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}var a=r(55),s=r(3).Buffer,c=r(25),u=r(1),f=r(274),d=r(46),l=r(127);u(o,c),o.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=s.alloc(t,0),this._ghash.update(t))}this._called=!0;var r=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(r),this._len+=e.length,r},o.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=d(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&n(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},o.prototype.getAuthTag=function(){if(this._decrypt||!s.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},o.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},o.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},e.exports=o},function(e,t,r){"use strict";function n(e,t,r,n){a.call(this),this._cipher=new i.AES(t),this._prev=o.from(r),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=n,this._mode=e}var i=r(55),o=r(3).Buffer,a=r(25);r(1)(n,a),n.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},n.prototype._final=function(){this._cipher.scrub()},e.exports=n},function(e,t,r){"use strict";function n(){if(null!==y)return y;var e=[];e[0]=2;for(var t=1,r=3;r<1048576;r+=2){for(var n=Math.ceil(Math.sqrt(r)),i=0;i<t&&e[i]<=n&&r%e[i]!=0;i++);t!==i&&e[i]<=n||(e[t++]=r)}return y=e,e}function i(e){for(var t=n(),r=0;r<t.length;r++)if(0===e.modn(t[r]))return 0===e.cmpn(t[r]);return!0}function o(e){var t=c.mont(e);return 0===h.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function a(e,t){if(e<16)return new c(2===t||5===t?[140,123]:[140,39]);t=new c(t);for(var r,n;;){for(r=new c(s(Math.ceil(e/8)));r.bitLength()>e;)r.ishrn(1);if(r.isEven()&&r.iadd(l),r.testn(1)||r.iadd(h),t.cmp(h)){if(!t.cmp(p))for(;r.mod(_).cmp(m);)r.iadd(b)}else for(;r.mod(u).cmp(v);)r.iadd(b);if(n=r.shrn(1),i(n)&&i(r)&&o(n)&&o(r)&&d.test(n)&&d.test(r))return r}}var s=r(33);e.exports=a,a.simpleSieve=i,a.fermatTest=o;var c=r(5),u=new c(24),f=r(132),d=new f,l=new c(1),h=new c(2),p=new c(5),_=(new c(16),new c(8),new c(10)),m=new c(3),v=(new c(7),new c(11)),b=new c(4),y=(new c(12),null)},function(e,t,r){"use strict";function n(e){this.rand=e||new o.Rand}var i=r(5),o=r(133);e.exports=n,n.create=function(e){return new n(e)},n.prototype._randbelow=function(e){var t=e.bitLength(),r=Math.ceil(t/8);do{var n=new i(this.rand.generate(r))}while(n.cmp(e)>=0);return n},n.prototype._randrange=function(e,t){var r=t.sub(e);return e.add(this._randbelow(r))},n.prototype.test=function(e,t,r){var n=e.bitLength(),o=i.mont(e),a=new i(1).toRed(o);t||(t=Math.max(1,n/48|0));for(var s=e.subn(1),c=0;!s.testn(c);c++);for(var u=e.shrn(c),f=s.toRed(o);t>0;t--){var d=this._randrange(new i(2),s);r&&r(d);var l=d.toRed(o).redPow(u);if(0!==l.cmp(a)&&0!==l.cmp(f)){for(var h=1;h<c;h++){if(l=l.redSqr(),0===l.cmp(a))return!1;if(0===l.cmp(f))break}if(h===c)return!1}}return!0},n.prototype.getDivisor=function(e,t){var r=e.bitLength(),n=i.mont(e),o=new i(1).toRed(n);t||(t=Math.max(1,r/48|0));for(var a=e.subn(1),s=0;!a.testn(s);s++);for(var c=e.shrn(s),u=a.toRed(n);t>0;t--){var f=this._randrange(new i(2),a),d=e.gcd(f);if(0!==d.cmpn(1))return d;var l=f.toRed(n).redPow(c);if(0!==l.cmp(o)&&0!==l.cmp(u)){for(var h=1;h<s;h++){if(l=l.redSqr(),0===l.cmp(o))return l.fromRed().subn(1).gcd(e);if(0===l.cmp(u))break}if(h===s)return l=l.redSqr(),l.fromRed().subn(1).gcd(e)}}return!1}},function(e,t,r){"use strict";function n(e){this.rand=e}var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};if(e.exports=function(e){return i||(i=new n(null)),i.generate(e)},e.exports.Rand=n,n.prototype.generate=function(e){return this._rand(e)},n.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"===("undefined"==typeof self?"undefined":o(self)))self.crypto&&self.crypto.getRandomValues?n.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?n.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"===("undefined"==typeof window?"undefined":o(window))&&(n.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=r(285);if("function"!=typeof a.randomBytes)throw new Error("Not supported");n.prototype._rand=function(e){return a.randomBytes(e)}}catch(e){}},function(e,t,r){"use strict";function n(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t){e=e.replace(/[^a-z0-9]+/gi,""),e.length%2!=0&&(e="0"+e);for(var n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(var n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,a=255&i;o?r.push(o,a):r.push(a)}return r}function i(e){return 1===e.length?"0"+e:e}function o(e){for(var t="",r=0;r<e.length;r++)t+=i(e[r].toString(16));return t}var a=t;a.toArray=n,a.zero2=i,a.toHex=o,a.encode=function(e,t){return"hex"===t?o(e):e}},function(e,t,r){"use strict";function n(e,t,r,n){return 0===e?i(t,r,n):1===e||3===e?a(t,r,n):2===e?o(t,r,n):void 0}function i(e,t,r){return e&t^~e&r}function o(e,t,r){return e&t^e&r^t&r}function a(e,t,r){return e^t^r}function s(e){return l(e,2)^l(e,13)^l(e,22)}function c(e){return l(e,6)^l(e,11)^l(e,25)}function u(e){return l(e,7)^l(e,18)^e>>>3}function f(e){return l(e,17)^l(e,19)^e>>>10}var d=r(21),l=d.rotr32;t.ft_1=n,t.ch32=i,t.maj32=o,t.p32=a,t.s0_256=s,t.s1_256=c,t.g0_256=u,t.g1_256=f},function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;v.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=b,this.W=new Array(64)}var i=r(21),o=r(47),a=r(135),s=r(15),c=i.sum32,u=i.sum32_4,f=i.sum32_5,d=a.ch32,l=a.maj32,h=a.s0_256,p=a.s1_256,_=a.g0_256,m=a.g1_256,v=o.BlockHash,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];i.inherits(n,v),e.exports=n,n.blockSize=512,n.outSize=256,n.hmacStrength=192,n.padLength=64,n.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=u(m(r[n-2]),r[n-7],_(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],a=this.h[2],v=this.h[3],b=this.h[4],y=this.h[5],g=this.h[6],S=this.h[7];for(s(this.k.length===r.length),n=0;n<r.length;n++){var w=f(S,p(b),d(b,y,g),this.k[n],r[n]),k=c(h(i),l(i,o,a));S=g,g=y,y=b,b=c(v,w),v=a,a=o,o=i,i=c(w,k)}this.h[0]=c(this.h[0],i),this.h[1]=c(this.h[1],o),this.h[2]=c(this.h[2],a),this.h[3]=c(this.h[3],v),this.h[4]=c(this.h[4],b),this.h[5]=c(this.h[5],y),this.h[6]=c(this.h[6],g),this.h[7]=c(this.h[7],S)},n.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;M.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=P,this.W=new Array(160)}function i(e,t,r,n,i){var o=e&r^~e&i;return o<0&&(o+=4294967296),o}function o(e,t,r,n,i,o){var a=t&n^~t&o;return a<0&&(a+=4294967296),a}function a(e,t,r,n,i){var o=e&r^e&i^r&i;return o<0&&(o+=4294967296),o}function s(e,t,r,n,i,o){var a=t&n^t&o^n&o;return a<0&&(a+=4294967296),a}function c(e,t){var r=y(e,t,28),n=y(t,e,2),i=y(t,e,7),o=r^n^i;return o<0&&(o+=4294967296),o}function u(e,t){var r=g(e,t,28),n=g(t,e,2),i=g(t,e,7),o=r^n^i;return o<0&&(o+=4294967296),o}function f(e,t){var r=y(e,t,14),n=y(e,t,18),i=y(t,e,9),o=r^n^i;return o<0&&(o+=4294967296),o}function d(e,t){var r=g(e,t,14),n=g(e,t,18),i=g(t,e,9),o=r^n^i;return o<0&&(o+=4294967296),o}function l(e,t){var r=y(e,t,1),n=y(e,t,8),i=S(e,t,7),o=r^n^i;return o<0&&(o+=4294967296),o}function h(e,t){var r=g(e,t,1),n=g(e,t,8),i=w(e,t,7),o=r^n^i;return o<0&&(o+=4294967296),o}function p(e,t){var r=y(e,t,19),n=y(t,e,29),i=S(e,t,6),o=r^n^i;return o<0&&(o+=4294967296),o}function _(e,t){var r=g(e,t,19),n=g(t,e,29),i=w(e,t,6),o=r^n^i;return o<0&&(o+=4294967296),o}var m=r(21),v=r(47),b=r(15),y=m.rotr64_hi,g=m.rotr64_lo,S=m.shr64_hi,w=m.shr64_lo,k=m.sum64,E=m.sum64_hi,R=m.sum64_lo,C=m.sum64_4_hi,A=m.sum64_4_lo,O=m.sum64_5_hi,T=m.sum64_5_lo,M=v.BlockHash,P=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];m.inherits(n,M),e.exports=n,n.blockSize=1024,n.outSize=512,n.hmacStrength=192,n.padLength=128,n.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=p(r[n-4],r[n-3]),o=_(r[n-4],r[n-3]),a=r[n-14],s=r[n-13],c=l(r[n-30],r[n-29]),u=h(r[n-30],r[n-29]),f=r[n-32],d=r[n-31];r[n]=C(i,o,a,s,c,u,f,d),r[n+1]=A(i,o,a,s,c,u,f,d)}},n.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],l=this.h[1],h=this.h[2],p=this.h[3],_=this.h[4],m=this.h[5],v=this.h[6],y=this.h[7],g=this.h[8],S=this.h[9],w=this.h[10],C=this.h[11],A=this.h[12],M=this.h[13],P=this.h[14],I=this.h[15];b(this.k.length===r.length);for(var x=0;x<r.length;x+=2){var D=P,L=I,N=f(g,S),B=d(g,S),j=i(g,S,w,C,A),U=o(g,S,w,C,A,M),V=this.k[x],H=this.k[x+1],F=r[x],z=r[x+1],q=O(D,L,N,B,j,U,V,H,F,z),W=T(D,L,N,B,j,U,V,H,F,z);D=c(n,l),L=u(n,l),N=a(n,l,h,p,_),B=s(n,l,h,p,_,m);var G=E(D,L,N,B),K=R(D,L,N,B);P=A,I=M,A=w,M=C,w=g,C=S,g=E(v,y,q,W),S=R(y,y,q,W),v=_,y=m,_=h,m=p,h=n,p=l,n=E(q,W,G,K),l=R(q,W,G,K)}k(this.h,0,n,l),k(this.h,2,h,p),k(this.h,4,_,m),k(this.h,6,v,y),k(this.h,8,g,S),k(this.h,10,w,C),k(this.h,12,A,M),k(this.h,14,P,I)},n.prototype._digest=function(e){return"hex"===e?m.toHex32(this.h,"big"):m.split32(this.h,"big")}},function(e,t,r){"use strict";function n(e,t){if(s.call(this,t),!c.isBuffer(e))return void this.error("Input not Buffer");this.base=e,this.offset=0,this.length=e.length}function i(e,t){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return e instanceof i||(e=new i(e,t)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=c.byteLength(e);else{if(!c.isBuffer(e))return t.error("Unsupported type: "+(void 0===e?"undefined":o(e)));this.value=e,this.length=e.length}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=r(1),s=r(49).Reporter,c=r(4).Buffer;a(n,s),t.DecoderBuffer=n,n.prototype.save=function(){return{offset:this.offset,reporter:s.prototype.save.call(this)}},n.prototype.restore=function(e){var t=new n(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,s.prototype.restore.call(this,e.reporter),t},n.prototype.isEmpty=function(){return this.offset===this.length},n.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},n.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var r=new n(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},n.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.EncoderBuffer=i,i.prototype.join=function(e,t){return e||(e=new c(this.length)),t||(t=0),0===this.length?e:(Array.isArray(this.value)?this.value.forEach(function(r){r.join(e,t),t+=r.length}):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):c.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length),e)}},function(e,t,r){"use strict";var n=t;n._reverse=function(e){var t={};return Object.keys(e).forEach(function(r){(0|r)==r&&(r|=0);var n=e[r];t[n]=r}),t},n.der=r(317)},function(e,t,r){"use strict";function n(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new i,this.tree._init(e.body)}function i(e){u.Node.call(this,"der",e)}function o(e,t){var r=e.readUInt8(t);if(e.isError(r))return r;var n=d.tagClass[r>>6],i=0==(32&r);if(31==(31&r)){var o=r;for(r=0;128==(128&o);){if(o=e.readUInt8(t),e.isError(o))return o;r<<=7,r|=127&o}}else r&=31;return{cls:n,primitive:i,tag:r,tagStr:d.tag[r]}}function a(e,t,r){var n=e.readUInt8(r);if(e.isError(n))return n;if(!t&&128===n)return null;if(0==(128&n))return n;var i=127&n;if(i>4)return e.error("length octect is too long");n=0;for(var o=0;o<i;o++){n<<=8;var a=e.readUInt8(r);if(e.isError(a))return a;n|=a}return n}var s=r(1),c=r(48),u=c.base,f=c.bignum,d=c.constants.der;e.exports=n,n.prototype.decode=function(e,t){return e instanceof u.DecoderBuffer||(e=new u.DecoderBuffer(e,t)),this.tree._decode(e,t)},s(i,u.Node),i.prototype._peekTag=function(e,t,r){if(e.isEmpty())return!1;var n=e.save(),i=o(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(n),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||r)},i.prototype._decodeTag=function(e,t,r){var n=o(e,'Failed to decode tag of "'+t+'"');if(e.isError(n))return n;var i=a(e,n.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!r&&n.tag!==t&&n.tagStr!==t&&n.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(n.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');var s=e.save(),c=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(c)?c:(i=e.offset-s.offset,e.restore(s),e.skip(i,'Failed to match body of: "'+t+'"'))},i.prototype._skipUntilEnd=function(e,t){for(;;){var r=o(e,t);if(e.isError(r))return r;var n=a(e,r.primitive,t);if(e.isError(n))return n;var i;if(i=r.primitive||null!==n?e.skip(n):this._skipUntilEnd(e,t),e.isError(i))return i;if("end"===r.tagStr)break}},i.prototype._decodeList=function(e,t,r,n){for(var i=[];!e.isEmpty();){var o=this._peekTag(e,"end");if(e.isError(o))return o;var a=r.decode(e,"der",n);if(e.isError(a)&&o)break;i.push(a)}return i},i.prototype._decodeStr=function(e,t){if("bitstr"===t){var r=e.readUInt8();return e.isError(r)?r:{unused:r,data:e.raw()}}if("bmpstr"===t){var n=e.raw();if(n.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");for(var i="",o=0;o<n.length/2;o++)i+=String.fromCharCode(n.readUInt16BE(2*o));return i}if("numstr"===t){var a=e.raw().toString("ascii");return this._isNumstr(a)?a:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){var s=e.raw().toString("ascii");return this._isPrintstr(s)?s:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},i.prototype._decodeObjid=function(e,t,r){for(var n,i=[],o=0;!e.isEmpty();){var a=e.readUInt8();o<<=7,o|=127&a,0==(128&a)&&(i.push(o),o=0)}128&a&&i.push(o);var s=i[0]/40|0,c=i[0]%40;if(n=r?i:[s,c].concat(i.slice(1)),t){var u=t[n.join(" ")];void 0===u&&(u=t[n.join(".")]),void 0!==u&&(n=u)}return n},i.prototype._decodeTime=function(e,t){var r=e.raw().toString();if("gentime"===t)var n=0|r.slice(0,4),i=0|r.slice(4,6),o=0|r.slice(6,8),a=0|r.slice(8,10),s=0|r.slice(10,12),c=0|r.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");var n=0|r.slice(0,2),i=0|r.slice(2,4),o=0|r.slice(4,6),a=0|r.slice(6,8),s=0|r.slice(8,10),c=0|r.slice(10,12);n=n<70?2e3+n:1900+n}return Date.UTC(n,i-1,o,a,s,c,0)},i.prototype._decodeNull=function(e){return null},i.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},i.prototype._decodeInt=function(e,t){var r=e.raw(),n=new f(r);return t&&(n=t[n.toString(10)]||n),n},i.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},function(e,t,r){"use strict";function n(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new i,this.tree._init(e.body)}function i(e){f.Node.call(this,"der",e)}function o(e){return e<10?"0"+e:e}function a(e,t,r,n){var i;if("seqof"===e?e="seq":"setof"===e&&(e="set"),d.tagByName.hasOwnProperty(e))i=d.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);i=e}return i>=31?n.error("Multi-octet tag encoding unsupported"):(t||(i|=32),i|=d.tagClassByName[r||"universal"]<<6)}var s=r(1),c=r(4).Buffer,u=r(48),f=u.base,d=u.constants.der;e.exports=n,n.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},s(i,f.Node),i.prototype._encodeComposite=function(e,t,r,n){var i=a(e,t,r,this.reporter);if(n.length<128){var o=new c(2);return o[0]=i,o[1]=n.length,this._createEncoderBuffer([o,n])}for(var s=1,u=n.length;u>=256;u>>=8)s++;var o=new c(2+s);o[0]=i,o[1]=128|s;for(var u=1+s,f=n.length;f>0;u--,f>>=8)o[u]=255&f;return this._createEncoderBuffer([o,n])},i.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){for(var r=new c(2*e.length),n=0;n<e.length;n++)r.writeUInt16BE(e.charCodeAt(n),2*n);return this._createEncoderBuffer(r)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},i.prototype._encodeObjid=function(e,t,r){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s\.]+/g);for(var n=0;n<e.length;n++)e[n]|=0}else if(Array.isArray(e)){e=e.slice();for(var n=0;n<e.length;n++)e[n]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!r){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}for(var i=0,n=0;n<e.length;n++){var o=e[n];for(i++;o>=128;o>>=7)i++}for(var a=new c(i),s=a.length-1,n=e.length-1;n>=0;n--){var o=e[n];for(a[s--]=127&o;(o>>=7)>0;)a[s--]=128|127&o}return this._createEncoderBuffer(a)},i.prototype._encodeTime=function(e,t){var r,n=new Date(e);return"gentime"===t?r=[o(n.getFullYear()),o(n.getUTCMonth()+1),o(n.getUTCDate()),o(n.getUTCHours()),o(n.getUTCMinutes()),o(n.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[o(n.getFullYear()%100),o(n.getUTCMonth()+1),o(n.getUTCDate()),o(n.getUTCHours()),o(n.getUTCMinutes()),o(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},i.prototype._encodeNull=function(){return this._createEncoderBuffer("")},i.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!c.isBuffer(e)){var r=e.toArray();!e.sign&&128&r[0]&&r.unshift(0),e=new c(r)}if(c.isBuffer(e)){var n=e.length;0===e.length&&n++;var i=new c(n);return e.copy(i),0===e.length&&(i[0]=0),this._createEncoderBuffer(i)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);for(var n=1,o=e;o>=256;o>>=8)n++;for(var i=new Array(n),o=i.length-1;o>=0;o--)i[o]=255&e,e>>=8;return 128&i[0]&&i.unshift(0),this._createEncoderBuffer(new c(i))},i.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},i.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},i.prototype._skipDefault=function(e,t,r){var n,i=this._baseState;if(null===i.default)return!1;var o=e.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,t,r).join()),o.length!==i.defaultBuffer.length)return!1;for(n=0;n<o.length;n++)if(o[n]!==i.defaultBuffer[n])return!1;return!0}},function(e,t){e.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},function(e,t,r){"use strict";(function(t){function n(e){var r=new t(4);return r.writeUInt32BE(e,0),r}var i=r(44);e.exports=function(e,r){for(var o,a=new t(""),s=0;a.length<r;)o=n(s++),a=t.concat([a,i("sha1").update(e).update(o).digest()]);return a.slice(0,r)}}).call(t,r(4).Buffer)},function(e,t,r){"use strict";e.exports=function(e,t){for(var r=e.length,n=-1;++n<r;)e[n]^=t[n];return e}},function(e,t,r){"use strict";(function(t){function n(e,r){return new t(e.toRed(i.mont(r.modulus)).redPow(new i(r.publicExponent)).fromRed().toArray())}var i=r(5);e.exports=n}).call(t,r(4).Buffer)},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c){"object"===a(t)?e.exports=t=c(r(0)):(i=[r(0)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(){if("function"==typeof ArrayBuffer){var t=e,r=t.lib,n=r.WordArray,i=n.init;(n.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,r=[],n=0;n<t;n++)r[n>>>2]|=e[n]<<24-n%4*8;i.call(this,r,t)}else i.apply(this,arguments)}).prototype=n}}(),e.lib.WordArray})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c){"object"===a(t)?e.exports=t=c(r(0)):(i=[r(0)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(){function t(e){return e<<8&4278255360|e>>>8&16711935}var r=e,n=r.lib,i=n.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i+=2){var o=t[i>>>2]>>>16-i%4*8&65535;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>1]|=e.charCodeAt(n)<<16-n%2*16;return i.create(r,2*t)}};o.Utf16LE={stringify:function(e){for(var r=e.words,n=e.sigBytes,i=[],o=0;o<n;o+=2){var a=t(r[o>>>2]>>>16-o%4*8&65535);i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var r=e.length,n=[],o=0;o<r;o++)n[o>>>1]|=t(e.charCodeAt(o)<<16-o%2*16);return i.create(n,2*r)}}}(),e.enc.Utf16})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(58)):(i=[r(0),r(58)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(){var t=e,r=t.lib,n=r.WordArray,i=t.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=o._createHelper(a),t.HmacSHA224=o._createHmacHelper(a)}(),e.SHA224})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(26),r(59)):(i=[r(0),r(26),r(59)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(){var t=e,r=t.x64,n=r.Word,i=r.WordArray,o=t.algo,a=o.SHA512,s=o.SHA384=a.extend({_doReset:function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=a._createHelper(s),t.HmacSHA384=a._createHmacHelper(s)}(),e.SHA384})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(26)):(i=[r(0),r(26)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(t){var r=e,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.x64,s=a.Word,c=r.algo,u=[],f=[],d=[];!function(){for(var e=1,t=0,r=0;r<24;r++){u[e+5*t]=(r+1)*(r+2)/2%64;var n=t%5,i=(2*e+3*t)%5;e=n,t=i}for(var e=0;e<5;e++)for(var t=0;t<5;t++)f[e+5*t]=t+(2*e+3*t)%5*5;for(var o=1,a=0;a<24;a++){for(var c=0,l=0,h=0;h<7;h++){if(1&o){var p=(1<<h)-1;p<32?l^=1<<p:c^=1<<p-32}128&o?o=o<<1^113:o<<=1}d[a]=s.create(c,l)}}();var l=[];!function(){for(var e=0;e<25;e++)l[e]=s.create()}();var h=c.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,n=this.blockSize/2,i=0;i<n;i++){var o=e[t+2*i],a=e[t+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);var s=r[i];s.high^=a,s.low^=o}for(var c=0;c<24;c++){for(var h=0;h<5;h++){for(var p=0,_=0,m=0;m<5;m++){var s=r[h+5*m];p^=s.high,_^=s.low}var v=l[h];v.high=p,v.low=_}for(var h=0;h<5;h++)for(var b=l[(h+4)%5],y=l[(h+1)%5],g=y.high,S=y.low,p=b.high^(g<<1|S>>>31),_=b.low^(S<<1|g>>>31),m=0;m<5;m++){var s=r[h+5*m];s.high^=p,s.low^=_}for(var w=1;w<25;w++){var p,_,s=r[w],k=s.high,E=s.low,R=u[w];R<32?(p=k<<R|E>>>32-R,_=E<<R|k>>>32-R):(p=E<<R-32|k>>>64-R,_=k<<R-32|E>>>64-R);var C=l[f[w]];C.high=p,C.low=_}var A=l[0],O=r[0];A.high=O.high,A.low=O.low;for(var h=0;h<5;h++)for(var m=0;m<5;m++){var w=h+5*m,s=r[w],T=l[w],M=l[(h+1)%5+5*m],P=l[(h+2)%5+5*m];s.high=T.high^~M.high&P.high,s.low=T.low^~M.low&P.low}var s=r[0],I=d[c];s.high^=I.high,s.low^=I.low}},_doFinalize:function(){var e=this._data,r=e.words,n=(this._nDataBytes,8*e.sigBytes),o=32*this.blockSize;r[n>>>5]|=1<<24-n%32,r[(t.ceil((n+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*r.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,c=s/8,u=[],f=0;f<c;f++){var d=a[f],l=d.high,h=d.low;l=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),u.push(h),u.push(l)}return new i.init(u,s)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),r=0;r<25;r++)t[r]=t[r].clone();return e}});r.SHA3=o._createHelper(h),r.HmacSHA3=o._createHmacHelper(h)}(Math),e.SHA3})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c){"object"===a(t)?e.exports=t=c(r(0)):(i=[r(0)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){/** @preserve
 (c) 2012 by Cdric Mesnil. All rights reserved.
 	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
 	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
     - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
 	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
return function(t){function r(e,t,r){return e^t^r}function n(e,t,r){return e&t|~e&r}function i(e,t,r){return(e|~t)^r}function o(e,t,r){return e&r|t&~r}function a(e,t,r){return e^(t|~r)}function s(e,t){return e<<t|e>>>32-t}var c=e,u=c.lib,f=u.WordArray,d=u.Hasher,l=c.algo,h=f.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),p=f.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),_=f.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),m=f.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),v=f.create([0,1518500249,1859775393,2400959708,2840853838]),b=f.create([1352829926,1548603684,1836072691,2053994217,0]),y=l.RIPEMD160=d.extend({_doReset:function(){this._hash=f.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var c=0;c<16;c++){var u=t+c,f=e[u];e[u]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}var d,l,y,g,S,w,k,E,R,C,A=this._hash.words,O=v.words,T=b.words,M=h.words,P=p.words,I=_.words,x=m.words;w=d=A[0],k=l=A[1],E=y=A[2],R=g=A[3],C=S=A[4];for(var D,c=0;c<80;c+=1)D=d+e[t+M[c]]|0,D+=c<16?r(l,y,g)+O[0]:c<32?n(l,y,g)+O[1]:c<48?i(l,y,g)+O[2]:c<64?o(l,y,g)+O[3]:a(l,y,g)+O[4],D|=0,D=s(D,I[c]),D=D+S|0,d=S,S=g,g=s(y,10),y=l,l=D,D=w+e[t+P[c]]|0,D+=c<16?a(k,E,R)+T[0]:c<32?o(k,E,R)+T[1]:c<48?i(k,E,R)+T[2]:c<64?n(k,E,R)+T[3]:r(k,E,R)+T[4],D|=0,D=s(D,x[c]),D=D+C|0,w=C,C=R,R=s(E,10),E=k,k=D;D=A[1]+y+R|0,A[1]=A[2]+g+C|0,A[2]=A[3]+S+w|0,A[3]=A[4]+d+k|0,A[4]=A[0]+l+E|0,A[0]=D},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,o=i.words,a=0;a<5;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e=d.clone.call(this);return e._hash=this._hash.clone(),e}});c.RIPEMD160=d._createHelper(y),c.HmacRIPEMD160=d._createHmacHelper(y)}(Math),e.RIPEMD160})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(35),r(36)):(i=[r(0),r(35),r(36)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(){var t=e,r=t.lib,n=r.Base,i=r.WordArray,o=t.algo,a=o.SHA1,s=o.HMAC,c=o.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=s.create(r.hasher,e),o=i.create(),a=i.create([1]),c=o.words,u=a.words,f=r.keySize,d=r.iterations;c.length<f;){var l=n.update(t).finalize(a);n.reset();for(var h=l.words,p=h.length,_=l,m=1;m<d;m++){_=n.finalize(_),n.reset();for(var v=_.words,b=0;b<p;b++)h[b]^=v[b]}o.concat(l),u[0]++}return o.sigBytes=4*f,o}});t.PBKDF2=function(e,t,r){return c.create(r).compute(e,t)}}(),e.PBKDF2})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(2)):(i=[r(0),r(2)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return e.mode.CFB=function(){function t(e,t,r,n){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,n.encryptBlock(i,0);for(var a=0;a<r;a++)e[t+a]^=i[a]}var r=e.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize;t.call(this,e,r,i,n),this._prevBlock=e.slice(r,r+i)}}),r.Decryptor=r.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize,o=e.slice(r,r+i);t.call(this,e,r,i,n),this._prevBlock=o}}),r}(),e.mode.CFB})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(2)):(i=[r(0),r(2)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var a=o.slice(0);r.encryptBlock(a,0),o[n-1]=o[n-1]+1|0;for(var s=0;s<n;s++)e[t+s]^=a[s]}});return t.Decryptor=r,t}(),e.mode.CTR})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(2)):(i=[r(0),r(2)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){/** @preserve
  * Counter block mode compatible with  Dr Brian Gladman fileenc.c
  * derived from CryptoJS.mode.CTR
  * Jan Hruby jhruby.web@gmail.com
  */
return e.mode.CTRGladman=function(){function t(e){if(255==(e>>24&255)){var t=e>>16&255,r=e>>8&255,n=255&e;255===t?(t=0,255===r?(r=0,255===n?n=0:++n):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=n}else e+=1<<24;return e}function r(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var n=e.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0),r(a);var s=a.slice(0);n.encryptBlock(s,0);for(var c=0;c<i;c++)e[t+c]^=s[c]}});return n.Decryptor=i,n}(),e.mode.CTRGladman})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(2)):(i=[r(0),r(2)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),r.encryptBlock(o,0);for(var a=0;a<n;a++)e[t+a]^=o[a]}});return t.Decryptor=r,t}(),e.mode.OFB})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(2)):(i=[r(0),r(2)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t}(),e.mode.ECB})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(2)):(i=[r(0),r(2)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return e.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,n=4*t,i=n-r%n,o=r+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(2)):(i=[r(0),r(2)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return e.pad.Iso10126={pad:function(t,r){var n=4*r,i=n-t.sigBytes%n;t.concat(e.lib.WordArray.random(i-1)).concat(e.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(2)):(i=[r(0),r(2)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return e.pad.Iso97971={pad:function(t,r){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,r)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(2)):(i=[r(0),r(2)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return e.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){for(var t=e.words,r=e.sigBytes-1,r=e.sigBytes-1;r>=0;r--)if(t[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},e.pad.ZeroPadding})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(2)):(i=[r(0),r(2)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(2)):(i=[r(0),r(2)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(t){var r=e,n=r.lib,i=n.CipherParams,o=r.enc,a=o.Hex,s=r.format;s.Hex={stringify:function(e){return e.ciphertext.toString(a)},parse:function(e){var t=a.parse(e);return i.create({ciphertext:t})}}}(),e.format.Hex})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(12),r(16),r(10),r(2)):(i=[r(0),r(12),r(16),r(10),r(2)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(){var t=e,r=t.lib,n=r.BlockCipher,i=t.algo,o=[],a=[],s=[],c=[],u=[],f=[],d=[],l=[],h=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var r=0,n=0,t=0;t<256;t++){var i=n^n<<1^n<<2^n<<3^n<<4;i=i>>>8^255&i^99,o[r]=i,a[i]=r;var _=e[r],m=e[_],v=e[m],b=257*e[i]^16843008*i;s[r]=b<<24|b>>>8,c[r]=b<<16|b>>>16,u[r]=b<<8|b>>>24,f[r]=b;var b=16843009*v^65537*m^257*_^16843008*r;d[i]=b<<24|b>>>8,l[i]=b<<16|b>>>16,h[i]=b<<8|b>>>24,p[i]=b,r?(r=_^e[e[e[v^_]]],n^=e[e[n]]):r=n=1}}();var _=[0,1,2,4,8,16,32,64,128,27,54],m=i.AES=n.extend({_doReset:function(){var e;if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,r=t.words,n=t.sigBytes/4,i=this._nRounds=n+6,a=4*(i+1),s=this._keySchedule=[],c=0;c<a;c++)c<n?s[c]=r[c]:(e=s[c-1],c%n?n>6&&c%n==4&&(e=o[e>>>24]<<24|o[e>>>16&255]<<16|o[e>>>8&255]<<8|o[255&e]):(e=e<<8|e>>>24,e=o[e>>>24]<<24|o[e>>>16&255]<<16|o[e>>>8&255]<<8|o[255&e],e^=_[c/n|0]<<24),s[c]=s[c-n]^e);for(var u=this._invKeySchedule=[],f=0;f<a;f++){var c=a-f;if(f%4)var e=s[c];else var e=s[c-4];u[f]=f<4||c<=4?e:d[o[e>>>24]]^l[o[e>>>16&255]]^h[o[e>>>8&255]]^p[o[255&e]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,c,u,f,o)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,d,l,h,p,a);var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,o,a,s){for(var c=this._nRounds,u=e[t]^r[0],f=e[t+1]^r[1],d=e[t+2]^r[2],l=e[t+3]^r[3],h=4,p=1;p<c;p++){var _=n[u>>>24]^i[f>>>16&255]^o[d>>>8&255]^a[255&l]^r[h++],m=n[f>>>24]^i[d>>>16&255]^o[l>>>8&255]^a[255&u]^r[h++],v=n[d>>>24]^i[l>>>16&255]^o[u>>>8&255]^a[255&f]^r[h++],b=n[l>>>24]^i[u>>>16&255]^o[f>>>8&255]^a[255&d]^r[h++];u=_,f=m,d=v,l=b}var _=(s[u>>>24]<<24|s[f>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^r[h++],m=(s[f>>>24]<<24|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^r[h++],v=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&f])^r[h++],b=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[f>>>8&255]<<8|s[255&d])^r[h++];e[t]=_,e[t+1]=m,e[t+2]=v,e[t+3]=b},keySize:8});t.AES=n._createHelper(m)}(),e.AES})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(12),r(16),r(10),r(2)):(i=[r(0),r(12),r(16),r(10),r(2)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(){function t(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function r(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}var n=e,i=n.lib,o=i.WordArray,a=i.BlockCipher,s=n.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],f=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=s.DES=a.extend({_doReset:function(){for(var e=this._key,t=e.words,r=[],n=0;n<56;n++){var i=c[n]-1;r[n]=t[i>>>5]>>>31-i%32&1}for(var o=this._subKeys=[],a=0;a<16;a++){for(var s=o[a]=[],d=f[a],n=0;n<24;n++)s[n/6|0]|=r[(u[n]-1+d)%28]<<31-n%6,s[4+(n/6|0)]|=r[28+(u[n+24]-1+d)%28]<<31-n%6;s[0]=s[0]<<1|s[0]>>>31;for(var n=1;n<7;n++)s[n]=s[n]>>>4*(n-1)+3;s[7]=s[7]<<5|s[7]>>>27}for(var l=this._invSubKeys=[],n=0;n<16;n++)l[n]=o[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,n,i){this._lBlock=e[n],this._rBlock=e[n+1],t.call(this,4,252645135),t.call(this,16,65535),r.call(this,2,858993459),r.call(this,8,16711935),t.call(this,1,1431655765);for(var o=0;o<16;o++){for(var a=i[o],s=this._lBlock,c=this._rBlock,u=0,f=0;f<8;f++)u|=d[f][((c^a[f])&l[f])>>>0];this._lBlock=c,this._rBlock=s^u}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,t.call(this,1,1431655765),r.call(this,8,16711935),r.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),e[n]=this._lBlock,e[n+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});n.DES=a._createHelper(h);var p=s.TripleDES=a.extend({_doReset:function(){var e=this._key,t=e.words;if(2!==t.length&&4!==t.length&&t.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var r=t.slice(0,2),n=t.length<4?t.slice(0,2):t.slice(2,4),i=t.length<6?t.slice(0,2):t.slice(4,6);this._des1=h.createEncryptor(o.create(r)),this._des2=h.createEncryptor(o.create(n)),this._des3=h.createEncryptor(o.create(i))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});n.TripleDES=a._createHelper(p)}(),e.TripleDES})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(12),r(16),r(10),r(2)):(i=[r(0),r(12),r(16),r(10),r(2)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(){function t(){for(var e=this._S,t=this._i,r=this._j,n=0,i=0;i<4;i++){t=(t+1)%256,r=(r+e[t])%256;var o=e[t];e[t]=e[r],e[r]=o,n|=e[(e[t]+e[r])%256]<<24-8*i}return this._i=t,this._j=r,n}var r=e,n=r.lib,i=n.StreamCipher,o=r.algo,a=o.RC4=i.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,n=this._S=[],i=0;i<256;i++)n[i]=i;for(var i=0,o=0;i<256;i++){var a=i%r,s=t[a>>>2]>>>24-a%4*8&255;o=(o+n[i]+s)%256;var c=n[i];n[i]=n[o],n[o]=c}this._i=this._j=0},_doProcessBlock:function(e,r){e[r]^=t.call(this)},keySize:8,ivSize:0});r.RC4=i._createHelper(a);var s=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)t.call(this)}});r.RC4Drop=i._createHelper(s)}(),e.RC4})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(12),r(16),r(10),r(2)):(i=[r(0),r(12),r(16),r(10),r(2)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(){function t(){for(var e=this._X,t=this._C,r=0;r<8;r++)s[r]=t[r];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0;for(var r=0;r<8;r++){var n=e[r]+t[r],i=65535&n,o=n>>>16,a=((i*i>>>17)+i*o>>>15)+o*o,u=((4294901760&n)*n|0)+((65535&n)*n|0);c[r]=a^u}e[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,e[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,e[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,e[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,e[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,e[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,e[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,e[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}var r=e,n=r.lib,i=n.StreamCipher,o=r.algo,a=[],s=[],c=[],u=o.Rabbit=i.extend({_doReset:function(){for(var e=this._key.words,r=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var n=0;n<4;n++)t.call(this);for(var n=0;n<8;n++)o[n]^=i[n+4&7];if(r){var a=r.words,s=a[0],c=a[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),f=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),d=u>>>16|4294901760&f,l=f<<16|65535&u;o[0]^=u,o[1]^=d,o[2]^=f,o[3]^=l,o[4]^=u,o[5]^=d,o[6]^=f,o[7]^=l;for(var n=0;n<4;n++)t.call(this)}},_doProcessBlock:function(e,r){var n=this._X;t.call(this),a[0]=n[0]^n[5]>>>16^n[3]<<16,a[1]=n[2]^n[7]>>>16^n[5]<<16,a[2]=n[4]^n[1]>>>16^n[7]<<16,a[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)a[i]=16711935&(a[i]<<8|a[i]>>>24)|4278255360&(a[i]<<24|a[i]>>>8),e[r+i]^=a[i]},blockSize:4,ivSize:2});r.Rabbit=i._createHelper(u)}(),e.Rabbit})},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(12),r(16),r(10),r(2)):(i=[r(0),r(12),r(16),r(10),r(2)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return function(){function t(){for(var e=this._X,t=this._C,r=0;r<8;r++)s[r]=t[r];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0;for(var r=0;r<8;r++){var n=e[r]+t[r],i=65535&n,o=n>>>16,a=((i*i>>>17)+i*o>>>15)+o*o,u=((4294901760&n)*n|0)+((65535&n)*n|0);c[r]=a^u}e[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,e[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,e[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,e[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,e[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,e[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,e[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,e[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}var r=e,n=r.lib,i=n.StreamCipher,o=r.algo,a=[],s=[],c=[],u=o.RabbitLegacy=i.extend({_doReset:function(){var e=this._key.words,r=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var o=0;o<4;o++)t.call(this);for(var o=0;o<8;o++)i[o]^=n[o+4&7];if(r){var a=r.words,s=a[0],c=a[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),f=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),d=u>>>16|4294901760&f,l=f<<16|65535&u;i[0]^=u,i[1]^=d,i[2]^=f,i[3]^=l,i[4]^=u,i[5]^=d,i[6]^=f,i[7]^=l;for(var o=0;o<4;o++)t.call(this)}},_doProcessBlock:function(e,r){var n=this._X;t.call(this),a[0]=n[0]^n[5]>>>16^n[3]<<16,a[1]=n[2]^n[7]>>>16^n[5]<<16,a[2]=n[4]^n[1]>>>16^n[7]<<16,a[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)a[i]=16711935&(a[i]<<8|a[i]>>>24)|4278255360&(a[i]<<24|a[i]>>>8),e[r+i]^=a[i]},blockSize:4,ivSize:2});r.RabbitLegacy=i._createHelper(u)}(),e.RabbitLegacy})},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=t.ChannelProfile={Communication:0,InteractiveLive:1,LowInteractiveLive:2},a=t.ClientRole={Interactive:0,Live:1};t.ChannelProfileManager=function(){function e(){n(this,e),this._channelProfile=o.Communication,this._clientRole=a.Interactive}return i(e,[{key:"setChannelProfile",value:function(e){return(o.Communication==e||o.InteractiveLive==e||o.LowInteractiveLive==e)&&(this._channelProfile=e,!0)}},{key:"isChannelProfileCdnLive",get:function(){return this._channelProfile==o.LowInteractiveLive}},{key:"isChannelProfileInteractiveLive",get:function(){return this._channelProfile==o.InteractiveLive}},{key:"isClientRoleLive",get:function(){return this._clientRole==a.Live}},{key:"clientRole",set:function(e){this._clientRole=e},get:function(){return this._clientRole}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SignalingBase=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(14),c=function(e){return e&&e.__esModule?e:{default:e}}(s);t.SignalingBase=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),a(t,[{key:"joinChannel",value:function(){return new Promise(function(e,t){t()})}},{key:"uploadStatus",value:function(e){return new Promise(function(e,t){t()})}},{key:"leave",value:function(){return new Promise(function(e,t){t()})}},{key:"publish",value:function(e){return new Promise(function(e,t){t()})}}]),t}(c.default)},function(e,t,r){"use strict";e.exports={JOINCHANNEL:"joinchannel",RECONNECT:"reconnect",KEEPALIVE:"keepalive",PUBLISH:"publish",UNPUBLISH:"unpublish",LEAVECHANNEL:"leavechannel",STATUSREPORT:"statusreport",REFRESHURL:"refreshurl",BYE:"bye",ROLEUPDATE:"roleupdate",NOTIFYPUBLISH:"notifypublish",NOTIFYLEAVE:"notifyleave",NOTIFYSTATUS:"notifystatus",WSCLOSE:"wsclose",WSERROR:"wserror"}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(173),u=n(c),f=r(85),d=(n(f),function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n._resolutionArr=[{width:1080,height:720},{width:720,height:480},{width:640,height:480},{width:640,height:360},{width:320,height:240}],n._videoProfile.width=640,n._videoProfile.height=480,n}return a(t,e),s(t,[{key:"setExternalMediaTrack",value:function(e,t){return!1}},{key:"_getCameraVideoHoldsConstraints",value:function(){var e={};return this._cameraInfo.facingMode||this._cameraInfo.deviceId?(e.video=this._videoProfile.getVideoConstraints(),this._cameraInfo.facingMode?e.video.facingMode={exact:this._cameraInfo.facingMode}:this._cameraInfo.deviceId&&(e.video.deviceId={exact:this._cameraInfo.deviceId})):e.video=this._videoProfile.getVideoConstraints(),e.video&&1!=e.video?e.video.width<=1280&&e.video.height<=720&&(e.video.width=1280,e.video.height=720):e.video={width:1280,height:720},e=this._addAspectRatio(e)}},{key:"_getApplyPreviewConstraints",value:function(){return this._videoProfile.getVideoConstraints()}},{key:"_getApplyPublishConstraints",value:function(){return this._videoProfile.getVideoConstraints()}},{key:"_setVideoElementAttribute",value:function(e){this._localVideoElement&&(this._localVideoElement.setAttribute("playsinline",""),this._localVideoElement.setAttribute("autoplay",""),this._localVideoElement.srcObject=e)}}]),t}(u.default));t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(8),u=n(c),f=r(174),d=n(f),l=r(354),h=n(l),p=r(18),_=n(p),m=r(355),v=n(m),b=r(11),y=n(b),g=r(13),S=n(g),w=r(356),k=n(w),E=r(14),R=n(E),C=r(39),A=n(C),O=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._common=e,n._log=r,n._resoluting=!1,n._defaultAudio=!0,n._localVideoElement=null,n._screenShareVideo=null,n._publishStream=null,n._preViewStream=null,n._resolutionArr=[{width:1280,height:720},{width:640,height:480},{width:320,height:240}],n._enableHighDefinitionPreview=!0,n._canvasScreenShare=null,n._audioTrack=null,n._cameraVideoTrack=null,n._externalAudioTrack=null,n._externalCameraTrack=null,n._externalScreenTrack=null,n._holdCameraTrack=null,n._labelMap={},n._enableCamera=!0,n._screenShareProfile=new v.default(960,540,10,15e5),n._videoProfile=new d.default(640,480,15,5e5),n._audioProfile=new h.default(24e3),n._cameraInfo={video:!0},n._audioInfo={audio:!0},n._supportedConstraints=navigator&&navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints?navigator.mediaDevices.getSupportedConstraints():{},navigator&&navigator.mediaDevices&&(navigator.mediaDevices.ondevicechange=function(e){n._common.dispatchEvent(S.default.OnDeviceChange)}),n._isSupportRTC=!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia),n._getHoldCameraTracking=!1,n}return a(t,e),s(t,[{key:"setExternalMediaTrack",value:function(e,t){var r=this;if(0==t){if(!e)return this._releaseExternalAudioTrack(),!0;if("audio"==e.kind)return this._externalAudioTrack=e,this._externalAudioTrack.onended=function(e){r._common.dispatchEvent(S.default.OnError,{errorCode:y.default.ERROR_DEVICE_AUDIO_ENDED,message:"audio track ended"})},!0}else if(1==t){if(!e)return this._releaseExternalCameraTrack(),!0;if("video"==e.kind)return this._externalScreenTrack&&e.id==this._externalScreenTrack.id?this._externalCameraTrack=e.clone():this._externalCameraTrack=e,this._externalCameraTrack.onended=function(e){r._common.dispatchEvent(S.default.OnError,{errorCode:y.default.ERROR_DEVICE_VIDEO_ENDED,message:"video track ended"})},!0}else if(2==t){if(!e)return this._releaseExternalScreenTrack(),!0;if("video"==e.kind)return this._externalCameraTrack&&e.id==this._externalCameraTrack.id?this._externalScreenTrack=e.clone():this._externalScreenTrack=e,this._externalScreenTrack.onended=function(e){r._common.dispatchEvent(S.default.OnError,{errorCode:y.default.ERROR_SCREENSHARE_ENDED,message:"screenshare ended"})},!0}return!1}},{key:"computeMaxBitrate",value:function(e,t,r){for(var n=void 0,i=e*t,o=r>=30?k.default.FPS_30:k.default.FPS_15,a=0;a<o.length;a++)if(i<=o[a].width*o[a].height){n=1e3*o[a].bitrate;break}return n||(n=1e3*o[o.length-1].bitrate),n}},{key:"enableHighDefinitionPreview",value:function(e){return!1}},{key:"startPublishScreenShare",value:function(){}},{key:"stopPublishScreenShare",value:function(){}},{key:"getVideoTrackType",value:function(e){return this._labelMap[e]}},{key:"_getAudioTrack",value:function(){var e=this;return new Promise(function(t,r){e._externalAudioTrack?t(e._externalAudioTrack):navigator.mediaDevices.getUserMedia(e._getAudioConstraints()).then(function(r){e._audioTrack=r.getAudioTracks()[0],e._audioTrack.onended=function(t){e._common.dispatchEvent(S.default.OnError,{errorCode:y.default.ERROR_DEVICE_AUDIO_ENDED,message:"audio track ended"})},t(e._audioTrack)}).catch(function(e){r(_.default.parseAudioDeviceError(e))})})}},{key:"_getCameraVideoTrack",value:function(){var e=this;return new Promise(function(t,r){e._externalCameraTrack?t(e._externalCameraTrack):e._getHoldCameraTrack().then(function(){var r=e._holdCameraTrack.clone(),n=e._getApplyPublishConstraints();r.applyConstraints(n).then(function(){}).catch(function(e){}).then(function(){e._cameraVideoTrack=r,e._cameraVideoTrack.onended=function(t){e._common.dispatchEvent(S.default.OnError,{errorCode:y.default.ERROR_DEVICE_VIDEO_ENDED,message:"video track ended"})},t(e._cameraVideoTrack)})}).catch(function(e){r(e)})})}},{key:"getPreViewStream",value:function(e){var t=this;return new Promise(function(r,n){t._checkPreview().then(function(){if(t._preViewStream)return t._releaseLocalVideoElement(),t._localVideoElement=e,t._setVideoElementAttribute(t._preViewStream),void r();t.releasePreviewStream(),t._localVideoElement=e,t._setVideoElementAttribute(null),t._getPreviewStream().then(function(e){t._preViewStream=e,t._localVideoElement&&(t._localVideoElement.srcObject=e),r()}).catch(function(e){n(_.default.parseVideoDeviceError(e))})}).catch(function(e){n(e)})})}},{key:"getPublishStream",value:function(){var e=this;return new Promise(function(t,r){e._checkSupport().then(function(){if(e._publishStream)t(e._publishStream);else if(e._publishStream)t(e._publishStream);else if(e._publishStream=new MediaStream,e._common.isAudioOnly)e._getAudioTrack().then(function(r){e._publishStream.addTrack(r),r.enabled=e._common.configLocalAudioPublish,e._labelMap[r.id]=u.default.Audio,t(e._publishStream)}).catch(function(t){e.releasePublishStream(),r(t)});else{var n=!1,i=!1;if(e._enableCamera)e._getCameraVideoTrack().then(function(t){e._publishStream.addTrack(t),t.enabled=e._common.configLocalCameraPublish,e._labelMap[t.id]=u.default.LargeVideo}).catch(function(t){var n=_.default.parseVideoDeviceError(t);e._common.configLocalAudioPublish||e._common.configLocalScreenPublish?e._common.dispatchEvent(S.default.OnError,n):r(n)}).then(function(){if(i=!0,n)return void t(e._publishStream)});else if(i=!0,n)return void t(e._publishStream);e._getAudioTrack().then(function(r){if(e._publishStream.addTrack(r),r.enabled=e._common.configLocalAudioPublish,n=!0,e._labelMap[r.id]=u.default.Audio,i)return void t(e._publishStream)}).catch(function(t){e.releasePublishStream(),r(t)})}}).catch(function(e){r(e)})})}},{key:"getScreenShareStream",value:function(e){var t=this;return new Promise(function(r,n){if(t._canvasScreenShare){t._screenShareVideo=e;var i=void 0;i=t._externalScreenTrack?t._externalScreenTrack:t._canvasScreenShare.getScreenShareVideoTrack();var o=new MediaStream;return o.addTrack(i),t._setScreenShareVideoElementAttribute(o),void r()}return void n({errorCode:y.default.ERROR_NOTSUPPORT_SCREENSHARE,message:"not support screenshare"})})}},{key:"releasePreviewStream",value:function(){this._releaseLocalVideoElement(),this._releasePreviewStream()}},{key:"releasePublishStream",value:function(){this._publishStream&&this._publishStream.getTracks().forEach(function(e){e.stop()}),this._publishStream=null,this._releaseExternalAudioTrack(),this._releaseExternalCameraTrack(),this._releaseExternalScreenTrack(),null==this._preViewStream&&this._releaseHoldCameraTrack()}},{key:"releaseScreenShareStream",value:function(){this._screenShareVideo&&(this._screenShareVideo.srcObject=null,this._screenShareVideo=null)}},{key:"muteLocalCamera",value:function(e){if(this._publishStream){var t=this._publishStream.getVideoTracks();if(t.length){for(var r=0;r<t.length;++r)u.default.LargeVideo==this.getVideoTrackType(t[r].id)&&(t[r].enabled=!e);return!0}}return!1}},{key:"getDevices",value:function(){var e=this;return new Promise(function(t,r){navigator.mediaDevices.enumerateDevices().then(function(r){var n=[],i=[],o=[];r.forEach(function(e){"audioinput"==e.kind?i.push(e):"videoinput"==e.kind?n.push(e):"audiooutput"==e.kind&&o.push(e)});var a={videoDevices:n,audioDevices:i,audioOutputDevices:o};e._log.reportGetDevice(a),t(a)}).catch(function(t){e._log.reportGetDevice(t),r(t)})})}},{key:"getAvailableResolutions",value:function(e){var t=this;return new Promise(function(r,n){if(t._resoluting)return void n({message:""});t._resoluting=!0;var i="";"user"===e||"environment"===e?(i=e,e="",t._getResolution(e,i).then(function(e){t._resoluting=!1,r(e)}).catch(function(e){t._resoluting=!1,n(e)})):e?t.getDevices().then(function(o){for(var a=o.videoDevices,s=!1,c=0;c<a.length;++c)if(a[c].deviceId==e){s=!0;break}s?t._getResolution(e,i).then(function(e){t._resoluting=!1,r(e)}).catch(function(e){t._resoluting=!1,n(e)}):n({message:""})}).catch(function(e){n(e)}):t._getResolution(e,i).then(function(e){t._resoluting=!1,r(e)}).catch(function(e){t._resoluting=!1,n(e)})})}},{key:"getUserMedia",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(t,r){navigator.mediaDevices.getUserMedia(e).then(function(e){t(e)}).catch(function(e){r(e)})})}},{key:"_updateAudioCapture",value:function(){var e=this;if(this._publishStream&&this._publishStream.getAudioTracks().length){var t=this._audioTrack;this._getAudioTrack().then(function(r){r.enabled=t.enabled,e.dispatchEvent(A.default.AudioTrackChange,r)})}}},{key:"_setVideoElementAttribute",value:function(e){this._localVideoElement&&(this._localVideoElement.setAttribute("autoplay",""),this._localVideoElement.srcObject=e)}},{key:"_setScreenShareVideoElementAttribute",value:function(e){this._screenShareVideo&&(this._screenShareVideo.setAttribute("autoplay",""),this._screenShareVideo.srcObject=e)}},{key:"_releaseLocalVideoElement",value:function(){this._localVideoElement&&(this._localVideoElement.srcObject=null,this._localVideoElement=null)}},{key:"_releasePreviewStream",value:function(){this._preViewStream&&this._preViewStream.getTracks().forEach(function(e){e.stop()}),this._preViewStream=null,null==this._publishStream&&this._releaseHoldCameraTrack()}},{key:"_getResolution",value:function(e,t){var r=this,n=this._resolutionArr.length,i=0,o=[];return new Promise(function(a,s){!function c(){var u=r._resolutionArr[i];r._checkResolution(e,t,u.width,u.height).then(function(e){o.push({width:e.width?e.width:u.width,height:e.height?e.height:u.height}),i==n-1?a(o):(i++,c())}).catch(function(e){i==n-1?o.length?a(o):s(e):(i++,c())})}()})}},{key:"_checkResolution",value:function(e,t,r,n){var i={audio:!1,video:{width:{exact:r},height:{exact:n}}};return e&&(i.video.deviceId={exact:e}),new Promise(function(e,t){navigator.mediaDevices.getUserMedia(i).then(function(t){t.getTracks().forEach(function(e){e.stop()}),e({width:r,height:n})}).catch(function(e){t(e)})})}},{key:"_getAudioConstraints",value:function(){var e={audio:{}};this._audioInfo.deviceId&&Object.assign(e.audio,this._audioInfo),this._addAudioConstraints3AParam(e,"echoCancellation"),this._addAudioConstraints3AParam(e,"autoGainControl"),this._addAudioConstraints3AParam(e,"noiseSuppression");var t=!0;for(var r in e.audio){t=!1;break}return t&&(e.audio=!0),e}},{key:"_addAudioConstraints3AParam",value:function(e,t){this._supportedConstraints[t]&&(e.audio[t]={ideal:!0})}},{key:"_addAspectRatio",value:function(e){return e.video&&e.video.width&&e.video.height&&(e.video.aspectRatio=e.video.width/e.video.height),e}},{key:"_getHoldCameraTrack",value:function(){var e=this;return new Promise(function(t,r){if(e._holdCameraTrack)t();else if(e._getHoldCameraTracking)var n=setInterval(function(){e._getHoldCameraTracking||(clearInterval(n),n=0,e._getHoldCameraTrack().then(function(){t()}).catch(function(e){r(e)}))},100);else{var i=e._getCameraVideoHoldsConstraints();e._getHoldCameraTracking=!0,navigator.mediaDevices.getUserMedia(i).then(function(r){e._holdCameraTrack=r.getVideoTracks()[0],e._getHoldCameraTracking=!1,t()}).catch(function(t){e._getHoldCameraTracking=!1,r(t)})}})}},{key:"_releaseHoldCameraTrack",value:function(){this._holdCameraTrack&&(this._holdCameraTrack.stop(),this._holdCameraTrack=null)}},{key:"_getApplyPreviewConstraints",value:function(){var e=this._videoProfile.getVideoConstraints();return this._enableHighDefinitionPreview&&e.width<=1280&&e.height<=720&&(e.width=1280,e.height=720),e.aspectRatio=e.width/e.height,e}},{key:"_getApplyPublishConstraints",value:function(){var e=this._videoProfile.getVideoConstraints();return e.aspectRatio=e.width/e.height,e}},{key:"_getPreviewStream",value:function(){var e=this;return new Promise(function(t,r){e._getHoldCameraTrack().then(function(){var r=e._holdCameraTrack.clone(),n=e._getApplyPreviewConstraints();r.applyConstraints(n).then(function(){}).catch(function(e){}).then(function(){var e=new MediaStream;e.addTrack(r),t(e)})}).catch(function(e){r(e)})})}},{key:"_getCameraVideoHoldsConstraints",value:function(){var e={};return(this._cameraInfo.facingMode||this._cameraInfo.deviceId)&&(e.video=this._videoProfile.getVideoConstraints(),this._cameraInfo.facingMode?e.video.facingMode={exact:this._cameraInfo.facingMode}:this._cameraInfo.deviceId&&(e.video.deviceId={exact:this._cameraInfo.deviceId})),e.video&&1!=e.video?e.video.width<=1280&&e.video.height<=720&&(e.video.width=1280,e.video.height=720):e.video={width:1280,height:720},e}},{key:"_releaseExternalAudioTrack",value:function(){this._externalAudioTrack&&(this._externalAudioTrack.onended=null,this._externalAudioTrack.stop()),this._externalAudioTrack=null}},{key:"_releaseExternalCameraTrack",value:function(){this._externalCameraTrack&&(this._externalCameraTrack.onended=null,this._externalCameraTrack.stop()),this._externalCameraTrack=null}},{key:"_releaseExternalScreenTrack",value:function(){this._externalScreenTrack&&(this._externalScreenTrack.onended=null,this._externalScreenTrack.stop()),this._externalScreenTrack=null}},{key:"_checkSupport",value:function(){var e=this;return new Promise(function(t,r){e._isSupportRTC?t():r({errorCode:y.default.ERROR_NOTSUPPORT_WEBRTC,message:"Not support webrtc on this platform"})})}},{key:"_checkPreview",value:function(){var e=this;return new Promise(function(t,r){e._checkSupport().then(function(){e.enableCamera?t():r({errorCode:y.default.ERROR_OPTIONS_ENABLECAMERA,message:"enableCamera is false, can not startPreview"})}).catch(function(e){r(e)})})}},{key:"screenShareProfile",set:function(e){e&&(this._screenShareProfile.width=e.width,this._screenShareProfile.height=e.height,this._screenShareProfile.frameRate=e.frameRate||10,this._screenShareProfile.maxBitrate=this.computeMaxBitrate(e.width,e.height,e.frameRate||10),this._screenShareProfile.mediaSource=e.mediaSource)},get:function(){return this._screenShareProfile}},{key:"videoProfile",set:function(e){e&&(this._videoProfile.width=e.width,this._videoProfile.height=e.height,this._videoProfile.frameRate=e.frameRate||15,this._videoProfile.maxBitrate=this.computeMaxBitrate(e.width,e.height,e.frameRate||15))},get:function(){return this._videoProfile}},{key:"audioProfile",set:function(e){e&&(this._audioProfile.maxBitrate=e.maxBitrate)},get:function(){return this._audioProfile}},{key:"currentCamera",set:function(e){this._cameraInfo=e}},{key:"currentAudioCapture",set:function(e){this._audioInfo=e,this._updateAudioCapture()}},{key:"enableCamera",set:function(e){this._enableCamera=e},get:function(){return this._enableCamera}}]),t}(R.default);t.default=O},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r,i,o){n(this,e),this._width=t,this._height=r,this._frameRate=i,this._maxBitrate=o}return i(e,[{key:"getVideoConstraints",value:function(){return{width:this._width,height:this._height,frameRate:this._frameRate}}},{key:"_checkValueType",value:function(e){return"number"==typeof e&&NaN!=e}},{key:"width",set:function(e){e=Number(e),this._checkValueType(e)&&(this._width=e)},get:function(){return this._width}},{key:"height",set:function(e){e=Number(e),this._checkValueType(e)&&(this._height=e)},get:function(){return this._height}},{key:"frameRate",set:function(e){e=Number(e),this._checkValueType(e)&&e>0&&(this._frameRate=e)},get:function(){return this._frameRate}},{key:"maxBitrate",set:function(e){e=Number(e),this._checkValueType(e)&&(this._maxBitrate=e)},get:function(){return this._maxBitrate}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},u=r(60),f=n(u),d=r(39),l=n(d),h=r(8),p=n(h),_=r(18),m=n(_),v=r(13),b=n(v),y=r(361),g=n(y),S=function(e){function t(e,r){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return a(t,e),s(t,[{key:"getPublishStream",value:function(){var e=this;return new Promise(function(t,r){e._checkSupport().then(function(){if(e._publishStream)t(e._publishStream);else if(e._publishStream=new MediaStream,e._common.isAudioOnly)e._getAudioTrack().then(function(r){e._publishStream.addTrack(r),r.enabled=e._common.configLocalAudioPublish,e._labelMap[r.id]=p.default.Audio,t(e._publishStream)}).catch(function(t){e.releasePublishStream(),r(t)});else{var n=!1,i=!1,o=!1;if(e._enableCamera)e._getCameraVideoTrack().then(function(t){e._publishStream||(e._publishStream=new MediaStream),e._publishStream.addTrack(t),t.enabled=e._common.configLocalCameraPublish,e._labelMap[t.id]=p.default.LargeVideo}).catch(function(t){var n=m.default.parseVideoDeviceError(t);e._common.configLocalAudioPublish||e._common.configLocalScreenPublish?e._common.dispatchEvent(b.default.OnError,n):r(n)}).then(function(){if(i=!0,n&&o)return void t(e._publishStream)});else if(i=!0,n&&o)return void t(e._publishStream);var a=void 0;if(a=e._externalScreenTrack?e._externalScreenTrack:e._canvasScreenShare.getScreenShareVideoTrack(),e._common.configLocalScreenPublish)if(e._externalScreenTrack){if(a.enabled=e._common.configLocalScreenPublish,e._labelMap[a.id]=p.default.ScreenShareVideo,e._publishStream||(e._publishStream=new MediaStream),e._publishStream.addTrack(a),o=!0,n&&i)return void t(e._publishStream)}else e._canvasScreenShare.startScreenShare().then(function(){}).catch(function(t){e._common.configLocalScreenPublish=!1}).then(function(){if(a.enabled=e._common.configLocalScreenPublish,e._labelMap[a.id]=p.default.ScreenShareVideo,e._publishStream||(e._publishStream=new MediaStream),e._publishStream.addTrack(a),o=!0,n&&i)return void t(e._publishStream)});else if(a.enabled=e._common.configLocalScreenPublish,e._labelMap[a.id]=p.default.ScreenShareVideo,e._publishStream||(e._publishStream=new MediaStream),e._publishStream.addTrack(a),o=!0,n&&i)return void t(e._publishStream);e._getAudioTrack().then(function(r){if(r=e._mixAudioTrack(r),e._publishStream||(e._publishStream=new MediaStream),e._publishStream.addTrack(r),r.enabled=e._common.configLocalAudioPublish,n=!0,e._labelMap[r.id]=p.default.Audio,o&&i)return void t(e._publishStream)}).catch(function(t){e.releasePublishStream(),r(t)})}}).catch(function(e){r(e)})})}},{key:"startPublishScreenShare",value:function(){var e=this;return new Promise(function(r,n){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"startPublishScreenShare",e).call(e).then(function(){var t=e._publishStream.getAudioTracks()[0],n=t.clone();n.enabled=!0;var i=e._mixAudioTrack(n);t.id!==i.id&&(i.enabled=t.enabled,e._publishStream.removeTrack(t),t.enabled=!0,e._publishStream.addTrack(i),e.dispatchEvent(l.default.AudioTrackChange,i)),r()}).catch(function(e){n(e)})})}},{key:"_mixAudioTrack",value:function(e){var t=this._canvasScreenShare.getScreenShareAudioTrack();if(t){e=new g.default([e,t]).getMixedAudioTrack()}return e}},{key:"releasePublishStream",value:function(){this._canvasScreenShare.relaeaseStream(),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"releasePublishStream",this).call(this)}}]),t}(f.default);t.default=S},function(e,t,r){"use strict";(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r={};r.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},r.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},r.parseCandidate=function(e){var t=void 0;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var r={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1];break;case"ufrag":r.ufrag=t[n+1],r.usernameFragment=t[n+1];break;default:void 0===r[t[n]]&&(r[t[n]]=t[n+1])}return r},r.writeCandidate=function(e){var t=[];t.push(e.foundation);var r=e.component;"rtp"===r?t.push(1):"rtcp"===r?t.push(2):t.push(r),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t={},r=void 0,n=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<n.length;i++)r=n[i].trim().split("="),t[r[0].trim()]=r[1];return t},r.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach(function(t){void 0!==e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)}),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),r},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===t(e.keyParams)?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],i=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substr(12),password:i.substr(10)}:null},r.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e),i=n[0].split(" "),o=3;o<i.length;o++){var a=i[o],s=r.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(s){var c=r.parseRtpMap(s),u=r.matchPrefix(e,"a=fmtp:"+a+" ");switch(c.parameters=u.length?r.parseFmtp(u[0]):{},c.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(r.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(n+="a=maxptime:"+i+"\r\n"),t.headerExtensions&&t.headerExtensions.forEach(function(e){n+=r.writeExtmap(e)}),n},r.parseRtpEncodingParameters=function(e){var t=[],n=r.parseRtpParameters(e),i=-1!==n.fecMechanisms.indexOf("RED"),o=-1!==n.fecMechanisms.indexOf("ULPFEC"),a=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),s=a.length>0&&a[0].ssrc,c=void 0,u=r.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===s&&(c=u[0][1]),n.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&c&&(r.rtx={ssrc:c}),t.push(r),i&&(r=JSON.parse(JSON.stringify(r)),r.fec={ssrc:s,mechanism:o?"red+ulpfec":"red"},t.push(r))}}),0===t.length&&s&&t.push({ssrc:s});var f=r.matchPrefix(e,"b=");return f.length&&(f=0===f[0].indexOf("b=TIAS:")?parseInt(f[0].substr(7),10):0===f[0].indexOf("b=AS:")?1e3*parseInt(f[0].substr(5),10)*.95-16e3:void 0,t.forEach(function(e){e.maxBitrate=f})),t},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},r.parseMsid=function(e){var t=void 0,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return t=n[0].substr(7).split(" "),{stream:t[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?(t=i[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},r.parseSctpDescription=function(e){var t=r.parseMLine(e),n=r.matchPrefix(e,"a=max-message-size:"),i=void 0;n.length>0&&(i=parseInt(n[0].substr(19),10)),isNaN(i)&&(i=65536);var o=r.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:t.fmt,maxMessageSize:i};var a=r.matchPrefix(e,"a=sctpmap:");if(a.length>0){var s=a[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:i}}},r.writeSctpDescription=function(e,t){var r=[];return r="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&r.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),r.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i=void 0,o=void 0!==t?t:2;return i=e||r.generateSessionId(),"v=0\r\no="+(n||"thisisadapterortc")+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e),n=t[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0],n=t.substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"===t(e)&&(e.exports=r)}).call(t,r(40)(e))},function(e,t,r){e.exports=r(178)},function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0});var o=("function"==typeof Symbol&&Symbol.iterator,r(179)),a=function(e){return e&&e.__esModule?e:{default:e}}(o);r(364),window&&(window.AliRtcEngine=a.default),n=[],void 0!==(i=function(){return a.default}.apply(t,n))&&(e.exports=i),t.default=a.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},f=r(180),d=n(f),l=r(13),h=n(l),p=r(96),_=n(p),m=r(206),v=n(m),b=r(14),y=n(b),g=r(338),S=n(g),w=r(85),k=n(w),E=r(95),R=n(E),C=r(18),A=n(C),O=r(11),T=n(O),M=r(41),P=n(M),I=r(169),x=r(61),D=r(340),L=n(D),N=r(341),B=r(342),j=r(351),U=r(7),V=n(U),H=r(352),F=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._authInfo=new L.default,r._webtrackingclient=new j.WebTrackingClient,r._apiManager=new S.default,r._log=new v.default(r._authInfo,r._webtrackingclient),r._logger=new N.Logger,r._common=new k.default(r),r._common.InitOption(e),r._rtcDeviceManager=H.RtcMediaDeviceFactory.createMediaDeviceManager(r._common,r._log),r._hasJoinedChannel=!1,r._signalingManager=new B.SignalingManager(r._authInfo,r._apiManager,null,r._log,r._webtrackingclient),r._channelInfo=new d.default(r._authInfo,r._common,r._log,r._rtcDeviceManager,r._apiManager,r._signalingManager),r._channelProfileManager=new I.ChannelProfileManager,r._webtrackingclient.uploadCreateInstance(),r}return a(t,e),c(t,[{key:"isSupport",value:function(e){return this._common.InitOption(e),_.default.isSupported(this._channelProfileManager,this._common,this._log,this._rtcDeviceManager.enableCamera)}},{key:"isSupportScreenShare",value:function(){return V.default.isSupportScreenShare}},{key:"setChannelProfile",value:function(e){return!this._hasJoinedChannel&&this._channelProfileManager.setChannelProfile(e)}},{key:"setAudioOnlyMode",value:function(e){if(this._hasJoinedChannel)return!1;this._common.isAudioOnly=e}},{key:"setExternalMediaTrack",value:function(e,t){return this._rtcDeviceManager.setExternalMediaTrack(e,t)}},{key:"setConfigMixBackgroundAudio",value:function(e){return!1}},{key:"getVersion",value:function(){return P.default.version}},{key:"setLogLevel",value:function(e){this._logger.setLogLevel(e)}},{key:"getLogLevel",value:function(){return this._logger.getLogLevel()}},{key:"enableHighDefinitionPreview",value:function(e){return this._rtcDeviceManager.enableHighDefinitionPreview(e)}},{key:"setClientRole",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(n,i){if(I.ClientRole.Interactive==e||I.ClientRole.Live==e)if(t._hasJoinedChannel)if(e==t._channelProfileManager.clientRole&&n(),t._channelProfileManager.isChannelProfileInteractiveLive)if(t._channelInfo.self.isPublishing)r?t.unPublish().then(function(){t.setClientRole(e,!1)}).catch(function(e){console.error("setClientRole unpub error:",e),i(e)}):i();else{var o=(new Date).getTime();t._signalingManager.roleUpdate(e,t._channelProfileManager).then(function(a){var s=(new Date).getTime()-o,c=t._channelProfileManager.clientRole;t._channelProfileManager.clientRole=e,t._log.reportUpdateRole(c,e,s,0),t._common.dispatchEvent(h.default.OnUpdateRole,{oldRole:c,newRole:e}),r?t.publish().then(function(){n()}).catch(function(e){i(e)}):n()}).catch(function(r){t._log.reportUpdateRole(oldRole,e,costtime,-1),i(r)})}else i();else t._channelProfileManager.clientRole=e,n();else i()})}},{key:"setVideoProfile",value:function(e,t){return R.default.CAMERA===t?(this._rtcDeviceManager.videoProfile=e,this._log.reportVideoProfile(e),!0):R.default.SCREEN===t&&(this._rtcDeviceManager.screenShareProfile=e,this._log.reportScreenShareProfile(e),!0)}},{key:"configRemoteCameraTrack",value:function(e,t,r){var n=this._channelInfo.getUser(e);return n?(n.configRemoteCameraTrack(t,r),this._log.reportRemoteCameraTrack(e,t,r,0),!0):(this._log.reportRemoteCameraTrack(e,t,r,1),!1)}},{key:"configRemoteScreenTrack",value:function(e,t){var r=this._channelInfo.getUser(e);return r?(r.configRemoteScreenTrack(t),this._log.reportRemoteScreenTrack(e,t,0),!0):(this._log.reportRemoteScreenTrack(e,t,1),!1)}},{key:"configRemoteAudio",value:function(e,t){var r=this._channelInfo.getUser(e);return r?(r.configRemoteAudio(t),this._log.reportRemoteAudioTrack(e,t,0),!0):(this._log.reportRemoteAudioTrack(e,t,1),!1)}},{key:"getUserList",value:function(){return this._channelProfileManager.isChannelProfileCdnLive&&this._channelProfileManager.isClientRoleLive?[]:this._channelInfo.getUserList()}},{key:"getUserInfo",value:function(e){if(this._channelProfileManager.isChannelProfileCdnLive&&this._channelProfileManager.isClientRoleLive)return null;var t=this._channelInfo.getUser(e);return t?t.getUserInfo():null}},{key:"startLiveStreaming",value:function(e,t){var r=this;return new Promise(function(n,i){if(!r._channelProfileManager.isChannelProfileCdnLive)return void i(A.default.parseOptionError(T.default.ERROR_OPTIONS_CHANNELPROFILE_CDNLIVE));if(r._channelProfileManager.clientRole=I.ClientRole.Live,!r._authInfo.updateAuthInfo(e)){var o=r._authInfo.getErrorMessage();return r.dispatchEvent(h.default.OnError,o),void i({message:o})}if(r._checkHtmlElement(t))r._signalingManager.joinChannel(null).then(function(e){if(!(e&&e.cdn&&e.cdn.pull_streams))return void i(e);r._channelInfo.startLiveStreaming(e.cdn.pull_streams[0],t),n()});else{var a="",c="";t?dom instanceof HTMLElement?(a=t.nodeName,c="wrong htmlelement"):(a=void 0===a?"undefined":s(a),c="video is not htmlelement"):(a="null",c="video is null"),r._log.reportStartPreview(a,-1,c),i({message:"video"})}})}},{key:"stopLiveStreaming",value:function(){return this._channelProfileManager.isChannelProfileCdnLive?this._channelInfo.stopLiveStreaming():(reject(A.default.parseOptionError(T.default.ERROR_OPTIONS_CHANNELPROFILE_CDNLIVE)),!1)}},{key:"muteLiveStream",value:function(e){this._channelInfo.muteLiveStream(e)}},{key:"joinChannel",value:function(e,t){var r=this;return new Promise(function(n,i){if(r._webtrackingclient.reportJoinChannel(e,t),r._channelProfileManager.isChannelProfileCdnLive&&(r._channelProfileManager.clientRole=I.ClientRole.Interactive),!r._authInfo.updateAuthInfo(e,t)){var o=r._authInfo.getErrorMessage();return r.dispatchEvent(h.default.OnError,o),void i({message:o})}r._signalingManager.joinChannel(r._channelProfileManager).then(function(e){r._signalingManager.getAdapt().then(function(e){return e&&e.data&&e.data.user_specified?{log_type:e.data.user_specified.log_type,log_type_ratio:e.data.user_specified.log_type_ratio}:null}).catch(function(e){return null}).then(function(e){r._log.start(r._apiManager.getSTSRefreshUrl(r._authInfo.gslb),r._apiManager.serverUrl,e)}),r._channelInfo.onJoinSuccess(e),r._hasJoinedChannel=!0,n()}).catch(function(e){i(e)})})}},{key:"setAudioVolume",value:function(e,t){return!this._common.customPlay&&this._channelInfo.setAudioVolume(e,t)}},{key:"getAudioVolume",value:function(e){if(!this._common.customPlay){var t=this._channelInfo.getUser(e);if(t)return t.getAudioVolume()}return-1}},{key:"leaveChannel",value:function(){var e=this;return new Promise(function(t,r){if(e._webtrackingclient.reportLeaveChannel(),!e._hasJoinedChannel)return e._log.stopPerformanceInterval(),e._log.stopUpdateToken(),void t();e._hasJoinedChannel=!1,e._channelInfo&&e._channelInfo.clear();var n=(new Date).getTime();e._signalingManager.leave().then(function(r){e._channelInfo.onLeaveChannelSuccess(),e._log.reportLeaveRoom((new Date).getTime()-n,0,r.tid),e._signalingManager.stop(),e._hasJoinedChannel=!1,e._log.stopPerformanceInterval(),e._log.stopUpdateToken(),t()}).catch(function(t){e._log.reportLeaveRoom((new Date).getTime()-n,t.code,t.tid),r(t)})})}},{key:"startPreview",value:function(e){var t=this;return new Promise(function(r,n){if(t._channelProfileManager.isChannelProfileCdnLive&&t._channelProfileManager.isClientRoleLive)return void n(A.default.parseOptionError(T.default.ERROR_OPTIONS_CHANNELPROFILE_RTC));if(t._common.isAudioOnly)return void n(A.default.parseOptionError(T.default.ERROR_OPTIONS_AUDIO_ONLY));if(t._checkHtmlElement(e))t._rtcDeviceManager.getPreViewStream(e).then(function(){t._log.reportStartPreview(e.nodeName,0,""),r()}).catch(function(r){t._log.reportStartPreview(e.nodeName,-1,r.message),n(r)});else{var i="",o="";e?dom instanceof HTMLElement?(i=e.nodeName,o="wrong htmlelement"):(i=void 0===i?"undefined":s(i),o="video is not htmlelement"):(i="null",o="video is null"),t._log.reportStartPreview(i,-1,o),n({message:"video"})}})}},{key:"stopPreview",value:function(){var e=this;return new Promise(function(t,r){if(e._channelProfileManager.isChannelProfileCdnLive&&e._channelProfileManager.isClientRoleLive)return void r(A.default.parseOptionError(T.default.ERROR_OPTIONS_CHANNELPROFILE_RTC));try{e._rtcDeviceManager.releasePreviewStream(),e._log.reportStopPreview(0),t()}catch(t){e._log.reportStopPreview(1),r(t)}})}},{key:"startScreenSharePreview",value:function(e){var t=this;return new Promise(function(r,n){if(t._channelProfileManager.isChannelProfileCdnLive&&t._channelProfileManager.isClientRoleLive)return void n(A.default.parseOptionError(T.default.ERROR_OPTIONS_CHANNELPROFILE_RTC));if(t._checkHtmlElement(e))t._rtcDeviceManager.getScreenShareStream(e).then(function(){r()}).catch(function(e){n(e)});else{var i="",o="";e?dom instanceof HTMLElement?(i=e.nodeName,o="wrong htmlelement"):(i=void 0===i?"undefined":s(i),o="video is not htmlelement"):(i="null",o="video is null"),t._log.reportStartPreview(i,-1,o),n({message:"video"})}})}},{key:"stopScreenSharePreview",value:function(){var e=this;return new Promise(function(t,r){if(e._channelProfileManager.isChannelProfileCdnLive&&e._channelProfileManager.isClientRoleLive)return void r(A.default.parseOptionError(T.default.ERROR_OPTIONS_CHANNELPROFILE_RTC));try{e._rtcDeviceManager.releaseScreenShareStream(),t()}catch(e){r(e)}})}},{key:"publish",value:function(){var e=this;return new Promise(function(t,r){if(e._channelProfileManager.isChannelProfileCdnLive){if(e._channelProfileManager.isClientRoleLive)return void r(A.default.parseOptionError(T.default.ERROR_OPTIONS_CHANNELPROFILE_RTC))}else if(e._channelProfileManager.isChannelProfileInteractiveLive&&e._channelProfileManager.isClientRoleLive)return void r({message:A.default.parseOptionError(T.default.ERROR_OPTIONS_LIVE_CANNOT_PUBLISH)});e._channelInfo.self.publish().then(function(e){t()}).catch(function(e){r(e)})})}},{key:"unPublish",value:function(){var e=this;return new Promise(function(t,r){if(e._channelProfileManager.isChannelProfileCdnLive&&e._channelProfileManager.isClientRoleLive)return void r(A.default.parseOptionError(T.default.ERROR_OPTIONS_CHANNELPROFILE_RTC));e._channelInfo.self.unPublish().then(function(r){e._channelInfo.self.clear(),t(r)}).catch(function(e){r(e)})})}},{key:"subscribe",value:function(e){var t=this;return new Promise(function(r,n){if(t._channelProfileManager.isChannelProfileCdnLive&&t._channelProfileManager.isClientRoleLive)return void n(A.default.parseOptionError(T.default.ERROR_OPTIONS_CHANNELPROFILE_RTC));var i=t._channelInfo.getUser(e);i?i.subscribe().then(function(t){r(e)}).catch(function(e){n(e)}):(t._log.reportSubscribe("","",!1,!1,!1,!1,1,0,0),n({message:""}))})}},{key:"unSubscribe",value:function(e){var t=this;return new Promise(function(r,n){if(t._channelProfileManager.isChannelProfileCdnLive&&t._channelProfileManager.isClientRoleLive)return void n(A.default.parseOptionError(T.default.ERROR_OPTIONS_CHANNELPROFILE_RTC));var i=t._channelInfo.getUser(e);i?i.unSubscribe().then(function(){r()}).catch(function(e){n(e)}):(t._log.reportUnsubscribe(", ",0,0),n({message:""}))})}},{key:"setDisplayRemoteVideo",value:function(e,t,r){if(this._channelProfileManager.isChannelProfileCdnLive&&this._channelProfileManager.isClientRoleLive)return!1;if(this._common.customPlay)return!1;var n=this._checkHtmlElement(t);if(n&&e&&(R.default.CAMERA===r||R.default.SCREEN===r))return this._channelInfo.setDisplayRemoteVideo(e,t,r);var i="",o="";return n?(i=t.nodeName,o=e?"type is "+r:"userId is null"):t?dom instanceof HTMLElement?(i=t.nodeName,o="wrong htmlelement"):(i=void 0===i?"undefined":s(i),o="video is not htmlelement"):(i="null",o="video is null"),this._log.reportSetDisplayRemoteVideo(e,t?t.nodeName:"null",i,-1,o),!1}},{key:"getDevices",value:function(){return this._rtcDeviceManager.getDevices()}},{key:"setAudioOutput",value:function(e){return this._channelInfo.setAudioOutput(e)}},{key:"muteLocalCamera",value:function(e){if(!this._channelInfo.self||!this._channelInfo.self.isCameraPublishing)return!1;this._log.reportMuteLocalCamera(e);var t=this._channelInfo.self.muteLocalCamera(e);return t&&this._signalingManager.uploadStatus(x.StatusParser.getCurrentStatus(this._channelInfo.self.getMicStatus(),this._channelInfo.self.getCameraStatus(),!0)),t}},{key:"muteLocalMic",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._channelInfo.self||!this._channelInfo.self.isAudioPublishing)return!1;this._log.reportMuteLocalMic(e,t);var r=this._channelInfo.self.muteLocalMic(e,t);return r&&this._signalingManager.uploadStatus(x.StatusParser.getCurrentStatus(this._channelInfo.self.getMicStatus(),this._channelInfo.self.getCameraStatus(),!0)),r}},{key:"muteRemoteAudioPlaying",value:function(e,t){if(!this._common.customPlay){var r=this._channelInfo.getUser(e);if(r)return r.muteAudioPlaying(t)}return!1}},{key:"muteAllRemoteAudioPlaying",value:function(e){return!this._common.customPlay&&this._channelInfo.muteAllAudioPlaying(e)}},{key:"startAudioMixing",value:function(e,t){this._channelInfo.self.startAudioMixing(e,t)}},{key:"stopAudioMixing",value:function(e){this._channelInfo.self.stopAudioMixing(e)}},{key:"pauseAudioMixing",value:function(e){this._channelInfo.self.pauseAudioMixing(e)}},{key:"resumeAudioMixing",value:function(e){this._channelInfo.self.resumeAudioMixing(e)}},{key:"adjustAudioMixingVolume",value:function(e){this._channelInfo.self.adjustAudioMixingVolume(e)}},{key:"setAudioMixingPosition",value:function(e,t){this._channelInfo.self.setAudioMixingPosition(e,t)}},{key:"getAudioMixingDuration",value:function(){return this._channelInfo.self.getAudioMixingDuration()}},{key:"getAudioMixingCurrentPosition",value:function(){return this._channelInfo.self.getAudioMixingCurrentPosition()}},{key:"on",value:function(e,t,r){this.replaceEventListener(e,t,r)}},{key:"off",value:function(e,t,r){this.removeEventListener(e,t,r)}},{key:"getAvailableResolutions",value:function(e){return this._rtcDeviceManager.getAvailableResolutions(e)}},{key:"dispose",value:function(){if(this._signalingManager.cancel(),this._hasJoinedChannel){this._hasJoinedChannel=!1,this._signalingManager.leaveSync();!function(e){for(var t=(new Date).getTime(),r=t;r<t+e;)r=(new Date).getTime()}(1e3)}}},{key:"dispatchEvent",value:function(){var e=Array.prototype.slice.call(arguments);return e.length>1&&e[0]==h.default.OnError&&this._log.reportOnError(e[1]),1==e.length?u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispatchEvent",this).call(this,e[0]):2==e.length?u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispatchEvent",this).call(this,e[0],e[1]):3==e.length?u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispatchEvent",this).call(this,e[0],e[1],e[2]):u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispatchEvent",this).call(this,e)}},{key:"_checkHtmlElement",value:function(e){return!(!(e&&e instanceof HTMLElement)||"VIDEO"!==e.nodeName&&"AUDIO"!==e.nodeName)}},{key:"enableAudioVolumeIndicator",set:function(e){this._channelInfo.enableAudioVolumeIndicator(e),this._common.enableAudioVolumeIndicator=e},get:function(){return this._common.enableAudioVolumeIndicator}},{key:"configLocalCameraPublish",set:function(e){this._common.configLocalCameraPublish=e,this._log.reportCameraPublish(e)},get:function(){return this._common.configLocalCameraPublish}},{key:"configLocalScreenPublish",set:function(e){this._common.configLocalScreenPublish=e,this._log.reportScreenPublish(e)},get:function(){return this._common.configLocalScreenPublish}},{key:"configLocalAudioPublish",set:function(e){this._common.configLocalAudioPublish=e,this._log.reportAudioPublish(e)},get:function(){return this._common.configLocalAudioPublish}},{key:"currentCamera",set:function(e){this._rtcDeviceManager.currentCamera=e,this._log.reportCurrentCamera(e)}},{key:"currentAudioCapture",set:function(e){this._rtcDeviceManager.currentAudioCapture=e,this._log.reportCurrentAudioCapture(e)}},{key:"videoProfile",set:function(e){this._rtcDeviceManager.videoProfile=e,this._log.reportVideoProfile(e)}},{key:"enableCamera",set:function(e){this._rtcDeviceManager.enableCamera=e},get:function(){return this._rtcDeviceManager.enableCamera}}]),t}(y.default);t.default=F},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(13),s=n(a),c=r(181),u=n(c),f=r(193),d=n(f),l=r(203),h=n(l),p=r(50),_=n(p),m=r(61),v=r(8),b=n(v),y=r(11),g=n(y),S=r(204),w=function(){function e(t,r,n,o,a,s){i(this,e),this._log=n,this._common=r,this._authInfo=t,this._deviceManager=o,this._apiManager=a,this._signalingManager=s,this._users={},this._peer=null,this._mutedAll=!1,this._addEventListener(),this._networkQualityTimer=0}return o(e,[{key:"getUser",value:function(e){return e?this._users[e]:null}},{key:"getUserList",value:function(){var e=[];for(var t in this._users)e.push(this._users[t].getUserInfo());return e}},{key:"muteAllAudioPlaying",value:function(e){this._mutedAll=e;for(var t in this._users)this._users[t].muteAudioPlaying(this._mutedAll);return!0}},{key:"startLiveStreaming",value:function(e,t){this._peer||(this._peer=new h.default(this._common)),this._peer.startLiveStreaming(e,t)}},{key:"stopLiveStreaming",value:function(){return!!this._peer&&this._peer.stopLiveStreaming()}},{key:"muteLiveStream",value:function(e){return!!this._peer&&this._peer.muteLiveStream(e)}},{key:"enableAudioVolumeIndicator",value:function(e){var t=this;if(e){if(this._self&&this._self.isPublishing&&this._self.isAudioPublishing&&this._self.startAudioInputLevel(),this._users)for(var r in this._users)this._users[r].getUserInfo().streamConfigs.filter(function(e){return e.label===b.default.Audio&&e.subscribed}).length>0&&this._users[r].startAudioInputLevel();this._audiotimeout||(this._audiotimeout=setInterval(function(){var e=[];t._self&&t._self.isPublishing&&t._self.isAudioPublishing&&(e.push({userId:"0",displayName:t._self.displayName,level:Math.round(100*t._self.level),buffer:t._self.buffer}),t._self.clearLevel());for(var r in t._users)t._users[r].getUserInfo().streamConfigs.filter(function(e){return e.label===b.default.Audio&&e.subscribed}).length>0&&(e.push({userId:t._users[r].userId,displayName:t._users[r].displayName,level:Math.round(100*t._users[r].level),buffer:t._users[r].buffer}),t._users[r].clearLevel());t._common.dispatchEvent(s.default.OnAudioLevel,e)},1e3))}else{if(this._self&&this._self.stopAudioInputLevel(),this._users)for(var n in this._users)this._users[n].stopAudioInputLevel();this._audiotimeout&&(clearInterval(this._audiotimeout),this._audiotimeout=null)}}},{key:"setDisplayRemoteVideo",value:function(e,t,r){var n=this.getUser(e);return!!n&&(n.setDisplayRemoteVideo(t,r),this._log.reportSetDisplayRemoteVideo(e,t.nodeName,r,0,""),!0)}},{key:"setAudioVolume",value:function(e,t){if(-1===e){for(var r in this._users)this._users[r].setAudioVolume(t);return!0}var n=this.getUser(e);return!!n&&n.setAudioVolume(t)}},{key:"onJoinSuccess",value:function(e){this._self=new u.default(this._authInfo.userId,this._authInfo.userName,this._authInfo,this._signalingManager,this._common,this._log,this._deviceManager,this._apiManager),this._startNetworkQualityTimer(),this._signalingManager.uploadStatus(m.StatusParser.getCurrentStatus(this.self.getMicStatus(),this.self.getCameraStatus(),!1))}},{key:"onLeaveChannelSuccess",value:function(){this._stopNetwrokQualityTimer()}},{key:"clear",value:function(){this._self&&(this._self.unPublish().then(function(){}).catch(function(e){}),this._self.clear()),this._unSubscribeAll(),this._users={}}},{key:"setAudioOutput",value:function(e){var t=this;return new Promise(function(r,n){t._common.outputDeviceId=e;var i=!1;for(var o in t._users)if(t._users[o]&&t._users[o].checkAudio()){i=!0,t._users[o].setAudioOutput(e).then(function(){r()}).catch(function(e){n()});break}i||r()})}},{key:"_unSubscribeAll",value:function(){for(var e in this._users)this._users[e].unSubscribe().then(function(){}).catch(function(e){}),this._users[e].clear(),delete this._users[e]}},{key:"_addEventListener",value:function(){var e=this;this._signalingManager.addEventListener(_.default.Bye,function(t){e.clear(),e._log.reportOnBye(t.code),e._common.dispatchEvent(s.default.OnBye,t)}),this._signalingManager.addEventListener(_.default.Join,function(t){if(t.peers&&t.peers.length)for(var r=0;r<t.peers.length;++r){var n=t.peers[r];n&&n.userid&&(e._users[n.userid]||(e._users[n.userid]=new d.default(n.userid,n.displayname,e._authInfo,e._signalingManager,e._common,e._log,e._apiManager),e._mutedAll&&e._users[n.userid].muteAudioPlaying(e._mutedAll)),e._common.dispatchEvent(s.default.OnJoin,e._users[n.userid].getUserInfo()))}}),this._signalingManager.addEventListener(_.default.StatusNotify,function(t){if(t&&t.status&&t.status.length){for(var r=t.status,n=[],i=0;i<r.length;++i){var o=r[i].userid,a=e.getUser(o);if(a){var c=m.StatusParser.parseStatus(r[i].status);a.updateStatus(c),n.push(a.getUserInfo())}}e._common.dispatchEvent(s.default.OnNotify,n)}}),this._signalingManager.addEventListener(_.default.Offer,function(t){for(var r in e._users)if(e._users[r].subscribeId===t.callid){e._users[r].recvOffer(t.jsep);break}}),this._signalingManager.addEventListener(_.default.Publishers,function(t){if(t.publishers)for(var r=t.publishers,n=0;n<r.length;++n){var i=r[n],o=e._users[i.userid];o||(o=new d.default(i.userid,i.displayName,e._authInfo,e._signalingManager,e._common,e._log,e._apiManager),e._users[i.userid]=o,e._mutedAll&&o.muteAudioPlaying(e._mutedAll)),o.remoteId=i.callid,o.updateStreams(i.streams),e._common.dispatchEvent(s.default.OnPublisher,o.getUserInfo())}}),this._signalingManager.addEventListener(_.default.UnPublish,function(t){if(t&&t.userid){var r=e._users[t.userid];r&&(r.onUnpublish(),e._common.dispatchEvent(s.default.OnUnPublisher,r.getUserInfo()))}}),this._signalingManager.addEventListener(_.default.Leave,function(t){if(t&&t.userid){var r=e._users[t.userid];if(r){var n=r.getUserInfo();r.clear(),delete e._users[t.userid],e._common.dispatchEvent(s.default.OnLeave,n)}}}),this._signalingManager.addEventListener(_.default.SignalError,function(t){e._common.dispatchEvent(s.default.OnError,t)}),this._signalingManager.addEventListener(_.default.TimeOut,function(t){e._common.dispatchEvent(s.default.OnError,{errorCode:g.default.ERROR_HEARTBEAT_TIMEOUT,message:"heartbeat timeout"})})}},{key:"_startNetworkQualityTimer",value:function(){var e=this;this._networkQualityTimer||(this._networkQualityTimer=setInterval(function(){navigator&&!navigator.onLine?e._common.dispatchEvent(s.default.OnNetworkQuality,{uplinkNetworkQuality:S.NetworkQuality.NETWORK_QUALITY_DISCONNECT,downlinkNetworkQuality:S.NetworkQuality.NETWORK_QUALITY_DISCONNECT}):e._common.dispatchEvent(s.default.OnNetworkQuality,{uplinkNetworkQuality:e._getNetworkQuality(e.self.getUplinkNetworkQuality()),downlinkNetworkQuality:e._getNetworkQuality(e._getDownlinkNetworkQuality())})},2e3))}},{key:"_stopNetwrokQualityTimer",value:function(){this._networkQualityTimer&&(clearInterval(this._networkQualityTimer),this._networkQualityTimer=0)}},{key:"_getDownlinkNetworkQuality",value:function(){var e=0,t={lostrate:0,rtt:0};for(var r in this._users){var n=this._users[r].getDownlinkNetworkQuality();n&&n.lostrate>-1&&n.rtt>-1&&(++e,t.lostrate+=n.lostrate,t.rtt+=n.rtt)}return e>0?(t.lostrate/=e,t.rtt/=e):(t.lostrate=-1,t.rtt=-1),t}},{key:"_getNetworkQuality",value:function(e){return e&&-1!=e.lostrate&&-1!=e.rtt?e.lostrate>50||e.rtt>500?S.NetworkQuality.NETWORK_QUALITY_VERYBAD:e.lostrate>30||e.rtt>350?S.NetworkQuality.NETWORK_QUALITY_BAD:e.lostrate>20||e.rtt>200?S.NetworkQuality.NETWORK_QUALITY_POOR:e.lostrate>10||e.rtt>100?S.NetworkQuality.NETWORK_QUALITY_GOOD:S.NetworkQuality.NETWORK_QUALITY_EXCELLENT:S.NetworkQuality.NETWORK_QUALITY_UNKNOWN}},{key:"self",get:function(){return this._self}}]),e}();t.default=w},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},u=r(86),f=n(u),d=r(182),l=n(d),h=r(13),p=n(h),_=r(7),m=n(_),v=r(37),b=n(v),y=r(38),g=n(y),S=r(183),w=n(S),k=r(190),E=n(k),R=r(8),C=n(R),A=r(91),O=n(A),T=r(18),M=n(T),P=r(11),I=n(P),x=r(61),D=r(39),L=n(D),N=r(92),B=n(N),j=r(192),U=n(j),V=r(93),H=r(94),F=n(H),z=function(e){function t(e,r,n,a,s,c,u){i(this,t);var f=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n,a,s,c));return f._status=E.default.Init,f._deviceManager=u,f._isPublishAudio=!1,f._isPublishCamera=!1,f._isPublishScreen=!1,f._rtpSenderAudio=null,f._rtpSenderCameraLarge=null,f._rtpSenderScreen=null,f._isPending=!1,f._streamId="",f._audioUtil=new g.default,f._level=0,f._iceEventIndex=0,f._audiomixing=new U.default,f._audioMixer=new V.AudioMixer,f._muteLocalMic=!1,f._publishStream=null,f._audiomixing.addEventListener(B.default.AudioMixingPlayed,function(){f._startMixing(),f._common.dispatchEvent(p.default.OnAudioMixingPlayed)}),f._audiomixing.addEventListener(B.default.AudioMixingPaused,function(){if(f._audioMixer.stopMix(),f._publishStream&&f._publishStream.getAudioTracks()){var e=f._publishStream.getAudioTracks()[0];f._rtpSenderAudio.replaceTrack(e)}}),f._audiomixing.addEventListener(B.default.SetAudioMixingPosition,function(){f._startMixing()}),f._audiomixing.addEventListener(B.default.AudioMixingFinished,function(){f._common.dispatchEvent(p.default.OnAudioMixingFinished)}),f._deviceManager.addEventListener(L.default.AudioTrackChange,function(e){if(f._rtpSenderAudio.replaceTrack(e),f._publishStream){var t=f._publishStream.getAudioTracks();t&&(f._publishStream.removeTrack(t[0]),f._publishStream.addTrack(e))}f._startMixing()}),f._deviceManager.addEventListener(L.default.ScreenTrackEnded,function(e){f._status==E.default.Published||f._status==E.default.Init?f._repubForScreenShareError(e):f._errorTimer=setInterval(function(){f._status==E.default.Published&&(clearInterval(f._errorTimer),f._errorTimer=0,f._repubForScreenShareError(e))},500)}),f}return a(t,e),s(t,[{key:"muteLocalCamera",value:function(e){if(this._publishStream){var t=this._publishStream.getVideoTracks();if(t.length){for(var r=0;r<t.length;++r)C.default.LargeVideo==this._deviceManager.getVideoTrackType(t[r].id)&&(t[r].enabled=!e);return!0}}return!1}},{key:"muteLocalMic",value:function(e,t){if(this._muteLocalMic=!!t&&e,this._publishStream){var r=this._publishStream.getAudioTracks();if(r.length){for(var n=0;n<r.length;++n)r[n].enabled=!e;return e?this._audioMixer.stopMix():this._startMixing(),!0}}return!1}},{key:"getCameraStatus",value:function(){if(this._publishStream){var e=this._publishStream.getVideoTracks();if(e&&e.length)for(var t=0;t<e.length;++t){var r=this._deviceManager.getVideoTrackType(e[t].id);if(C.default.LargeVideo==r||C.default.LargeVideo==r)return!(!e[t]||!e[t].enabled)}}return!1}},{key:"getMicStatus",value:function(){if(this._publishStream){var e=this._publishStream.getAudioTracks();if(e&&e.length&&e[0]&&e[0].enabled)return!0}return!1}},{key:"getUplinkNetworkQuality",value:function(){return this._pcMonitor?this._pcMonitor.getNetworkInfo():{lostrate:-1,rtt:-1}}},{key:"publish",value:function(){var e=this;return new Promise(function(t,r){if(e._isPending)return void r({errorCode:I.default.ERROR_FREQUENTLY_OPERATION,message:"operation is too frequent"});if(e._isPending=!0,e._common.configLocalAudioPublish||e._common.configLocalCameraPublish||e._common.configLocalScreenPublish)if(e._conn)e._republish().then(function(r){if(e._publishStream){var n=e._publishStream.getAudioTracks();n&&n.length&&n[0].enabled&&e._muteLocalMic&&(n[0].enabled=!1)}e._common.enableAudioVolumeIndicator&&(e.stopAudioInputLevel(),e.startAudioInputLevel()),e._signalingManager.uploadStatus(x.StatusParser.getCurrentStatus(e.getMicStatus(),e.getCameraStatus(),!0)),e._isPending=!1,t()}).catch(function(t){e._isPending=!1,e._log.reportOnError(t),r(t)});else{var n=(new Date).getTime();e._deviceManager.getPublishStream().then(function(i){for(var o=!1,a=i.getTracks(),s=0;s<a.length;++s)a[s].enabled&&(o=!0),C.default.Audio==e._deviceManager.getVideoTrackType(a[s].id)&&a[s].enabled&&e._muteLocalMic&&(a[s].enabled=!1);o?(e._publishStream=i,e._publish(i,(new Date).getTime()-n).then(function(r){e._common.enableAudioVolumeIndicator&&(e.stopAudioInputLevel(),e.startAudioInputLevel()),e._signalingManager.uploadStatus(x.StatusParser.getCurrentStatus(e.getMicStatus(),e.getCameraStatus(),!0)),e._isPending=!1,t()}).catch(function(t){e._isPending=!1,e._log.reportOnError(t),r(t)})):(e._deviceManager.releasePublishStream(),e._isPending=!1,r({errorCode:I.default.ERROR_PUBLISH_NOSTREAM,message:"no stream to use"}))}).catch(function(t){e._isPending=!1,r(t)})}else e._conn?e.unPublish().then(function(r){e.stopAudioInputLevel(!0),e._signalingManager.uploadStatus(x.StatusParser.getCurrentStatus(e.getMicStatus(),e.getCameraStatus(),!1)),e._isPending=!1,t()}).catch(function(t){e._isPending=!1,e._log.reportOnError(t),r(t)}):(e._isPending=!1,t())})}},{key:"unPublish",value:function(){var e=this;return new Promise(function(t,r){if(!e._conn)return void r({message:""});e._status=E.default.UnPublishing;var n=(new Date).getTime();e._releaseMonitor(),e._signalingManager.unpublish().then(function(r){e.clear(),e._status=E.default.Init,e._deviceManager.releasePublishStream(),e._log.reportUnpublish(e._authInfo.publishCallId,(new Date).getTime()-n,0,r.tid),t(r)}).catch(function(t){t.code&&e._log.reportUnpublish(e._authInfo.publishCallId,(new Date).getTime()-n,t.code,t.tid),e._status=E.default.Init,e._deviceManager.releasePublishStream(),r(t)})})}},{key:"startAudioInputLevel",value:function(){this._isPublishAudio&&this._publishStream&&this._audioUtil.startAudioInputLevel(this._publishStream)}},{key:"stopAudioInputLevel",value:function(e){this._audioUtil.stopAudioInputLevel(e)}},{key:"clearLevel",value:function(){this._audioUtil.clearLevel()}},{key:"clear",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clear",this).call(this),this._streamConfig=[]}},{key:"startAudioMixing",value:function(e,t){this._audiomixing.startAudioMixing(e,t)}},{key:"stopAudioMixing",value:function(e){this._audiomixing.stopAudioMixing(e)}},{key:"pauseAudioMixing",value:function(e){this._audiomixing.pauseAudioMixing(e)}},{key:"resumeAudioMixing",value:function(e){this._audiomixing.resumeAudioMixing(e)}},{key:"adjustAudioMixingVolume",value:function(e){this._audiomixing.adjustAudioMixingVolume(e)}},{key:"setAudioMixingPosition",value:function(e,t){this._audiomixing.setAudioMixingPosition(e,t)}},{key:"getAudioMixingDuration",value:function(){return this._audiomixing.getAudioMixingDuration()}},{key:"getAudioMixingCurrentPosition",value:function(){return this._audiomixing.getAudioMixingCurrentPosition()}},{key:"_startMixing",value:function(){var e=this;if(this._audiomixing.bufferPlayer.state===F.default.Playing){var t=new MediaStream;if(this._publishStream&&this._publishStream.getAudioTracks()){var r=this._publishStream.getAudioTracks()[0];if(!r.enabled)return;t.addTrack(r)}this._audioMixer.stopMix(),this._audioMixer.startMix(t,this._audiomixing.bufferPlayer).then(function(t){if(t&&t.getAudioTracks&&t.getAudioTracks().length>0){var r=t.getAudioTracks()[0];r.enabled=e._rtpSenderAudio.track.enabled,e._rtpSenderAudio.replaceTrack(r)}}).catch(function(t){e._common.dispatchEvent({errorCode:I.default.ERROR_START_MIX_FAIL,message:"start mix fail"})})}}},{key:"_publish",value:function(e,t){var r=this;return new Promise(function(n,i){r._status=E.default.Publishing;var o=(new Date).getTime();r._startConnect(e).then(function(e){m.default.isFirefox&&(e.sdp=b.default.completionSDPSSRC(e.sdp));var n=[];return r._updateStreamConfig(),new Promise(function(i,a){r._setLocalDescription(e).then(function(){}).catch(function(e){a(e)}),r._allocate(n).then(function(){}).catch(function(e){a(e)});var s=r._getStreamData();r._startPublish(e,n).then(function(n){r._log.reportPublish(r._authInfo.publishCallId,s.isLargeVideo,!1,s.isAudio,0,n.tid,t,(new Date).getTime()-o),i({offer:e,answer:n.jsep})}).catch(function(e){a(e)})})}).catch(function(e){i(e)}).then(function(e){r._status=E.default.Published,n(e)}).catch(function(e){r._status=E.default.Init;var n=r._getStreamData();r._log.reportPublish(r._authInfo.publishCallId,n.isLargeVideo,!1,n.isAudio,err.code,e.tid,t,(new Date).getTime()-o),i(e)})})}},{key:"_republish",value:function(){var e=this;return new Promise(function(t,r){e._status=E.default.Publishing;var n=(new Date).getTime();e._changeStreamState().then(function(i){if(i){if(e._common.isAudioOnly)return e._isPending=!1,void r(M.default.parseOptionError(I.default.ERROR_OPTIONS_AUDIO_ONLY));e._updateStreamConfig();var o=JSON.stringify({streams:e._streamConfig}),a=e._getStreamData();e._signalingManager.republish(o).then(function(r){e._status=E.default.Published,e._log.reportRepublish(e._authInfo.publishCallId,a.isLargeVideo,!1,a.isAudio,0,r.tid,(new Date).getTime()-n),t(r)}).catch(function(t){e._status=E.default.Published,e._log.reportRepublish(e._authInfo.publishCallId,a.isLargeVideo,!1,a.isAudio,t.code,t.tid,(new Date).getTime()-n),r(t)})}else t()}).catch(function(t){e._status=E.default.Published,e._log.reportRepublish(e._authInfo.publishCallId,!1,!1,!1,-1,"",(new Date).getTime()-n),r(t)})})}},{key:"_createOffer",value:function(e){var t=this;return new Promise(function(r,n){var i=b.default.mergeConstraints(b.default.DEFAULT_SDP_OFFER_OPTIONS,e);t.conn.createOffer(i).then(function(e){e.sdp=b.default.replace42e01fTo42001f(e.sdp),e.sdp=b.default.addAudioNack(e.sdp),t._common.bandwidthEstimation==O.default.GoogRemb?e.sdp=b.default.replaceTransportCC(e.sdp):t._common.bandwidthEstimation==O.default.TransportCC&&(e.sdp=b.default.replaceGoogRemb(e.sdp)),t.conn.setLocalDescription(e).then(function(){r(e)}).catch(function(e){n(e)})}).catch(function(e){n(e)})})}},{key:"_getStreamData",value:function(){return new l.default(this._streamConfig)}},{key:"_startConnect",value:function(e){var t=this;this._createPeerConnection(),this._streamId=e.id;var r=null,n=null,i=null;return e.getTracks().forEach(function(e){if("audio"==e.kind)r=e;else{var o=t._deviceManager.getVideoTrackType(e.id);C.default.ScreenShareVideo===o?i=e:C.default.LargeVideo===o&&(n=e)}}),r&&(this._rtpSenderAudio=this.conn.addTrack(r,e),this._startMixing()),n&&(this._rtpSenderCameraLarge=this.conn.addTrack(n,e)),i&&(this._rtpSenderScreen=this.conn.addTrack(i,e)),this._pcMonitor=new w.default(this.conn,this._common,this._log,this._userId,this._authInfo.publishCallId,this._rtpSenderAudio,this._rtpSenderCameraLarge,this._rtpSenderScreen),this._createOffer({})}},{key:"_updateStreamConfig",value:function(){if(this.conn)if(this._streamConfig.length)for(var e=0;e<this._streamConfig.length;++e)this._streamConfig[e].label==C.default.Audio?this._rtpSenderAudio&&(this._streamConfig[e].state=this._common.configLocalAudioPublish?"active":"inactive"):this._streamConfig[e].label==C.default.LargeVideo?this._rtpSenderCameraLarge&&(this._streamConfig[e].state=this._common.configLocalCameraPublish?"active":"inactive"):this._streamConfig[e].label==C.default.ScreenShareVideo&&this._rtpSenderScreen&&(this._streamConfig[e].state=this._common.configLocalScreenPublish?"active":"inactive");else{if(this._rtpSenderAudio&&(this._common.configLocalAudioPublish?(this._isPublishAudio=!0,this._streamConfig.push({mslabel:this._streamId,label:C.default.Audio,type:this._rtpSenderAudio.track.kind,temporalLayers:0,substreams:0,state:"active",videoprofile:"",alias:this._rtpSenderAudio.track.id})):(this._isPublishAudio=!1,this._streamConfig.push({mslabel:this._streamId,label:C.default.Audio,type:this._rtpSenderAudio.track.kind,temporalLayers:0,substreams:0,state:"inactive",videoprofile:"",alias:this._rtpSenderAudio.track.id}))),this._rtpSenderCameraLarge){var t=this._getProfile(this._rtpSenderCameraLarge.track);this._isPublishCamera=this._rtpSenderCameraLarge.track.enabled,this._streamConfig.push({mslabel:this._streamId,label:C.default.LargeVideo,type:this._rtpSenderCameraLarge.track.kind,temporalLayers:1,substreams:1,videoprofile:t,state:this._rtpSenderCameraLarge.track.enabled?"active":"inactive",alias:this._rtpSenderCameraLarge.track.id})}if(this._rtpSenderScreen){var r=this._getProfile(this._rtpSenderScreen.track);this._isPublishScreen=this._rtpSenderScreen.track.enabled,this._streamConfig.push({mslabel:this._streamId,label:C.default.ScreenShareVideo,type:this._rtpSenderScreen.track.kind,temporalLayers:1,substreams:1,videoprofile:r,state:this._rtpSenderScreen.track.enabled?"active":"inactive",alias:this._rtpSenderScreen.track.id})}}}},{key:"_allocate",value:function(e){var t=this;return this._common.dispatchEvent(p.default.OnConnecting,{displayName:this.displayName,userId:this._userId,type:"publish"}),new Promise(function(r,n){t.conn.onicecandidate=function(r){r.candidate&&t._filterIceCandidate(r.candidate)&&(t._iceCandidateByOffer(!1,r.candidate).then(function(e){}).catch(function(e){n(e)}),e.push(r.candidate))},t.conn.onicegatheringstatechange=function(r){"complete"==t.conn.iceGatheringState&&(0==e.length?n({message:"connection failed, no candidate"}):t._iceCandidateByOffer(!0).then(function(e){t._common.dispatchEvent(p.default.OnConnected,{displayName:t.displayName,userId:t._userId,type:"publish"})}).catch(function(e){n(e)}))},t.conn.oniceconnectionstatechange=function(e){var r=t.conn.iceConnectionState;switch(t._log.reportIceState(t._authInfo.publishCallId,"",r,t._iceEventIndex),++t._iceEventIndex,r){case"connected":t._clearIceConnectionStateTimer();break;case"closed":break;case"failed":t._dispatchIceError(r);break;case"disconnected":t._iceConnectionStateTimer=setTimeout(function(){t._dispatchIceError("disconnected")},8e3)}}})}},{key:"_startPublish",value:function(e,t){var r=this;return new Promise(function(n,i){var o=JSON.stringify({jsep:{type:e.type,sdp:e.sdp},streams:r._streamConfig});r._signalingManager.publish(o).then(function(e){if(!e.jsep||!e.jsep.sdp)return void i({message:"no answer"});r._setRemoteDescription(e.jsep).then(function(){r._setEncodParams()}).catch(function(e){i({errorCode:I.default.ERROR_ANSWER_FAIL,message:"setRemoteDescription fail"})});!function r(){t&&t.length>0?n(e):setTimeout(r,1e3)}()}).catch(function(e){i(e)})})}},{key:"_iceCandidateByOffer",value:function(e,t){var r=this;return new Promise(function(n,i){var o={completed:!!e};e||(o.candidate={sdpMLineIndex:t.sdpMLineIndex,sdpMid:t.sdpMid,candidate:t.candidate}),r._signalingManager.iceCandidate(null,null,JSON.stringify(o)).then(function(e){n(e)}).catch(function(e){i(e)})})}},{key:"_releaseMonitor",value:function(){this._pcMonitor&&(this._pcMonitor.releaseMonitor(),this._pcMonitor=null)}},{key:"_setEncodParams",value:function(){for(var e=this.conn.getSenders(),t=0;t<e.length;++t)if(e[t].track&&e[t].setParameters)if("video"===e[t].track.kind){var r=e[t],n=void 0,i=this._deviceManager.getVideoTrackType(r.track.id);if(n=C.default.ScreenShareVideo==i?this._deviceManager.screenShareProfile.maxBitrate:this._deviceManager.videoProfile.maxBitrate,r.getParameters){var o=r.getParameters();o.degradationPreference="maintain-resolution";var a=r.track.getSettings();if(o&&o.encodings.length)for(var s=0;s<o.encodings.length;++s)o.encodings[s].maxBitrate=n,m.default.isSafari&&a&&(o.encodings[s].maxFramerate=a.frameRate);r.setParameters(o).then(function(e){}).catch(function(e){})}}else if("audio"===e[t].track.kind){var c=e[t];if(c.getParameters){var u=c.getParameters();if(u&&u.encodings.length)for(var f=0;f<u.encodings.length;++f)u.encodings[f].maxBitrate=this._deviceManager.audioProfile.maxBitrate;c.setParameters(u).then(function(e){}).catch(function(e){})}}}},{key:"_changeStreamState",value:function(){var e=this;return new Promise(function(t,r){var n=!1,i=!1,o=!1;e._isPublishAudio!=e._common.configLocalAudioPublish&&(n=!0,e._isPublishAudio?(e._isPublishAudio=!1,e._rtpSenderAudio.track.enabled=!1):(e._isPublishAudio=!0,e._rtpSenderAudio.track.enabled=!0));var a=!1;if(e._rtpSenderCameraLarge)e._isPublishCamera!=e._common.configLocalCameraPublish&&(i=!0,e._isPublishCamera?(e._isPublishCamera=!1,e._rtpSenderCameraLarge.track.enabled=!1):(e._isPublishCamera=!0,e._rtpSenderCameraLarge.track.enabled=!0));else if(e._common.configLocalCameraPublish){if(e._common.isAudioOnly)return void r(M.default.parseOptionError(I.default.ERROR_OPTIONS_AUDIO_ONLY));if(!e._deviceManager.enableCamera)return void r(M.default.parseOptionError(I.default.ERROR_OPTIONS_ENABLECAMERA))}if(e._rtpSenderScreen)e._isPublishScreen!=e._common.configLocalScreenPublish&&(o=!0,e._isPublishScreen?(e._isPublishScreen=!1,e._rtpSenderScreen.track.enabled=!1,e._deviceManager.stopPublishScreenShare()):(a=!0,e._isPublishScreen=!0,e._rtpSenderScreen.track.enabled=!0,e._deviceManager.startPublishScreenShare().then(function(){t(n||i||o)}).catch(function(o){n||i?(e._common.configLocalScreenPublish=!1,t(n||i)):r(o)})));else if(e._common.configLocalScreenPublish&&e._common.isAudioOnly)return void r(M.default.parseOptionError(I.default.ERROR_OPTIONS_AUDIO_ONLY));if(!a)return void t(n||i||o)})}},{key:"_dispatchIceError",value:function(e){if(this._status===E.default.Published||this._status===E.default.Publishing){this._clearIceConnectionStateTimer();var t={errorCode:I.default.ERROR_ICE_PUBLISH_DISCONNECTED,message:"ICE connection "+e+",please check network or try to stop publish, then publish again",type:"publish"};this._common.dispatchEvent(p.default.OnError,t),this._releaseMonitor()}}},{key:"_repubForScreenShareError",value:function(e){var t=this;this._common.configLocalScreenPublish=!1,this._isPublishAudio=this._common.configLocalAudioPublish,this._isPublishCamera=this._common.configLocalCameraPublish,this._republish().then(function(r){t._common.dispatchEvent(p.default.OnError,e)}).catch(function(r){t._common.dispatchEvent(p.default.OnError,e)})}},{key:"_getProfile",value:function(e){var t=e.getSettings();return t?"UD_"+(t.width?t.width:640)+"_"+(t.height?t.height:480)+"_"+(t.frameRate?t.frameRate:15):"UD_640_480P_15"}},{key:"isPublishing",get:function(){return this._status!==E.default.Init}},{key:"isAudioPublishing",get:function(){return this._isPublishAudio}},{key:"isCameraPublishing",get:function(){return this._isPublishCamera}},{key:"isScreenPublishing",get:function(){return this._isPublishScreen}},{key:"level",get:function(){return this._audioUtil.level}},{key:"buffer",get:function(){return this._audioUtil.buffer}}]),t}(f.default);t.default=z},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this._isLargeVideo=!1,this._isAudio=!1,this._w=0,this._h=0;for(var r=0;r<t.length;++r)"audio"===t[r].type?this._isAudio=!0:"video"===t[r].type&&(this._isLargeVideo=!0,this._w=640,this._h=480)}return i(e,[{key:"isAudio",get:function(){return this._isAudio?1:0}},{key:"isLargeVideo",get:function(){return this._isLargeVideo?1:0}},{key:"width",get:function(){return this._w}},{key:"height",get:function(){return this._h}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(88),u=n(c),f=r(184),d=n(f),l=r(188),h=n(l),p=r(13),_=n(p),m=function(e){function t(e,r,n,a,s,c,u,f){i(this,t);var l=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n,a,new d.default(s)));return l._monitor=new h.default(e,l._monitorData,c,u,f),l}return a(t,e),s(t,[{key:"getNetworkInfo",value:function(){return this._monitor.getNetworkInfo()}},{key:"_onMonitorTimer",value:function(){if(this._timerIndex>=30){var e=this._monitorData.callid,t=this._monitorData.getPublishAudioData();t&&this._log.reportPublishDataMonitor(e,t);var r=this._monitorData.getCameraLargeData();r&&this._log.reportPublishDataMonitor(e,r);var n=this._monitorData.getScreenData();n&&this._log.reportPublishDataMonitor(e,n);var i=this._monitorData.getNetworkData();i&&this._log.reportPublishNewtWorkMonitor(i),this._timerIndex=0}if(this._monitor){this._monitor.getStats();var o=this._monitorData.cacheData();this._common.dispatchEvent(_.default.OnMedia,{userId:"0",data:o})}++this._timerIndex}}]),t}(u.default);t.default=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(185),s=n(a),c=r(186),u=n(c),f=r(187),d=n(f),l=r(8),h=n(l),p=function(){function e(t){i(this,e),this._reportData=new d.default(t),this._callId=t,this._senderAudioData=new s.default,this._senderVideoData=new u.default,this._senderScreenData=new u.default,this._rtt=0,this._availableOutgoingBitrate=0,this._lastTimeStamp=0,this._bytesReceived=0,this._bytesSent=0,this._bytesReceivedPerSecond=0,this._bytesSentPerSecond=0,this._ip="",this._port="",this._protocol="",this._networkType="",this._hasAudioData=!1,this._hasCameraLarge=!1,this._hasScreen=!1,this._monitorAudioDataArr=[],this._monitorCameraLargeDataArr=[],this._monitorScreenShareDataArr=[],this._monitorNetworkDataArr=[],this._audioSampleRate=-1,this._audioSampleSize=-1,this._audioEncodeSampleRate=-1}return o(e,[{key:"getNetworkInfo",value:function(){return{lostrate:Math.max(this._senderScreenData.packetLostRate,this._senderVideoData.packetLostRate,this._senderAudioData.packetLostRate),rtt:Math.round(1e3*this._rtt)}}},{key:"getPublishAudioData",value:function(){var e=null;if(this._monitorAudioDataArr.length){if(this._hasAudioData){this._hasAudioData=!1,e={calid:this._callId,rmtid:"",tckid:h.default.Audio,src:this._senderAudioData.ssrc,sbr:"",ps:"",codec:this._senderAudioData.codec,arsr:this._audioSampleRate,aesr:this._audioEncodeSampleRate,ailevel:""};for(var t=0;t<this._monitorAudioDataArr.length;++t)0===t?(e.sbr+=this._monitorAudioDataArr[t].sbr,e.ps+=this._monitorAudioDataArr[t].ps,e.ailevel+=Math.round(32767*this._monitorAudioDataArr[t].ailevel)):(e.sbr+=","+this._monitorAudioDataArr[t].sbr,e.ps+=","+this._monitorAudioDataArr[t].ps,e.ailevel+=","+Math.round(32767*this._monitorAudioDataArr[t].ailevel))}this._monitorAudioDataArr.splice(0,this._monitorAudioDataArr.length)}return e}},{key:"getCameraLargeData",value:function(){var e=null;if(this._monitorCameraLargeDataArr.length){if(this._hasCameraLarge){this._hasCameraLarge=!1,e={calid:this._callId,rmtid:"",tckid:h.default.LargeVideo,src:this._senderVideoData.ssrc,codec:this._senderVideoData.codec,sbr:"",ifps:"",sfps:"",ih:"",iw:"",sh:"",sw:"",ps:""};for(var t=0;t<this._monitorCameraLargeDataArr.length;++t)0===t?(e.sbr+=this._monitorCameraLargeDataArr[t].sbr,e.ps+=this._monitorCameraLargeDataArr[t].ps,e.sfps+=this._monitorCameraLargeDataArr[t].sfps,e.sw+=this._monitorCameraLargeDataArr[t].sw,e.sh+=this._monitorCameraLargeDataArr[t].sh,e.ifps+=this._monitorCameraLargeDataArr[t].ifps,e.iw+=this._monitorCameraLargeDataArr[t].iw,e.ih+=this._monitorCameraLargeDataArr[t].ih):(e.sbr+=","+this._monitorCameraLargeDataArr[t].sbr,e.ps+=","+this._monitorCameraLargeDataArr[t].ps,e.sfps+=","+this._monitorCameraLargeDataArr[t].sfps,e.sw+=","+this._monitorCameraLargeDataArr[t].sw,e.sh+=","+this._monitorCameraLargeDataArr[t].sh,e.ifps+=","+this._monitorCameraLargeDataArr[t].ifps,e.iw+=","+this._monitorCameraLargeDataArr[t].iw,e.ih+=","+this._monitorCameraLargeDataArr[t].ih)}this._monitorCameraLargeDataArr.splice(0,this._monitorCameraLargeDataArr.length)}return e}},{key:"getScreenData",value:function(){var e=null;if(this._monitorScreenShareDataArr.length){if(this._hasScreen){this._hasScreen=!1,e={calid:this._callId,rmtid:"",tckid:h.default.ScreenShareVideo,src:this._senderScreenData.ssrc,codec:this._senderScreenData.codec,sbr:"",ifps:"",sfps:"",ih:"",iw:"",sh:"",sw:"",ps:""};for(var t=0;t<this._monitorScreenShareDataArr.length;++t)0===t?(e.sbr+=this._monitorScreenShareDataArr[t].sbr,e.ps+=this._monitorScreenShareDataArr[t].ps,e.sfps+=this._monitorScreenShareDataArr[t].sfps,e.sw+=this._monitorScreenShareDataArr[t].sw,e.sh+=this._monitorScreenShareDataArr[t].sh,e.ifps+=this._monitorScreenShareDataArr[t].ifps,e.iw+=this._monitorScreenShareDataArr[t].iw,e.ih+=this._monitorScreenShareDataArr[t].ih):(e.sbr+=","+this._monitorScreenShareDataArr[t].sbr,e.ps+=","+this._monitorScreenShareDataArr[t].ps,e.sfps+=","+this._monitorScreenShareDataArr[t].sfps,e.sw+=","+this._monitorScreenShareDataArr[t].sw,e.sh+=","+this._monitorScreenShareDataArr[t].sh,e.ifps+=","+this._monitorScreenShareDataArr[t].ifps,e.iw+=","+this._monitorScreenShareDataArr[t].iw,e.ih+=","+this._monitorScreenShareDataArr[t].ih)}this._monitorScreenShareDataArr.splice(0,this._monitorScreenShareDataArr.length)}return e}},{key:"getNetworkData",value:function(){for(var e={calid:this._callId,relayaddr:this._ip+":"+this._port,relaytype:this._networkType,rtt:"",asb:"",bsps:"",brps:""},t=0;t<this._monitorNetworkDataArr.length;++t)0===t?(e.rtt+=this._monitorNetworkDataArr[t].rtt,e.asb+=this._monitorNetworkDataArr[t].asb,e.bsps+=this._monitorNetworkDataArr[t].bsps,e.brps+=this._monitorNetworkDataArr[t].brps):(e.rtt+=","+this._monitorNetworkDataArr[t].rtt,e.asb+=","+this._monitorNetworkDataArr[t].asb,e.bsps+=","+this._monitorNetworkDataArr[t].bsps,e.brps+=","+this._monitorNetworkDataArr[t].brps);return this._monitorNetworkDataArr.splice(0,this._monitorNetworkDataArr.length),e}},{key:"cacheData",value:function(e,t,r){var n=this._senderAudioData.getSendAudioData();this._monitorAudioDataArr.push(n);var i=this._senderVideoData.getSendVideoData();this._monitorCameraLargeDataArr.push(i);var o=this._senderScreenData.getSendVideoData();this._monitorScreenShareDataArr.push(o);var a={rtt:Math.round(1e3*this._rtt),asb:this._availableOutgoingBitrate,bsps:this._bytesSentPerSecond,brps:this._bytesReceivedPerSecond};return this._monitorNetworkDataArr.push(a),{audio:{level:n.ailevel},camera:{fps:i.sfps,width:i.sw,height:i.sh},screen:{fps:o.sfps,width:o.sw,height:o.sh},rtt:a.rtt,bytesSentPerSecond:a.bsps}}},{key:"updateAudioData",value:function(e,t){this._senderAudioData.updateAudioInbound(e,t)}},{key:"updateAudioDataSent",value:function(e,t,r,n,i){var o=i.getSettings();o&&(this._audioSampleRate=o.sampleRate?o.sampleRate:-1,this._audioSampleSize=o.sampleSize?o.sampleSize:-1),this._hasAudioData=!!this._hasAudioData||i.enabled,this._senderAudioData.updateDataSent(e,t,r,n,i)}},{key:"updateVideoData",value:function(e,t,r){e==h.default.LargeVideo?this._senderVideoData.updatePacketLost(t,r):e==h.default.ScreenShareVideo&&this._senderScreenData.updatePacketLost(t,r)}},{key:"updateVideoDataSent",value:function(e,t,r,n,i,o,a,s){e==h.default.LargeVideo?(this._hasCameraLarge=!!this._hasCameraLarge||a.enabled,this._senderVideoData.updateDataSent(t,r,n,i,o,a,s)):e==h.default.ScreenShareVideo&&(this._hasScreen=!!this._hasScreen||a.enabled,this._senderScreenData.updateDataSent(t,r,n,i,o,a,s))}},{key:"updateVideoTrack",value:function(e,t,r,n,i,o){e==h.default.LargeVideo?this._senderVideoData.updateVideoTrack(t,r,n,i,o):e==h.default.ScreenShareVideo&&this._senderScreenData.updateVideoTrack(t,r,n,i,o)}},{key:"updateMedisSource",value:function(e,t,r,n,i){e==h.default.LargeVideo?this._senderVideoData.updateMedisSource(t,r,n,i):e==h.default.ScreenShareVideo&&this._senderScreenData.updateMedisSource(t,r,n,i)}},{key:"updateAudioInfo",value:function(e,t,r,n){this._senderAudioData.updateAudioInfo(e,t,r,n)}},{key:"updateCommonInfo",value:function(e,t,r,n,i){if(t>0&&(t<=10?this._rtt=t:t<=1e4&&(this._rtt=t/1e3)),this._availableOutgoingBitrate=r,0!=this._lastTimeStamp){var o=(e-this._lastTimeStamp)/1e3;o>0&&(this._bytesReceivedPerSecond=Math.round((n-this._bytesReceived)/o),this._bytesSentPerSecond=Math.round((i-this._bytesSent)/o))}this._bytesReceived=n,this._bytesSent=i,this._lastTimeStamp=e}},{key:"updateNetworkInfo",value:function(e,t,r,n,i){this._ip=t,this._port=r,this._protocol=n,this._networkType=i}},{key:"updateAudioCodec",value:function(e){e&&(this._audioEncodeSampleRate=e.clockRate?e.clockRate:-1,this._senderAudioData.updateParameters(e))}},{key:"updateVideoCodec",value:function(e){this._senderVideoData.updateParameters(e)}},{key:"updateLocalCandidate",value:function(e){}},{key:"callid",get:function(){return this._callId}}]),e}();t.default=p},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(38),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(){n(this,e),this._lastDataSentTimeStamp=0,this._lastPacketLostTimeStamp=0,this._bytesSent=0,this._packetsSent=0,this._bytesSentPerSecond=0,this._packetsSentPerSecond=0,this._packetsLostPerSecond=0,this._packetsLost=0,this._ssrc="",this._audioLevel=0,this._clockRate=0,this._mimeType="",this._audioUtil=new a.default,this._audioUtil.statisticsBuffer=!1,this._audioTrack=null}return i(e,[{key:"getSendAudioData",value:function(){return{sbr:this._bytesSentPerSecond,ps:this._packetsSentPerSecond,ailevel:this._audioUtil.level}}},{key:"updateAudioInbound",value:function(e,t){if(this._lastPacketLostTimeStamp){var r=(e-this._lastPacketLostTimeStamp)/1e3;r>0&&(this._packetsLostPerSecond=Math.round((t-this._packetsLost)/r))}this._lastPacketLostTimeStamp=e,this._packetsLost=t}},{key:"updateDataSent",value:function(e,t,r,n,i){if(this._audioTrack?i&&this._audioTrack.id!==i.id&&this._updateAudioTrack(i):this._updateAudioTrack(i),this._ssrc=n,this._lastDataSentTimeStamp&&this._bytesSent&&this._packetsSent){var o=(e-this._lastDataSentTimeStamp)/1e3;o>0&&(isNaN(t)||isNaN(this._bytesSent)?this._bytesSentPerSecond=-1:this._bytesSentPerSecond=Math.round((t-this._bytesSent)/o*8),this._packetsSentPerSecond=Math.round((r-this._packetsSent)/o))}this._lastDataSentTimeStamp=e,this._bytesSent=t,this._packetsSent=r}},{key:"updateAudioInfo",value:function(e,t,r,n){this._audioLevel=t}},{key:"updateParameters",value:function(e){this._mimeType=e.mimeType?e.mimeType.replace("audio/",""):"",this._clockRate=e.clockRate?e.clockRate:0}},{key:"_updateAudioTrack",value:function(e){this._audioTrack=e;var t=new MediaStream;t.addTrack(this._audioTrack),this._audioUtil.startAudioInputLevel(t)}},{key:"ssrc",get:function(){return this._ssrc}},{key:"codec",get:function(){return this._mimeType}},{key:"packetsSent",get:function(){return this._packetsSent}},{key:"sampleRate",get:function(){return this._clockRate}},{key:"audioBuffer",get:function(){return this._audioUtil.buffer}},{key:"packetLostRate",get:function(){return this._packetsLostPerSecond>0?(this._packetsLostPerSecond/this._packetsLostPerSecond+this._packetsSentPerSecond).toFixed(4):0}}]),e}();t.default=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(7),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(){n(this,e),this._lastPacketTimeStamp=0,this._lastDataSentTimeStamp=0,this._bytesSent=0,this._packetsSent=0,this._packetLost=0,this._bytesSentPerSecond=0,this._packetsSentPerSecond=0,this._packetLostPerSecond=0,this._nackCount=0,this._ssrc="",this._frameRate=0,this._width=0,this._height=0,this._clockRate=0,this._mimeType="",this._bitrate=0,this._frameWidth=0,this._frameHeight=0,this._frameSent=0,this._fps=0,this._lastVideoTrackTimeStamp=0,this._inputWidth=0,this._inputHeight=0,this._inputFps=0}return i(e,[{key:"getSendVideoData",value:function(){return{sbr:this._bytesSentPerSecond,ps:this._packetsSentPerSecond,sfps:this._fps,sw:this._frameWidth,sh:this._frameHeight,ifps:this._inputFps,iw:this._inputWidth,ih:this._inputHeight}}},{key:"updatePacketLost",value:function(e,t){if(this._lastPacketTimeStamp){var r=(e-this._lastDataSentTimeStamp)/1e3;r>0&&(this._packetLostPerSecond=Math.round((t-this._packetLost)/r))}this._lastDataSentTimeStamp=e,this._packetLost=t}},{key:"updateDataSent",value:function(e,t,r,n,i,o,s){if(o){var c=o.getSettings();c?(this._frameRate=c.frameRate,this._width=c.width?c.width:0,this._height=c.height?c.height:0):this._frameRate=0}if(s&&s.encodings&&s.encodings.length?this._bitrate=s.encodings[0].maxBitrate:this._bitrate=0,this._nackCount=i,this._ssrc=n,this._lastDataSentTimeStamp&&this._bytesSent&&this._packetsSent){var u=(e-this._lastDataSentTimeStamp)/1e3;u>0&&(a.default.browserMainVersion<67?(this._bytesSentPerSecond=Math.round(8*(t-this._bytesSent)),this._packetsSentPerSecond=Math.round(r-this._packetsSent)):(this._bytesSentPerSecond=Math.round((t-this._bytesSent)/u*8),this._packetsSentPerSecond=Math.round((r-this._packetsSent)/u)))}this._lastDataSentTimeStamp=e,this._bytesSent=t,this._packetsSent=r}},{key:"updateVideoTrack",value:function(e,t,r,n,i){if(this._lastVideoTrackTimeStamp){var o=(i-this._lastVideoTrackTimeStamp)/1e3;this._fps=Math.round((r-this._frameSent)/o)}this._frameWidth=e,this._frameHeight=t,this._frameSent=r,this._lastVideoTrackTimeStamp=i}},{key:"updateMedisSource",value:function(e,t,r,n){this._inputWidth=e||-1,this._inputHeight=t||-1,this._inputFps=r||-1}},{key:"updateParameters",value:function(e){this._mimeType=e.mimeType?e.mimeType.replace("video/",""):"",this._clockRate=e.clockRate?e.clockRate:0}},{key:"ssrc",get:function(){return this._ssrc}},{key:"nackCount",get:function(){return this._nackCount}},{key:"frameRate",get:function(){return this._frameRate}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"codec",get:function(){return this._mimeType}},{key:"packetsSent",get:function(){return this._packetsSent}},{key:"bitrate",get:function(){return this._bitrate}},{key:"packetLostRate",get:function(){return this._packetLostPerSecond>0?(this._packetLostPerSecond/this._packetLostPerSecond+this._packetsSentPerSecond).toFixed(4):0}}]),e}();t.default=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){n(this,e),this.calid=t,this.rtt=-1,this.raddr="",this.asb=1e3,this.nwt="",this.video={src:"",isv:!1,vfps:0,teb:0,vrn:0,codec:"",w:0,h:0,vps:0},this.audio={src:"",isa:!1,codec:"",aps:0}};t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(189),u=n(c),f=r(8),d=n(f),l=function(e){function t(e,r,n,a,s){i(this,t);var c=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return c._support=!0,c._rtpSenderAudio=n,c._rtpSenderCamera=a,c._rtpSenderScreen=s,c}return a(t,e),s(t,[{key:"getStats",value:function(){var e=this;this._rtpSenderAudio&&this._rtpSenderAudio.getStats&&this._rtpSenderAudio.getStats().then(function(t){e._getAudioInfo(t,e._rtpSenderAudio.track,e._rtpSenderAudio.getParameters?e._rtpSenderAudio.getParameters():null)}),this._rtpSenderCamera&&this._rtpSenderCamera.getStats&&this._rtpSenderCamera.getStats().then(function(t){e._getVideoInfo(t,d.default.LargeVideo,e._rtpSenderCamera.track,e._rtpSenderCamera.getParameters?e._rtpSenderCamera.getParameters():null)}),this._rtpSenderScreen&&this._rtpSenderScreen.getStats&&this._rtpSenderScreen.getStats().then(function(t){e._getVideoInfo(t,d.default.ScreenShareVideo,e._rtpSenderScreen.track,e._rtpSenderScreen.getParameters?e._rtpSenderScreen.getParameters():null)})}},{key:"isAudioSenderEnable",get:function(){return!(!this._rtpSenderAudio||!this._rtpSenderAudio.track)&&this._rtpSenderAudio.track.enable}},{key:"isCameraSenderEnable",get:function(){return!(!this._rtpSenderScreen||!this._rtpSenderScreen.track)&&this._rtpSenderScreen.track.enable}},{key:"isScreenSenderEnable",get:function(){return!(!this._rtpSenderCamera||!this._rtpSenderCamera.track)&&this._rtpSenderCamera.track.enable}}]),t}(u.default);t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(89),u=n(c),f=r(90),d=n(f),l=r(17),h=n(l),p=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._senderMonitorData=r,n}return a(t,e),s(t,[{key:"getNetworkInfo",value:function(){return this._senderMonitorData.getNetworkInfo()}},{key:"getStats",value:function(){var e=this,t=this._peerConnection.getLocalStreams();if(t&&t.length){var r=t[0].getAudioTracks()[0];this._peerConnection.getStats(r).then(function(t){e._getAudioInfo(t,r)}).catch(function(e){});var n=t[0].getVideoTracks();if(n.length)for(var i=0;i<n.length;++i)!function(t){var r=n[t];e._peerConnection.getStats(r).then(function(t){e._getVideoInfo(t,r.id,r)}).catch(function(e){})}(i)}}},{key:"_getAudioInfo",value:function(e,t,r){var n=this;e.forEach(function(e){if(e)switch(e.type){case d.default.CandidatePair:n._onCandidatePair(e);break;case d.default.Codec:n._onAudioCodec(e);break;case d.default.LocalCandidate:n._onAudioLocalCandidate(e);break;case d.default.RemoteInboundRtp:n._onAudioInboundRtp(e);break;case d.default.OutboundRtp:n._onAudioOutBoundRtp(e,t,r);break;case d.default.Track:n._onAudioTrack(e)}})}},{key:"_getVideoInfo",value:function(e,t,r,n){var i=this;e.forEach(function(e){if(e)switch(e.type){case d.default.Codec:i._onVideoCodec(e,t);break;case d.default.LocalCandidate:i._onLocalCandidate(e,t);break;case d.default.RemoteInboundRtp:i._onVideoInboundRtp(e,t);break;case d.default.OutboundRtp:i._onVideoOutBoundRtp(e,r,t,n);break;case d.default.Track:i._onVideoTrack(e,r,t,n);break;case d.default.MediaSource:i._onVideoMediaSource(e,r,t,n)}})}},{key:"_onAudioCodec",value:function(e){this._senderMonitorData.updateAudioCodec(e)}},{key:"_onCandidatePair",value:function(e){this._senderMonitorData.updateCommonInfo(e.timestamp,e.currentRoundTripTime,e.availableOutgoingBitrate,e.bytesReceived,e.bytesSent)}},{key:"_onAudioLocalCandidate",value:function(e){var t=void 0!=e.networkType?e.networkType:h.default.networkType;this._senderMonitorData.updateNetworkInfo(e.timestamp,e.ip||e.address,e.port,e.protocol,t)}},{key:"_onAudioInboundRtp",value:function(e){this._senderMonitorData.updateAudioData(e.timestamp,e.packetsLost)}},{key:"_onAudioOutBoundRtp",value:function(e,t){void 0!==e.mediaType&&"audio"!==e.mediaType||this._senderMonitorData.updateAudioDataSent(e.timestamp,e.bytesSent,e.packetsSent,e.ssrc,t)}},{key:"_onAudioTrack",value:function(e){this._senderMonitorData.updateAudioInfo(e.timestamp,e.audioLevel,e.totalAudioEnergy,e.totalSamplesDuration)}},{key:"_onLocalCandidate",value:function(e,t){this._senderMonitorData.updateLocalCandidate(e.networkType,e.protocol)}},{key:"_onVideoCodec",value:function(e,t){this._senderMonitorData.updateVideoCodec(e)}},{key:"_onVideoInboundRtp",value:function(e,t){void 0!==e.mediaType&&"video"!==e.mediaType||this._senderMonitorData.updateVideoData(t,e.timestamp,e.packetsLost)}},{key:"_onVideoOutBoundRtp",value:function(e,t,r,n){void 0!==e.mediaType&&"video"!==e.mediaType||this._senderMonitorData.updateVideoDataSent(r,e.timestamp,e.bytesSent,e.packetsSent,e.ssrc,e.nackCount,t,n)}},{key:"_onVideoTrack",value:function(e,t,r,n){void 0!==e.mediaType&&"video"!==e.mediaType||this._senderMonitorData.updateVideoTrack(r,e.frameWidth,e.frameHeight,e.framesSent,e.hugeFramesSent,e.timestamp)}},{key:"_onVideoMediaSource",value:function(e,t,r,n){void 0!==e.mediaType&&"video"!==e.mediaType||this._senderMonitorData.updateMedisSource(r,e.width,e.height,e.framesPerSecond,e.timestamp)}}]),t}(u.default);t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={Init:0,Publishing:1,Published:2,UnPublishing:3}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ERRORMESSAGE_DEVICENOTFOUND:"Requested device not found",ERRORMESSAGE_DEVICENOTALLOWED:"Permission denied",ERRORMESSAGE_MACCHROMEDEVICENOTREADABLE:"Permission denied by system",ERRORMESSAGE_MACSAFARIDEVICENOTALLOWED:"The request is not allowed by the user agent or the platform in the current context, possibly because the user denied permission.",ERRORMESSAGE_MOBILEDEVICE_NOTALLOWED:"video device not allowed",ERRORMESSAGE_AUDIODEVICENOTREADABLE:"Could not start audio source",ERRORMESSAGE_VIDEODEVICENOTREADABLE:"Could not start video source",ERRORNAME_ABORTEERROR:"AbortError",ERRORNAME_INVALIDSTATEERROR:"InvalidStateError",ERRORNAME_DEVICENOTALLOWED:"NotAllowedError",ERRORNAME_DEVICENOTFOUND:"NotFoundError",ERRORNAME_DEVICENOTREADABLE:"NotReadableError",ERRORNAME_DEVICEOVERCONSTRAINED:"OverconstrainedError",ERRORNAME_INVALID_ACCESS:"InvalidAccessError",ERRORNAME_TYPEERROR:"TypeError"};t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(92),u=n(c),f=r(14),d=n(f),l=r(11),h=n(l),p=r(93),_=r(94),m=n(_),v={ERROR_NOTSUPPORT_AUDIOCONTEXT:1e3,ERROR_AUTOPLAY_FAIL:1001,ERROR_NOT_ARRAYBUFFER:1101},b=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._deviceId="",e._catcheResource=new Map,e._player=new p.AudioBufferPlayer,e._player.on("ended",e._onEnded.bind(e)),e._loading=!1,e}return a(t,e),s(t,[{key:"startAudioMixing",value:function(e,t){var r=this;if(this._loading)return void(t&&t({errorCode:h.default.ERROR_INVALID_AUDIO_MIXING_STATE,message:"loading state can not use startAudioMixing"}));if(this._player.state===m.default.Loading||this._player.state===m.default.Playing||this._player.state===m.default.Pause)return void(t&&t({errorCode:h.default.ERROR_INVALID_AUDIO_MIXING_STATE,message:"loading, playing or pause state can not use startAudioMixing"}));if(this._loading=!0,e){var n=e.cacheResource,i=void 0===n||n,o=e.filePath,a=e.playTime,s=void 0===a?0:a;if(o){if(!("number"==typeof s&&s>=0&&s<=1e8))throw this._loading=!1,new Error("Invalid position: The value range is [0,100000000]. integer only");if(this._catcheResource.has(o)){var c=this._catcheResource.get(o).slice();this._startAudioMixingWithArrayBuffer(s,c,t)}else this.loadAudioBuffer(o).then(function(e){i&&r._catcheResource.set(o,e);var n=e.slice();r._startAudioMixingWithArrayBuffer(s,n,t)}).catch(function(e){r._loading=!1,t&&t({errorCode:h.default.ERROR_LOAD_AUDIO_FAILED,message:"load audio failed"})})}else t&&t({errorCode:h.default.ERROR_AUDIO_MIXING_MISSING_PARAME,message:"filePath cannot be empty"}),this._loading=!1}else t&&t({errorCode:h.default.ERROR_AUDIO_MIXING_MISSING_PARAME,message:"option cannot be empty"}),this._loading=!1}},{key:"_startAudioMixingWithArrayBuffer",value:function(e,t,r){var n=this;this._loading=!1,this._player.play(t,e).then(function(){n.dispatchEvent(u.default.AudioMixingPlayed),r&&r()}).catch(function(e){if(r){var t=void 0;t=e&&e.code?e.code===v.ERROR_NOTSUPPORT_AUDIOCONTEXT?{errorCode:h.default.ERROR_NOTSUPPORT_AUDIOCONTEXT,message:"not support audiocontext"}:e.code===v.ERROR_AUTOPLAY_FAIL?{errorCode:h.default.ERROR_AUTOPLAY_FAIL,message:"autoplay failed"}:e.code===v.ERROR_NOT_ARRAYBUFFER?{errorCode:h.default.ERROR_NOT_ARRAYBUFFER,message:"not arraybuffer"}:{errorCode:h.default.ERROR_AUDIOMIXING_UNKNOWN_ERROR,message:"audiomixing unknown error"}:{errorCode:h.default.ERROR_AUDIOMIXING_UNKNOWN_ERROR,message:"audiomixing unknown error"},r(t)}})}},{key:"stopAudioMixing",value:function(e){if(this._loading)return void(e&&e({errorCode:h.default.ERROR_INVALID_AUDIO_MIXING_STATE,message:"loading state can not use stopAudioMixing"}));this._player.state===m.default.Playing||this._player.state===m.default.Pause?(this._player.stop(),e&&e()):e&&e({errorCode:h.default.ERROR_INVALID_AUDIO_MIXING_STATE,message:"only playing or pause state can use stopAudioMixing"})}},{key:"pauseAudioMixing",value:function(e){if(this._loading)return void(e&&e({errorCode:h.default.ERROR_INVALID_AUDIO_MIXING_STATE,message:"loading state can not use pauseAudioMixing"}));this._player.state===m.default.Playing?(this._player.pause(),this.dispatchEvent(u.default.AudioMixingPaused),e&&e()):e&&e({errorCode:h.default.ERROR_INVALID_AUDIO_MIXING_STATE,message:"only playing state can use pauseAudioMixing"})}},{key:"resumeAudioMixing",value:function(e){var t=this;if(this._loading)return void(e&&e({errorCode:h.default.ERROR_INVALID_AUDIO_MIXING_STATE,message:"loading state can not use resumeAudioMixing"}));this._player.state===m.default.Pause?this._player.resume().then(function(){t.dispatchEvent(u.default.AudioMixingPlayed),e&&e()}).catch(function(t){e&&e({errorCode:h.default.ERROR_RESUME_AUDIO_FAIL,message:t&&t.message?t.message:"state error"})}):e&&e({errorCode:h.default.ERROR_INVALID_AUDIO_MIXING_STATE,message:"only pause state can use resumeAudioMixing"})}},{key:"adjustAudioMixingVolume",value:function(e){e=Number(e),e>100&&(e=100),e<0&&(e=0),this.volume=e/100}},{key:"setAudioMixingPosition",value:function(e,t){if(!("number"==typeof e&&e>=0&&e<=1e8))throw new Error("Invalid position: The value range is [0,100000000]. integer only");this._player.currentTime=e,this.dispatchEvent(u.default.SetAudioMixingPosition),t&&t()}},{key:"getAudioMixingDuration",value:function(){return Math.floor(this._player.duration)}},{key:"getAudioMixingCurrentPosition",value:function(){return Math.floor(this._player.currentTime)}},{key:"loadAudioBuffer",value:function(e){return new Promise(function(t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){if(n.status>400)r(n.status);else{var e=n.response;t(e)}},n.onerror=function(e){r(e)},n.ontimeout=function(){r("timeout")},n.send()})}},{key:"_onEnded",value:function(){this.dispatchEvent(u.default.AudioMixingFinished)}},{key:"bufferPlayer",get:function(){return this._player}},{key:"volume",set:function(e){this._player.volume=e}}]),t}(d.default);t.default=b},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},f=r(8),d=n(f),l=r(95),h=n(l),p=r(62),_=n(p),m=r(86),v=n(m),b=r(30),y=n(b),g=r(13),S=n(g),w=r(7),k=n(w),E=r(37),R=n(E),C=r(194),A=n(C),O=r(17),T=n(O),M=r(18),P=n(M),I=r(11),x=n(I),D=r(201),L=n(D),N=r(202),B=n(N),j=function(e){function t(e,r,n,a,s,c,u){i(this,t);var f=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n,a,s,c));return f._waitTimerId=0,f._apiManager=u,f._reset(),f._subscribeStreams=[],f._mediastream=null,f._firefoxStreamInfo=[],f._isPending=!1,f._configRemoteCameraTrack=!0,f._preferMaster=!0,f._configRemoteScreenTrack=!1,f._configRemoteAudio=!0,f._remoteId="",f._subscribeId="",f._startSubTime=0,k.default.isSafari?(f._cameraManager=new B.default(d.default.LargeVideo,f._common,f._userId),f._screenManager=new B.default(d.default.ScreenShareVideo,f._common,f._userId)):(f._cameraManager=new L.default(d.default.LargeVideo,f._common,f._userId),f._screenManager=new L.default(d.default.ScreenShareVideo,f._common,f._userId)),f._firstPackageHandler=f._firstPackageHandler.bind(f),f._firstFrameHandler=f._firstFrameHandler.bind(f),f._reset(),f}return a(t,e),c(t,[{key:"checkAudio",value:function(){return this._cameraManager.hasAudioTrack||this._screenManager.hasAudioTrack}},{key:"getDownlinkNetworkQuality",value:function(){return this._pcMonitor?this._pcMonitor.getNetworkInfo():{lostrate:-1,rtt:-1}}},{key:"muteAudioPlaying",value:function(e){var t=this._cameraManager.muted=e,r=this._screenManager.muted=e;return t||r}},{key:"setAudioVolume",value:function(e){return this._cameraManager.volume=e,this._screenManager.volume=e,!0}},{key:"getAudioVolume",value:function(){return k.default.isSafari||!this._cameraManager.isSameElement(null)?this._cameraManager.volume:this._screenManager.volume}},{key:"startAudioInputLevel",value:function(){this._common.customPlay||(this._cameraManager.isSameElement(null)?this._screenManager.startAudioInputLevel():this._cameraManager.startAudioInputLevel())}},{key:"stopAudioInputLevel",value:function(e){this._common.customPlay||(this._cameraManager.isSameElement(null)?this._screenManager.stopAudioInputLevel(e):this._cameraManager.stopAudioInputLevel(e))}},{key:"configRemoteCameraTrack",value:function(e,t){this._configRemoteCameraTrack=t,this._preferMaster=e}},{key:"configRemoteScreenTrack",value:function(e){this._configRemoteScreenTrack=e}},{key:"configRemoteAudio",value:function(e){this._configRemoteAudio=e}},{key:"getUserInfo",value:function(){var e=void 0;e=k.default.isSafari||!this._cameraManager.isSameElement(null)?this._cameraManager.muted:this._screenManager.muted;var t={userId:this._userId,displayName:this._displayName,muteAudioPlaying:e,streamConfigs:[]};return this._streamConfig.forEach(function(e){t.streamConfigs.push({label:e.label,type:e.type,state:e.state,subscribed:e.subscribed,muted:!!e.muted})}),t}},{key:"clearLevel",value:function(){this._cameraManager.clearLevel(),this._screenManager.clearLevel()}},{key:"clear",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clear",this).call(this);for(var e=0;e<this._streamConfig.length;++e)this._streamConfig[e].subscribed=!1;this._cameraManager.release(),this._screenManager.release()}},{key:"setDisplayRemoteVideo",value:function(e,t){var r=this,n=this.getAudioVolume(),i=void 0;i=k.default.isSafari||!this._cameraManager.isSameElement(null)?this._cameraManager.muted:this._screenManager.muted,h.default.CAMERA==t?(this._screenManager.isSameElement(e)&&this._screenManager.reset(),this._cameraManager.isSameElement(e)||(this._cameraManager.init(e),k.default.isSafari||(this._cameraManager.volume=n,this._cameraManager.muted=i))):h.default.SCREEN==t&&(this._cameraManager.isSameElement(e)&&this._cameraManager.reset(),this._screenManager.isSameElement(e)||(this._screenManager.init(e),k.default.isSafari||(this._screenManager.volume=n,this._screenManager.muted=i))),setTimeout(function(){r._updateMediaStream()},0)}},{key:"subscribe",value:function(){var e=this;return new Promise(function(t,r){if(e._isPending)return void r({errorCode:x.default.ERROR_FREQUENTLY_OPERATION,message:"operation is too frequent"});e._isPending=!0,e._configRemoteCameraTrack||e._configRemoteScreenTrack||e._configRemoteAudio?(e._startSubTime=(new Date).getTime(),e.conn?e._reSubscribe().then(function(r){e._isPending=!1,t(r)}).catch(function(t){e._isPending=!1,e._log.reportOnError(t),r(t)}):e._subscribe().then(function(r){e._isPending=!1,t(r)}).catch(function(t){e._isPending=!1,e._log.reportOnError(t),r(t)})):e.unSubscribe().then(function(r){e._reset(),e._isPending=!1,t(r)}).catch(function(t){e._isPending=!1,e._log.reportOnError(t),r(t)})})}},{key:"unSubscribe",value:function(){var e=this;return new Promise(function(t,r){if(e.conn){e._mediastream=null;var n=(new Date).getTime();e._releaseMonitor(),e._signalingManager.unsubscribe(e._subscribeId).then(function(r){e._log.reportUnsubscribe(e._subscribeId,e._remoteId,(new Date).getTime()-n,0,r.tid),e.stopAudioInputLevel(!0),e.clear(),t(e.getUserInfo())}).catch(function(t){e._log.reportUnsubscribe(e._subscribeId,e._remoteId,(new Date).getTime()-n,t.code,t.tid),r(t)})}else r({message:""})})}},{key:"setAudioOutput",value:function(e){var t=this;return new Promise(function(r,n){t._cameraManager.hasAudioTrack?t._cameraManager.setAudioOutput(e).then(function(){r()}).catch(function(e){n(e)}):t._screenManager.hasAudioTrack?t._screenManager.setAudioOutput(e).then(function(){r()}).catch(function(e){n(e)}):n()})}},{key:"updateStreams",value:function(e){var t=this;if(this._streamConfig.length)for(var r=!1,n=!1,i=!1,o=!1,a=0;a<e.length;++a)!function(a){for(var s=!1,c=0;c<t._streamConfig.length;++c)if(t._streamConfig[c].label===e[a].label){s=!0,Object.assign(t._streamConfig[c],e[a]),t._streamConfig[c].subscribed!=e[a].subscribed&&(e[a].subscribed=t._streamConfig[c].subscribed,Object.assign(t._streamConfig[c],e[a]),t._isStreamSubscribed(t._streamConfig[c].label)&&(d.default.ScreenShareVideo===t._streamConfig[c].label?o=!0:d.default.Audio===t._streamConfig[c].label?r=!0:d.default.SmallVideo===t._streamConfig[c].label?i=!0:d.default.SuperVideo!=t._streamConfig[c].label&&(n=!0)));break}if(!s){e[a].subscribed=!1;var u=t._streamConfig.findIndex(function(t){return t.label==e[a].label});u>-1?Object.assign(t._streamConfig[u],e[a]):t._streamConfig.push(e[a])}}(a);else{Object.assign(this._streamConfig,e);for(var a=0;a<this._streamConfig.length;++a)this._streamConfig[a].subscribed=!1}}},{key:"recvOffer",value:function(e){var t=this;this.conn||(this._common.dispatchEvent(S.default.OnConnecting,{displayName:this._displayName,userId:this._userId,type:"subscribe"}),this._offerByRemote(e).then(function(e){t._common.dispatchEvent(S.default.OnConnected,{displayName:t._displayName,userId:t._userId,type:"subscribe"})}).catch(function(e){t._common.dispatchEvent(S.default.OnError,e)}))}},{key:"onUnpublish",value:function(){var e=this;this._mediastream=null,this._conn&&(this.stopAudioInputLevel(!0),this.unSubscribe().then(function(){e.clear()}).catch(function(t){e.clear()})),this._streamConfig=[]}},{key:"_subscribe",value:function(){var e=this;return new Promise(function(t,r){if(e._common.isAudioOnly){if(!e._configRemoteAudio)return void r(P.default.parseOptionError(x.default.ERROR_OPTIONS_AUDIO_ONLY));e._configRemoteCameraTrack=!1,e._configRemoteScreenTrack=!1}var n=e._createSubscribeStreams();if(!e._subscribeStreams.length)return void r({message:""});var i=(new Date).getTime();e._subscribeId=y.default.random(32);var o=JSON.stringify({streams:e._subscribeStreams});e._signalingManager.subscribe(e._subscribeId,e._remoteId,o).then(function(r){e._updateStreamsSubscribeState(n),e._log.reportSubscribe(e._subscribeId,e._remoteId,n.isLargeVideo,n.isSmallVideo,n.isScreenShare,n.isAudio,0,r.tid,(new Date).getTime()-i),t(r)}).catch(function(t){e._log.reportSubscribe(e._subscribeId,e._remoteId,n.isLargeVideo,n.isSmallVideo,n.isScreenShare,n.isAudio,t.code,t.tid,(new Date).getTime()-i)})})}},{key:"_reSubscribe",value:function(){var e=this;return new Promise(function(t,r){var n=(new Date).getTime(),i=e._createSubscribeStreams();if(!e._checkSubResult(i))return void t({subscribeCallId:e._subscribeId});if(e._common.isAudioOnly)return e._configRemoteCameraTrack=!1,e._configRemoteScreenTrack=!1,void r(P.default.parseOptionError(x.default.ERROR_OPTIONS_AUDIO_ONLY));var o=JSON.stringify({streams:e._subscribeStreams});e._signalingManager.resubscribe(e._subscribeId,e._remoteId,o).then(function(r){setTimeout(function(){var t=e._mergeMediaStream();t&&(e._mediastream=t,e._onRecvRemoteStream(e._mediastream))},T.default.isIos?500:0),e._updateStreamsSubscribeState(i),e._log.reportResubscribe(e._subscribeId,e._remoteId,i.isLargeVideo,i.isSmallVideo,i.isScreenShare,i.isAudio,0,r.tid,(new Date).getTime()-n),t({subscribeCallId:e._subscribeId})}).catch(function(t){e._log.reportResubscribe(e._subscribeId,e._remoteId,i.isLargeVideo,i.isSmallVideo,i.isScreenShare,i.isAudio,t.code,t.tid,(new Date).getTime()-n),r(t)})})}},{key:"_offerByRemote",value:function(e){var t=this;return new Promise(function(r,n){var i=(new Date).getTime();t._createAnswer(e).then(function(e){t._answer(e,i).then(function(e){r(e)}).catch(function(e){n(e)});var o=function(){"complete"==t.conn.iceGatheringState&&(t._iceGatheringStateCompleteHandle=!0,t._iceCandidateByAnswer(!0).then(function(e){t._iceGatheringStateCompleteHandle=!1}).catch(function(e){}))};t.conn.onicecandidate=function(e){if(e.candidate&&t._filterIceCandidate(e.candidate)){var r=e.candidate;if(t._iceCandidateByAnswer(!1,r).then(function(e){}).catch(function(e){}),void 0===t.conn.onicegatheringstatechange){!function e(){"complete"==t.conn.iceGatheringState?1!=t._iceGatheringStateCompleteHandle&&o():setTimeout(e)}()}}},void 0!==t.conn.onicegatheringstatechange&&(t.conn.onicegatheringstatechange=function(e){o()}),t.conn.oniceconnectionstatechange=function(e){var r=t.conn.iceConnectionState;switch(t._log.reportIceState(t._subscribeId,t._remoteId,r,t._iceEventIndex),++t._iceEventIndex,r){case"connected":t._clearIceConnectionStateTimer();break;case"closed":break;case"failed":t._dispatchIceError(r);break;case"disconnected":t._iceConnectionStateTimer=setTimeout(function(){t._dispatchIceError("disconnected")},8e3)}},t.conn.onconnectionstatechange=function(e){switch(t.conn.connectionState){case"connected":case"disconnected":break;case"failed":t._displayName;break;case"closed":t._displayName}},t._setLocalDescription(e).then(function(){}).catch(function(e){n(e)})}).catch(function(e){n(e)})})}},{key:"_createAnswer",value:function(e){var t=this;return new Promise(function(r,n){t._createPeerConnection(),t._pcMonitor=new A.default(t.conn,t._common,t._log,t._userId,t._remoteId),t._pcMonitor.addEventListener(_.default.FirstPackage,t._firstPackageHandler),t._pcMonitor.addEventListener(_.default.FirstFrame,t._firstFrameHandler),k.default.isFirefox?t.conn.ontrack=function(e){e.streams&&e.streams.length&&(t._mediastream=e.streams[0])}:t.conn.onaddstream=function(e){t._onRecvRemoteStream(t._mergeMediaStream())},t._setRemoteDescription(e).then(function(){k.default.isFirefox&&t._createPeerConnectionAnswer().then(function(n){t._firefoxStreamInfo=R.default.matchSDP(e.sdp,n.sdp),t._onRecvRemoteStream(t._mediastream),r(n)}).catch(function(e){n(e)})}).catch(function(e){n(e)}),k.default.isFirefox||t._createPeerConnectionAnswer().then(function(e){r(e)}).catch(function(e){n(e)})})}},{key:"_answer",value:function(e,t){var r=this,n=JSON.stringify({jsep:{type:e.type,sdp:e.sdp}});return this._pcMonitor.callId=this._subscribeId,new Promise(function(e,i){r._signalingManager.answer(r._subscribeId,r._remoteId,n).then(function(n){r._log.reportSubscribeAnswerTime(r._remoteId,r._subscribeId,(new Date).getTime()-t,0),e(n)}).catch(function(e){r._log.reportSubscribeAnswerTime(r._remoteId,r._subscribeId,(new Date).getTime()-t,1),i(e)})})}},{key:"_createPeerConnectionAnswer",value:function(){var e=this;return new Promise(function(t,r){e.conn.createAnswer().then(function(e){e.sdp=R.default.replace42e01fTo42001f(e.sdp),e.sdp=R.default.supportStereo(e.sdp),t(e)}).catch(function(e){r(e)})})}},{key:"_iceCandidateByAnswer",value:function(e,t){var r=this;return new Promise(function(n,i){var o={completed:!!e};e||(o.candidate={sdpMLineIndex:t.sdpMLineIndex,sdpMid:t.sdpMid,candidate:t.candidate}),r._signalingManager.iceCandidate(r._subscribeId,r._remoteId,JSON.stringify(o)).then(function(e){n()}).catch(function(e){i(e)})})}},{key:"_createSubscribeStreams",value:function(){this._subscribeStreams=[];var e={isLargeVideo:!1,isSmallVideo:!1,isScreenShare:!1,isAudio:!1};if(this._smallVideo=!1,this._largeVideo=!1,this._remoteScreenVideo=!1,this._remoteAudio=!1,this._configRemoteAudio&&(e.isAudio=this._addAudioToSubscribeStreams()),this._configRemoteScreenTrack&&(e.isScreenShare=this._addScreenToSubscribeStreams()),this._configRemoteCameraTrack){var t=this._addCameraToSubscribeStreams();t===d.default.LargeVideo?e.isLargeVideo=!0:t===d.default.SmallVideo&&(e.isSmallVideo=!0)}return e}},{key:"_addAudioToSubscribeStreams",value:function(){for(var e=0;e<this._streamConfig.length;++e)if("audio"===this._streamConfig[e].type&&"active"===this._streamConfig[e].state)return this._subscribeStreams.push({mslabel:this._streamConfig[e].mslabel,label:this._streamConfig[e].label,type:this._streamConfig[e].type,temporalLayer:0,substream:0}),this._remoteAudio=!0,!0;return!1}},{key:"_addScreenToSubscribeStreams",value:function(){for(var e=0;e<this._streamConfig.length;++e)if("video"===this._streamConfig[e].type&&this._streamConfig[e].label===d.default.ScreenShareVideo&&"active"===this._streamConfig[e].state)return this._subscribeStreams.push({mslabel:this._streamConfig[e].mslabel,label:this._streamConfig[e].label,type:this._streamConfig[e].type,temporalLayer:Math.max(this._streamConfig[e].temporalLayers-1,0),substream:Math.max(this._streamConfig[e].substreams-1,0)}),this._remoteScreenVideo=!0,!0;return!1}},{key:"_addCameraToSubscribeStreams",value:function(){for(var e=-1,t=-1,r=0;r<this._streamConfig.length;++r)this._streamConfig[r].label===d.default.LargeVideo&&"active"===this._streamConfig[r].state?e=r:this._streamConfig[r].label===d.default.SmallVideo&&"active"===this._streamConfig[r].state&&(t=r);if(e>-1&&t>-1)return this._preferMaster?(this._subscribeStreams.push({mslabel:this._streamConfig[e].mslabel,label:this._streamConfig[e].label,type:this._streamConfig[e].type,temporalLayer:Math.max(this._streamConfig[e].temporalLayers-1,0),substream:Math.max(this._streamConfig[e].substreams-1,0)}),this._largeVideo=!0,d.default.LargeVideo):(this._subscribeStreams.push({mslabel:this._streamConfig[t].mslabel,label:this._streamConfig[t].label,type:this._streamConfig[t].type,temporalLayer:Math.max(this._streamConfig[t].temporalLayers-1,0),substream:Math.max(this._streamConfig[t].substreams-1,0)}),this._smallVideo=!0,d.default.SmallVideo);if(e>-1)return this._subscribeStreams.push({mslabel:this._streamConfig[e].mslabel,label:this._streamConfig[e].label,type:this._streamConfig[e].type,temporalLayer:Math.max(this._streamConfig[e].temporalLayers-1,0),substream:Math.max(this._streamConfig[e].substreams-1,0)}),this._largeVideo=!0,d.default.LargeVideo;if(t>-1)return this._subscribeStreams.push({mslabel:this._streamConfig[t].mslabel,label:this._streamConfig[t].label,type:this._streamConfig[t].type,temporalLayer:Math.max(this._streamConfig[t].temporalLayers-1,0),substream:Math.max(this._streamConfig[t].substreams-1,0)}),this._smallVideo=!0,d.default.SmallVideo;if(this._streamConfig.length<=2)for(var n=0;n<this._streamConfig.length;++n)if("video"===this._streamConfig[n].type&&"active"===this._streamConfig[n].state)return this._subscribeStreams.push({mslabel:this._streamConfig[n].mslabel,label:this._streamConfig[n].label,type:this._streamConfig[n].type,temporalLayer:Math.max(this._streamConfig[n].temporalLayers-1,0),substream:Math.max(this._streamConfig[n].substreams-1,0)}),this._largeVideo=!0,d.default.LargeVideo;return""}},{key:"_isStreamSubscribed",value:function(e){for(var t=0;t<this._streamConfig.length;++t)if(this._streamConfig[t].label===e&&this._streamConfig[t].subscribed)return!0;return!1}},{key:"_getNeedWait",value:function(e){var t=!1;if(this._configRemoteAudio){var r=e.getAudioTracks();r&&0!==r.length||(t=!0)}if(!t){for(var n=e.getVideoTracks(),i=!this._configRemoteCameraTrack,o=!this._configRemoteScreenTrack,a=0;a<n.length;++a)n[a].id==d.default.ScreenShareVideo?o=!0:n[a].id!=d.default.LargeVideo&&n[a].label!=d.default.SmallVideo||(i=!0);i&&o||(t=!0)}return t}},{key:"_onRecvRemoteStream",value:function(e){var t=this;if(this._subscribeStreams.length){this._getNeedWait(e)?0===this._waitTimerId&&(this._waitTimerId=setInterval(function(){if(!t._getNeedWait(t._mergeMediaStream()))return clearInterval(t._waitTimerId),t._waitTimerId=0,t._mediastream=t._mergeMediaStream(),t._subscribeStreams=[],void t._updateMediaStream()},100)):(this._mediastream=e,this._subscribeStreams=[],this._updateMediaStream())}}},{key:"_releaseMonitor",value:function(){this._pcMonitor&&(this._pcMonitor.releaseMonitor(),this._pcMonitor.removeEventListener(_.default.FirstPackage,this._firstPackageHandler),this._pcMonitor.removeEventListener(_.default.FirstFrame,this._firstFrameHandler),this._pcMonitor=null)}},{key:"_updateStreamsSubscribeState",value:function(e){for(var t=0;t<this._streamConfig.length;++t)"audio"===this._streamConfig[t].type?this._streamConfig[t].subscribed=e.isAudio:this._streamConfig[t].label===d.default.SmallVideo?this._streamConfig[t].subscribed=e.isSmallVideo:this._streamConfig[t].label===d.default.ScreenShareVideo?this._streamConfig[t].subscribed=e.isScreenShare:this._streamConfig[t].label!=d.default.SuperVideo&&(this._streamConfig[t].subscribed=e.isLargeVideo);this._updateMonitorStatus(e)}},{key:"_updateMonitorStatus",value:function(e){var t=this;this._pcMonitor?(this._pcMonitor.subscribeAudio=e.isAudio,this._pcMonitor.subscribeSmallVideo=e.isSmallVideo,this._pcMonitor.subscribeScreenVideo=e.isScreenShare,this._pcMonitor.subscribeLargeVideo=e.isLargeVideo):setTimeout(function(){t._updateMonitorStatus(e)},1e3)}},{key:"_updateMediaStream",value:function(){if(this._mediastream){var e=null,t=null,r=null,n=void 0;n=this._mediastream.getVideoTracks();for(var i=0;i<n.length;++i)n[i].id===d.default.ScreenShareVideo?this._remoteScreenVideo&&(t=n[i]):n[i].id!=d.default.SuperVideo&&n[i].enabled&&(n[i].id===d.default.SmallVideo?this._smallVideo&&(e=n[i]):this._largeVideo&&(e=n[i]));if(this._common.customPlay){if(this._remoteAudio){var o=this._mediastream.getAudioTracks();o.length&&(r=o[0])}var a=new MediaStream;r&&a.addTrack(r),e&&a.addTrack(e),t&&a.addTrack(t),this._log.reportMediaStreamUpdate(this._subscribeId,this._remoteId,!!r,!!e,!!t),this._common.dispatchEvent(S.default.OnMediaStreamUpdate,{userId:this._userId,mediaStream:a})}else if(t?this._screenManager.addVideoTrack(t):this._screenManager.removeVideoTrack(),e?this._cameraManager.addVideoTrack(e):this._cameraManager.removeVideoTrack(),this._remoteAudio){var s=void 0;s=this._mediastream.getAudioTracks(),s.length&&(r=s[0],k.default.isSafari||!this._cameraManager.isSameElement(null)?(this._cameraManager.addAudioTrack(r),this._screenManager.removeAudioTrack()):this._screenManager.isSameElement(null)||(this._screenManager.addAudioTrack(r),this._cameraManager.removeAudioTrack()),this._common.outputDeviceId&&this.checkAudio()&&this.setAudioOutput(this._common.outputDeviceId))}else this.stopAudioInputLevel(),this._cameraManager.removeAudioTrack()}}},{key:"_reset",value:function(){this._iceEventIndex=0,this._largeVideo=!1,this._smallVideo=!1,this._remoteScreenVideo=!1,this._remoteAudio=!1,this._cameraManager&&this._cameraManager.releaseAudio&&this._cameraManager.releaseAudio()}},{key:"_dispatchIceError",value:function(e){this._clearIceConnectionStateTimer();var t={errorCode:x.default.ERROR_ICE_SUBSCRIBE_DISCONNECTED,message:"ICE connection "+e+",please check network or try to cancel subscribe, then subscribe again",userId:this._userId,state:e,type:"subscribe"};this._common.dispatchEvent(S.default.OnError,t)}},{key:"_checkSubResult",value:function(e){for(var t=0;t<this._streamConfig.length;++t)if(this._streamConfig[t].label===d.default.LargeVideo){if(this._streamConfig[t].subscribed!=e.isLargeVideo)return!0}else if(this._streamConfig[t].label===d.default.Audio){if(this._streamConfig[t].subscribed!=e.isAudio)return!0}else if(this._streamConfig[t].label===d.default.SmallVideo){if(this._streamConfig[t].subscribed!=e.isSmallVideo)return!0}else if(this._streamConfig[t].label===d.default.ScreenShareVideo&&this._streamConfig[t].subscribed!=e.isScreenShare)return!0;return!1}},{key:"_mergeMediaStream",value:function(){if(this._conn){var e=this._conn.getRemoteStreams();if(e&&e.length){var t=function(){for(var t=new MediaStream,r=0;r<e.length;++r){e[r].getTracks().forEach(function(e){t.addTrack(e)})}return{v:t}}();if("object"===(void 0===t?"undefined":s(t)))return t.v}}return null}},{key:"_firstPackageHandler",value:function(e){this._log.reportSubscribeFirstPacket(e.callid,e.remoteid,e.tm-this._startSubTime,e.trackid)}},{key:"_firstFrameHandler",value:function(e){this._log.reportSubscribeFirstFrame(e.callid,e.remoteid,e.tm-this._startSubTime,e.trackid)}},{key:"remoteId",set:function(e){this._remoteId=e}},{key:"subscribeId",get:function(){return this._subscribeId}},{key:"level",get:function(){return this._common.customPlay?this._pcMonitor.audioLevel:k.default.isSafari||!this._cameraManager.isSameElement(null)?this._cameraManager.level:this._screenManager.isSameElement(null)?0:this._screenManager.level}},{key:"buffer",get:function(){return k.default.isSafari||!this._cameraManager.isSameElement(null)?this._cameraManager.buffer:this._screenManager.isSameElement(null)?0:this._screenManager.buffer}}]),t}(v.default);t.default=j},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(88),u=n(c),f=r(195),d=n(f),l=r(199),h=n(l),p=r(13),_=n(p),m=r(62),v=n(m),b=function(e){function t(e,r,n,a,s){i(this,t);var c=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n,a,new d.default(s)));return c._monitor=new h.default(e,c._monitorData),c._monitorData.addEventListener(v.default.FirstPackage,function(e){c.dispatchEvent(v.default.FirstPackage,e)}),c._monitorData.addEventListener(v.default.FirstFrame,function(e){c.dispatchEvent(v.default.FirstFrame,e)}),c._audioLevel=0,c}return a(t,e),s(t,[{key:"getNetworkInfo",value:function(){return this._monitor.getNetworkInfo()}},{key:"_onMonitorTimer",value:function(){if(this._timerIndex>=30){var e=this._monitor._receiverMonitorData.callId,t=this._monitor._receiverMonitorData.remoteid,r=this._monitorData.getSubscribeAudioData();r&&this._log.reportSubscribeDataMonitor(e,t,r);var n=this._monitorData.getSubscribeCameraSmallData();n&&this._log.reportSubscribeDataMonitor(e,t,n);var i=this._monitorData.getSubscribeCameraLargeData();i&&this._log.reportSubscribeDataMonitor(e,t,i);var o=this._monitorData.getSubscribeScreenData();o&&this._log.reportSubscribeDataMonitor(e,t,o);var a=this._monitorData.getNetworkData();a&&this._log.reportSubscribeNetworkMonitor(e,t,a),this._timerIndex=0}if(this._monitor){this._monitor.getStats();var s=this._monitorData.cacheData();this._audioLevel=s.audio?s.audio.level:0;this._monitorData.audioBuffer;this._common.dispatchEvent(_.default.OnMedia,{userId:this._userId,data:s})}++this._timerIndex}},{key:"audioLevel",get:function(){return this._audioLevel}},{key:"callId",set:function(e){this._monitor._receiverMonitorData.callId=e}},{key:"subscribeAudio",set:function(e){this._monitorData.subscribeAudio=e}},{key:"subscribeSmallVideo",set:function(e){this._monitorData.subscribeSmallVideo=e}},{key:"subscribeLargeVideo",set:function(e){this._monitorData.subscribeLargeVideo=e}},{key:"subscribeScreenVideo",set:function(e){this._monitorData.subscribeScreenVideo=e}}]),t}(u.default);t.default=b},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(196),u=n(c),f=r(197),d=n(f),l=r(8),h=n(l),p=r(62),_=n(p),m=r(14),v=n(m),b=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._remoteId=e,r._callId="",r._receiverAudioData=new u.default,r._receiverVideoSmallData=new d.default,r._receiverVideoLargeData=new d.default,r._receiverVideoScreenShareData=new d.default,r._ip="",r._port="",r._rtt=0,r._lastTimeStamp=0,r._bytesSent=0,r._bytesReceivedPerSecond,r._bytesReceived=0,r._bytesReceivedPerSecond=0,r._hasAudioData=!1,r._hasCameraSmall=!1,r._hasCameraLarge=!1,r._hasScreen=!1,r._audioSampleRate=-1,r._audioSampleSize=-1,r._monitorAudioDataArr=[],r._monitorCameraLargeDataArr=[],r._monitorCmaeraSmallDataArr=[],r._monitorScreenShareDataArr=[],r._monitorNetworkDataArr=[],r}return a(t,e),s(t,[{key:"getNetworkInfo",value:function(){return{lostrate:Math.max(this._receiverVideoLargeData.packetsLostRate,this._receiverVideoSmallData.packetsLostRate,this._receiverAudioData.packetsLostRate,this._receiverVideoScreenShareData.packetsLostRate),rtt:Math.round(1e3*this._rtt)}}},{key:"getSubscribeAudioData",value:function(){var e=null;if(this._hasAudioData){e={calid:this._callId,rmtid:this._remoteId,tckid:h.default.Audio,src:this._receiverAudioData.ssrc,codec:this._receiverAudioData.mimeType,rbr:"",pr:"",pl:"",plr:"",jd:"",apsr:this._audioSampleRate,aolevel:""};for(var t=0;t<this._monitorAudioDataArr.length;++t)0===t?(e.rbr+=this._monitorAudioDataArr[t].rbr,e.pr+=this._monitorAudioDataArr[t].pr,e.pl+=this._monitorAudioDataArr[t].pl,e.plr+=this._monitorAudioDataArr[t].plr,e.jd+=this._monitorAudioDataArr[t].jd,e.aolevel+=Math.round(32767*this._monitorAudioDataArr[t].aolevel)):(e.rbr+=","+this._monitorAudioDataArr[t].rbr,e.pr+=","+this._monitorAudioDataArr[t].pr,e.pl+=","+this._monitorAudioDataArr[t].pl,e.plr+=","+this._monitorAudioDataArr[t].plr,e.jd+=","+this._monitorAudioDataArr[t].jd,e.aolevel+=","+Math.round(32767*this._monitorAudioDataArr[t].aolevel))}return this._monitorAudioDataArr.splice(0,this._monitorAudioDataArr.length),e}},{key:"getSubscribeCameraSmallData",value:function(){var e=null;if(this._hasCameraSmall){e={calid:this._callId,rmtid:this._remoteId,tckid:h.default.SmallVideo,src:this._receiverVideoSmallData.ssrc,codec:this._receiverVideoSmallData.mimeType,rbr:"",rw:"",rh:"",ns:"",rfps:"",pliss:"",pr:"",pl:"",plr:"",dfps:"",jd:""};for(var t=0;t<this._monitorCmaeraSmallDataArr.length;++t)0===t?(e.rbr+=this._monitorCmaeraSmallDataArr[t].rbr,e.rw+=this._monitorCmaeraSmallDataArr[t].rw,e.rh+=this._monitorCmaeraSmallDataArr[t].rh,e.ns+=this._monitorCmaeraSmallDataArr[t].ns,e.rfps+=this._monitorCmaeraSmallDataArr[t].rfps,e.pliss+=this._monitorCmaeraSmallDataArr[t].pliss,e.pr+=this._monitorCmaeraSmallDataArr[t].pr,e.pl+=this._monitorCmaeraSmallDataArr[t].pl,e.plr+=this._monitorCmaeraSmallDataArr[t].plr,e.dfps+=this._monitorCmaeraSmallDataArr[t].dfps,e.jd+=this._monitorCmaeraSmallDataArr[t].jd):(e.rbr+=","+this._monitorCmaeraSmallDataArr[t].rbr,e.rw+=","+this._monitorCmaeraSmallDataArr[t].rw,e.rh+=","+this._monitorCmaeraSmallDataArr[t].rh,e.ns+=","+this._monitorCmaeraSmallDataArr[t].ns,e.rfps+=","+this._monitorCmaeraSmallDataArr[t].rfps,e.pliss+=","+this._monitorCmaeraSmallDataArr[t].pliss,e.pr+=","+this._monitorCmaeraSmallDataArr[t].pr,e.pl+=","+this._monitorCmaeraSmallDataArr[t].pl,e.plr+=","+this._monitorCmaeraSmallDataArr[t].plr,e.dfps+=","+this._monitorCmaeraSmallDataArr[t].dfps,e.jd+=","+this._monitorCmaeraSmallDataArr[t].jd)}return this._monitorCmaeraSmallDataArr.splice(0,this._monitorCmaeraSmallDataArr.length),e}},{key:"getSubscribeCameraLargeData",value:function(){var e=null;if(this._hasCameraLarge){e={calid:this._callId,rmtid:this._remoteId,tckid:h.default.LargeVideo,src:this._receiverVideoLargeData.ssrc,codec:this._receiverVideoLargeData.mimeType,rbr:"",rw:"",rh:"",ns:"",rfps:"",pliss:"",pr:"",pl:"",plr:"",dfps:"",jd:""};for(var t=0;t<this._monitorCameraLargeDataArr.length;++t)0===t?(e.rbr+=this._monitorCameraLargeDataArr[t].rbr,e.rw+=this._monitorCameraLargeDataArr[t].rw,e.rh+=this._monitorCameraLargeDataArr[t].rh,e.ns+=this._monitorCameraLargeDataArr[t].ns,e.rfps+=this._monitorCameraLargeDataArr[t].rfps,e.pliss+=this._monitorCameraLargeDataArr[t].pliss,e.pr+=this._monitorCameraLargeDataArr[t].pr,e.pl+=this._monitorCameraLargeDataArr[t].pl,e.plr+=this._monitorCameraLargeDataArr[t].plr,e.dfps+=this._monitorCameraLargeDataArr[t].dfps,e.jd+=this._monitorCameraLargeDataArr[t].jd):(e.rbr+=","+this._monitorCameraLargeDataArr[t].rbr,e.rw+=","+this._monitorCameraLargeDataArr[t].rw,e.rh+=","+this._monitorCameraLargeDataArr[t].rh,e.ns+=","+this._monitorCameraLargeDataArr[t].ns,e.rfps+=","+this._monitorCameraLargeDataArr[t].rfps,e.pliss+=","+this._monitorCameraLargeDataArr[t].pliss,e.pr+=","+this._monitorCameraLargeDataArr[t].pr,e.pl+=","+this._monitorCameraLargeDataArr[t].pl,e.plr+=","+this._monitorCameraLargeDataArr[t].plr,e.dfps+=","+this._monitorCameraLargeDataArr[t].dfps,e.jd+=","+this._monitorCameraLargeDataArr[t].jd)}return this._monitorCameraLargeDataArr.splice(0,this._monitorCameraLargeDataArr.length),e}},{key:"getSubscribeScreenData",value:function(){var e=null;if(this._hasScreen){e={calid:this._callId,rmtid:this._remoteId,tckid:h.default.ScreenShareVideo,src:this._receiverVideoScreenShareData.ssrc,codec:this._receiverVideoScreenShareData.mimeType,rbr:"",rw:"",rh:"",ns:"",rfps:"",pliss:"",pr:"",pl:"",plr:"",dfps:"",jd:""};for(var t=0;t<this._monitorScreenShareDataArr.length;++t)0===t?(e.rbr+=this._monitorScreenShareDataArr[t].rbr,e.rw+=this._monitorScreenShareDataArr[t].rw,e.rh+=this._monitorScreenShareDataArr[t].rh,e.ns+=this._monitorScreenShareDataArr[t].ns,e.rfps+=this._monitorScreenShareDataArr[t].rfps,e.pliss+=this._monitorScreenShareDataArr[t].pliss,e.pr+=this._monitorScreenShareDataArr[t].pr,e.pl+=this._monitorScreenShareDataArr[t].pl,e.plr+=this._monitorScreenShareDataArr[t].plr,e.dfps+=this._monitorScreenShareDataArr[t].dfps,e.jd+=this._monitorScreenShareDataArr[t].jd):(e.rbr+=","+this._monitorScreenShareDataArr[t].rbr,e.rw+=","+this._monitorScreenShareDataArr[t].rw,e.rh+=","+this._monitorScreenShareDataArr[t].rh,e.ns+=","+this._monitorScreenShareDataArr[t].ns,e.rfps+=","+this._monitorScreenShareDataArr[t].rfps,e.pliss+=","+this._monitorScreenShareDataArr[t].pliss,e.pr+=","+this._monitorScreenShareDataArr[t].pr,e.pl+=","+this._monitorScreenShareDataArr[t].pl,e.plr+=","+this._monitorScreenShareDataArr[t].plr,e.dfps+=","+this._monitorScreenShareDataArr[t].dfps,e.jd+=","+this._monitorScreenShareDataArr[t].jd)}return this._monitorScreenShareDataArr.splice(0,this._monitorScreenShareDataArr.length),e}},{key:"getNetworkData",value:function(){for(var e={calid:this._callId,rmtid:this._remoteId,relayaddr:this._ip+":"+this._port,relaytype:this._networkType,rtt:"",bsps:"",brps:""},t=0;t<this._monitorNetworkDataArr.length;++t)isNaN(this._monitorNetworkDataArr[t].brps)&&(this._monitorNetworkDataArr[t].brps=0),isNaN(this._monitorNetworkDataArr[t].bsps)&&(this._monitorNetworkDataArr[t].bsps=0),0===t?(e.rtt+=this._monitorNetworkDataArr[t].rtt,e.bsps+=this._monitorNetworkDataArr[t].bsps,e.brps+=this._monitorNetworkDataArr[t].brps):(e.rtt+=","+this._monitorNetworkDataArr[t].rtt,e.bsps+=","+this._monitorNetworkDataArr[t].bsps,e.brps+=","+this._monitorNetworkDataArr[t].brps);return this._monitorNetworkDataArr.splice(0,this._monitorNetworkDataArr.length),e}},{key:"cacheData",value:function(){var e=this._receiverVideoSmallData.getVideoMonitorData();this._monitorCmaeraSmallDataArr.push(e);var t=this._receiverVideoLargeData.getVideoMonitorData();this._monitorCameraLargeDataArr.push(t);var r=this._receiverVideoScreenShareData.getVideoMonitorData();this._monitorScreenShareDataArr.push(r);var n=this._receiverAudioData.getAudioMonitorData();this._monitorAudioDataArr.push(n);var i={rtt:Math.round(1e3*this._rtt),bsps:this._bytesSentPerSecond,brps:this._bytesReceivedPerSecond};this._monitorNetworkDataArr.push(i);var o={rtt:i.rtt,bytesReceivedPerSecond:i.brps};return this._hasAudioData&&(o.audio={level:n.aolevel}),this._hasCameraLarge?t.rw&&t.rh&&(o.camera={fps:t.rfps,width:t.rw,height:t.rh}):this._hasCameraSmall&&e.rw&&e.rh&&(o.camera={fps:e.rfps,width:e.rw,height:e.rh}),this._hasScreen&&r.rw&&r.rh&&(o.screen={fps:r.rfps,width:r.rw,height:r.rh}),o}},{key:"updateCommonInfo",value:function(e,t,r,n){if(t>0&&(t<=10?this._rtt=t:t<=1e4&&(this._rtt=t/1e3)),0!=this._lastTimeStamp){var i=(e-this._lastTimeStamp)/1e3;i>0&&(this._bytesReceivedPerSecond=Math.round((r-this._bytesReceived)/i),this._bytesSentPerSecond=Math.round((n-this._bytesSent)/i))}this._lastTimeStamp=e,this._bytesReceived=r,this._bytesSent=n}},{key:"updateNetworkInfo",value:function(e,t,r,n,i){this._ip=t,this._port=r,this._protocol=n,this._networkType=i}},{key:"updateAudioCodec",value:function(e,t){this._receiverAudioData.updateAudioCodec(e,t)}},{key:"updateAudioDataReceived",value:function(e,t,r,n,i,o,a){var s=a.getSettings();s&&(this._audioSampleRate=s.sampleRate?s.sampleRate:-1,this._audioSampleSize=s.sampleSize?s.sampleSize:-1);var c=this._receiverAudioData.updateDataReceived(e,t,r,n,i,o,a);0!==c&&this.dispatchEvent(_.default.FirstPackage,{callid:this._callId,remoteid:this._remoteId,tm:c,trackid:h.default.Audio})}},{key:"onAudioTrack",value:function(e,t,r){this._receiverAudioData.onAudioTrack(e,t,r)}},{key:"updateVideoCodec",value:function(e,t,r){h.default.SmallVideo===r?this._receiverVideoSmallData.updateVideoCodec(e,t):h.default.ScreenShareVideo===r?this._receiverVideoScreenShareData.updateVideoCodec(e,t):h.default.SuperVideo!==r&&this._receiverVideoLargeData.updateVideoCodec(e,t)}},{key:"updateVideoDataReceived",value:function(e,t,r,n,i,o,a,s,c,u,f){h.default.SmallVideo===f?this._receiverVideoSmallData.updateDataReceived(e,t,r,n,i,o,a,s,c,u):h.default.ScreenShareVideo===f?this._receiverVideoScreenShareData.updateDataReceived(e,t,r,n,i,o,a,s,c,u):h.default.SuperVideo!==f&&this._receiverVideoLargeData.updateDataReceived(e,t,r,n,i,o,a,s,c,u)}},{key:"onVideoTrack",value:function(e,t,r,n,i,o,a,s,c,u){var f=0,d="";h.default.SmallVideo===a?(f=this._receiverVideoSmallData.onVideoTrack(e,t,r,n,i,o,s,c),d=h.default.SmallVideo):h.default.ScreenShareVideo===a?(f=this._receiverVideoScreenShareData.onVideoTrack(e,t,r,n,i,o,s,c),d=h.default.ScreenShareVideo):h.default.SuperVideo!==a&&(f=this._receiverVideoLargeData.onVideoTrack(e,t,r,n,i,o,s,c),d=h.default.LargeVideo),0!==f&&""!==d&&this.dispatchEvent(_.default.FirstFrame,{callid:this._callId,remoteid:this._remoteId,tm:f,trackid:d})}},{key:"onVideoCandidatePair",value:function(e,t){h.default.SmallVideo===t?this._receiverVideoSmallData.onVideoCandidatePair(e):h.default.ScreenShareVideo===t?this._receiverVideoScreenShareData.onVideoCandidatePair(e):h.default.SuperVideo!==t&&this._receiverVideoLargeData.onVideoCandidatePair(e)}},{key:"callId",set:function(e){this._callId=e},get:function(){return this._callId}},{key:"remoteid",get:function(){return this._remoteId}},{key:"subscribeAudio",set:function(e){this._hasAudioData=e}},{key:"subscribeSmallVideo",set:function(e){this._hasCameraSmall=e}},{key:"subscribeLargeVideo",set:function(e){this._hasCameraLarge=e}},{key:"subscribeScreenVideo",set:function(e){this._hasScreen=e}},{key:"videoSsrc",get:function(){return this._receiverVideoLargeData.isVideo?this._receiverVideoLargeData.ssrc:this._receiverVideoSmallData.isVideo?this._receiverVideoSmallData.ssrc:""}},{key:"isVideo",get:function(){return this._receiverVideoSmallData.isVideo||this._receiverVideoLargeData.isVideo}},{key:"isVideoScreenShare",get:function(){return this._receiverVideoScreenShareData.isVideo}},{key:"videoPacketsLostRate",get:function(){return this._receiverVideoLargeData.isVideo?this._receiverVideoLargeData.packetsLostRate:this._receiverVideoSmallData.isVideo?this._receiverVideoSmallData.packetsLostRate:0}},{key:"videoFrameRate",get:function(){return this._receiverVideoLargeData.isVideo?this._receiverVideoLargeData.frameRate:this._receiverVideoSmallData.isVideo?this._receiverVideoSmallData.frameRate:0}},{key:"videoCodec",get:function(){return this._receiverVideoLargeData.isVideo?this._receiverVideoLargeData.mimeType:this._receiverVideoSmallData.isVideo?this._receiverVideoSmallData.mimeType:this._receiverVideoScreenShareData.mimeType}},{key:"videoNackCount",get:function(){return this._receiverVideoLargeData.isVideo?this._receiverVideoLargeData.nackCount:this._receiverVideoSmallData.isVideo?this._receiverVideoSmallData.nackCount:0}},{key:"videoPliCount",get:function(){return this._receiverVideoLargeData.isVideo?this._receiverVideoLargeData.pliCount:this._receiverVideoSmallData.isVideo?this._receiverVideoSmallData.pliCount:0}},{key:"videoFirCount",get:function(){return this._receiverVideoLargeData.isVideo?this._receiverVideoLargeData.firCount:this._receiverVideoSmallData.isVideo?this._receiverVideoSmallData.firCount:0}},{key:"videoBytesReceivedPerSecond",get:function(){return this._receiverVideoLargeData.isVideo?this._receiverVideoLargeData.bytesReceivedPerSecond:this._receiverVideoSmallData.isVideo?this._receiverVideoSmallData.bytesReceivedPerSecond:0}},{key:"availableBandwidth",get:function(){return this._receiverVideoLargeData.isVideo?this._receiverVideoLargeData.availableBandwidth:this._receiverVideoSmallData.isVideo?this._receiverVideoSmallData.availableBandwidth:this._receiverVideoScreenShareData.isVideo?this._receiverVideoScreenShareData.availableBandwidth:0}}]),t}(v.default);t.default=b},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(38),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(){n(this,e),this._lastDataReceivedTimeStamp=0,this._bytesReceived=0,this._packetsReceived=0,this._bytesReceivedPerSecond=0,this._packetsReceivedPerSecond=0,this._packetsLost=0,this._packetsLostPerSecond=0,this._packetsLostRate=0,this._ssrc="",this._audioLevel=0,this._clockRate=0,this._mimeType="",this._jitter=0,this._audioUtil=new a.default,this._audioUtil.statisticsBuffer=!1,this._audioTrack=null,this._startAudioInputLevel=!1}return i(e,[{key:"getAudioMonitorData",value:function(){return{rbr:this._bytesReceivedPerSecond,pr:this._packetsReceivedPerSecond,pl:this._packetsLostPerSecond,plr:this._packetsLostRate,jd:this._jitter,aolevel:this._audioUtil.level,buffer:this._audioUtil.buffer}}},{key:"updateAudioCodec",value:function(e,t){this._mimeType=t?t.replace("audio/",""):"",this._clockRate=e||0}},{key:"updateDataReceived",value:function(e,t,r,n,i,o,a){this._ssrc=n,this._jitter=Math.round(1e3*o);var s=0===this._packetsReceived&&r>0?(new Date).getTime():0,c=(e-this._lastDataReceivedTimeStamp)/1e3;if(c>0&&this._lastDataReceivedTimeStamp&&this._bytesReceived&&this._packetsReceived&&(this._bytesReceivedPerSecond=Math.round((t-this._bytesReceived)/c*8),this._packetsReceivedPerSecond=Math.round((r-this._packetsReceived)/c),this._startAudioInputLevel||(this._startAudioInputLevel=!0,this._audioTrack?a&&this._audioTrack.id!==a.id&&this._updateAudioTrack(a):this._updateAudioTrack(a))),i>this._packetsLost){var u=i-this._packetsLost,f=r-this._packetsReceived;this._packetsLostRate=u>0?(u/(f+u)).toFixed(4):0,c>0&&(this._packetsLostPerSecond=Math.round((i-this._packetsLost)/c))}else this._packetsLostPerSecond=0,this._packetsLostRate=0;return this._packetsLost=i,this._lastDataReceivedTimeStamp=e,this._bytesReceived=t,this._packetsReceived=r,s}},{key:"onAudioTrack",value:function(e,t,r){}},{key:"_updateAudioTrack",value:function(e){this._audioTrack=e;var t=new MediaStream;t.addTrack(this._audioTrack),this._audioUtil.startAudioInputLevel(t)}},{key:"ssrc",get:function(){return this._ssrc}},{key:"packetsLostRate",get:function(){return this._packetsLostRate}},{key:"mimeType",get:function(){return this._mimeType}},{key:"bytesReceivedPerSecond",get:function(){return this._bytesReceivedPerSecond.toFixed(1)}},{key:"packetsReceivedPerSecond",get:function(){return this._packetsReceivedPerSecond}},{key:"audioBuffer",get:function(){this._audioUtil.buffer}}]),e}();t.default=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(198),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(){n(this,e),this._monitorData=new a.default,this._lastDataReceivedTimeStamp=0,this._bytesReceived=0,this._packetsReceived=0,this._bytesReceivedPerSecond=0,this._packetsReceivedPerSecond=0,this._ssrc="",this._frameRate=0,this._width=0,this._height=0,this._clockRate=0,this._mimeType="",this._isVideo=!1,this._nackCount=0,this._firCount=0,this._pliCount=0,this._frameReceived=0,this._packetsLost=0,this._packetsLostRate=0,this._packetsLostPerSecond=0,this._lastFrameReceivedTimeStamp=0,this._framesReceived=0,this._framesDecoded=0,this._framesDropped=0,this._framesReceivedPerSecond=0,this._framesDecodedPerSecond=0,this._availableBandwidth=0,this._jitter=0}return i(e,[{key:"getVideoMonitorData",value:function(){return{rbr:this._bytesReceivedPerSecond,rw:this._width,rh:this._height,ns:this._nackCount,jd:this._jitter,rfps:0===this._framesReceivedPerSecond?this._framesDecodedPerSecond:this._framesReceivedPerSecond,pliss:this._pliCount,pr:this._packetsReceivedPerSecond,pl:this._packetsLostPerSecond,plr:this._packetsLostRate,dfps:this._framesDecodedPerSecond}}},{key:"updateVideoCodec",value:function(e,t){this._mimeType=t?t.replace("video/",""):"",this._clockRate=e||0}},{key:"updateDataReceived",value:function(e,t,r,n,i,o,a,s,c,u){this._nackCount=o,this._firCount=s,this._pliCount=a,this._ssrc=n;var f=0;if(this._lastDataReceivedTimeStamp&&this._bytesReceived&&this._packetsReceived&&(f=(e-this._lastDataReceivedTimeStamp)/1e3)>0&&(this._bytesReceivedPerSecond=Math.round((t-this._bytesReceived)/f*8),this._packetsReceivedPerSecond=Math.round((r-this._packetsReceived)/f)),i>this._packetsLost){var d=i-this._packetsLost,l=r-this._packetsReceived;this._packetsLostRate=d>0?(d/(l+d)).toFixed(4):0,f>0&&(this._packetsLostPerSecond=Math.round(d/f))}else this._packetsLostRate=0,this._packetsLostPerSecond=0;this._packetsLost=i,this._lastDataReceivedTimeStamp=e,this._bytesReceived=t,this._packetsReceived=r}},{key:"onVideoTrack",value:function(e,t,r,n,i,o,a,s){this._jitter=s>0?Math.round(a/s*1e3):0;var c=0===this._framesDecoded&&i>0?(new Date).getTime():0;if(this._width=void 0==r?this._width:r,this._height=void 0==n?this._height:n,this._lastFrameReceivedTimeStamp&&this._framesReceived){var u=(e-this._lastFrameReceivedTimeStamp)/1e3;this._framesReceivedPerSecond=Math.round((t-this._framesReceived)/u),this._framesDecodedPerSecond=Math.round((i-this._framesDecoded)/u)}return r&&n&&(this._isVideo=!0),this._lastFrameReceivedTimeStamp=e,this._framesReceived=t,this._framesDecoded=i,this._framesDropped=o,c}},{key:"onVideoCandidatePair",value:function(e){this._availableBandwidth=e}},{key:"isVideo",get:function(){return this._isVideo}},{key:"frameRate",get:function(){return this._frameRate}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"ssrc",get:function(){return this._ssrc}},{key:"codec",get:function(){return this._mimeType}},{key:"packetsReceived",get:function(){return this._packetsReceived}},{key:"packetsLostRate",get:function(){return this._packetsLostRate}},{key:"mimeType",get:function(){return this._mimeType}},{key:"nackCount",get:function(){return this._nackCount}},{key:"pliCount",get:function(){return this._pliCount}},{key:"firCount",get:function(){return this._firCount}},{key:"bytesReceivedPerSecond",get:function(){return this._bytesReceivedPerSecond}},{key:"packetsReceivedPerSecond",get:function(){return this._packetsReceivedPerSecond}},{key:"availableBandwidth",get:function(){return this._availableBandwidth}}]),e}();t.default=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){n(this,e),this.trackid="",this.src="",this.fps=0,this.teb=0,this.vrn=0,this.codec="",this.w=0,this.h=0,this.vps=0};t.default=i},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},c=r(200),u=function(e){return e&&e.__esModule?e:{default:e}}(c),f=function(e){function t(e,r){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return o(t,e),a(t,[{key:"getStats",value:function(){var e=this;this._peerConnection&&(this._peerConnection.getReceivers?function(){for(var t=e._peerConnection.getReceivers(),r=0;r<t.length;++r)!function(r){t[r].track&&void 0!=t[r].getStats&&t[r].getStats().then(function(n){"audio"===t[r].track.kind?e._getAudioInfo(n,t[r].track,t[r].getParameters?t[r].getParameters():null):"video"===t[r].track.kind&&e._getVideoInfo(n,t[r].track.id,t[r].track,t[r].getParameters?t[r].getParameters():null)}).catch(function(e){})}(r)}():s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getStats",this).call(this))}}]),t}(u.default);t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(89),u=n(c),f=r(90),d=n(f),l=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._receiverMonitorData=r,n}return a(t,e),s(t,[{key:"getStats",value:function(){var e=this;if(this._peerConnection){var t=this._peerConnection.getRemoteStreams();if(t&&t.length){var r=t[0].getAudioTracks()[0];this._peerConnection.getStats(r).then(function(t){e._getAudioInfo(t,r)}).catch(function(e){});var n=t[0].getVideoTracks();if(n)for(var i=0;i<n.length;++i)!function(t){var r=n[t];e._peerConnection.getStats(r).then(function(t){e._getVideoInfo(t,r.id,r)}).catch(function(e){})}(i)}}}},{key:"getNetworkInfo",value:function(){return this._receiverMonitorData.getNetworkInfo()}},{key:"_getAudioInfo",value:function(e,t,r){var n=this;e.forEach(function(e){if(e)switch(e.type){case d.default.CandidatePair:n._onCandidatePair(e);break;case d.default.Codec:n._onAudioCodec(e);break;case d.default.InboundRtp:n._onAudioInBoundRtp(e,t);break;case d.default.RemoteCandidate:n._onAudioRemoteCandidate(e);break;case d.default.Track:n._onAudioTrack(e)}})}},{key:"_getVideoInfo",value:function(e,t,r,n){var i=this;e.forEach(function(e){if(e)switch(e.type){case d.default.CandidatePair:i._onVideoCandidatePair(e,t);break;case d.default.Codec:i._onVideoCodec(e,t);break;case d.default.InboundRtp:i._onVideoInboundRtp(e,r,n,t);break;case d.default.RemoteCandidate:i._onAudioRemoteCandidate(e);break;case d.default.Track:i._onVideoTrack(e,t)}})}},{key:"_onCandidatePair",value:function(e){this._receiverMonitorData.updateCommonInfo(e.timestamp,e.currentRoundTripTime,e.bytesReceived,e.bytesSent)}},{key:"_onAudioCodec",value:function(e){this._receiverMonitorData.updateAudioCodec(e.clockRate,e.mimeType)}},{key:"_onAudioInBoundRtp",value:function(e,t){this._receiverMonitorData.updateAudioDataReceived(e.timestamp,e.bytesReceived,e.packetsReceived,e.ssrc,e.packetsLost,e.jitter,t)}},{key:"_onAudioRemoteCandidate",value:function(e){this._receiverMonitorData.updateNetworkInfo(e.timestamp,e.ip,e.port,e.protocol,e.networkType)}},{key:"_onAudioTrack",value:function(e){this._receiverMonitorData.onAudioTrack(e.jitterBufferDelay,e.jitterBufferEmittedCount,e.jitterBufferFlushes)}},{key:"_onVideoCodec",value:function(e,t){this._receiverMonitorData.updateVideoCodec(e.clockRate,e.mimeType,t)}},{key:"_onVideoInboundRtp",value:function(e,t,r,n){this._receiverMonitorData.updateVideoDataReceived(e.timestamp,e.bytesReceived,e.packetsReceived,e.ssrc,e.packetsLost,e.nackCount,e.pliCount,e.firCount,t,r,n)}},{key:"_onVideoTrack",value:function(e,t){this._receiverMonitorData.onVideoTrack(e.timestamp,e.framesReceived,e.frameWidth,e.frameHeight,e.framesDecoded,e.framesDropped,t,e.jitterBufferDelay,e.jitterBufferEmittedCount,e.jitterBufferFlushes)}},{key:"_onVideoCandidatePair",value:function(e,t){this._receiverMonitorData.onVideoCandidatePair(e.availableBandwidth,t)}}]),t}(u.default);t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(13),s=n(a),c=r(18),u=n(c),f=r(38),d=n(f),l=r(11),h=n(l),p=r(8),_=(n(p),r(7)),m=n(_),v=r(17),b=n(v),y=function(){function e(t,r,n){i(this,e),this._type=t,this._common=r,this._userId=n,this._audioUtil=new d.default,this._element=null,this._mediaStream=new MediaStream,this._hasVideoTrack=!1,this._hasAudioTrack=!1,this._hasListenWeixinJSBridgeReady=!1,this._volume=1,this._muted=!1,this._playComplete=!1}return o(e,[{key:"isSameElement",value:function(e){return e===this._element}},{key:"clearLevel",value:function(){this._audioUtil.clearLevel()}},{key:"addVideoTrack",value:function(e){if(this._hasVideoTrack){var t=this._mediaStream.getVideoTracks()[0];if(t.id===e.id)return;this._mediaStream.removeTrack(t),this._mediaStream.addTrack(e)}else this._mediaStream.addTrack(e);this._hasVideoTrack=!0,this._tryToPlay()}},{key:"removeVideoTrack",value:function(){if(this._hasVideoTrack){var e=this._mediaStream.getVideoTracks()[0];this._mediaStream.removeTrack(e),this._element&&(this._element.srcObject=null),this._hasVideoTrack=!1,this._tryToPlay()}}},{key:"addAudioTrack",value:function(e){if(this._hasAudioTrack){var t=this._mediaStream.getAudioTracks()[0];if(t.id===e.id)return;this._mediaStream.removeTrack(t),this._mediaStream.addTrack(e)}else this._mediaStream.addTrack(e);this._common.enableAudioVolumeIndicator&&this.startAudioInputLevel(),this._hasAudioTrack=!0,this._tryToPlay()}},{key:"removeAudioTrack",value:function(){if(this._hasAudioTrack){var e=this._mediaStream.getAudioTracks()[0];this._mediaStream.removeTrack(e),this._hasAudioTrack=!1,this._tryToPlay()}}},{key:"init",value:function(e){e.srcObject&&(e.srcObject=null),this.reset(),this._element=e,this._tryToPlay()}},{key:"reset",value:function(){this._element&&(this._element.srcObject=null),this._element=null}},{key:"release",value:function(){this._element&&(this._element.srcObject=null),this._mediaStream=new MediaStream,this._hasAudioTrack=!1,this._hasVideoTrack=!1}},{key:"setAudioOutput",value:function(e){var t=this;return new Promise(function(r,n){t._element?t._element&&t._element.setSinkId?t._element.srcObject&&t._element.srcObject.getAudioTracks().length?t._element.setSinkId("default").then(function(){if("default"===e)return void r();t._element.setSinkId(e).then(function(){r()}).catch(function(e){n(e)})}).catch(function(e){n(e)}):r():n({errorCode:h.default.ERROR_NOTSUPPORT_SETOUTPUTDEVICE,message:"not support set output device"}):r()})}},{key:"_tryToPlay",value:function(){var e=this;if(!this._hasAudioTrack&&!this._hasVideoTrack)return void(this._element&&this._element.srcObject&&(this._element.srcObject=null));if(this._element)if(this._element.srcObject||(this._element.srcObject=this._mediaStream),this._element.paused)if(m.default.isMicroMessenger)if(window.WeixinJSBridge)window.WeixinJSBridge.invoke("getNetworkType",{},function(){e._playComplete=!0,e._play()});else{if(this._hasListenWeixinJSBridgeReady)return;this._hasListenWeixinJSBridgeReady=!0,document.addEventListener("WeixinJSBridgeReady",function(){window.WeixinJSBridge.invoke("getNetworkType",{},function(){e._playComplete=!0,e._play()})})}else this._play();else!this._playComplete&&m.default.isMicroMessenger&&b.default.isIos&&(this._element.pause(),this._tryToPlay())}},{key:"_play",value:function(){var e=this;this._element.play().then(function(){}).catch(function(t){if(e._element&&20!==t.code&&"AbortError"!==t.name){var r=u.default.parseAuoPlayError(t);r.userId=e._userId,e._common.dispatchEvent(s.default.OnError,r),e._element&&!e._element.muted&&r.errorCode==h.default.ERROR_AUTOPLAY_ERROR&&(e.muted=!0,e._tryToPlay())}})}},{key:"startAudioInputLevel",value:function(){this._audioUtil.startAudioInputLevel(this._mediaStream)}},{key:"stopAudioInputLevel",value:function(e){this._audioUtil.stopAudioInputLevel(e)}},{key:"muted",set:function(e){return this._muted=e,this._audioUtil&&!e&&this._audioUtil.resumeContext(),!this._element||(this._element.muted=e,!0)},get:function(){return this._element?this._element.muted:this._muted}},{key:"volume",set:function(e){this._volume=e,this._element&&(this._element.volume=e)},get:function(){return this._element?this._element.volume:this._volume}},{key:"level",get:function(){return this._audioUtil.level}},{key:"buffer",get:function(){return this._audioUtil.buffer}},{key:"hasAudioTrack",get:function(){return this._hasAudioTrack}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.VideoManager=t.AudioManager=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(13),s=n(a),c=r(18),u=n(c),f=r(38),d=n(f),l=r(8),h=(n(l),r(11)),p=n(h),_=function(){function e(t,r,n){i(this,e),this._type=t,this._audioManager=new m(t,r,n),this._videoManager=new v(t,r)}return o(e,[{key:"startAudioInputLevel",value:function(){this._audioManager.startAudioInputLevel()}},{key:"stopAudioInputLevel",value:function(e){this._audioManager.stopAudioInputLevel(e)}},{key:"clearLevel",value:function(){this._audioManager.clearLevel()}},{key:"addAudioTrack",value:function(e){this._audioManager.play(e)}},{key:"removeAudioTrack",value:function(){this.releaseAudio()}},{key:"addVideoTrack",value:function(e){this._videoManager.play(e)}},{key:"removeVideoTrack",value:function(){this._videoManager.play()}},{key:"init",value:function(e){this.release(),this._videoManager.init(e)}},{key:"isSameElement",value:function(e){return this._videoManager.isSameElement(e)}},{key:"reset",value:function(){this._videoManager.release()}},{key:"releaseAudio",value:function(){this._audioManager&&this._audioManager.release()}},{key:"release",value:function(){this.releaseAudio(),this._videoManager.release()}},{key:"setAudioOutput",value:function(e){return new Promise(function(e,t){t({errorCode:p.default.ERROR_NOTSUPPORT_SETOUTPUTDEVICE,message:"not support set output device"})})}},{key:"muted",set:function(e){this._audioManager.muted=e},get:function(){return this._audioManager.muted}},{key:"volume",set:function(e){this._audioManager.volume=e},get:function(){return this._audioManager.volume}},{key:"level",get:function(){return this._audioManager.level}},{key:"buffer",get:function(){return this._audioManager.buffer}},{key:"hasAudioTrack",get:function(){return!1}}]),e}();t.default=_;var m=t.AudioManager=function(){function e(t,r,n){i(this,e),this._type=t,this._common=r,this._element=null,this._trackId="",this._userId=n,this._audioUtil=new d.default,this._resumeMuteStats=-1,this._element=document.createElement("audio"),this.trackid=""}return o(e,[{key:"play",value:function(e){e&&this._element&&this._trackId!=e.id&&(this._trackId=e.id,this._ms=new MediaStream,this._ms.addTrack(e),this._element.srcObject=this._ms,this._common.enableAudioVolumeIndicator&&this.startAudioInputLevel(),this._tryToPlay())}},{key:"clearLevel",value:function(){this._audioUtil.clearLevel()}},{key:"_tryToPlay",value:function(){var e=this;this._element&&this._element.paused&&this._element.play().then(function(){if(e._element.srcObject){var t=e._element.volume;0!==t?(e._element.volume=0,e._element.volume=t):(e._element.volume=.01,e._element.volume=0)}}).catch(function(t){if(e._element&&20!=t.code&&"AbortError"!=t.name){var r=u.default.parseAuoPlayError(t);r.userId=e._userId,e._common.dispatchEvent(s.default.OnError,r)}})}},{key:"release",value:function(){this._element&&this._element.load(),this._trackId=""}},{key:"startAudioInputLevel",value:function(){this._audioUtil.startAudioInputLevel(this._ms)}},{key:"stopAudioInputLevel",value:function(e){this._audioUtil.stopAudioInputLevel(e)}},{key:"muted",set:function(e){return this._element.muted=e,this._audioUtil&&!e&&this._audioUtil.resumeContext(),e||this._tryToPlay(),!0},get:function(){return this._element.muted}},{key:"volume",set:function(e){this._element.volume=e},get:function(){return this._element.volume}},{key:"level",get:function(){return this._audioUtil.level}},{key:"buffer",get:function(){return this._audioUtil.buffer}}]),e}(),v=t.VideoManager=function(){function e(t,r){i(this,e),this._type=t,this._common=r,this._element=null,this._trackId=""}return o(e,[{key:"init",value:function(e){this._element=e}},{key:"play",value:function(e){if(e){if(this._element&&this._trackId!=e.id){this._trackId=e.id,this._element.setAttribute("autoplay",""),this._element.muted=!0;var t=new MediaStream;t.addTrack(e),this._element.srcObject=t}}else this._element&&(this._element.srcObject=null,this._trackId="")}},{key:"isSameElement",value:function(e){return e===this._element}},{key:"release",value:function(){this._element&&(this._element.srcObject=null),this._trackId=""}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(14),u=n(c),f=r(41),d=n(f),l=r(42),h=n(l),p=r(17),_=n(p),m=r(13),v=n(m),b=r(18),y=n(b),g=r(37),S=n(g),w=r(11),k=n(w),E=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._common=e,r._video=null,r._audioElement=document.createElement("audio"),r._pc=r._createRTCPeerConnection(),r._iceConnectionStateTimer=0,r}return a(t,e),s(t,[{key:"startLiveStreaming",value:function(e,t){var r=this;this._video=t,this._createOffer().then(function(t){r._pc.setLocalDescription(t).then(function(n){var i=null;i=JSON.stringify({version:d.default.protocol_version,sdk_version:d.default.sdk_version,mode:"live",pull_streams:[""],jsep:t}),h.default.ajax("POST",e,i).then(function(e){r._pc.setRemoteDescription(new RTCSessionDescription(e.jsep)).then(function(){}).catch(function(e){})}).catch(function(e){})}).catch(function(e){})})}},{key:"stopLiveStreaming",value:function(){return this._clearIceConnectionStateTimer(),this._video&&(this._video.srcObject=null),this._video=null,this._pc&&(this._pc.close(),this._pc=this._createRTCPeerConnection()),!0}},{key:"muteLiveStream",value:function(e){return this._audioElement.muted=e,this._video&&(this._video.muted=e),e?this._tryToPlayVideo():(this._tryToPlayAudio(),this._tryToPlayVideo()),!0}},{key:"_createRTCPeerConnection",value:function(){var e=this,t=new RTCPeerConnection;return t.ontrack=function(t){e._updateVideoMediaStream(e._video,t.streams[0])},t.oniceconnectionstatechange=function(r){switch(t.iceConnectionState){case"connected":e._clearIceConnectionStateTimer();break;case"closed":case"failed":break;case"disconnected":e._startIceConnectionStateTimer()}},t}},{key:"_createOffer",value:function(){var e=this;return new Promise(function(t,r){e._pc.createOffer({offerToReceiveVideo:!0,offerToReceiveAudio:!0}).then(function(r){r.sdp=S.default.addAudioNack(r.sdp),e._pc.setLocalDescription(r).then(function(){}).catch(function(){}).then(function(){t(r)})}).catch(function(e){r(e)})})}},{key:"_updateVideoMediaStream",value:function(e,t){if(t){this._video.setAttribute("autoplay",""),(_.default.isIos||_.default.isAndroid)&&e.setAttribute("playsinline","");var r="",n=new MediaStream,i=t.getVideoTracks();i.length&&(r=i[0].id,n.addTrack(i[0])),e.srcObject?(i=e.srcObject.getVideoTracks())&&i.length&&i[0].id==r||(e.srcObject=n):e.srcObject=n;var o=new MediaStream;i=t.getAudioTracks(),i.length&&(r=i[0].id,o.addTrack(i[0])),this._audioElement.srcObject?(i=this._audioElement.srcObject.getAudioTracks())&&i.length&&i[0].id==r||(this._audioElement.srcObject=o,this._tryToPlayAudio()):(this._audioElement.srcObject=o,this._tryToPlayAudio())}}},{key:"_tryToPlayAudio",value:function(){var e=this;this._audioElement&&0!=this._audioElement.paused&&this._audioElement.play().then(function(){}).catch(function(t){e._common.dispatchEvent(v.default.OnError,y.default.parseAuoPlayError(t))})}},{key:"_tryToPlayVideo",value:function(){this._video&&0!=this._video.pasued&&this._video.play().then(function(){}).catch(function(e){})}},{key:"_startIceConnectionStateTimer",value:function(){var e=this;this._clearIceConnectionStateTimer(),this._iceConnectionStateTimer=setTimeout(function(){e._iceConnectionStateTimer=0,e._common.dispatchEvent(v.default.OnError,{errorCode:k.default.ERROR_ICE_DISCONNECTED})},6e3)}},{key:"_clearIceConnectionStateTimer",value:function(){this._iceConnectionStateTimer&&(clearTimeout(this._iceConnectionStateTimer),this._iceConnectionStateTimer=0)}}]),t}(u.default);t.default=E},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={NETWORK_QUALITY_UNKNOWN:0,NETWORK_QUALITY_EXCELLENT:1,NETWORK_QUALITY_GOOD:2,NETWORK_QUALITY_POOR:3,NETWORK_QUALITY_BAD:4,NETWORK_QUALITY_VERYBAD:5,NETWORK_QUALITY_DISCONNECT:6};t.NetworkQuality=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SupportInfo=t.SupportResult=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(7),s=n(a),c=r(17),u=n(c),f=r(37),d=n(f),l=r(18),h=n(l),p=r(11),_=n(p),m=r(87);t.SupportResult=function e(){i(this,e)},t.SupportInfo=function(){function e(){i(this,e),this._isSupport=!1,this._checkingstatus=0,this._errorCode=NaN,this._message="",this._hasAudioDevice=!1,this._hasVideoDevice=!1,this._supportH264=!1,this._needSDPUnified=-1,this._isDebug=!1,this._channelProfileManager=null}return o(e,[{key:"checkStart",value:function(e,t,r){var n=this;return this._isReceiveOnly=t.isReceiveOnly,this._isAudioOnly=t.isAudioOnly,this._isDebug=t.isDebug,this._channelProfileManager=e,new Promise(function(t,i){n._checkingstatus=1,n._isSupport=!1,n._message="checking",n._checkWebRtcSupport()||(n._isSupport=!1,n._errorCode=_.default.ERROR_NOTSUPPORT_WEBRTC,n._message="not support webrtc",i(n.checkresult)),n._isReceiveOnly?(e.isChannelProfileCdnLive||(n._checkSystemInfo(!1),n._isSupport||(n._checkingstatus=2,n._errorCode=_.default.ERROR_NOTSUPPORT_BROWSER,i(n.checkresult))),n._checkSDP(null).then(function(){n._message="",n._hasAudioDevice=void 0,n._hasVideoDevice=void 0,n._supportH264=!0,n._isSupport=!0,n._checkingstatus=2,t(n.checkresult)}).catch(function(){u.default.isAndroid?n._checkSDP(null).then(function(){n._message="",n._hasAudioDevice=void 0,n._hasVideoDevice=void 0,n._supportH264=!0,n._isSupport=!0,n._checkingstatus=2,t(n.checkresult)}).catch(function(){n._isSupport=!1,n._checkingstatus=2,i(n.checkresult)}):(n._isSupport=!1,n._checkingstatus=2,i(n.checkresult))})):(n._checkSystemInfo(!1),n._isSupport||(n._errorCode=_.default.ERROR_NOTSUPPORT_BROWSER,n._checkingstatus=2,i(n.checkresult)),n._isSupport&&n._checkProtocol()&&n._checkApi()?n._checkDevice(r).then(function(){n._checkingstatus=2,n._isSupport=!0,n._message="",t(n.checkresult)}).catch(function(){n._checkingstatus=2,n._isSupport=!1,i(n.checkresult)}):(n._checkingstatus=2,i(n.checkresult)))})}},{key:"checkNeedSDPUnified",value:function(){var e=this;return new Promise(function(t,r){if(-1!=e._needSDPUnified)t(e._needSDPUnified);else{(new RTCPeerConnection).createOffer({offerToReceiveVideo:!0,offerToReceiveAudio:!0}).then(function(e){t(d.default.needUnifiedSDPPlan(e.sdp))}).catch(function(e){r(e)})}})}},{key:"_checkWebRtcSupport",value:function(){return!!window.RTCPeerConnection}},{key:"_checkProtocol",value:function(){return!!(this._isReceiveOnly||this._isDebug||s.default.isHttps||s.default.isElectron)||(this._message="webrtc need https",this._errorCode=_.default.ERROR_NEEDHTTPS,this._isSupport=!1,!1)}},{key:"_checkApi",value:function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)||(this._isSupport=!1,this._errorCode=_.default.ERROR_NOTSUPPORT_DEVICE,this._message="not support get device",!1)}},{key:"_checkDevice",value:function(e){var t=this;return new Promise(function(r,n){var i=new MediaStream;t._checkAudioDevice().then(function(o){i.addTrack(o),t._checkVideoDevice(e).then(function(e){e&&i.addTrack(e)}).catch(function(e){var t=document.createElement("canvas");i.addTrack(t.captureStream(25).getVideoTracks()[0])}).then(function(){t._checkSDP(i).then(function(){t._releaseMediaStream(i),r()}).catch(function(){t._releaseMediaStream(i),n()})})}).catch(function(){t._releaseMediaStream(i),n()})})}},{key:"_releaseMediaStream",value:function(e){e.getTracks().forEach(function(e){e.stop()})}},{key:"_checkSDP",value:function(e){var t=this;return new Promise(function(r,n){var i=new RTCPeerConnection,o=null;t._isReceiveOnly||t._channelProfileManager.isChannelProfileCdnLive&&t._channelProfileManager.isClientRoleLive?o={offerToReceiveVideo:!0,offerToReceiveAudio:!0}:i.addStream(e),i.createOffer(o).then(function(e){d.default.supportH264(e.sdp)?(t._supportH264=!0,t._needSDPUnified=d.default.needUnifiedSDPPlan(e.sdp),r()):(t._supportH264=!1,t._errorCode=_.default.ERROR_NOTSUPPORT_H264,t._message="not support h264",n())}).catch(function(e){n(e)})})}},{key:"_checkSystemInfo",value:function(){u.default.isIos?this._checkIosSystemVersion()?(this._isSupport=!1,this._message="iOS 14.2"):s.default.isSafari?s.default.browserMainVersion<m.BASE_VERSION.IOS_SAFARI?(this._isSupport=!1,this._message="iOSSafari"+m.BASE_VERSION.IOS_SAFARI+""):this._isSupport=!0:s.default.isQQBrowser?s.default.browserMainVersion<m.BASE_VERSION.IOS_SAFARI?(this._isSupport=!1,this._message="iOSqqSafari"+m.BASE_VERSION.IOS_SAFARI+""):this._isSupport=!0:s.default.isMicroMessenger||s.default.isQQ||s.default.isChrome&&u.default.systemMainVersion>=m.BASE_VERSION.IOS_SAFARI?this._isReceiveOnly?this._isSupport=!0:(this._isSupport=!1,this._message="iosChrome//QQ"):(this._isSupport=!1,this._message="iOSSafari"):u.default.isAndroid?s.default.isChrome?s.default.browserMainVersion<m.BASE_VERSION.ANDROAD_CHROME?(this._isSupport=!1,this._message="AndroidChrome"+m.BASE_VERSION.ANDROAD_CHROME+""):this._isSupport=!0:s.default.isQQBrowser?s.default.browserMainVersion<m.BASE_VERSION.ANDROAD_CHROME?(this._isSupport=!1,this._message="AndroidQQChrome"+m.BASE_VERSION.ANDROAD_CHROME+""):this._isSupport=!0:s.default.isMicroMessenger||s.default.isQQ||s.default.chromeMainVersion>=m.BASE_VERSION.ANDROAD_CHROME?this._isReceiveOnly?s.default.isVivoBroswer||s.default.isSogou||s.default.isOppoBrowser||s.default.isMiBrowser||s.default.isMZBrowser?(this._isSupport=!1,this._message="Android/QQ"):this._isSupport=!0:(this._isSupport=!1,this._message="Android/QQ"):(this._isSupport=!1,this._message="AndroidChrome"):u.default.isMacOS?s.default.isElectron?this._isSupport=!0:s.default.isSafari?s.default.browserMainVersion<m.BASE_VERSION.MACOS_SAFARI?(this._isSupport=!1,this._message="MacOSSafari"+m.BASE_VERSION.MACOS_SAFARI+""):this._isSupport=!0:s.default.isChrome?s.default.browserMainVersion<m.BASE_VERSION.MACOS_CHROME?(this._isSupport=!1,this._message="MacOSChrome"+m.BASE_VERSION.MACOS_CHROME+""):this._isSupport=!0:s.default.isEdge?s.default.browserMainVersion<m.BASE_VERSION.MACOS_EDGE?(this._isSupport=!1,this._message="MacOSEdge"+m.BASE_VERSION.MACOS_EDGE+""):this._isSupport=!0:s.default.isQQBrowser?s.default.browserMainVersion<m.BASE_VERSION.MACOS_SAFARI?(this._isSupport=!1,this._message="MacQQSafari"+m.BASE_VERSION.MACOS_SAFARI+""):this._isSupport=!0:(this._isSupport=!1,this._message="MacOSChromeSafariEdge"):u.default.isWindows?s.default.isElectron?this._isSupport=!0:s.default.isChrome?s.default.browserMainVersion<m.BASE_VERSION.WINDOWS_CHROME?(this._isSupport=!1,this._message="WindowsChrome"+m.BASE_VERSION.WINDOWS_CHROME+""):this._isSupport=!0:s.default.isEdge?s.default.browserMainVersion<m.BASE_VERSION.WINDOWS_EDGE?(this._isSupport=!1,this._message="WindowsEdge"+m.BASE_VERSION.WINDOWS_EDGE+""):this._isSupport=!0:s.default.isQQBrowser?s.default.browserMainVersion<m.BASE_VERSION.WINDOWS_CHROME?(this._isSupport=!1,this._message="WindowsQQChrome"+m.BASE_VERSION.WINDOWS_CHROME+""):this._isSupport=!0:s.default.isSogou?s.default.browserMainVersion<m.BASE_VERSION.WINDOWS_CHROME?(SupportUtil.checkresult.isSupported=!1,this._isSupport=!1,this._message="WindowsSogouChrome"+m.BASE_VERSION.WINDOWS_CHROME+""):this._isSupport=!0:s.default.chromeMainVersion>=m.BASE_VERSION.WINDOWS_CHROME?this._isReceiveOnly?this._isSupport=!0:(this._isSupport=!1,this._message="windowsChromeChrome"):(this._isSupport=!1,this._message="WindowsChromeEdge"):u.default.isLinux?s.default.isChrome&&(s.default.browserMainVersion<m.BASE_VERSION.LINUX_CHROME?(this._isSupport=!1,this._message="LinuxChrome"+m.BASE_VERSION.LINUX_CHROME+""):this._isSupport=!0):(this._isSupport=!1,this._message="")}},{key:"_checkAudioDevice",value:function(){var e=this;return new Promise(function(t,r){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(r){e._hasAudioDevice=!0,t(r.getAudioTracks()[0])}).catch(function(t){e._hasAudioDevice=!1;var n=h.default.parseAudioDeviceError(t);e._errorCode=n.errorCode,e._message=n.message,r(t)})})}},{key:"_checkVideoDevice",value:function(e){var t=this;return new Promise(function(r,n){t._isAudioOnly||!e?r():navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){t._hasVideoDevice=!0,r(e.getVideoTracks()[0])}).catch(function(e){t._hasVideoDevice=!1;var r=h.default.parseVideoDeviceError(e);t._errorCode=r.errorCode,t._message=r.message,n(e)})})}},{key:"_isSupportMixBackgroundAudio",value:function(){if(u.default.isWindows)if(s.default.isChrome||s.default.isSogou){if(s.default.browserMainVersion>=m.AUDIOMIX_VERSION.CHROME)return!0}else if(s.default.isEdge&&s.default.browserMainVersion>=m.AUDIOMIX_VERSION.EDGE)return!0;return!1}},{key:"_checkIosSystemVersion",value:function(){var e=u.default.systemVersion,t=e.split(".");return!!(t&&t.length>=2&&"14"==t[0]&&"2"==t[1])}},{key:"supportH264",get:function(){return this._supportH264}},{key:"isChecking",get:function(){return 1===this._checkingstatus}},{key:"hasVideoDevice",get:function(){return this._hasVideoDevice}},{key:"needSDPUnified",get:function(){return this._needSDPUnified}},{key:"isComplete",get:function(){return 2===this._checkingstatus}},{key:"checkresult",get:function(){var e={isSupported:this._isSupport,system:u.default.systemName,browser:s.default.browserName,browser_version:s.default.browserVersion,audioDevice:this._hasAudioDevice,supportScreenShare:s.default.isSupportScreenShare,supportMixBackgroundAudio:this._isSupportMixBackgroundAudio(),isElectron:s.default.isElectron,supportH264:this._supportH264};return this._isAudioOnly||(e.videoDevice=this._hasVideoDevice),this._isSupport||(e.message=this._message,e.errorCode=this._errorCode),e}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(207),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=r(208),c=function(){function e(t,r){n(this,e),this._logClient=new s.LogClient(t,r),this._performanceState=!0,this._performanceCount=0,this._performanceInterval=null,this._visibilitychangeEvent=this._visibilitychangeEvent.bind(this)}return i(e,[{key:"start",value:function(e,t,r){this._logClient.start(e,r),this._startPerformanceInterval()}},{key:"stopUpdateToken",value:function(){this._logClient.stopUpdateToken()}},{key:"reportJoinRoom",value:function(e,t,r,n,i){this._log({evetid:a.default.JOINCHANNEL,args:this._data2String({joitm:e,rslt:t,mode:"https",tid:r,gslbtm:n,gslbrslt:JSON.stringify(i)})})}},{key:"reportIceState",value:function(e,t,r,n){this._log({evetid:a.default.ICE_STATE,args:this._data2String({calid:e,rmtid:t,icestate:r,evt_seq:n})})}},{key:"reportLeaveRoom",value:function(e,t,r){this._log({evetid:a.default.LEAVECHANNEL,args:this._data2String({lvetm:e,rslt:t,tid:r})}),this._logClient.clear()}},{key:"reportPublish",value:function(e,t,r,n,i,o,s,c){this._log({evetid:a.default.PUBLISH,args:this._data2String({calid:e,isvl:t?1:0,isvs:0,isvss:r?1:0,isaudio:n?1:0,rslt:i,tid:o,drt:s,pubtm:c})})}},{key:"reportRepublish",value:function(e,t,r,n,i,o,s){this._log({evetid:a.default.REPUBLISH,args:this._data2String({calid:e,isvl:t?1:0,isvs:0,isvss:r?1:0,isaudio:n?1:0,rslt:i,tid:o,repubtm:s})})}},{key:"reportUnpublish",value:function(e,t,r,n){this._log({evetid:a.default.UNPUBLISH,args:this._data2String({calid:e,unpubtm:t,rslt:r,tid:n})})}},{key:"reportSubscribe",value:function(e,t,r,n,i,o,s,c,u){this._log({evetid:a.default.SUBSCRIBE,args:this._data2String({calid:e,rmtid:t,isvl:r?1:0,isvs:n?1:0,isvss:i?1:0,isaudio:o?1:0,rslt:s,tid:c,subtm:u})})}},{key:"reportSubscribeFirstPacket",value:function(e,t,r,n){this._log({evetid:a.default.SUBSCRIBE_FIRSTPACKET,args:this._data2String({calid:e,rmtid:t,fprt:r,tckid:n})})}},{key:"reportSubscribeFirstFrame",value:function(e,t,r,n){this._log({evetid:a.default.SUBSCRIBE_FIRSTFRAME,args:this._data2String({calid:e,rmtid:t,fvfrt:r,tckid:n})})}},{key:"reportResubscribe",value:function(e,t,r,n,i,o,s,c,u){this._log({evetid:a.default.RESUBSCRIBE,args:this._data2String({calid:e,rmtid:t,isaudio:o?1:0,isvl:r?1:0,isvs:n?1:0,isvss:i?1:0,rslt:s,tid:c,resubtm:u})})}},{key:"reportSubscribeAnswerTime",value:function(e,t,r,n){}},{key:"reportUnsubscribe",value:function(e,t,r,n,i){this._log({evetid:a.default.UNSUBSCRIBE,args:this._data2String({calid:e,rmtid:t,unsubtm:r,rslt:n,tid:i})})}},{key:"reportPublishNewtWorkMonitor",value:function(e){this._log({evetid:a.default.PUBLISH_NETWORK_MONITOR,args:this._data2String(e)})}},{key:"reportPublishDataMonitor",value:function(e,t){this._log({evetid:a.default.PUBLISH_DATA_MONITOR,calid:e,args:this._data2String(t)})}},{key:"reportSubscribeDataMonitor",value:function(e,t,r){this._log({evetid:a.default.SUBSCRIBE_DATA_MONITOR,calid:e,rmtid:t,args:this._data2String(r)})}},{key:"reportSubscribeNetworkMonitor",value:function(e,t,r){this._log({evetid:a.default.SUBSCRIBE_NETWORK_MONITOR,calid:e,rmtid:t,args:this._data2String(r)})}},{key:"reportUpdateRole",value:function(e,t,r,n){this._log({evetid:a.default.UPDATE_ROLE,or:e,nr:t,ctm:r,rslt:n})}},{key:"reportStartPreview",value:function(e,t,r){this._log({evetid:a.default.STARTPREVIEW,args:this._data2String({dt:e,rslt:t,dscb:r})})}},{key:"reportStopPreview",value:function(e){this._log({evetid:a.default.STOPPREVIEW,args:this._data2String({rslt:e})})}},{key:"reportSupportInfo",value:function(e){this._log({evetid:a.default.SUPPORTINFO,args:this._data2String({rslt:e.isSupported?1:0,msg:e.message,sys:e.system,br:e.browser,bv:e.browser_version,ad:e.audioDevice?1:0,vd:e.videoDevice?1:0,sss:e.supportScreenShare?1:0,sh:e.supportH264?1:0,el:e.isElectron?1:0})})}},{key:"reportSetDisplayRemoteVideo",value:function(e,t,r,n,i){this._log({evetid:a.default.DISPLAYVIDEO,args:this._data2String({usrid:e,dt:t,type:r,rslt:n,descb:i})})}},{key:"reportGetDevice",value:function(e){this._log({evetid:a.default.DEVICELIST,args:this._data2String({rslt:e?JSON.stringify(e):e})})}},{key:"reportMuteLocalCamera",value:function(e){this._log({evetid:a.default.MUTECAMERA,args:this._data2String({mt:e})})}},{key:"reportMuteLocalMic",value:function(e,t){this._log({evetid:a.default.MUTEMIC,args:this._data2String({mt:e,rem:t})})}},{key:"reportCameraPublish",value:function(e){this._log({evetid:a.default.CAMERAPUBLISH,args:this._data2String({enb:e})})}},{key:"reportScreenPublish",value:function(e){this._log({evetid:a.default.SCREENPUBLISH,args:this._data2String({enb:e})})}},{key:"reportAudioPublish",value:function(e){this._log({evetid:a.default.AUDIOPUBLISH,args:this._data2String({enb:e})})}},{key:"reportCurrentCamera",value:function(e){this._log({evetid:a.default.CURRENTCAMERA,args:this._data2String({info:JSON.stringify(e)})})}},{key:"reportVideoProfile",value:function(e){this._log({evetid:a.default.VIDEOPROFILE,args:this._data2String({info:JSON.stringify(e)})})}},{key:"reportScreenShareProfile",value:function(e){this._log({evetid:a.default.SCREENSHAREPROFILE,args:this._data2String({info:JSON.stringify(e)})})}},{key:"reportCurrentAudioCapture",value:function(e){this._log({evetid:a.default.CURRENTAUDIO,args:this._data2String({info:JSON.stringify(e)})})}},{key:"reportAudioProfile",value:function(e){this._log({evetid:a.default.AUDIOPROFILE,args:this._data2String({info:JSON.stringify(e)})})}},{key:"reportRemoteCameraTrack",value:function(e,t,r,n){this._log({evetid:a.default.CAMERATRACK,args:this._data2String({usrid:e,mst:t,enb:r,rslt:n})})}},{key:"reportRemoteScreenTrack",value:function(e,t,r){this._log({evetid:a.default.SCREENTRACK,args:this._data2String({usrid:e,enb:t,rslt:r})})}},{key:"reportRemoteAudioTrack",value:function(e,t,r){this._log({evetid:a.default.AUDIOTRACK,args:this._data2String({usrid:e,enb:t,rslt:r})})}},{key:"reportOnBye",value:function(e){this._log({evetid:a.default.ONBYE,args:this._data2String({rslt:e})})}},{key:"reportOnError",value:function(e){this._log({evetid:a.default.ERROR,args:this._data2String(e)})}},{key:"reportMediaStreamUpdate",value:function(e,t,r,n,i){this._log({evetid:a.default.MEDIASTREAMUPDATE,args:this._data2String({calid:e,rmtid:t,isaudio:r?1:0,isvc:n?1:0,isvss:i?1:0})})}},{key:"_startPerformanceInterval",value:function(){var e=this;this._oldTimestamp=(new Date).getTime(),this._performanceInterval=setInterval(function(){var t=(new Date).getTime();t-e._oldTimestamp>=700?e._performanceState?++e._performanceCount>=3&&(e._performanceState=!1,e._performanceCount=0,e._visibilitychangeEvent()):e._performanceCount=0:e._performanceState?e._performanceCount=0:++e._performanceCount>=3&&(e._performanceCount=0,e._performanceState=!0,e._visibilitychangeEvent()),e._oldTimestamp=t},500),document.addEventListener("visibilitychange",this._visibilitychangeEvent)}},{key:"stopPerformanceInterval",value:function(){this._performanceInterval&&(clearInterval(this._performanceInterval),this._performanceInterval=null,this._performanceState=!0,this._performanceCount=0),document.removeEventListener("visibilitychange",this._visibilitychangeEvent)}},{key:"_visibilitychangeEvent",value:function(){this._log({evetid:a.default.MINIMIZE,args:this._data2String({vc:"visible"===document.visibilityState?1:0,pfm:this._performanceState?1:0})})}},{key:"_log",value:function(e){e&&(e.tm=(new Date).getTime()),this._logClient.sendReport(e)}},{key:"_data2String",value:function(e){var t="";for(var r in e)t.length&&(t+="&"),t+=r+"="+e[r];return t}}]),e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={JOINCHANNEL:10010,ICE_STATE:10011,LEAVECHANNEL:10020,PUBLISH:10030,PUBLISH_FIRSTPACKET:10031,REPUBLISH:10032,UNPUBLISH:10040,SUBSCRIBE:10050,SUBSCRIBE_FIRSTPACKET:10051,SUBSCRIBE_FIRSTFRAME:10052,RESUBSCRIBE:10053,UNSUBSCRIBE:10060,PUBLISH_DATA_MONITOR:10070,PUBLISH_NETWORK_MONITOR:10071,SUBSCRIBE_DATA_MONITOR:10080,SUBSCRIBE_NETWORK_MONITOR:10081,ONBYE:10093,UPDATE_ROLE:11040,STARTPREVIEW:20010,STOPPREVIEW:20020,SUPPORTINFO:20030,DISPLAYVIDEO:20040,DEVICELIST:20050,MUTECAMERA:20060,MUTEMIC:20061,CAMERAPUBLISH:20070,SCREENPUBLISH:20071,AUDIOPUBLISH:20072,CURRENTCAMERA:20073,VIDEOPROFILE:20074,CURRENTAUDIO:20075,AUDIOPROFILE:20076,SCREENSHAREPROFILE:20077,CAMERATRACK:20080,SCREENTRACK:20081,AUDIOTRACK:20082,ERROR:20090,MINIMIZE:20091,MEDIASTREAMUPDATE:20092}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LogClient=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(17),s=n(a),c=r(63),u=n(c),f=r(41),d=n(f),l=r(7),h=n(l),p=r(209),_=r(98),m=r(337),v=n(m);t.LogClient=function(){function e(t,r){i(this,e),this._index=0,this._authInfo=t,this._webtrackingclient=r,this._messageCache=new _.MessageCache,this._slsClient=null,this._wsClient=null,this._config={log_type:0,log_type_ratio:100}}return o(e,[{key:"start",value:function(e,t){this._updateConfig(t),this._createClient(e),this._initParam(),this._param.apid=this._authInfo.appid,this._param.usrid=this._authInfo.userId,this._param.sesid=this._authInfo.sessionId,this._param.channelid=this._authInfo.channel,this._param.usrn=this._authInfo.userName,this.clear()}},{key:"stopUpdateToken",value:function(){this.clear()}},{key:"sendReport",value:function(e){this._initParam(),0===this._messageCache.getCacheLength()&&this._param.apid?this._realSendReport(e):this._messageCache.addCache(e)}},{key:"clear",value:function(){var e=this;if(this._messageCache.getCacheLength()){this._messageCache.getCache().forEach(function(t){e._realSendReport(t)})}}},{key:"_createClient",value:function(e){this._slsClient=new p.SlsClient(this._authInfo,this._webtrackingclient),this._slsClient.start(e)}},{key:"_updateConfig",value:function(e){var t=this;if(e&&(this._config=e),1==this._config.log_type)if(this._config.log_type_ratio){var r=100*Math.random();if(r>=parseInt(this._config.log_type_ratio))this._config.log_type=0;else{var n=void 0;n=window&&window.location&&window.location.protocol&&"http:"===window.location.protocol?"ws:":"wss:",n+="logprod.aliyuncs.com/binlog",this._wsClient=new v.default({wsUrl:n,product:1}),this._wsClient.on("onError",function(e){t._config.log_type=0,e&&e.length&&e.forEach(function(e){t._sendReport(e)})})}}else this._config.log_type=0}},{key:"_initParam",value:function(){this._param||(this._param={osn:s.default.systemName,osv:s.default.systemVersion,udid:u.default.uuid,statsvrs:"0.6.1",sdkvrs:d.default.version,dm:h.default.domain,bt:h.default.browserName,envir:d.default.evn,bv:h.default.browserVersion})}},{key:"_realSendReport",value:function(e){var t={};for(var r in this._param)t[r]=this._param[r];for(var n in e)t[n]=e[n];t.idx=this._index,this._sendReport(t),++this._index}},{key:"_sendReport",value:function(e){1===this._config.log_type?this._wsClient?this._wsClient.send(e):console.error("no wsclient"):this._slsClient?this._slsClient.sendReport(e):console.error("no slsclient")}}]),e}()},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SlsClient=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(210),c=r(14),u=(i(c),r(98)),f=r(212),d=n(f),l=r(230),h=n(l),p=r(239),_=i(p),m=r(12),v=i(m),b=r(331),y=i(b),g=r(333),S=n(g),w=r(336),k=d.Root.fromJSON(_.default),E=k.lookupType("sls.Log.Content"),R=k.lookupType("sls.LogGroup"),C=5e3;t.SlsClient=function(){function e(t,r){var n=this;o(this,e),this._authInfo=t,this._messageCache=new u.MessageCache,this._ready=!1,this._tokenManager=new s.STSTokenManager(function(e){1==e.state?n._ready||(n._ready=!0,n._uploadSlsLog()):n._ready=!1},r),this._uploadTimerId=setInterval(function(){n._onUploadTimer()},C)}return a(e,[{key:"start",value:function(e){this._tokenManager.updateAuthInfo(e,this._authInfo)}},{key:"stopUpdateToken",value:function(){this._tokenManager.stopUpdateToken()}},{key:"sendReport",value:function(e){this._messageCache.addCache(e)}},{key:"_uploadSlsLog",value:function(){if(this._ready){var e=this._messageCache.getCache(10);if(e.length){var t=null,r=Date.parse(new Date).toString();r=parseInt(r.substr(0,10));var n={Logs:[],Topic:"Event Track"};if(e.forEach(function(e){n.Logs.push({Time:r,Contents:Object.keys(e).map(function(t){var r=String(e[t]),n={Key:t,Value:r},i=E.verify(n);if(i)throw i;return n})})}),t=R.verify(n))throw new Error(t);var i=R.create(n),o=R.encode(i).finish(),a=h.deflate(o),s=o.byteLength,c="/logstores/"+this._tokenManager.log_store_stats+"/shards/lb";return this._postSlsLog("POST",this._tokenManager.project,c,{},a,s)}}}},{key:"_postSlsLog",value:function(e,t,r,n,i,o){var a=t?t+".":"",s=(n?"?"+S.stringify(n):"").replace(/\?$/,""),c=window.location.href.indexOf("file://")>-1?"http://":"//",u=""+c+a+this._tokenManager.endPoint+r+s,f=(new Date).toUTCString(),d={"Content-Type":"application/x-protobuf","x-log-compresstype":"deflate","x-log-bodyrawsize":o,Date:f,Host:""+a+this._tokenManager.endPoint,"x-log-apiversion":"0.6.0","x-log-signaturemethod":"hmac-sha1",Authorization:"","x-acs-security-token":this._tokenManager.security_token};i&&(d["Content-MD5"]=(0,y.default)(i).toUpperCase(),d["Content-Length"]=i.length),d.Authorization=this._sign(e,r,n,d),d["x-log-date"]=f;var l={method:e,body:i,headers:d};this._excuteFetch(u,l,0)}},{key:"_excuteFetch",value:function(e,t,r){var n=this;return new Promise(function(i,o){fetch(e,t).then(function(e){i(e)}).catch(function(i){++r<=3&&setTimeout(function(){n._excuteFetch(e,t,r)},500*(r+1))})})}},{key:"_sign",value:function(e,t,r,n){var i=n["Content-MD5"]||"",o=n["Content-Type"]||"",a=n.Date,s=this._getCanonicalizedHeaders(n),c=this._getCanonicalizedResource(t,r),u=[e,i,o,a,""+s+c].join("\n"),f=v.default.stringify(w.HmacSHA1(u,this._tokenManager.access_key_secret));return"LOG "+this._tokenManager.access_key_id+":"+f}},{key:"_onUploadTimer",value:function(){this._uploadSlsLog()}},{key:"clear",value:function(){this._uploadTimerId&&(clearInterval(this._uploadTimerId),this._uploadTimerId=0)}},{key:"_getCanonicalizedHeaders",value:function(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;n++){var i=t[n];(i.startsWith("x-log-")||i.startsWith("x-acs-"))&&r.push(i)}r.sort();for(var o="",a=0;a<r.length;a++){var s=r[a];o+=s+":"+String(e[s]).trim()+"\n"}return o}},{key:"_getCanonicalizedResource",value:function(e,t){for(var r=""+e,n=Object.keys(t),i=new Array(n.length),o=0;o<n.length;o++){var a=n[o];i[o]=a+"="+this._format(t[a])}i.sort();var s=i.join("&");return s&&(r+="?"+s),r}},{key:"_format",value:function(e){return void 0===e?"":String(e)}},{key:"isReady",get:function(){return this._tokenManager.isReady()}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.STSTokenManager=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(42),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=r(211);t.STSTokenManager=function(){function e(t,r){n(this,e),this._updateState=!1,this._stsUpdateUrl="",this._delayTimerId=0,this._checkTokenTimerId=0,this._requesting=!1,this._stsData=new s.StsData,this._callback=t,this._webtrackingclient=r}return i(e,[{key:"isReady",value:function(){return this._stsData.isReady}},{key:"updateAuthInfo",value:function(e,t){this._updateState=!0,e&&(this._stsUpdateUrl=e),t&&(this._authInfo=t,this._requestStsToken())}},{key:"stopUpdateToken",value:function(){this._updateState=!1,this._stopDelayTimer(),this._stopCheckTokenTimer()}},{key:"_requestStsToken",value:function(){var e=this;!this._requesting&&this._updateState&&(this._requesting=!0,a.default.ajaxPost(this._stsUpdateUrl,{userid:this._authInfo.userId,appid:this._authInfo.appid,channelid:this._authInfo.channel,session:this._authInfo.sessionId,nonce:this._authInfo.nonce,timestamp:this._authInfo.timestamp,token:this._authInfo.token,slstoken:!0,osstoken:!0,tokensid:!0}).then(function(t){return!!(t&&0==t.code&&t.data&&t.data.sls)&&(e._updateNewStsData(t.data.sls),!0)}).catch(function(e){return!1}).then(function(t){e._webtrackingclient.reportGetAuthInfo(0,t?0:-1,e._authInfo.sessionId),t?e._requesting=!1:e._updateState&&e._delayRequest()}))}},{key:"_delayRequest",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4;this._delayTimerId||(this._delayTimerId=setTimeout(function(){e._stopRequest(),e._requestStsToken()},t))}},{key:"_stopDelayTimer",value:function(){this._delayTimerId&&(clearTimeout(this._delayTimerId),this._delayTimerId=0)}},{key:"_updateNewStsData",value:function(e){this._stsData.updateData(e),this._checkToken()}},{key:"_checkToken",value:function(){var e=this;if(this._updateState)if(this._stsData.expiration){var t=(new Date).getTime()/1e3,r=this._stsData.expiration-t;r<=600?this._requestStsToken():this._checkTokenTimerId||(this._checkTokenTimerId=setTimeout(function(){e._stopCheckTokenTimer(),e._checkToken()},3e5)),r<0?this._callback({state:0}):this._callback({state:1})}else this._requestStsToken()}},{key:"_stopCheckTokenTimer",value:function(){this._checkTokenTimerId&&(clearTimeout(this._checkTokenTimerId),this._checkTokenTimerId=0)}},{key:"security_token",get:function(){return this._stsData.security_token}},{key:"endPoint",get:function(){return this._stsData.region_endpoint}},{key:"project",get:function(){return this._stsData.project}},{key:"log_store_stats",get:function(){return this._stsData.log_store_stats}},{key:"access_key_id",get:function(){return this._stsData.access_key_id}},{key:"access_key_secret",get:function(){return this._stsData.access_key_secret}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.StsData=function(){function e(){n(this,e),this._access_key_id="",this._access_key_secret="",this._expiration=0,this._log_store_debug="",this._log_store_stats="",this._project="",this._region_endpoint="",this._security_token=""}return i(e,[{key:"updateData",value:function(e){e&&(this._access_key_id=e.access_key_id,this._access_key_secret=e.access_key_secret,this._expiration=e.expiration,this._log_store_debug=e.log_store_debug,this._log_store_stats=e.log_store_stats,this._project=e.project,this._region_endpoint="log-global-cn-shenzhen.aliyuncs.com"===e.region_endpoint?"log-global.aliyuncs.com":e.region_endpoint,this._security_token=e.security_token)}},{key:"access_key_id",get:function(){return this._access_key_id}},{key:"access_key_secret",get:function(){return this._access_key_secret}},{key:"expiration",get:function(){return this._expiration}},{key:"log_store_debug",get:function(){return this._log_store_debug}},{key:"log_store_stats",get:function(){return this._log_store_stats}},{key:"project",get:function(){return this._project}},{key:"region_endpoint",get:function(){return this._region_endpoint}},{key:"security_token",get:function(){return this._security_token}},{key:"isReady",get:function(){if(this._expiration>0){return(new Date).getTime()/1e3-this._expiration>0}return!1}}]),e}()},function(e,t,r){"use strict";e.exports=r(213)},function(e,t,r){"use strict";var n=e.exports=r(214);n.build="full",n.tokenize=r(108),n.parse=r(228),n.common=r(229),n.Root._configure(n.Type,n.parse,n.common)},function(e,t,r){"use strict";function n(e,t,r){return"function"==typeof t?(r=t,t=new o.Root):t||(t=new o.Root),t.load(e,r)}function i(e,t){return t||(t=new o.Root),t.loadSync(e)}var o=e.exports=r(215);o.build="light",o.load=n,o.loadSync=i,o.encoder=r(103),o.decoder=r(104),o.verifier=r(105),o.converter=r(106),o.ReflectionObject=r(31),o.Namespace=r(43),o.Root=r(71),o.Enum=r(20),o.Type=r(66),o.Field=r(27),o.OneOf=r(51),o.MapField=r(67),o.Service=r(68),o.Method=r(69),o.Message=r(70),o.wrappers=r(107),o.types=r(32),o.util=r(6),o.ReflectionObject._configure(o.Root),o.Namespace._configure(o.Type,o.Service,o.Enum),o.Root._configure(o.Type),o.Field._configure(o.Type)},function(e,t,r){"use strict";function n(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}var i=t;i.build="minimal",i.Writer=r(64),i.BufferWriter=r(222),i.Reader=r(65),i.BufferReader=r(223),i.util=r(22),i.rpc=r(101),i.roots=r(102),i.configure=n,n()},function(e,t,r){"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var i=new Array(64),o=new Array(123),a=0;a<64;)o[i[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;n.encode=function(e,t,r){for(var n,o=null,a=[],s=0,c=0;t<r;){var u=e[t++];switch(c){case 0:a[s++]=i[u>>2],n=(3&u)<<4,c=1;break;case 1:a[s++]=i[n|u>>4],n=(15&u)<<2,c=2;break;case 2:a[s++]=i[n|u>>6],a[s++]=i[63&u],c=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=i[n],a[s++]=61,1===c&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))};n.decode=function(e,t,r){for(var n,i=r,a=0,s=0;s<e.length;){var c=e.charCodeAt(s++);if(61===c&&a>1)break;if(void 0===(c=o[c]))throw Error("invalid encoding");switch(a){case 0:n=c,a=1;break;case 1:t[r++]=n<<2|(48&c)>>4,n=c,a=2;break;case 2:t[r++]=(15&n)<<4|(60&c)>>2,n=c,a=3;break;case 3:t[r++]=(3&n)<<6|c,a=0}}if(1===a)throw Error("invalid encoding");return r-i},n.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)}},function(e,t,r){"use strict";function n(){this._listeners={}}e.exports=n,n.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},n.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},n.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},function(e,t,r){"use strict";function n(e){return"undefined"!=typeof Float32Array?function(){function t(e,t,r){o[0]=e,t[r]=a[0],t[r+1]=a[1],t[r+2]=a[2],t[r+3]=a[3]}function r(e,t,r){o[0]=e,t[r]=a[3],t[r+1]=a[2],t[r+2]=a[1],t[r+3]=a[0]}function n(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],o[0]}function i(e,t){return a[3]=e[t],a[2]=e[t+1],a[1]=e[t+2],a[0]=e[t+3],o[0]}var o=new Float32Array([-0]),a=new Uint8Array(o.buffer),s=128===a[3];e.writeFloatLE=s?t:r,e.writeFloatBE=s?r:t,e.readFloatLE=s?n:i,e.readFloatBE=s?i:n}():function(){function t(e,t,r,n){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>3.4028234663852886e38)e((i<<31|2139095040)>>>0,r,n);else if(t<1.1754943508222875e-38)e((i<<31|Math.round(t/1.401298464324817e-45))>>>0,r,n);else{var o=Math.floor(Math.log(t)/Math.LN2),a=8388607&Math.round(t*Math.pow(2,-o)*8388608);e((i<<31|o+127<<23|a)>>>0,r,n)}}function r(e,t,r){var n=e(t,r),i=2*(n>>31)+1,o=n>>>23&255,a=8388607&n;return 255===o?a?NaN:i*(1/0):0===o?1.401298464324817e-45*i*a:i*Math.pow(2,o-150)*(a+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,o),e.readFloatLE=r.bind(null,a),e.readFloatBE=r.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){function t(e,t,r){o[0]=e,t[r]=a[0],t[r+1]=a[1],t[r+2]=a[2],t[r+3]=a[3],t[r+4]=a[4],t[r+5]=a[5],t[r+6]=a[6],t[r+7]=a[7]}function r(e,t,r){o[0]=e,t[r]=a[7],t[r+1]=a[6],t[r+2]=a[5],t[r+3]=a[4],t[r+4]=a[3],t[r+5]=a[2],t[r+6]=a[1],t[r+7]=a[0]}function n(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],a[4]=e[t+4],a[5]=e[t+5],a[6]=e[t+6],a[7]=e[t+7],o[0]}function i(e,t){return a[7]=e[t],a[6]=e[t+1],a[5]=e[t+2],a[4]=e[t+3],a[3]=e[t+4],a[2]=e[t+5],a[1]=e[t+6],a[0]=e[t+7],o[0]}var o=new Float64Array([-0]),a=new Uint8Array(o.buffer),s=128===a[7];e.writeDoubleLE=s?t:r,e.writeDoubleBE=s?r:t,e.readDoubleLE=s?n:i,e.readDoubleBE=s?i:n}():function(){function t(e,t,r,n,i,o){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,i,o+t),e(1/n>0?0:2147483648,i,o+r);else if(isNaN(n))e(0,i,o+t),e(2146959360,i,o+r);else if(n>1.7976931348623157e308)e(0,i,o+t),e((a<<31|2146435072)>>>0,i,o+r);else{var s;if(n<2.2250738585072014e-308)s=n/5e-324,e(s>>>0,i,o+t),e((a<<31|s/4294967296)>>>0,i,o+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),s=n*Math.pow(2,-c),e(4503599627370496*s>>>0,i,o+t),e((a<<31|c+1023<<20|1048576*s&1048575)>>>0,i,o+r)}}}function r(e,t,r,n,i){var o=e(n,i+t),a=e(n,i+r),s=2*(a>>31)+1,c=a>>>20&2047,u=4294967296*(1048575&a)+o;return 2047===c?u?NaN:s*(1/0):0===c?5e-324*s*u:s*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=r.bind(null,a,0,4),e.readDoubleBE=r.bind(null,s,4,0)}(),e}function i(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function o(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=n(n)},function(e,t,r){"use strict";var n=t;n.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)r=e.charCodeAt(n),r<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},n.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,o=[],a=0;t<r;)n=e[t++],n<128?o[a++]=n:n>191&&n<224?o[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(n>>10),o[a++]=56320+(1023&n)):o[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},n.write=function(e,t,r){for(var n,i,o=r,a=0;a<e.length;++a)n=e.charCodeAt(a),n<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(i=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&i),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-o}},function(e,t,r){"use strict";function n(e,t,r){var n=r||8192,i=n>>>1,o=null,a=n;return function(r){if(r<1||r>i)return e(r);a+r>n&&(o=e(n),a=0);var s=t.call(o,a,a+=r);return 7&a&&(a=1+(7|a)),s}}e.exports=n},function(e,t,r){"use strict";function n(e,t){this.lo=e>>>0,this.hi=t>>>0}e.exports=n;var i=r(22),o=n.zero=new n(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var a=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var r=e>>>0,i=(e-r)/4294967296>>>0;return t&&(i=~i>>>0,r=~r>>>0,++r>4294967295&&(r=0,++i>4294967295&&(i=0))),new n(r,i)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(i.isString(e)){if(!i.Long)return n.fromNumber(parseInt(e,10));e=i.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):o},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return i.Long?new i.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;n.fromHash=function(e){return e===a?o:new n((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},function(e,t,r){"use strict";function n(){o.call(this)}function i(e,t,r){e.length<40?a.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}e.exports=n;var o=r(64);(n.prototype=Object.create(o.prototype)).constructor=n;var a=r(22);n._configure=function(){n.alloc=a._Buffer_allocUnsafe,n.writeBytesBuffer=a.Buffer&&a.Buffer.prototype instanceof Uint8Array&&"set"===a.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},n.prototype.bytes=function(e){a.isString(e)&&(e=a._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(n.writeBytesBuffer,t,e),this},n.prototype.string=function(e){var t=a.Buffer.byteLength(e);return this.uint32(t),t&&this._push(i,t,e),this},n._configure()},function(e,t,r){"use strict";function n(e){i.call(this,e)}e.exports=n;var i=r(65);(n.prototype=Object.create(i.prototype)).constructor=n;var o=r(22);n._configure=function(){o.Buffer&&(n.prototype._slice=o.Buffer.prototype.slice)},n.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},n._configure()},function(e,t,r){"use strict";function n(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}e.exports=n;var i=r(22);(n.prototype=Object.create(i.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,r,n,o,a){if(!o)throw TypeError("request must be specified");var s=this;if(!a)return i.asPromise(e,s,t,r,n,o);if(!s.rpcImpl)return void setTimeout(function(){a(Error("already ended"))},0);try{return s.rpcImpl(t,r[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(e,r){if(e)return s.emit("error",e,t),a(e);if(null===r)return void s.end(!0);if(!(r instanceof n))try{r=n[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",r,t),a(null,r)})}catch(e){return s.emit("error",e,t),void setTimeout(function(){a(e)},0)}},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,r){"use strict";function n(e,t){function r(e){if("string"!=typeof e){var t=i();if(n.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var a=Object.keys(e),s=new Array(a.length+1),c=new Array(a.length),u=0;u<a.length;)s[u]=a[u],c[u]=e[a[u++]];return s[u]=t,Function.apply(null,s).apply(null,c)}return Function(t)()}for(var f=new Array(arguments.length-1),d=0;d<f.length;)f[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,function(e,t){var r=f[d++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"}),d!==f.length)throw Error("parameter count mismatch");return o.push(e),r}function i(r){return"function "+(r||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+o.join("\n  ")+"\n}"}"string"==typeof e&&(t=e,e=void 0);var o=[];return r.toString=i,r}e.exports=n,n.verbose=!1},function(e,t,r){"use strict";function n(e,t,r){return"function"==typeof t?(r=t,t={}):t||(t={}),r?!t.xhr&&a&&a.readFile?a.readFile(e,function(i,o){return i&&"undefined"!=typeof XMLHttpRequest?n.xhr(e,t,r):i?r(i):r(null,t.binary?o:o.toString("utf8"))}):n.xhr(e,t,r):i(n,this,e,t)}e.exports=n;var i=r(99),o=r(100),a=o("fs");n.xhr=function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var i=0;i<n.responseText.length;++i)e.push(255&n.responseText.charCodeAt(i))}return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return r(null,n.responseText)}},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},function(e,t,r){"use strict";var n=t,i=n.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},o=n.normalize=function(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var t=e.split("/"),r=i(e),n="";r&&(n=t.shift()+"/");for(var o=0;o<t.length;)".."===t[o]?o>0&&".."!==t[o-1]?t.splice(--o,2):r?t.splice(o,1):++o:"."===t[o]?t.splice(o,1):++o;return n+t.join("/")};n.resolve=function(e,t,r){return r||(t=o(t)),i(t)?t:(r||(e=o(e)),(e=e.replace(/(?:\/|^)[^\/]+$/,"")).length?o(e+"/"+t):t)}},function(e,t,r){"use strict";function n(e,t,r){function R(e,t,r){var i=n.filename;return r||(n.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(i?i+", ":"")+"line "+Q.line+")")}function C(){var e,t=[];do{if('"'!==(e=$())&&"'"!==e)throw R(e);t.push($()),re(e),e=te()}while('"'===e||"'"===e);return t.join("")}function A(e){var t=$();switch(t){case"'":case'"':return ee(t),C();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return T(t,!0)}catch(r){if(e&&k.test(t))return t;throw R(t,"value")}}function O(e,t){var r,n;do{!t||'"'!==(r=te())&&"'"!==r?e.push([n=M($()),re("to",!0)?M($()):n]):e.push(C())}while(re(",",!0));re(";")}function T(e,t){var r=1;switch("-"===e.charAt(0)&&(r=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return r*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(_.test(e))return r*parseInt(e,10);if(v.test(e))return r*parseInt(e,16);if(y.test(e))return r*parseInt(e,8);if(S.test(e))return r*parseFloat(e);throw R(e,"number",t)}function M(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw R(e,"id");if(m.test(e))return parseInt(e,10);if(b.test(e))return parseInt(e,16);if(g.test(e))return parseInt(e,8);throw R(e,"id")}function P(e,t){switch(t){case"option":return V(e,t),re(";"),!0;case"message":return x(e,t),!0;case"enum":return j(e,t),!0;case"service":return q(e,t),!0;case"extend":return G(e,t),!0}return!1}function I(e,t,r){var i=Q.line;if(e&&("string"!=typeof e.comment&&(e.comment=ne()),e.filename=n.filename),re("{",!0)){for(var o;"}"!==(o=$());)t(o);re(";",!0)}else r&&r(),re(";"),e&&"string"!=typeof e.comment&&(e.comment=ne(i))}function x(e,t){if(!w.test(t=$()))throw R(t,"type name");var r=new a(t);I(r,function(e){if(!P(r,e))switch(e){case"map":N(r);break;case"required":case"optional":case"repeated":D(r,e);break;case"oneof":B(r,e);break;case"extensions":O(r.extensions||(r.extensions=[]));break;case"reserved":O(r.reserved||(r.reserved=[]),!0);break;default:if(!oe||!k.test(e))throw R(e);ee(e),D(r,"optional")}}),e.add(r)}function D(e,t,r){var n=$();if("group"===n)return void L(e,t);if(!k.test(n))throw R(n,"type");var i=$();if(!w.test(i))throw R(i,"name");i=se(i),re("=");var o=new s(i,M($()),n,t,r);I(o,function(e){if("option"!==e)throw R(e);V(o,e),re(";")},function(){z(o)}),e.add(o),oe||!o.repeated||void 0===h.packed[n]&&void 0!==h.basic[n]||o.setOption("packed",!1,!0)}function L(e,t){var r=$();if(!w.test(r))throw R(r,"name");var i=p.lcFirst(r);r===i&&(r=p.ucFirst(r)),re("=");var o=M($()),c=new a(r);c.group=!0;var u=new s(i,o,r,t);u.filename=n.filename,I(c,function(e){switch(e){case"option":V(c,e),re(";");break;case"required":case"optional":case"repeated":D(c,e);break;default:throw R(e)}}),e.add(c).add(u)}function N(e){re("<");var t=$();if(void 0===h.mapKey[t])throw R(t,"type");re(",");var r=$();if(!k.test(r))throw R(r,"type");re(">");var n=$();if(!w.test(n))throw R(n,"name");re("=");var i=new c(se(n),M($()),t,r);I(i,function(e){if("option"!==e)throw R(e);V(i,e),re(";")},function(){z(i)}),e.add(i)}function B(e,t){if(!w.test(t=$()))throw R(t,"name");var r=new u(se(t));I(r,function(e){"option"===e?(V(r,e),re(";")):(ee(e),D(r,"optional"))}),e.add(r)}function j(e,t){if(!w.test(t=$()))throw R(t,"name");var r=new f(t);I(r,function(e){switch(e){case"option":V(r,e),re(";");break;case"reserved":O(r.reserved||(r.reserved=[]),!0);break;default:U(r,e)}}),e.add(r)}function U(e,t){if(!w.test(t))throw R(t,"name");re("=");var r=M($(),!0),n={};I(n,function(e){if("option"!==e)throw R(e);V(n,e),re(";")},function(){z(n)}),e.add(t,r,n.comment)}function V(e,t){var r=re("(",!0);if(!k.test(t=$()))throw R(t,"name");var n=t;r&&(re(")"),n="("+n+")",t=te(),E.test(t)&&(n+=t,$())),re("="),H(e,n)}function H(e,t){if(re("{",!0))do{if(!w.test(Z=$()))throw R(Z,"name");"{"===te()?H(e,t+"."+Z):(re(":"),"{"===te()?H(e,t+"."+Z):F(e,t+"."+Z,A(!0))),re(",",!0)}while(!re("}",!0));else F(e,t,A(!0))}function F(e,t,r){e.setOption&&e.setOption(t,r)}function z(e){if(re("[",!0)){do{V(e,"option")}while(re(",",!0));re("]")}return e}function q(e,t){if(!w.test(t=$()))throw R(t,"service name");var r=new d(t);I(r,function(e){if(!P(r,e)){if("rpc"!==e)throw R(e);W(r,e)}}),e.add(r)}function W(e,t){var r=ne(),n=t;if(!w.test(t=$()))throw R(t,"name");var i,o,a,s,c=t;if(re("("),re("stream",!0)&&(o=!0),!k.test(t=$()))throw R(t);if(i=t,re(")"),re("returns"),re("("),re("stream",!0)&&(s=!0),!k.test(t=$()))throw R(t);a=t,re(")");var u=new l(c,n,i,a,o,s);u.comment=r,I(u,function(e){if("option"!==e)throw R(e);V(u,e),re(";")}),e.add(u)}function G(e,t){if(!k.test(t=$()))throw R(t,"reference");var r=t;I(null,function(t){switch(t){case"required":case"repeated":case"optional":D(e,t,r);break;default:if(!oe||!k.test(t))throw R(t);ee(t),D(e,"optional",r)}})}t instanceof o||(r=t,t=new o),r||(r=n.defaults);for(var K,J,Y,X,Z,Q=i(e,r.alternateCommentMode||!1),$=Q.next,ee=Q.push,te=Q.peek,re=Q.skip,ne=Q.cmnt,ie=!0,oe=!1,ae=t,se=r.keepCase?function(e){return e}:p.camelCase;null!==(Z=$());)switch(Z){case"package":if(!ie)throw R(Z);!function(){if(void 0!==K)throw R("package");if(K=$(),!k.test(K))throw R(K,"name");ae=ae.define(K),re(";")}();break;case"import":if(!ie)throw R(Z);!function(){var e,t=te();switch(t){case"weak":e=Y||(Y=[]),$();break;case"public":$();default:e=J||(J=[])}t=C(),re(";"),e.push(t)}();break;case"syntax":if(!ie)throw R(Z);!function(){if(re("="),X=C(),!(oe="proto3"===X)&&"proto2"!==X)throw R(X,"syntax");re(";")}();break;case"option":V(ae,Z),re(";");break;default:if(P(ae,Z)){ie=!1;continue}throw R(Z)}return n.filename=null,{package:K,imports:J,weakImports:Y,syntax:X,root:t}}e.exports=n,n.filename=null,n.defaults={keepCase:!1};var i=r(108),o=r(71),a=r(66),s=r(27),c=r(67),u=r(51),f=r(20),d=r(68),l=r(69),h=r(32),p=r(6),_=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,v=/^0[x][0-9a-fA-F]+$/,b=/^-?0[x][0-9a-fA-F]+$/,y=/^0[0-7]+$/,g=/^-?0[0-7]+$/,S=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,w=/^[a-zA-Z_][a-zA-Z_0-9]*$/,k=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,E=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/},function(e,t,r){"use strict";function n(e,t){i.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}e.exports=n;var i=/\/|\./;n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var o;n("duration",{Duration:o={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:o}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},function(e,t,r){"use strict";var n=r(24).assign,i=r(231),o=r(234),a=r(113),s={};n(s,i,o,a),e.exports=s},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);this.options=c.assign({level:p,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:_,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var r=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==h)throw new Error(f[r]);if(t.header&&s.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(i="string"==typeof t.dictionary?u.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=s.deflateSetDictionary(this.strm,i))!==h)throw new Error(f[r]);this._dict_set=!0}}function i(e,t){var r=new n(t);if(r.push(e,!0),r.err)throw r.msg||f[r.err];return r.result}function o(e,t){return t=t||{},t.raw=!0,i(e,t)}function a(e,t){return t=t||{},t.gzip=!0,i(e,t)}var s=r(232),c=r(24),u=r(111),f=r(72),d=r(112),l=Object.prototype.toString,h=0,p=-1,_=0,m=8;n.prototype.push=function(e,t){var r,n,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=u.string2buf(e):"[object ArrayBuffer]"===l.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new c.Buf8(o),i.next_out=0,i.avail_out=o),1!==(r=s.deflate(i,n))&&r!==h)return this.onEnd(r),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(u.buf2binstring(c.shrinkBuf(i.output,i.next_out))):this.onData(c.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==r);return 4===n?(r=s.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===h):2!==n||(this.onEnd(h),i.avail_out=0,!0)},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=n,t.deflate=i,t.deflateRaw=o,t.gzip=a},function(e,t,r){"use strict";function n(e,t){return e.msg=D[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(M.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function s(e,t){P._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function c(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function f(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,M.arraySet(t,e.input,e.next_in,i,r),1===e.state.wrap?e.adler=I(e.adler,t,i,r):2===e.state.wrap&&(e.adler=x(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function d(e,t){var r,n,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-ue?e.strstart-(e.w_size-ue):0,u=e.window,f=e.w_mask,d=e.prev,l=e.strstart+ce,h=u[o+a-1],p=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(r=t,u[r+a]===p&&u[r+a-1]===h&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<l);if(n=ce-(l-o),o=l-ce,n>a){if(e.match_start=t,a=n,n>=s)break;h=u[o+a-1],p=u[o+a]}}}while((t=d[t&f])>c&&0!=--i);return a<=e.lookahead?a:e.lookahead}function l(e){var t,r,n,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-ue)){M.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,r=e.hash_size,t=r;do{n=e.head[--t],e.head[t]=n>=a?n-a:0}while(--r);r=a,t=r;do{n=e.prev[--t],e.prev[t]=n>=a?n-a:0}while(--r);i+=a}if(0===e.strm.avail_in)break;if(r=f(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=r,e.lookahead+e.insert>=se)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+se-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<se)););}while(e.lookahead<ue&&0!==e.strm.avail_in)}function h(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(l(e),0===e.lookahead&&t===L)return be;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,s(e,!1),0===e.strm.avail_out))return be;if(e.strstart-e.block_start>=e.w_size-ue&&(s(e,!1),0===e.strm.avail_out))return be}return e.insert=0,t===j?(s(e,!0),0===e.strm.avail_out?ge:Se):(e.strstart>e.block_start&&(s(e,!1),e.strm.avail_out),be)}function p(e,t){for(var r,n;;){if(e.lookahead<ue){if(l(e),e.lookahead<ue&&t===L)return be;if(0===e.lookahead)break}if(r=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-ue&&(e.match_length=d(e,r)),e.match_length>=se)if(n=P._tr_tally(e,e.strstart-e.match_start,e.match_length-se),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=se){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=P._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(s(e,!1),0===e.strm.avail_out))return be}return e.insert=e.strstart<se-1?e.strstart:se-1,t===j?(s(e,!0),0===e.strm.avail_out?ge:Se):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?be:ye}function _(e,t){for(var r,n,i;;){if(e.lookahead<ue){if(l(e),e.lookahead<ue&&t===L)return be;if(0===e.lookahead)break}if(r=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=se-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-ue&&(e.match_length=d(e,r),e.match_length<=5&&(e.strategy===G||e.match_length===se&&e.strstart-e.match_start>4096)&&(e.match_length=se-1)),e.prev_length>=se&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-se,n=P._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-se),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=se-1,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return be}else if(e.match_available){if(n=P._tr_tally(e,0,e.window[e.strstart-1]),n&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return be}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=P._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<se-1?e.strstart:se-1,t===j?(s(e,!0),0===e.strm.avail_out?ge:Se):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?be:ye}function m(e,t){for(var r,n,i,o,a=e.window;;){if(e.lookahead<=ce){if(l(e),e.lookahead<=ce&&t===L)return be;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=se&&e.strstart>0&&(i=e.strstart-1,(n=a[i])===a[++i]&&n===a[++i]&&n===a[++i])){o=e.strstart+ce;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);e.match_length=ce-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=se?(r=P._tr_tally(e,1,e.match_length-se),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=P._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(s(e,!1),0===e.strm.avail_out))return be}return e.insert=0,t===j?(s(e,!0),0===e.strm.avail_out?ge:Se):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?be:ye}function v(e,t){for(var r;;){if(0===e.lookahead&&(l(e),0===e.lookahead)){if(t===L)return be;break}if(e.match_length=0,r=P._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return be}return e.insert=0,t===j?(s(e,!0),0===e.strm.avail_out?ge:Se):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?be:ye}function b(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function y(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=T[e.level].max_lazy,e.good_match=T[e.level].good_length,e.nice_match=T[e.level].nice_length,e.max_chain_length=T[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=se-1,e.match_available=0,e.ins_h=0}function g(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new M.Buf16(2*oe),this.dyn_dtree=new M.Buf16(2*(2*ne+1)),this.bl_tree=new M.Buf16(2*(2*ie+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new M.Buf16(ae+1),this.heap=new M.Buf16(2*re+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new M.Buf16(2*re+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function S(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Z,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?de:me,e.adler=2===t.wrap?0:1,t.last_flush=L,P._tr_init(t),V):n(e,F)}function w(e){var t=S(e);return t===V&&y(e.state),t}function k(e,t){return e&&e.state?2!==e.state.wrap?F:(e.state.gzhead=t,V):F}function E(e,t,r,i,o,a){if(!e)return F;var s=1;if(t===W&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),o<1||o>$||r!==Q||i<8||i>15||t<0||t>9||a<0||a>Y)return n(e,F);8===i&&(i=9);var c=new g;return e.state=c,c.strm=e,c.wrap=s,c.gzhead=null,c.w_bits=i,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+se-1)/se),c.window=new M.Buf8(2*c.w_size),c.head=new M.Buf16(c.hash_size),c.prev=new M.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new M.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=a,c.method=r,w(e)}function R(e,t){return E(e,t,Q,ee,te,X)}function C(e,t){var r,s,f,d;if(!e||!e.state||t>U||t<0)return e?n(e,F):F;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===ve&&t!==j)return n(e,0===e.avail_out?q:F);if(s.strm=e,r=s.last_flush,s.last_flush=t,s.status===de)if(2===s.wrap)e.adler=0,c(s,31),c(s,139),c(s,8),s.gzhead?(c(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),c(s,255&s.gzhead.time),c(s,s.gzhead.time>>8&255),c(s,s.gzhead.time>>16&255),c(s,s.gzhead.time>>24&255),c(s,9===s.level?2:s.strategy>=K||s.level<2?4:0),c(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(c(s,255&s.gzhead.extra.length),c(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=x(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=le):(c(s,0),c(s,0),c(s,0),c(s,0),c(s,0),c(s,9===s.level?2:s.strategy>=K||s.level<2?4:0),c(s,we),s.status=me);else{var l=Q+(s.w_bits-8<<4)<<8,h=-1;h=s.strategy>=K||s.level<2?0:s.level<6?1:6===s.level?2:3,l|=h<<6,0!==s.strstart&&(l|=fe),l+=31-l%31,s.status=me,u(s,l),0!==s.strstart&&(u(s,e.adler>>>16),u(s,65535&e.adler)),e.adler=1}if(s.status===le)if(s.gzhead.extra){for(f=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>f&&(e.adler=x(e.adler,s.pending_buf,s.pending-f,f)),a(e),f=s.pending,s.pending!==s.pending_buf_size));)c(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>f&&(e.adler=x(e.adler,s.pending_buf,s.pending-f,f)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=he)}else s.status=he;if(s.status===he)if(s.gzhead.name){f=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>f&&(e.adler=x(e.adler,s.pending_buf,s.pending-f,f)),a(e),f=s.pending,s.pending===s.pending_buf_size)){d=1;break}d=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,c(s,d)}while(0!==d);s.gzhead.hcrc&&s.pending>f&&(e.adler=x(e.adler,s.pending_buf,s.pending-f,f)),0===d&&(s.gzindex=0,s.status=pe)}else s.status=pe;if(s.status===pe)if(s.gzhead.comment){f=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>f&&(e.adler=x(e.adler,s.pending_buf,s.pending-f,f)),a(e),f=s.pending,s.pending===s.pending_buf_size)){d=1;break}d=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,c(s,d)}while(0!==d);s.gzhead.hcrc&&s.pending>f&&(e.adler=x(e.adler,s.pending_buf,s.pending-f,f)),0===d&&(s.status=_e)}else s.status=_e;if(s.status===_e&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(e),s.pending+2<=s.pending_buf_size&&(c(s,255&e.adler),c(s,e.adler>>8&255),e.adler=0,s.status=me)):s.status=me),0!==s.pending){if(a(e),0===e.avail_out)return s.last_flush=-1,V}else if(0===e.avail_in&&i(t)<=i(r)&&t!==j)return n(e,q);if(s.status===ve&&0!==e.avail_in)return n(e,q);if(0!==e.avail_in||0!==s.lookahead||t!==L&&s.status!==ve){var p=s.strategy===K?v(s,t):s.strategy===J?m(s,t):T[s.level].func(s,t);if(p!==ge&&p!==Se||(s.status=ve),p===be||p===ge)return 0===e.avail_out&&(s.last_flush=-1),V;if(p===ye&&(t===N?P._tr_align(s):t!==U&&(P._tr_stored_block(s,0,0,!1),t===B&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(e),0===e.avail_out))return s.last_flush=-1,V}return t!==j?V:s.wrap<=0?H:(2===s.wrap?(c(s,255&e.adler),c(s,e.adler>>8&255),c(s,e.adler>>16&255),c(s,e.adler>>24&255),c(s,255&e.total_in),c(s,e.total_in>>8&255),c(s,e.total_in>>16&255),c(s,e.total_in>>24&255)):(u(s,e.adler>>>16),u(s,65535&e.adler)),a(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?V:H)}function A(e){var t;return e&&e.state?(t=e.state.status)!==de&&t!==le&&t!==he&&t!==pe&&t!==_e&&t!==me&&t!==ve?n(e,F):(e.state=null,t===me?n(e,z):V):F}function O(e,t){var r,n,i,a,s,c,u,f,d=t.length;if(!e||!e.state)return F;if(r=e.state,2===(a=r.wrap)||1===a&&r.status!==de||r.lookahead)return F;for(1===a&&(e.adler=I(e.adler,t,d,0)),r.wrap=0,d>=r.w_size&&(0===a&&(o(r.head),r.strstart=0,r.block_start=0,r.insert=0),f=new M.Buf8(r.w_size),M.arraySet(f,t,d-r.w_size,r.w_size,0),t=f,d=r.w_size),s=e.avail_in,c=e.next_in,u=e.input,e.avail_in=d,e.next_in=0,e.input=t,l(r);r.lookahead>=se;){n=r.strstart,i=r.lookahead-(se-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+se-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--i);r.strstart=n,r.lookahead=se-1,l(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=se-1,r.match_available=0,e.next_in=c,e.input=u,e.avail_in=s,r.wrap=a,V}var T,M=r(24),P=r(233),I=r(109),x=r(110),D=r(72),L=0,N=1,B=3,j=4,U=5,V=0,H=1,F=-2,z=-3,q=-5,W=-1,G=1,K=2,J=3,Y=4,X=0,Z=2,Q=8,$=9,ee=15,te=8,re=286,ne=30,ie=19,oe=2*re+1,ae=15,se=3,ce=258,ue=ce+se+1,fe=32,de=42,le=69,he=73,pe=91,_e=103,me=113,ve=666,be=1,ye=2,ge=3,Se=4,we=3;T=[new b(0,0,0,0,h),new b(4,4,8,4,p),new b(4,5,16,8,p),new b(4,6,32,32,p),new b(4,4,16,16,_),new b(8,16,32,32,_),new b(8,16,128,128,_),new b(8,32,128,256,_),new b(32,128,258,1024,_),new b(32,258,258,4096,_)],t.deflateInit=R,t.deflateInit2=E,t.deflateReset=w,t.deflateResetKeep=S,t.deflateSetHeader=k,t.deflate=C,t.deflateEnd=A,t.deflateSetDictionary=O,t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,r){"use strict";function n(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function a(e){return e<256?oe[e]:oe[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function c(e,t,r){e.bi_valid>K-r?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>K-e.bi_valid,e.bi_valid+=r-K):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function u(e,t,r){c(e,r[2*t],r[2*t+1])}function f(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function d(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function l(e,t){var r,n,i,o,a,s,c=t.dyn_tree,u=t.max_code,f=t.stat_desc.static_tree,d=t.stat_desc.has_stree,l=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,p=t.stat_desc.max_length,_=0;for(o=0;o<=G;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<W;r++)n=e.heap[r],o=c[2*c[2*n+1]+1]+1,o>p&&(o=p,_++),c[2*n+1]=o,n>u||(e.bl_count[o]++,a=0,n>=h&&(a=l[n-h]),s=c[2*n],e.opt_len+=s*(o+a),d&&(e.static_len+=s*(f[2*n+1]+a)));if(0!==_){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,_-=2}while(_>0);for(o=p;0!==o;o--)for(n=e.bl_count[o];0!==n;)(i=e.heap[--r])>u||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),n--)}}function h(e,t,r){var n,i,o=new Array(G+1),a=0;for(n=1;n<=G;n++)o[n]=a=a+r[n-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=f(o[s]++,s))}}function p(){var e,t,r,n,o,a=new Array(G+1);for(r=0,n=0;n<V-1;n++)for(se[n]=r,e=0;e<1<<$[n];e++)ae[r++]=n;for(ae[r-1]=n,o=0,n=0;n<16;n++)for(ce[n]=o,e=0;e<1<<ee[n];e++)oe[o++]=n;for(o>>=7;n<z;n++)for(ce[n]=o<<7,e=0;e<1<<ee[n]-7;e++)oe[256+o++]=n;for(t=0;t<=G;t++)a[t]=0;for(e=0;e<=143;)ne[2*e+1]=8,e++,a[8]++;for(;e<=255;)ne[2*e+1]=9,e++,a[9]++;for(;e<=279;)ne[2*e+1]=7,e++,a[7]++;for(;e<=287;)ne[2*e+1]=8,e++,a[8]++;for(h(ne,F+1,a),e=0;e<z;e++)ie[2*e+1]=5,ie[2*e]=f(e,5);ue=new i(ne,$,H+1,F,G),fe=new i(ie,ee,0,z,G),de=new i(new Array(0),te,0,q,J)}function _(e){var t;for(t=0;t<F;t++)e.dyn_ltree[2*t]=0;for(t=0;t<z;t++)e.dyn_dtree[2*t]=0;for(t=0;t<q;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function m(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function v(e,t,r,n){m(e),n&&(s(e,r),s(e,~r)),I.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function b(e,t,r,n){var i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function y(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&b(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!b(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function g(e,t,r){var n,i,o,s,f=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*f]<<8|e.pending_buf[e.d_buf+2*f+1],i=e.pending_buf[e.l_buf+f],f++,0===n?u(e,i,t):(o=ae[i],u(e,o+H+1,t),s=$[o],0!==s&&(i-=se[o],c(e,i,s)),n--,o=a(n),u(e,o,r),0!==(s=ee[o])&&(n-=ce[o],c(e,n,s)))}while(f<e.last_lit);u(e,Y,t)}function S(e,t){var r,n,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=W,r=0;r<c;r++)0!==o[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=u<2?++u:0,o[2*i]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)y(e,o,r);i=c;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],y(e,o,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,o[2*i]=o[2*r]+o[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,o[2*r+1]=o[2*n+1]=i,e.heap[1]=i++,y(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],l(e,t),h(o,u,e.bl_count)}function w(e,t,r){var n,i,o=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++s<c&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*X]++):s<=10?e.bl_tree[2*Z]++:e.bl_tree[2*Q]++,s=0,o=i,0===a?(c=138,u=3):i===a?(c=6,u=3):(c=7,u=4))}function k(e,t,r){var n,i,o=-1,a=t[1],s=0,f=7,d=4;for(0===a&&(f=138,d=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++s<f&&i===a)){if(s<d)do{u(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(u(e,i,e.bl_tree),s--),u(e,X,e.bl_tree),c(e,s-3,2)):s<=10?(u(e,Z,e.bl_tree),c(e,s-3,3)):(u(e,Q,e.bl_tree),c(e,s-11,7));s=0,o=i,0===a?(f=138,d=3):i===a?(f=6,d=3):(f=7,d=4)}}function E(e){var t;for(w(e,e.dyn_ltree,e.l_desc.max_code),w(e,e.dyn_dtree,e.d_desc.max_code),S(e,e.bl_desc),t=q-1;t>=3&&0===e.bl_tree[2*re[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function R(e,t,r,n){var i;for(c(e,t-257,5),c(e,r-1,5),c(e,n-4,4),i=0;i<n;i++)c(e,e.bl_tree[2*re[i]+1],3);k(e,e.dyn_ltree,t-1),k(e,e.dyn_dtree,r-1)}function C(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return D;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return L;for(t=32;t<H;t++)if(0!==e.dyn_ltree[2*t])return L;return D}function A(e){le||(p(),le=!0),e.l_desc=new o(e.dyn_ltree,ue),e.d_desc=new o(e.dyn_dtree,fe),e.bl_desc=new o(e.bl_tree,de),e.bi_buf=0,e.bi_valid=0,_(e)}function O(e,t,r,n){c(e,(B<<1)+(n?1:0),3),v(e,t,r,!0)}function T(e){c(e,j<<1,3),u(e,Y,ne),d(e)}function M(e,t,r,n){var i,o,a=0;e.level>0?(e.strm.data_type===N&&(e.strm.data_type=C(e)),S(e,e.l_desc),S(e,e.d_desc),a=E(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==t?O(e,t,r,n):e.strategy===x||o===i?(c(e,(j<<1)+(n?1:0),3),g(e,ne,ie)):(c(e,(U<<1)+(n?1:0),3),R(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),g(e,e.dyn_ltree,e.dyn_dtree)),_(e),n&&m(e)}function P(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(ae[r]+H+1)]++,e.dyn_dtree[2*a(t)]++),e.last_lit===e.lit_bufsize-1}var I=r(24),x=4,D=0,L=1,N=2,B=0,j=1,U=2,V=29,H=256,F=H+1+V,z=30,q=19,W=2*F+1,G=15,K=16,J=7,Y=256,X=16,Z=17,Q=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=new Array(2*(F+2));n(ne);var ie=new Array(2*z);n(ie);var oe=new Array(512);n(oe);var ae=new Array(256);n(ae);var se=new Array(V);n(se);var ce=new Array(z);n(ce);var ue,fe,de,le=!1;t._tr_init=A,t._tr_stored_block=O,t._tr_flush_block=M,t._tr_tally=P,t._tr_align=T},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var r=a.inflateInit2(this.strm,t.windowBits);if(r!==u.Z_OK)throw new Error(f[r]);this.header=new l,a.inflateGetHeader(this.strm,this.header)}function i(e,t){var r=new n(t);if(r.push(e,!0),r.err)throw r.msg||f[r.err];return r.result}function o(e,t){return t=t||{},t.raw=!0,i(e,t)}var a=r(235),s=r(24),c=r(111),u=r(113),f=r(72),d=r(112),l=r(238),h=Object.prototype.toString;n.prototype.push=function(e,t){var r,n,i,o,f,d,l=this.strm,p=this.options.chunkSize,_=this.options.dictionary,m=!1;if(this.ended)return!1;n=t===~~t?t:!0===t?u.Z_FINISH:u.Z_NO_FLUSH,"string"==typeof e?l.input=c.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?l.input=new Uint8Array(e):l.input=e,l.next_in=0,l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new s.Buf8(p),l.next_out=0,l.avail_out=p),r=a.inflate(l,u.Z_NO_FLUSH),r===u.Z_NEED_DICT&&_&&(d="string"==typeof _?c.string2buf(_):"[object ArrayBuffer]"===h.call(_)?new Uint8Array(_):_,r=a.inflateSetDictionary(this.strm,d)),r===u.Z_BUF_ERROR&&!0===m&&(r=u.Z_OK,m=!1),r!==u.Z_STREAM_END&&r!==u.Z_OK)return this.onEnd(r),this.ended=!0,!1;l.next_out&&(0!==l.avail_out&&r!==u.Z_STREAM_END&&(0!==l.avail_in||n!==u.Z_FINISH&&n!==u.Z_SYNC_FLUSH)||("string"===this.options.to?(i=c.utf8border(l.output,l.next_out),o=l.next_out-i,f=c.buf2string(l.output,i),l.next_out=o,l.avail_out=p-o,o&&s.arraySet(l.output,l.output,i,o,0),this.onData(f)):this.onData(s.shrinkBuf(l.output,l.next_out)))),0===l.avail_in&&0===l.avail_out&&(m=!0)}while((l.avail_in>0||0===l.avail_out)&&r!==u.Z_STREAM_END);return r===u.Z_STREAM_END&&(n=u.Z_FINISH),n===u.Z_FINISH?(r=a.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===u.Z_OK):n!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),l.avail_out=0,!0)},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=n,t.inflate=i,t.inflateRaw=o,t.ungzip=i},function(e,t,r){"use strict";function n(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new b.Buf16(320),this.work=new b.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=B,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new b.Buf32(_e),t.distcode=t.distdyn=new b.Buf32(me),t.sane=1,t.back=-1,T):I}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):I}function s(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?I:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,a(e))):I}function c(e,t){var r,n;return e?(n=new i,e.state=n,n.window=null,r=s(e,t),r!==T&&(e.state=null),r):I}function u(e){return c(e,ve)}function f(e){if(be){var t;for(m=new b.Buf32(512),v=new b.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(w(E,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;w(R,e.lens,0,32,v,0,e.work,{bits:5}),be=!1}e.lencode=m,e.lenbits=9,e.distcode=v,e.distbits=5}function d(e,t,r,n){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new b.Buf8(o.wsize)),n>=o.wsize?(b.arraySet(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),b.arraySet(o.window,t,r-n,i,o.wnext),n-=i,n?(b.arraySet(o.window,t,r-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function l(e,t){var r,i,o,a,s,c,u,l,h,p,_,m,v,_e,me,ve,be,ye,ge,Se,we,ke,Ee,Re,Ce=0,Ae=new b.Buf8(4),Oe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return I;r=e.state,r.mode===J&&(r.mode=Y),s=e.next_out,o=e.output,u=e.avail_out,a=e.next_in,i=e.input,c=e.avail_in,l=r.hold,h=r.bits,p=c,_=u,ke=T;e:for(;;)switch(r.mode){case B:if(0===r.wrap){r.mode=Y;break}for(;h<16;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}if(2&r.wrap&&35615===l){r.check=0,Ae[0]=255&l,Ae[1]=l>>>8&255,r.check=g(r.check,Ae,2,0),l=0,h=0,r.mode=j;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",r.mode=le;break}if((15&l)!==N){e.msg="unknown compression method",r.mode=le;break}if(l>>>=4,h-=4,we=8+(15&l),0===r.wbits)r.wbits=we;else if(we>r.wbits){e.msg="invalid window size",r.mode=le;break}r.dmax=1<<we,e.adler=r.check=1,r.mode=512&l?G:J,l=0,h=0;break;case j:for(;h<16;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}if(r.flags=l,(255&r.flags)!==N){e.msg="unknown compression method",r.mode=le;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=le;break}r.head&&(r.head.text=l>>8&1),512&r.flags&&(Ae[0]=255&l,Ae[1]=l>>>8&255,r.check=g(r.check,Ae,2,0)),l=0,h=0,r.mode=U;case U:for(;h<32;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}r.head&&(r.head.time=l),512&r.flags&&(Ae[0]=255&l,Ae[1]=l>>>8&255,Ae[2]=l>>>16&255,Ae[3]=l>>>24&255,r.check=g(r.check,Ae,4,0)),l=0,h=0,r.mode=V;case V:for(;h<16;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&r.flags&&(Ae[0]=255&l,Ae[1]=l>>>8&255,r.check=g(r.check,Ae,2,0)),l=0,h=0,r.mode=H;case H:if(1024&r.flags){for(;h<16;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}r.length=l,r.head&&(r.head.extra_len=l),512&r.flags&&(Ae[0]=255&l,Ae[1]=l>>>8&255,r.check=g(r.check,Ae,2,0)),l=0,h=0}else r.head&&(r.head.extra=null);r.mode=F;case F:if(1024&r.flags&&(m=r.length,m>c&&(m=c),m&&(r.head&&(we=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),b.arraySet(r.head.extra,i,a,m,we)),512&r.flags&&(r.check=g(r.check,i,m,a)),c-=m,a+=m,r.length-=m),r.length))break e;r.length=0,r.mode=z;case z:if(2048&r.flags){if(0===c)break e;m=0;do{we=i[a+m++],r.head&&we&&r.length<65536&&(r.head.name+=String.fromCharCode(we))}while(we&&m<c);if(512&r.flags&&(r.check=g(r.check,i,m,a)),c-=m,a+=m,we)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=q;case q:if(4096&r.flags){if(0===c)break e;m=0;do{we=i[a+m++],r.head&&we&&r.length<65536&&(r.head.comment+=String.fromCharCode(we))}while(we&&m<c);if(512&r.flags&&(r.check=g(r.check,i,m,a)),c-=m,a+=m,we)break e}else r.head&&(r.head.comment=null);r.mode=W;case W:if(512&r.flags){for(;h<16;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}if(l!==(65535&r.check)){e.msg="header crc mismatch",r.mode=le;break}l=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=J;break;case G:for(;h<32;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}e.adler=r.check=n(l),l=0,h=0,r.mode=K;case K:if(0===r.havedict)return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=c,r.hold=l,r.bits=h,P;e.adler=r.check=1,r.mode=J;case J:if(t===A||t===O)break e;case Y:if(r.last){l>>>=7&h,h-=7&h,r.mode=ue;break}for(;h<3;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}switch(r.last=1&l,l>>>=1,h-=1,3&l){case 0:r.mode=X;break;case 1:if(f(r),r.mode=re,t===O){l>>>=2,h-=2;break e}break;case 2:r.mode=$;break;case 3:e.msg="invalid block type",r.mode=le}l>>>=2,h-=2;break;case X:for(l>>>=7&h,h-=7&h;h<32;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",r.mode=le;break}if(r.length=65535&l,l=0,h=0,r.mode=Z,t===O)break e;case Z:r.mode=Q;case Q:if(m=r.length){if(m>c&&(m=c),m>u&&(m=u),0===m)break e;b.arraySet(o,i,a,m,s),c-=m,a+=m,u-=m,s+=m,r.length-=m;break}r.mode=J;break;case $:for(;h<14;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}if(r.nlen=257+(31&l),l>>>=5,h-=5,r.ndist=1+(31&l),l>>>=5,h-=5,r.ncode=4+(15&l),l>>>=4,h-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=le;break}r.have=0,r.mode=ee;case ee:for(;r.have<r.ncode;){for(;h<3;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}r.lens[Oe[r.have++]]=7&l,l>>>=3,h-=3}for(;r.have<19;)r.lens[Oe[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Ee={bits:r.lenbits},ke=w(k,r.lens,0,19,r.lencode,0,r.work,Ee),r.lenbits=Ee.bits,ke){e.msg="invalid code lengths set",r.mode=le;break}r.have=0,r.mode=te;case te:for(;r.have<r.nlen+r.ndist;){for(;Ce=r.lencode[l&(1<<r.lenbits)-1],me=Ce>>>24,ve=Ce>>>16&255,be=65535&Ce,!(me<=h);){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}if(be<16)l>>>=me,h-=me,r.lens[r.have++]=be;else{if(16===be){for(Re=me+2;h<Re;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}if(l>>>=me,h-=me,0===r.have){e.msg="invalid bit length repeat",r.mode=le;break}we=r.lens[r.have-1],m=3+(3&l),l>>>=2,h-=2}else if(17===be){for(Re=me+3;h<Re;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}l>>>=me,h-=me,we=0,m=3+(7&l),l>>>=3,h-=3}else{for(Re=me+7;h<Re;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}l>>>=me,h-=me,we=0,m=11+(127&l),l>>>=7,h-=7}if(r.have+m>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=le;break}for(;m--;)r.lens[r.have++]=we}}if(r.mode===le)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=le;break}if(r.lenbits=9,Ee={bits:r.lenbits},ke=w(E,r.lens,0,r.nlen,r.lencode,0,r.work,Ee),r.lenbits=Ee.bits,ke){e.msg="invalid literal/lengths set",r.mode=le;break}if(r.distbits=6,r.distcode=r.distdyn,Ee={bits:r.distbits},ke=w(R,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Ee),r.distbits=Ee.bits,ke){e.msg="invalid distances set",r.mode=le;break}if(r.mode=re,t===O)break e;case re:r.mode=ne;case ne:if(c>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=c,r.hold=l,r.bits=h,S(e,_),s=e.next_out,o=e.output,u=e.avail_out,a=e.next_in,i=e.input,c=e.avail_in,l=r.hold,h=r.bits,r.mode===J&&(r.back=-1);break}for(r.back=0;Ce=r.lencode[l&(1<<r.lenbits)-1],me=Ce>>>24,ve=Ce>>>16&255,be=65535&Ce,!(me<=h);){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}if(ve&&0==(240&ve)){for(ye=me,ge=ve,Se=be;Ce=r.lencode[Se+((l&(1<<ye+ge)-1)>>ye)],me=Ce>>>24,ve=Ce>>>16&255,be=65535&Ce,!(ye+me<=h);){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}l>>>=ye,h-=ye,r.back+=ye}if(l>>>=me,h-=me,r.back+=me,r.length=be,0===ve){r.mode=ce;break}if(32&ve){r.back=-1,r.mode=J;break}if(64&ve){e.msg="invalid literal/length code",r.mode=le;break}r.extra=15&ve,r.mode=ie;case ie:if(r.extra){for(Re=r.extra;h<Re;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=oe;case oe:for(;Ce=r.distcode[l&(1<<r.distbits)-1],me=Ce>>>24,ve=Ce>>>16&255,be=65535&Ce,!(me<=h);){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}if(0==(240&ve)){for(ye=me,ge=ve,Se=be;Ce=r.distcode[Se+((l&(1<<ye+ge)-1)>>ye)],me=Ce>>>24,ve=Ce>>>16&255,be=65535&Ce,!(ye+me<=h);){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}l>>>=ye,h-=ye,r.back+=ye}if(l>>>=me,h-=me,r.back+=me,64&ve){e.msg="invalid distance code",r.mode=le;break}r.offset=be,r.extra=15&ve,r.mode=ae;case ae:if(r.extra){for(Re=r.extra;h<Re;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=le;break}r.mode=se;case se:if(0===u)break e;if(m=_-u,r.offset>m){if((m=r.offset-m)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=le;break}m>r.wnext?(m-=r.wnext,v=r.wsize-m):v=r.wnext-m,m>r.length&&(m=r.length),_e=r.window}else _e=o,v=s-r.offset,m=r.length;m>u&&(m=u),u-=m,r.length-=m;do{o[s++]=_e[v++]}while(--m);0===r.length&&(r.mode=ne);break;case ce:if(0===u)break e;o[s++]=r.length,u--,r.mode=ne;break;case ue:if(r.wrap){for(;h<32;){if(0===c)break e;c--,l|=i[a++]<<h,h+=8}if(_-=u,e.total_out+=_,r.total+=_,_&&(e.adler=r.check=r.flags?g(r.check,o,_,s-_):y(r.check,o,_,s-_)),_=u,(r.flags?l:n(l))!==r.check){e.msg="incorrect data check",r.mode=le;break}l=0,h=0}r.mode=fe;case fe:if(r.wrap&&r.flags){for(;h<32;){if(0===c)break e;c--,l+=i[a++]<<h,h+=8}if(l!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=le;break}l=0,h=0}r.mode=de;case de:ke=M;break e;case le:ke=x;break e;case he:return D;case pe:default:return I}return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=c,r.hold=l,r.bits=h,(r.wsize||_!==e.avail_out&&r.mode<le&&(r.mode<ue||t!==C))&&d(e,e.output,e.next_out,_-e.avail_out)?(r.mode=he,D):(p-=e.avail_in,_-=e.avail_out,e.total_in+=p,e.total_out+=_,r.total+=_,r.wrap&&_&&(e.adler=r.check=r.flags?g(r.check,o,_,e.next_out-_):y(r.check,o,_,e.next_out-_)),e.data_type=r.bits+(r.last?64:0)+(r.mode===J?128:0)+(r.mode===re||r.mode===Z?256:0),(0===p&&0===_||t===C)&&ke===T&&(ke=L),ke)}function h(e){if(!e||!e.state)return I;var t=e.state;return t.window&&(t.window=null),e.state=null,T}function p(e,t){var r;return e&&e.state?(r=e.state,0==(2&r.wrap)?I:(r.head=t,t.done=!1,T)):I}function _(e,t){var r,n,i=t.length;return e&&e.state?(r=e.state,0!==r.wrap&&r.mode!==K?I:r.mode===K&&(n=1,(n=y(n,t,i,0))!==r.check)?x:d(e,t,i,i)?(r.mode=he,D):(r.havedict=1,T)):I}var m,v,b=r(24),y=r(109),g=r(110),S=r(236),w=r(237),k=0,E=1,R=2,C=4,A=5,O=6,T=0,M=1,P=2,I=-2,x=-3,D=-4,L=-5,N=8,B=1,j=2,U=3,V=4,H=5,F=6,z=7,q=8,W=9,G=10,K=11,J=12,Y=13,X=14,Z=15,Q=16,$=17,ee=18,te=19,re=20,ne=21,ie=22,oe=23,ae=24,se=25,ce=26,ue=27,fe=28,de=29,le=30,he=31,pe=32,_e=852,me=592,ve=15,be=!0;t.inflateReset=a,t.inflateReset2=s,t.inflateResetKeep=o,t.inflateInit=u,t.inflateInit2=c,t.inflate=l,t.inflateEnd=h,t.inflateGetHeader=p,t.inflateSetDictionary=_,t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,r){"use strict";e.exports=function(e,t){var r,n,i,o,a,s,c,u,f,d,l,h,p,_,m,v,b,y,g,S,w,k,E,R,C;r=e.state,n=e.next_in,R=e.input,i=n+(e.avail_in-5),o=e.next_out,C=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),c=r.dmax,u=r.wsize,f=r.whave,d=r.wnext,l=r.window,h=r.hold,p=r.bits,_=r.lencode,m=r.distcode,v=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;e:do{p<15&&(h+=R[n++]<<p,p+=8,h+=R[n++]<<p,p+=8),y=_[h&v];t:for(;;){if(g=y>>>24,h>>>=g,p-=g,0===(g=y>>>16&255))C[o++]=65535&y;else{if(!(16&g)){if(0==(64&g)){y=_[(65535&y)+(h&(1<<g)-1)];continue t}if(32&g){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}S=65535&y,g&=15,g&&(p<g&&(h+=R[n++]<<p,p+=8),S+=h&(1<<g)-1,h>>>=g,p-=g),p<15&&(h+=R[n++]<<p,p+=8,h+=R[n++]<<p,p+=8),y=m[h&b];r:for(;;){if(g=y>>>24,h>>>=g,p-=g,!(16&(g=y>>>16&255))){if(0==(64&g)){y=m[(65535&y)+(h&(1<<g)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(w=65535&y,g&=15,p<g&&(h+=R[n++]<<p,(p+=8)<g&&(h+=R[n++]<<p,p+=8)),(w+=h&(1<<g)-1)>c){e.msg="invalid distance too far back",r.mode=30;break e}if(h>>>=g,p-=g,g=o-a,w>g){if((g=w-g)>f&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(k=0,E=l,0===d){if(k+=u-g,g<S){S-=g;do{C[o++]=l[k++]}while(--g);k=o-w,E=C}}else if(d<g){if(k+=u+d-g,(g-=d)<S){S-=g;do{C[o++]=l[k++]}while(--g);if(k=0,d<S){g=d,S-=g;do{C[o++]=l[k++]}while(--g);k=o-w,E=C}}}else if(k+=d-g,g<S){S-=g;do{C[o++]=l[k++]}while(--g);k=o-w,E=C}for(;S>2;)C[o++]=E[k++],C[o++]=E[k++],C[o++]=E[k++],S-=3;S&&(C[o++]=E[k++],S>1&&(C[o++]=E[k++]))}else{k=o-w;do{C[o++]=C[k++],C[o++]=C[k++],C[o++]=C[k++],S-=3}while(S>2);S&&(C[o++]=C[k++],S>1&&(C[o++]=C[k++]))}break}}break}}while(n<i&&o<s);S=p>>3,n-=S,p-=S<<3,h&=(1<<p)-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=o<s?s-o+257:257-(o-s),r.hold=h,r.bits=p}},function(e,t,r){"use strict";var n=r(24),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,c,u,f,d,l){var h,p,_,m,v,b,y,g,S,w=l.bits,k=0,E=0,R=0,C=0,A=0,O=0,T=0,M=0,P=0,I=0,x=null,D=0,L=new n.Buf16(16),N=new n.Buf16(16),B=null,j=0;for(k=0;k<=15;k++)L[k]=0;for(E=0;E<c;E++)L[t[r+E]]++;for(A=w,C=15;C>=1&&0===L[C];C--);if(A>C&&(A=C),0===C)return u[f++]=20971520,u[f++]=20971520,l.bits=1,0;for(R=1;R<C&&0===L[R];R++);for(A<R&&(A=R),M=1,k=1;k<=15;k++)if(M<<=1,(M-=L[k])<0)return-1;if(M>0&&(0===e||1!==C))return-1;for(N[1]=0,k=1;k<15;k++)N[k+1]=N[k]+L[k];for(E=0;E<c;E++)0!==t[r+E]&&(d[N[t[r+E]]++]=E);if(0===e?(x=B=d,b=19):1===e?(x=i,D-=257,B=o,j-=257,b=256):(x=a,B=s,b=-1),I=0,E=0,k=R,v=f,O=A,T=0,_=-1,P=1<<A,m=P-1,1===e&&P>852||2===e&&P>592)return 1;for(;;){y=k-T,d[E]<b?(g=0,S=d[E]):d[E]>b?(g=B[j+d[E]],S=x[D+d[E]]):(g=96,S=0),h=1<<k-T,p=1<<O,R=p;do{p-=h,u[v+(I>>T)+p]=y<<24|g<<16|S|0}while(0!==p);for(h=1<<k-1;I&h;)h>>=1;if(0!==h?(I&=h-1,I+=h):I=0,E++,0==--L[k]){if(k===C)break;k=t[r+d[E]]}if(k>A&&(I&m)!==_){for(0===T&&(T=A),v+=R,O=k-T,M=1<<O;O+T<C&&!((M-=L[O+T])<=0);)O++,M<<=1;if(P+=1<<O,1===e&&P>852||2===e&&P>592)return 1;_=I&m,u[_]=A<<24|O<<16|v-f|0}}return 0!==I&&(u[v+I]=k-T<<24|64<<16|0),l.bits=A,0}},function(e,t,r){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={nested:{sls:{nested:{Log:{fields:{Time:{rule:"required",type:"uint32",id:1},Contents:{rule:"repeated",type:"Content",id:2}},nested:{Content:{fields:{Key:{rule:"required",type:"string",id:1},Value:{rule:"required",type:"string",id:2}}}}},LogTag:{fields:{Key:{rule:"required",type:"string",id:1},Value:{rule:"required",type:"string",id:2}}},LogGroup:{fields:{Logs:{rule:"repeated",type:"Log",id:1},Reserved:{type:"string",id:2},Topic:{type:"string",id:3},Source:{type:"string",id:4},LogTags:{rule:"repeated",type:"LogTag",id:6}}},LogGroupList:{fields:{logGroupList:{rule:"repeated",type:"LogGroup",id:1}}}}}}}},function(e,t,r){"use strict";t.randomBytes=t.rng=t.pseudoRandomBytes=t.prng=r(33),t.createHash=t.Hash=r(44),t.createHmac=t.Hmac=r(120);var n=r(262),i=Object.keys(n),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);t.getHashes=function(){return o};var a=r(122);t.pbkdf2=a.pbkdf2,t.pbkdf2Sync=a.pbkdf2Sync;var s=r(264);t.Cipher=s.Cipher,t.createCipher=s.createCipher,t.Cipheriv=s.Cipheriv,t.createCipheriv=s.createCipheriv,t.Decipher=s.Decipher,t.createDecipher=s.createDecipher,t.Decipheriv=s.Decipheriv,t.createDecipheriv=s.createDecipheriv,t.getCiphers=s.getCiphers,t.listCiphers=s.listCiphers;var c=r(283);t.DiffieHellmanGroup=c.DiffieHellmanGroup,t.createDiffieHellmanGroup=c.createDiffieHellmanGroup,t.getDiffieHellman=c.getDiffieHellman,t.createDiffieHellman=c.createDiffieHellman,t.DiffieHellman=c.DiffieHellman;var u=r(288);t.createSign=u.createSign,t.Sign=u.Sign,t.createVerify=u.createVerify,t.Verify=u.Verify,t.createECDH=r(326);var f=r(327);t.publicEncrypt=f.publicEncrypt,t.privateEncrypt=f.privateEncrypt,t.publicDecrypt=f.publicDecrypt,t.privateDecrypt=f.privateDecrypt;var d=r(330);t.randomFill=d.randomFill,t.randomFillSync=d.randomFillSync,t.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},t.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function o(e){var t,r,i,o,a,s=e.length;o=n(e),a=new d(3*s/4-o),r=o>0?s-4:s;var c=0;for(t=0;t<r;t+=4)i=f[e.charCodeAt(t)]<<18|f[e.charCodeAt(t+1)]<<12|f[e.charCodeAt(t+2)]<<6|f[e.charCodeAt(t+3)],a[c++]=i>>16&255,a[c++]=i>>8&255,a[c++]=255&i;return 2===o?(i=f[e.charCodeAt(t)]<<2|f[e.charCodeAt(t+1)]>>4,a[c++]=255&i):1===o&&(i=f[e.charCodeAt(t)]<<10|f[e.charCodeAt(t+1)]<<4|f[e.charCodeAt(t+2)]>>2,a[c++]=i>>8&255,a[c++]=255&i),a}function a(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function s(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(a(n));return i.join("")}function c(e){for(var t,r=e.length,n=r%3,i="",o=[],a=0,c=r-n;a<c;a+=16383)o.push(s(e,a,a+16383>c?c:a+16383));return 1===n?(t=e[r-1],i+=u[t>>2],i+=u[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=u[t>>10],i+=u[t>>4&63],i+=u[t<<2&63],i+="="),o.push(i),o.join("")}t.byteLength=i,t.toByteArray=o,t.fromByteArray=c;for(var u=[],f=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=l.length;h<p;++h)u[h]=l[h],f[l.charCodeAt(h)]=h;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},function(e,t,r){"use strict";t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,c=(1<<s)-1,u=c>>1,f=-7,d=r?i-1:0,l=r?-1:1,h=e[t+d];for(d+=l,o=h&(1<<-f)-1,h>>=-f,f+=s;f>0;o=256*o+e[t+d],d+=l,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=n;f>0;a=256*a+e[t+d],d+=l,f-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),o-=u}return(h?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,c,u=8*o-i-1,f=(1<<u)-1,d=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,p=n?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),t+=a+d>=1?l/c:l*Math.pow(2,1-d),t*c>=2&&(a++,c/=2),a+d>=f?(s=0,a=f):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[r+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+h]=255&a,h+=p,a/=256,u-=8);e[r+h-p]|=128*_}},function(e,t,r){"use strict";var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,r){"use strict";(function(t){function r(e){if(e.length%n!=0){var r=e.length+(n-e.length%n);e=t.concat([e,i],r)}for(var o=new Array(e.length>>>2),a=0,s=0;a<e.length;a+=n,s++)o[s]=e.readInt32LE(a);return o}var n=4,i=new t(n);i.fill(0);e.exports=function(e,n){var i=n(r(e),8*e.length);e=new t(16);for(var o=0;o<i.length;o++)e.writeInt32LE(i[o],o<<2,!0);return e}}).call(t,r(4).Buffer)},function(e,t,r){"use strict";(function(t){function n(e){i.call(this),this._block=new t(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}var i=r(52).Transform;r(1)(n,i),n.prototype._transform=function(e,r,n){var i=null;try{"buffer"!==r&&(e=new t(e,r)),this.update(e)}catch(e){i=e}n(i)},n.prototype._flush=function(e){var t=null;try{this.push(this._digest())}catch(e){t=e}e(t)},n.prototype.update=function(e,r){if(!t.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");t.isBuffer(e)||(e=new t(e,r||"binary"));for(var n=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)n[o++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)n[this._blockOffset++]=e[i++];for(var a=0,s=8*e.length;s>0;++a)this._length[a]+=s,(s=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*s);return this},n.prototype._update=function(e){throw new Error("_update is not implemented")},n.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();return void 0!==e&&(t=t.toString(e)),t},n.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=n}).call(t,r(4).Buffer)},function(e,t,r){"use strict";var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,r){e.copy(t,r)}var o=r(3).Buffer;e.exports=function(){function e(){n(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),r=this.head,n=0;r;)i(r.data,t,n),n+=r.data.length,r=r.next;return t},e}()},function(e,t,r){"use strict";function n(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new n(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new n(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(250),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,r){"use strict";(function(e,t){!function(e,r){function n(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return u[c]=n,s(c),c++}function i(e){delete u[e]}function o(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}function a(e){if(f)setTimeout(a,0,e);else{var t=u[e];if(t){f=!0;try{o(t)}finally{i(e),f=!1}}}}if(!e.setImmediate){var s,c=1,u={},f=!1,d=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&a(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),s=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():d&&"onreadystatechange"in d.createElement("script")?function(){var e=d.documentElement;s=function(t){var r=d.createElement("script");r.onreadystatechange=function(){a(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():function(){s=function(e){setTimeout(a,0,e)}}(),l.setImmediate=n,l.clearImmediate=i}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(t,r(19),r(23))},function(e,t,r){"use strict";(function(t){function r(e,t){function r(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var i=!1;return r}function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=r}).call(t,r(19))},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}e.exports=n;var i=r(117),o=r(45);o.inherits=r(1),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){"use strict";e.exports=r(77)},function(e,t,r){"use strict";e.exports=r(28)},function(e,t,r){"use strict";e.exports=r(76).Transform},function(e,t,r){"use strict";e.exports=r(76).PassThrough},function(e,t,r){"use strict";function n(){this.init(),this._w=d,c.call(this,64,56)}function i(e){return e<<5|e>>>27}function o(e){return e<<30|e>>>2}function a(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}var s=r(1),c=r(34),u=r(3).Buffer,f=[1518500249,1859775393,-1894007588,-899497514],d=new Array(80);s(n,c),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},n.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,s=0|this._c,c=0|this._d,u=0|this._e,d=0;d<16;++d)t[d]=e.readInt32BE(4*d);for(;d<80;++d)t[d]=t[d-3]^t[d-8]^t[d-14]^t[d-16];for(var l=0;l<80;++l){var h=~~(l/20),p=i(r)+a(h,n,s,c)+u+t[l]+f[h]|0;u=c,c=s,s=o(n),n=r,r=p}this._a=r+this._a|0,this._b=n+this._b|0,this._c=s+this._c|0,this._d=c+this._d|0,this._e=u+this._e|0},n.prototype._hash=function(){var e=u.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=n},function(e,t,r){"use strict";function n(){this.init(),this._w=l,u.call(this,64,56)}function i(e){return e<<1|e>>>31}function o(e){return e<<5|e>>>27}function a(e){return e<<30|e>>>2}function s(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}var c=r(1),u=r(34),f=r(3).Buffer,d=[1518500249,1859775393,-1894007588,-899497514],l=new Array(80);c(n,u),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},n.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,c=0|this._c,u=0|this._d,f=0|this._e,l=0;l<16;++l)t[l]=e.readInt32BE(4*l);for(;l<80;++l)t[l]=i(t[l-3]^t[l-8]^t[l-14]^t[l-16]);for(var h=0;h<80;++h){var p=~~(h/20),_=o(r)+s(p,n,c,u)+f+t[h]+d[p]|0;f=u,u=c,c=a(n),n=r,r=_}this._a=r+this._a|0,this._b=n+this._b|0,this._c=c+this._c|0,this._d=u+this._d|0,this._e=f+this._e|0},n.prototype._hash=function(){var e=f.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=n},function(e,t,r){"use strict";function n(){this.init(),this._w=c,a.call(this,64,56)}var i=r(1),o=r(118),a=r(34),s=r(3).Buffer,c=new Array(64);i(n,o),n.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},n.prototype._hash=function(){var e=s.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=n},function(e,t,r){"use strict";function n(){this.init(),this._w=c,a.call(this,128,112)}var i=r(1),o=r(119),a=r(34),s=r(3).Buffer,c=new Array(160);i(n,o),n.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},n.prototype._hash=function(){function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}var t=s.allocUnsafe(48);return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},e.exports=n},function(e,t,r){"use strict";function n(e,t){a.call(this,"digest"),"string"==typeof t&&(t=o.from(t)),this._alg=e,this._key=t,t.length>c?t=e(t):t.length<c&&(t=o.concat([t,s],c));for(var r=this._ipad=o.allocUnsafe(c),n=this._opad=o.allocUnsafe(c),i=0;i<c;i++)r[i]=54^t[i],n[i]=92^t[i];this._hash=[r]}var i=r(1),o=r(3).Buffer,a=r(25),s=o.alloc(128),c=64;i(n,a),n.prototype._update=function(e){this._hash.push(e)},n.prototype._final=function(){var e=this._alg(o.concat(this._hash));return this._alg(o.concat([this._opad,e]))},e.exports=n},function(e,t,r){"use strict";e.exports=r(121)},function(e,t,r){"use strict";(function(t,n){function i(e){if(t.process&&!t.process.browser)return Promise.resolve(!1);if(!l||!l.importKey||!l.deriveBits)return Promise.resolve(!1);if(void 0!==p[e])return p[e];s=s||d.alloc(8);var r=o(s,s,10,128,e).then(function(){return!0}).catch(function(){return!1});return p[e]=r,r}function o(e,t,r,n,i){return l.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then(function(e){return l.deriveBits({name:"PBKDF2",salt:t,iterations:r,hash:{name:i}},e,n<<3)}).then(function(e){return d.from(e)})}function a(e,t){e.then(function(e){n.nextTick(function(){t(null,e)})},function(e){n.nextTick(function(){t(e)})})}var s,c=r(123),u=r(124),f=r(125),d=r(3).Buffer,l=t.crypto&&t.crypto.subtle,h={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},p=[];e.exports=function(e,r,s,l,p,_){if(d.isBuffer(e)||(e=d.from(e,u)),d.isBuffer(r)||(r=d.from(r,u)),c(s,l),"function"==typeof p&&(_=p,p=void 0),"function"!=typeof _)throw new Error("No callback provided to pbkdf2");p=p||"sha1";var m=h[p.toLowerCase()];if(!m||"function"!=typeof t.Promise)return n.nextTick(function(){var t;try{t=f(e,r,s,l,p)}catch(e){return _(e)}_(null,t)});a(i(m).then(function(t){return t?o(e,r,s,l,m):f(e,r,s,l,p)}),_)}}).call(t,r(19),r(23))},function(e,t,r){"use strict";function n(e,t){var r,n;if(e=e.toLowerCase(),l[e])r=l[e].key,n=l[e].iv;else{if(!d[e])throw new TypeError("invalid suite type");r=8*d[e].key,n=d[e].iv}var i=c(t,!1,r,n);return o(e,i.key,i.iv)}function i(e,t){var r,n;if(e=e.toLowerCase(),l[e])r=l[e].key,n=l[e].iv;else{if(!d[e])throw new TypeError("invalid suite type");r=8*d[e].key,n=d[e].iv}var i=c(t,!1,r,n);return a(e,i.key,i.iv)}function o(e,t,r){if(e=e.toLowerCase(),l[e])return u.createCipheriv(e,t,r);if(d[e])return new f({key:t,iv:r,mode:e});throw new TypeError("invalid suite type")}function a(e,t,r){if(e=e.toLowerCase(),l[e])return u.createDecipheriv(e,t,r);if(d[e])return new f({key:t,iv:r,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}function s(){return Object.keys(d).concat(u.getCiphers())}var c=r(54),u=r(80),f=r(276),d=r(282),l=r(81);t.createCipher=t.Cipher=n,t.createCipheriv=t.Cipheriv=o,t.createDecipher=t.Decipher=i,t.createDecipheriv=t.Decipheriv=a,t.listCiphers=t.getCiphers=s},function(e,t,r){"use strict";(function(t){function n(){f.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function i(e,t){return e<<t|e>>>32-t}function o(e,t,r,n,o,a,s){return i(e+(t&r|~t&n)+o+a|0,s)+t|0}function a(e,t,r,n,o,a,s){return i(e+(t&n|r&~n)+o+a|0,s)+t|0}function s(e,t,r,n,o,a,s){return i(e+(t^r^n)+o+a|0,s)+t|0}function c(e,t,r,n,o,a,s){return i(e+(r^(t|~n))+o+a|0,s)+t|0}var u=r(1),f=r(266),d=new Array(16);u(n,f),n.prototype._update=function(){for(var e=d,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,i=this._c,u=this._d;r=o(r,n,i,u,e[0],3614090360,7),u=o(u,r,n,i,e[1],3905402710,12),i=o(i,u,r,n,e[2],606105819,17),n=o(n,i,u,r,e[3],3250441966,22),r=o(r,n,i,u,e[4],4118548399,7),u=o(u,r,n,i,e[5],1200080426,12),i=o(i,u,r,n,e[6],2821735955,17),n=o(n,i,u,r,e[7],4249261313,22),r=o(r,n,i,u,e[8],1770035416,7),u=o(u,r,n,i,e[9],2336552879,12),i=o(i,u,r,n,e[10],4294925233,17),n=o(n,i,u,r,e[11],2304563134,22),r=o(r,n,i,u,e[12],1804603682,7),u=o(u,r,n,i,e[13],4254626195,12),i=o(i,u,r,n,e[14],2792965006,17),n=o(n,i,u,r,e[15],1236535329,22),r=a(r,n,i,u,e[1],4129170786,5),u=a(u,r,n,i,e[6],3225465664,9),i=a(i,u,r,n,e[11],643717713,14),n=a(n,i,u,r,e[0],3921069994,20),r=a(r,n,i,u,e[5],3593408605,5),u=a(u,r,n,i,e[10],38016083,9),i=a(i,u,r,n,e[15],3634488961,14),n=a(n,i,u,r,e[4],3889429448,20),r=a(r,n,i,u,e[9],568446438,5),u=a(u,r,n,i,e[14],3275163606,9),i=a(i,u,r,n,e[3],4107603335,14),n=a(n,i,u,r,e[8],1163531501,20),r=a(r,n,i,u,e[13],2850285829,5),u=a(u,r,n,i,e[2],4243563512,9),i=a(i,u,r,n,e[7],1735328473,14),n=a(n,i,u,r,e[12],2368359562,20),r=s(r,n,i,u,e[5],4294588738,4),u=s(u,r,n,i,e[8],2272392833,11),i=s(i,u,r,n,e[11],1839030562,16),n=s(n,i,u,r,e[14],4259657740,23),r=s(r,n,i,u,e[1],2763975236,4),u=s(u,r,n,i,e[4],1272893353,11),i=s(i,u,r,n,e[7],4139469664,16),n=s(n,i,u,r,e[10],3200236656,23),r=s(r,n,i,u,e[13],681279174,4),u=s(u,r,n,i,e[0],3936430074,11),i=s(i,u,r,n,e[3],3572445317,16),n=s(n,i,u,r,e[6],76029189,23),r=s(r,n,i,u,e[9],3654602809,4),u=s(u,r,n,i,e[12],3873151461,11),i=s(i,u,r,n,e[15],530742520,16),n=s(n,i,u,r,e[2],3299628645,23),r=c(r,n,i,u,e[0],4096336452,6),u=c(u,r,n,i,e[7],1126891415,10),i=c(i,u,r,n,e[14],2878612391,15),n=c(n,i,u,r,e[5],4237533241,21),r=c(r,n,i,u,e[12],1700485571,6),u=c(u,r,n,i,e[3],2399980690,10),i=c(i,u,r,n,e[10],4293915773,15),n=c(n,i,u,r,e[1],2240044497,21),r=c(r,n,i,u,e[8],1873313359,6),u=c(u,r,n,i,e[15],4264355552,10),i=c(i,u,r,n,e[6],2734768916,15),n=c(n,i,u,r,e[13],1309151649,21),r=c(r,n,i,u,e[4],4149444226,6),u=c(u,r,n,i,e[11],3174756917,10),i=c(i,u,r,n,e[2],718787259,15),n=c(n,i,u,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+u|0},n.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=new t(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=n}).call(t,r(4).Buffer)},function(e,t,r){"use strict";function n(e,t){if(!o.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}function i(e){a.call(this),this._block=o.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}var o=r(3).Buffer,a=r(52).Transform;r(1)(i,a),i.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(e){n=e}r(n)},i.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},i.prototype.update=function(e,t){if(n(e,"Data"),this._finalized)throw new Error("Digest already called");o.isBuffer(e)||(e=o.from(e,t));for(var r=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var a=this._blockOffset;a<this._blockSize;)r[a++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)r[this._blockOffset++]=e[i++];for(var s=0,c=8*e.length;c>0;++s)this._length[s]+=c,(c=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*c);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},i.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=i},function(e,t,r){"use strict";function n(e,t,r){d.call(this),this._cache=new i,this._cipher=new l.AES(t),this._prev=u.from(r),this._mode=e,this._autopadding=!0}function i(){this.cache=u.allocUnsafe(0)}function o(e,t,r){var i=s[e.toLowerCase()];if(!i)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=u.from(t)),t.length!==i.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof r&&(r=u.from(r)),"GCM"!==i.mode&&r.length!==i.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===i.type?new f(i.module,t,r):"auth"===i.type?new c(i.module,t,r):new n(i.module,t,r)}function a(e,t){var r=s[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=h(t,!1,r.key,r.iv);return o(e,n.key,n.iv)}var s=r(81),c=r(129),u=r(3).Buffer,f=r(130),d=r(25),l=r(55),h=r(54);r(1)(n,d),n.prototype._update=function(e){this._cache.add(e);for(var t,r,n=[];t=this._cache.get();)r=this._mode.encrypt(this,t),n.push(r);return u.concat(n)};var p=u.alloc(16,16);n.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(p))throw this._cipher.scrub(),new Error("data not multiple of block length")},n.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},i.prototype.add=function(e){this.cache=u.concat([this.cache,e])},i.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},i.prototype.flush=function(){for(var e=16-this.cache.length,t=u.allocUnsafe(e),r=-1;++r<e;)t.writeUInt8(e,r);return u.concat([this.cache,t])},t.createCipheriv=o,t.createCipher=a},function(e,t,r){"use strict";t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},function(e,t,r){"use strict";var n=r(46);t.encrypt=function(e,t){var r=n(t,e._prev);return e._prev=e._cipher.encryptBlock(r),e._prev},t.decrypt=function(e,t){var r=e._prev;e._prev=t;var i=e._cipher.decryptBlock(t);return n(i,r)}},function(e,t,r){"use strict";function n(e,t,r){var n=t.length,a=o(t,e._cache);return e._cache=e._cache.slice(n),e._prev=i.concat([e._prev,r?t:a]),a}var i=r(3).Buffer,o=r(46);t.encrypt=function(e,t,r){for(var o,a=i.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=i.allocUnsafe(0)),!(e._cache.length<=t.length)){a=i.concat([a,n(e,t,r)]);break}o=e._cache.length,a=i.concat([a,n(e,t.slice(0,o),r)]),t=t.slice(o)}return a}},function(e,t,r){"use strict";function n(e,t,r){var n=e._cipher.encryptBlock(e._prev),o=n[0]^t;return e._prev=i.concat([e._prev.slice(1),i.from([r?t:o])]),o}var i=r(3).Buffer;t.encrypt=function(e,t,r){for(var o=t.length,a=i.allocUnsafe(o),s=-1;++s<o;)a[s]=n(e,t[s],r);return a}},function(e,t,r){"use strict";function n(e,t,r){for(var n,o,a,s=-1,c=0;++s<8;)n=e._cipher.encryptBlock(e._prev),o=t&1<<7-s?128:0,a=n[0]^o,c+=(128&a)>>s%8,e._prev=i(e._prev,r?o:a);return c}function i(e,t){var r=e.length,n=-1,i=o.allocUnsafe(e.length);for(e=o.concat([e,o.from([t])]);++n<r;)i[n]=e[n]<<1|e[n+1]>>7;return i}var o=r(3).Buffer;t.encrypt=function(e,t,r){for(var i=t.length,a=o.allocUnsafe(i),s=-1;++s<i;)a[s]=n(e,t[s],r);return a}},function(e,t,r){"use strict";(function(e){function n(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}var i=r(46);t.encrypt=function(t,r){for(;t._cache.length<r.length;)t._cache=e.concat([t._cache,n(t)]);var o=t._cache.slice(0,r.length);return t._cache=t._cache.slice(r.length),i(r,o)}}).call(t,r(4).Buffer)},function(e,t,r){"use strict";function n(e){return[e.readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)]}function i(e){var t=a.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function o(e){this.h=e,this.state=a.alloc(16,0),this.cache=a.allocUnsafe(0)}var a=r(3).Buffer,s=a.alloc(16,0);o.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},o.prototype._multiply=function(){for(var e,t,r,o=n(this.h),a=[0,0,0,0],s=-1;++s<128;){for(t=0!=(this.state[~~(s/8)]&1<<7-s%8),t&&(a[0]^=o[0],a[1]^=o[1],a[2]^=o[2],a[3]^=o[3]),r=0!=(1&o[3]),e=3;e>0;e--)o[e]=o[e]>>>1|(1&o[e-1])<<31;o[0]=o[0]>>>1,r&&(o[0]=o[0]^225<<24)}this.state=i(a)},o.prototype.update=function(e){this.cache=a.concat([this.cache,e]);for(var t;this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},o.prototype.final=function(e,t){return this.cache.length&&this.ghash(a.concat([this.cache,s],16)),this.ghash(i([0,e,0,t])),this.state},e.exports=o},function(e,t,r){"use strict";function n(e,t,r){l.call(this),this._cache=new i,this._last=void 0,this._cipher=new h.AES(t),this._prev=u.from(r),this._mode=e,this._autopadding=!0}function i(){this.cache=u.allocUnsafe(0)}function o(e){for(var t=e[15],r=-1;++r<t;)if(e[r+(16-t)]!==t)throw new Error("unable to decrypt data");if(16!==t)return e.slice(0,16-t)}function a(e,t,r){var i=f[e.toLowerCase()];if(!i)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=u.from(r)),"GCM"!==i.mode&&r.length!==i.iv)throw new TypeError("invalid iv length "+r.length);if("string"==typeof t&&(t=u.from(t)),t.length!==i.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===i.type?new d(i.module,t,r,!0):"auth"===i.type?new c(i.module,t,r,!0):new n(i.module,t,r)}function s(e,t){var r=f[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=p(t,!1,r.key,r.iv);return a(e,n.key,n.iv)}var c=r(129),u=r(3).Buffer,f=r(81),d=r(130),l=r(25),h=r(55),p=r(54);r(1)(n,l),n.prototype._update=function(e){this._cache.add(e);for(var t,r,n=[];t=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,t),n.push(r);return u.concat(n)},n.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return o(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},n.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},i.prototype.add=function(e){this.cache=u.concat([this.cache,e])},i.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},i.prototype.flush=function(){if(this.cache.length)return this.cache},t.createDecipher=s,t.createDecipheriv=a},function(e,t,r){"use strict";(function(t){function n(e){i.call(this);var r,n=e.mode.toLowerCase(),o=s[n];r=e.decrypt?"decrypt":"encrypt";var a=e.key;"des-ede"!==n&&"des-ede-cbc"!==n||(a=t.concat([a,a.slice(0,8)]));var c=e.iv;this._des=o.create({key:a,iv:c,type:r})}var i=r(25),o=r(82),a=r(1),s={"des-ede3-cbc":o.CBC.instantiate(o.EDE),"des-ede3":o.EDE,"des-ede-cbc":o.CBC.instantiate(o.EDE),"des-ede":o.EDE,"des-cbc":o.CBC.instantiate(o.DES),"des-ecb":o.DES};s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],e.exports=n,a(n,i),n.prototype._update=function(e){return new t(this._des.update(e))},n.prototype._final=function(){return new t(this._des.final())}}).call(t,r(4).Buffer)},function(e,t,r){"use strict";t.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},t.writeUInt32BE=function(e,t,r){e[0+r]=t>>>24,e[1+r]=t>>>16&255,e[2+r]=t>>>8&255,e[3+r]=255&t},t.ip=function(e,t,r,n){for(var i=0,o=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)i<<=1,i|=t>>>s+a&1;for(var s=0;s<=24;s+=8)i<<=1,i|=e>>>s+a&1}for(var a=6;a>=0;a-=2){for(var s=1;s<=25;s+=8)o<<=1,o|=t>>>s+a&1;for(var s=1;s<=25;s+=8)o<<=1,o|=e>>>s+a&1}r[n+0]=i>>>0,r[n+1]=o>>>0},t.rip=function(e,t,r,n){for(var i=0,o=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)i<<=1,i|=t>>>s+a&1,i<<=1,i|=e>>>s+a&1;for(var a=4;a<8;a++)for(var s=24;s>=0;s-=8)o<<=1,o|=t>>>s+a&1,o<<=1,o|=e>>>s+a&1;r[n+0]=i>>>0,r[n+1]=o>>>0},t.pc1=function(e,t,r,n){for(var i=0,o=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1;for(var s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1}for(var s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1;for(var a=1;a<=3;a++){for(var s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;for(var s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1}for(var s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1;r[n+0]=i>>>0,r[n+1]=o>>>0},t.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(e,t,r,i){for(var o=0,a=0,s=n.length>>>1,c=0;c<s;c++)o<<=1,o|=e>>>n[c]&1;for(var c=s;c<n.length;c++)a<<=1,a|=t>>>n[c]&1;r[i+0]=o>>>0,r[i+1]=a>>>0},t.expand=function(e,t,r){var n=0,i=0;n=(1&e)<<5|e>>>27;for(var o=23;o>=15;o-=4)n<<=6,n|=e>>>o&63;for(var o=11;o>=3;o-=4)i|=e>>>o&63,i<<=6;i|=(31&e)<<1|e>>>31,t[r+0]=n>>>0,t[r+1]=i>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(e,t){for(var r=0,n=0;n<4;n++){var o=e>>>18-6*n&63,a=i[64*n+o];r<<=4,r|=a}for(var n=0;n<4;n++){var o=t>>>18-6*n&63,a=i[256+64*n+o];r<<=4,r|=a}return r>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(e){for(var t=0,r=0;r<o.length;r++)t<<=1,t|=e>>>o[r]&1;return t>>>0},t.padSplit=function(e,t,r){for(var n=e.toString(2);n.length<t;)n="0"+n;for(var i=[],o=0;o<t;o+=r)i.push(n.slice(o,o+r));return i.join(" ")}},function(e,t,r){"use strict";function n(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}var i=r(15);e.exports=n,n.prototype._init=function(){},n.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},n.prototype._buffer=function(e,t){for(var r=Math.min(this.buffer.length-this.bufferOff,e.length-t),n=0;n<r;n++)this.buffer[this.bufferOff+n]=e[t+n];return this.bufferOff+=r,r},n.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},n.prototype._updateEncrypt=function(e){var t=0,r=0,n=(this.bufferOff+e.length)/this.blockSize|0,i=new Array(n*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(i,r)));for(var o=e.length-(e.length-t)%this.blockSize;t<o;t+=this.blockSize)this._update(e,t,i,r),r+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return i},n.prototype._updateDecrypt=function(e){for(var t=0,r=0,n=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,i=new Array(n*this.blockSize);n>0;n--)t+=this._buffer(e,t),r+=this._flushBuffer(i,r);return t+=this._buffer(e,t),i},n.prototype.final=function(e){var t;e&&(t=this.update(e));var r;return r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(r):r},n.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},n.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},n.prototype._unpad=function(e){return e},n.prototype._finalDecrypt=function(){i.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},function(e,t,r){"use strict";function n(){this.tmp=new Array(2),this.keys=null}function i(e){u.call(this,e);var t=new n;this._desState=t,this.deriveKeys(t,e.key)}var o=r(15),a=r(1),s=r(82),c=s.utils,u=s.Cipher;a(i,u),e.exports=i,i.create=function(e){return new i(e)};var f=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];i.prototype.deriveKeys=function(e,t){e.keys=new Array(32),o.equal(t.length,this.blockSize,"Invalid key length");var r=c.readUInt32BE(t,0),n=c.readUInt32BE(t,4);c.pc1(r,n,e.tmp,0),r=e.tmp[0],n=e.tmp[1];for(var i=0;i<e.keys.length;i+=2){var a=f[i>>>1];r=c.r28shl(r,a),n=c.r28shl(n,a),c.pc2(r,n,e.keys,i)}},i.prototype._update=function(e,t,r,n){var i=this._desState,o=c.readUInt32BE(e,t),a=c.readUInt32BE(e,t+4);c.ip(o,a,i.tmp,0),o=i.tmp[0],a=i.tmp[1],"encrypt"===this.type?this._encrypt(i,o,a,i.tmp,0):this._decrypt(i,o,a,i.tmp,0),o=i.tmp[0],a=i.tmp[1],c.writeUInt32BE(r,o,n),c.writeUInt32BE(r,a,n+4)},i.prototype._pad=function(e,t){for(var r=e.length-t,n=t;n<e.length;n++)e[n]=r;return!0},i.prototype._unpad=function(e){for(var t=e[e.length-1],r=e.length-t;r<e.length;r++)o.equal(e[r],t);return e.slice(0,e.length-t)},i.prototype._encrypt=function(e,t,r,n,i){for(var o=t,a=r,s=0;s<e.keys.length;s+=2){var u=e.keys[s],f=e.keys[s+1];c.expand(a,e.tmp,0),u^=e.tmp[0],f^=e.tmp[1];var d=c.substitute(u,f),l=c.permute(d),h=a;a=(o^l)>>>0,o=h}c.rip(a,o,n,i)},i.prototype._decrypt=function(e,t,r,n,i){for(var o=r,a=t,s=e.keys.length-2;s>=0;s-=2){var u=e.keys[s],f=e.keys[s+1];c.expand(o,e.tmp,0),u^=e.tmp[0],f^=e.tmp[1];var d=c.substitute(u,f),l=c.permute(d),h=o;o=(a^l)>>>0,a=h}c.rip(o,a,n,i)}},function(e,t,r){"use strict";function n(e){o.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}function i(e){function t(t){e.call(this,t),this._cbcInit()}a(t,e);for(var r=Object.keys(s),n=0;n<r.length;n++){var i=r[n];t.prototype[i]=s[i]}return t.create=function(e){return new t(e)},t}var o=r(15),a=r(1),s={};t.instantiate=i,s._cbcInit=function(){var e=new n(this.options.iv);this._cbcState=e},s._update=function(e,t,r,n){var i=this._cbcState,o=this.constructor.super_.prototype,a=i.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)a[s]^=e[t+s];o._update.call(this,a,0,r,n);for(var s=0;s<this.blockSize;s++)a[s]=r[n+s]}else{o._update.call(this,e,t,r,n);for(var s=0;s<this.blockSize;s++)r[n+s]^=a[s];for(var s=0;s<this.blockSize;s++)a[s]=e[t+s]}}},function(e,t,r){"use strict";function n(e,t){o.equal(t.length,24,"Invalid key length");var r=t.slice(0,8),n=t.slice(8,16),i=t.slice(16,24);this.ciphers="encrypt"===e?[u.create({type:"encrypt",key:r}),u.create({type:"decrypt",key:n}),u.create({type:"encrypt",key:i})]:[u.create({type:"decrypt",key:i}),u.create({type:"encrypt",key:n}),u.create({type:"decrypt",key:r})]}function i(e){c.call(this,e);var t=new n(this.type,this.options.key);this._edeState=t}var o=r(15),a=r(1),s=r(82),c=s.Cipher,u=s.DES;a(i,c),e.exports=i,i.create=function(e){return new i(e)},i.prototype._update=function(e,t,r,n){var i=this._edeState;i.ciphers[0]._update(e,t,r,n),i.ciphers[1]._update(r,n,r,n),i.ciphers[2]._update(r,n,r,n)},i.prototype._pad=u.prototype._pad,i.prototype._unpad=u.prototype._unpad},function(e,t,r){"use strict";t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},function(e,t,r){"use strict";(function(e){function n(t){var r=new e(a[t].prime,"hex"),n=new e(a[t].gen,"hex");return new s(r,n)}function i(t,r,n,a){return e.isBuffer(r)||void 0===c[r]?i(t,"binary",r,n):(r=r||"binary",a=a||"binary",n=n||new e([2]),e.isBuffer(n)||(n=new e(n,a)),"number"==typeof t?new s(o(t,n),n,!0):(e.isBuffer(t)||(t=new e(t,r)),new s(t,n,!0)))}var o=r(131),a=r(286),s=r(287),c={binary:!0,hex:!0,base64:!0};t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=n,t.createDiffieHellman=t.DiffieHellman=i}).call(t,r(4).Buffer)},function(e,t){},function(e,t){},function(e,t){e.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},function(e,t,r){"use strict";(function(t){function n(e,r){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),this._pub=new c(e),this}function i(e,r){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),this._priv=new c(e),this}function o(e,t){var r=t.toString("hex"),n=[r,e.toString(16)].join("_");if(n in b)return b[n];var i=0;if(e.isEven()||!m.simpleSieve||!m.fermatTest(e)||!f.test(e))return i+=1,i+="02"===r||"05"===r?8:4,b[n]=i,i;f.test(e.shrn(1))||(i+=2);var o;switch(r){case"02":e.mod(d).cmp(l)&&(i+=8);break;case"05":o=e.mod(h),o.cmp(p)&&o.cmp(_)&&(i+=8);break;default:i+=4}return b[n]=i,i}function a(e,t,r){this.setGenerator(t),this.__prime=new c(e),this._prime=c.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=n,this.setPrivateKey=i):this._primeCode=8}function s(e,r){var n=new t(e.toArray());return r?n.toString(r):n}var c=r(5),u=r(132),f=new u,d=new c(24),l=new c(11),h=new c(10),p=new c(3),_=new c(7),m=r(131),v=r(33);e.exports=a;var b={};Object.defineProperty(a.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=o(this.__prime,this.__gen)),this._primeCode}}),a.prototype.generateKeys=function(){return this._priv||(this._priv=new c(v(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},a.prototype.computeSecret=function(e){e=new c(e),e=e.toRed(this._prime);var r=e.redPow(this._priv).fromRed(),n=new t(r.toArray()),i=this.getPrime();if(n.length<i.length){var o=new t(i.length-n.length);o.fill(0),n=t.concat([o,n])}return n},a.prototype.getPublicKey=function(e){return s(this._pub,e)},a.prototype.getPrivateKey=function(e){return s(this._priv,e)},a.prototype.getPrime=function(e){return s(this.__prime,e)},a.prototype.getGenerator=function(e){return s(this._gen,e)},a.prototype.setGenerator=function(e,r){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),this.__gen=e,this._gen=new c(e),this}}).call(t,r(4).Buffer)},function(e,t,r){"use strict";(function(t){function n(e){c.Writable.call(this);var t=l[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=s(t.hash),this._tag=t.id,this._signType=t.sign}function i(e){c.Writable.call(this);var t=l[e];if(!t)throw new Error("Unknown message digest");this._hash=s(t.hash),this._tag=t.id,this._signType=t.sign}function o(e){return new n(e)}function a(e){return new i(e)}var s=r(44),c=r(52),u=r(1),f=r(289),d=r(325),l=r(121);Object.keys(l).forEach(function(e){l[e].id=new t(l[e].id,"hex"),l[e.toLowerCase()]=l[e]}),u(n,c.Writable),n.prototype._write=function(e,t,r){this._hash.update(e),r()},n.prototype.update=function(e,r){return"string"==typeof e&&(e=new t(e,r)),this._hash.update(e),this},n.prototype.sign=function(e,t){this.end();var r=this._hash.digest(),n=f(r,e,this._hashType,this._signType,this._tag);return t?n.toString(t):n},u(i,c.Writable),i.prototype._write=function(e,t,r){this._hash.update(e),r()},i.prototype.update=function(e,r){return"string"==typeof e&&(e=new t(e,r)),this._hash.update(e),this},i.prototype.verify=function(e,r,n){"string"==typeof r&&(r=new t(r,n)),this.end();var i=this._hash.digest();return d(r,i,e,this._signType,this._tag)},e.exports={Sign:o,Verify:a,createSign:o,createVerify:a}}).call(t,r(4).Buffer)},function(e,t,r){"use strict";(function(t){function n(e,r,n,a,s){var c=m(r);if(c.curve){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw new Error("wrong private key type");return i(e,c)}if("dsa"===c.type){if("dsa"!==a)throw new Error("wrong private key type");return o(e,c,n)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw new Error("wrong private key type");e=t.concat([s,e]);for(var u=c.modulus.byteLength(),f=[0,1];e.length+f.length+1<u;)f.push(255);f.push(0);for(var d=-1;++d<e.length;)f.push(e[d]);return h(f,c)}function i(e,r){var n=v[r.curve.join(".")];if(!n)throw new Error("unknown curve "+r.curve.join("."));var i=new p(n),o=i.keyFromPrivate(r.privateKey),a=o.sign(e);return new t(a.toDER())}function o(e,t,r){for(var n,i=t.params.priv_key,o=t.params.p,u=t.params.q,l=t.params.g,h=new _(0),p=c(e,u).mod(u),m=!1,v=s(i,u,e,r);!1===m;)n=f(u,v,r),h=d(l,n,o,u),m=n.invm(u).imul(p.add(i.mul(h))).mod(u),0===m.cmpn(0)&&(m=!1,h=new _(0));return a(h,m)}function a(e,r){e=e.toArray(),r=r.toArray(),128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r));var n=e.length+r.length+4,i=[48,n,2,e.length];return i=i.concat(e,[2,r.length],r),new t(i)}function s(e,r,n,i){if(e=new t(e.toArray()),e.length<r.byteLength()){var o=new t(r.byteLength()-e.length);o.fill(0),e=t.concat([o,e])}var a=n.length,s=u(n,r),c=new t(a);c.fill(1);var f=new t(a);return f.fill(0),f=l(i,f).update(c).update(new t([0])).update(e).update(s).digest(),c=l(i,f).update(c).digest(),f=l(i,f).update(c).update(new t([1])).update(e).update(s).digest(),c=l(i,f).update(c).digest(),{k:f,v:c}}function c(e,t){var r=new _(e),n=(e.length<<3)-t.bitLength();return n>0&&r.ishrn(n),r}function u(e,r){e=c(e,r),e=e.mod(r);var n=new t(e.toArray());if(n.length<r.byteLength()){var i=new t(r.byteLength()-n.length);i.fill(0),n=t.concat([i,n])}return n}function f(e,r,n){var i,o;do{for(i=new t(0);8*i.length<e.bitLength();)r.v=l(n,r.k).update(r.v).digest(),i=t.concat([i,r.v]);o=c(i,e),r.k=l(n,r.k).update(r.v).update(new t([0])).digest(),r.v=l(n,r.k).update(r.v).digest()}while(-1!==o.cmp(e));return o}function d(e,t,r,n){return e.toRed(_.mont(r)).redPow(t).fromRed().mod(n)}var l=r(120),h=r(83),p=r(9).ec,_=r(5),m=r(57),v=r(142);e.exports=n,e.exports.getKey=s,e.exports.makeKey=f}).call(t,r(4).Buffer)},function(e,t){e.exports={_args:[["elliptic@6.4.0","/Users/junqi.fjq/work/H5RTCSdk"]],_from:"elliptic@6.4.0",_id:"elliptic@6.4.0",_inBundle:!1,_integrity:"sha1-ysmvh2LIWDYYcAPI3+GT5eLq5d8=",_location:"/elliptic",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"elliptic@6.4.0",name:"elliptic",escapedName:"elliptic",rawSpec:"6.4.0",saveSpec:null,fetchSpec:"6.4.0"},_requiredBy:["/browserify-sign","/create-ecdh"],_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.4.0.tgz",_spec:"6.4.0",_where:"/Users/junqi.fjq/work/H5RTCSdk",author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},dependencies:{"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0",inherits:"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},description:"EC cryptography",devDependencies:{brfs:"^1.4.3",coveralls:"^2.11.3",grunt:"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2",istanbul:"^0.4.2",jscs:"^2.9.0",jshint:"^2.6.0",mocha:"^2.1.0"},files:["lib"],homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",name:"elliptic",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts:{jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version:"6.4.0"}},function(e,t,r){"use strict";function n(e,t){for(var r=[],n=1<<t+1,i=e.clone();i.cmpn(1)>=0;){var o;if(i.isOdd()){var a=i.andln(n-1);o=a>(n>>1)-1?(n>>1)-a:a,i.isubn(o)}else o=0;r.push(o);for(var s=0!==i.cmpn(0)&&0===i.andln(n-1)?t+1:1,c=1;c<s;c++)r.push(0);i.iushrn(s)}return r}function i(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n=0,i=0;e.cmpn(-n)>0||t.cmpn(-i)>0;){var o=e.andln(3)+n&3,a=t.andln(3)+i&3;3===o&&(o=-1),3===a&&(a=-1);var s;if(0==(1&o))s=0;else{var c=e.andln(7)+n&7;s=3!==c&&5!==c||2!==a?o:-o}r[0].push(s);var u;if(0==(1&a))u=0;else{var c=t.andln(7)+i&7;u=3!==c&&5!==c||2!==o?a:-a}r[1].push(u),2*n===s+1&&(n=1-n),2*i===u+1&&(i=1-i),e.iushrn(1),t.iushrn(1)}return r}function o(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}}function a(e){return"string"==typeof e?c.toArray(e,"hex"):e}function s(e){return new u(e,"hex","le")}var c=t,u=r(5),f=r(15),d=r(134);c.assert=f,c.toArray=d.toArray,c.zero2=d.zero2,c.toHex=d.toHex,c.encode=d.encode,c.getNAF=n,c.getJSF=i,c.cachedProperty=o,c.parseBytes=a,c.intFromLE=s},function(e,t,r){"use strict";function n(e,t){this.type=e,this.p=new o(t.p,16),this.red=t.prime?o.red(t.prime):o.mont(this.p),this.zero=new o(0).toRed(this.red),this.one=new o(1).toRed(this.red),this.two=new o(2).toRed(this.red),this.n=t.n&&new o(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function i(e,t){this.curve=e,this.type=t,this.precomputed=null}var o=r(5),a=r(9),s=a.utils,c=s.getNAF,u=s.getJSF,f=s.assert;e.exports=n,n.prototype.point=function(){throw new Error("Not implemented")},n.prototype.validate=function(){throw new Error("Not implemented")},n.prototype._fixedNafMul=function(e,t){f(e.precomputed);var r=e._getDoubles(),n=c(t,1),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;for(var o=[],a=0;a<n.length;a+=r.step){for(var s=0,t=a+r.step-1;t>=a;t--)s=(s<<1)+n[t];o.push(s)}for(var u=this.jpoint(null,null,null),d=this.jpoint(null,null,null),l=i;l>0;l--){for(var a=0;a<o.length;a++){var s=o[a];s===l?d=d.mixedAdd(r.points[a]):s===-l&&(d=d.mixedAdd(r.points[a].neg()))}u=u.add(d)}return u.toP()},n.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=c(t,r),a=this.jpoint(null,null,null),s=o.length-1;s>=0;s--){for(var t=0;s>=0&&0===o[s];s--)t++;if(s>=0&&t++,a=a.dblp(t),s<0)break;var u=o[s];f(0!==u),a="affine"===e.type?u>0?a.mixedAdd(i[u-1>>1]):a.mixedAdd(i[-u-1>>1].neg()):u>0?a.add(i[u-1>>1]):a.add(i[-u-1>>1].neg())}return"affine"===e.type?a.toP():a},n.prototype._wnafMulAdd=function(e,t,r,n,i){for(var o=this._wnafT1,a=this._wnafT2,s=this._wnafT3,f=0,d=0;d<n;d++){var l=t[d],h=l._getNAFPoints(e);o[d]=h.wnd,a[d]=h.points}for(var d=n-1;d>=1;d-=2){var p=d-1,_=d;if(1===o[p]&&1===o[_]){var m=[t[p],null,null,t[_]];0===t[p].y.cmp(t[_].y)?(m[1]=t[p].add(t[_]),m[2]=t[p].toJ().mixedAdd(t[_].neg())):0===t[p].y.cmp(t[_].y.redNeg())?(m[1]=t[p].toJ().mixedAdd(t[_]),m[2]=t[p].add(t[_].neg())):(m[1]=t[p].toJ().mixedAdd(t[_]),m[2]=t[p].toJ().mixedAdd(t[_].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],b=u(r[p],r[_]);f=Math.max(b[0].length,f),s[p]=new Array(f),s[_]=new Array(f);for(var y=0;y<f;y++){var g=0|b[0][y],S=0|b[1][y];s[p][y]=v[3*(g+1)+(S+1)],s[_][y]=0,a[p]=m}}else s[p]=c(r[p],o[p]),s[_]=c(r[_],o[_]),f=Math.max(s[p].length,f),f=Math.max(s[_].length,f)}for(var w=this.jpoint(null,null,null),k=this._wnafT4,d=f;d>=0;d--){for(var E=0;d>=0;){for(var R=!0,y=0;y<n;y++)k[y]=0|s[y][d],0!==k[y]&&(R=!1);if(!R)break;E++,d--}if(d>=0&&E++,w=w.dblp(E),d<0)break;for(var y=0;y<n;y++){var l,C=k[y];0!==C&&(C>0?l=a[y][C-1>>1]:C<0&&(l=a[y][-C-1>>1].neg()),w="affine"===l.type?w.mixedAdd(l):w.add(l))}}for(var d=0;d<n;d++)a[d]=null;return i?w:w.toP()},n.BasePoint=i,i.prototype.eq=function(){throw new Error("Not implemented")},i.prototype.validate=function(){return this.curve.validate(this)},n.prototype.decodePoint=function(e,t){e=s.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r){6===e[0]?f(e[e.length-1]%2==0):7===e[0]&&f(e[e.length-1]%2==1);return this.point(e.slice(1,1+r),e.slice(1+r,1+2*r))}if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},i.prototype.encodeCompressed=function(e){return this.encode(e,!0)},i.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},i.prototype.encode=function(e,t){return s.encode(this._encode(t),e)},i.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},i.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},i.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},i.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},i.prototype._getBeta=function(){return null},i.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}},function(e,t,r){"use strict";function n(e){f.call(this,"short",e),this.a=new c(e.a,16).toRed(this.red),this.b=new c(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function i(e,t,r,n){f.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new c(t,16),this.y=new c(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function o(e,t,r,n){f.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new c(0)):(this.x=new c(t,16),this.y=new c(r,16),this.z=new c(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}var a=r(56),s=r(9),c=r(5),u=r(1),f=a.base,d=s.utils.assert;u(n,f),e.exports=n,n.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new c(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=n[0].cmp(n[1])<0?n[0]:n[1],t=t.toRed(this.red)}if(e.lambda)r=new c(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],d(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}var o;return o=e.basis?e.basis.map(function(e){return{a:new c(e.a,16),b:new c(e.b,16)}}):this._getEndoBasis(r),{beta:t,lambda:r,basis:o}}},n.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:c.mont(e),r=new c(2).toRed(t).redInvm(),n=r.redNeg(),i=new c(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},n.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,a,s,u,f,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,h=this.n.clone(),p=new c(1),_=new c(0),m=new c(0),v=new c(1),b=0;0!==l.cmpn(0);){var y=h.div(l);u=h.sub(y.mul(l)),f=m.sub(y.mul(p));var g=v.sub(y.mul(_));if(!n&&u.cmp(d)<0)t=s.neg(),r=p,n=u.neg(),i=f;else if(n&&2==++b)break;s=u,h=l,l=u,m=p,p=f,v=_,_=g}o=u.neg(),a=f;var S=n.sqr().add(i.sqr());return o.sqr().add(a.sqr()).cmp(S)>=0&&(o=t,a=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:n,b:i},{a:o,b:a}]},n.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=i.mul(r.a),s=o.mul(n.a),c=i.mul(r.b),u=o.mul(n.b);return{k1:e.sub(a).sub(s),k2:c.add(u).neg()}},n.prototype.pointFromX=function(e,t){e=new c(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},n.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},n.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),s=e[o],c=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),c=c.neg(!0)),n[2*o]=s,n[2*o+1]=c,i[2*o]=a.k1,i[2*o+1]=a.k2}for(var u=this._wnafMulAdd(1,n,i,2*o,r),f=0;f<2*o;f++)n[f]=null,i[f]=null;return u},u(i,f.BasePoint),n.prototype.point=function(e,t,r){return new i(this,e,t,r)},n.prototype.pointFromJSON=function(e,t){return i.fromJSON(this,e,t)},i.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},i.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},i.fromJSON=function(e,t,r){function n(t){return e.point(t[0],t[1],r)}"string"==typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(n))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(n))}},i},i.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},i.prototype.isInfinity=function(){return this.inf},i.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},i.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},i.prototype.getX=function(){return this.x.fromRed()},i.prototype.getY=function(){return this.y.fromRed()},i.prototype.mul=function(e){return e=new c(e,16),this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},i.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},i.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},i.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},i.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},i.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},u(o,f.BasePoint),n.prototype.jpoint=function(e,t,r){return new o(this,e,t,r)},o.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},o.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},o.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),s=n.redSub(i),c=o.redSub(a);if(0===s.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),f=u.redMul(s),d=n.redMul(u),l=c.redSqr().redIAdd(f).redISub(d).redISub(d),h=c.redMul(d.redISub(l)).redISub(o.redMul(f)),p=this.z.redMul(e.z).redMul(s);return this.curve.jpoint(l,h,p)},o.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),a=r.redSub(n),s=i.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),u=c.redMul(a),f=r.redMul(c),d=s.redSqr().redIAdd(u).redISub(f).redISub(f),l=s.redMul(f.redISub(d)).redISub(i.redMul(u)),h=this.z.redMul(a);return this.curve.jpoint(d,l,h)},o.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}for(var n=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,c=s.redSqr().redSqr(),u=a.redAdd(a),r=0;r<e;r++){var f=o.redSqr(),d=u.redSqr(),l=d.redSqr(),h=f.redAdd(f).redIAdd(f).redIAdd(n.redMul(c)),p=o.redMul(d),_=h.redSqr().redISub(p.redAdd(p)),m=p.redISub(_),v=h.redMul(m);v=v.redIAdd(v).redISub(l);var b=u.redMul(s);r+1<e&&(c=c.redMul(l)),o=_,s=b,u=v}return this.curve.jpoint(o,u.redMul(i),s)},o.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},o.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n),c=s.redSqr().redISub(a).redISub(a),u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),e=c,t=s.redMul(a.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),d=this.y.redSqr(),l=d.redSqr(),h=this.x.redAdd(d).redSqr().redISub(f).redISub(l);h=h.redIAdd(h);var p=f.redAdd(f).redIAdd(f),_=p.redSqr(),m=l.redIAdd(l);m=m.redIAdd(m),m=m.redIAdd(m),e=_.redISub(h).redISub(h),t=p.redMul(h.redISub(e)).redISub(m),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(e,t,r)},o.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=s.redSqr().redISub(a).redISub(a);e=c;var u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),t=s.redMul(a.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),d=this.y.redSqr(),l=this.x.redMul(d),h=this.x.redSub(f).redMul(this.x.redAdd(f));h=h.redAdd(h).redIAdd(h);var p=l.redIAdd(l);p=p.redIAdd(p);var _=p.redAdd(p);e=h.redSqr().redISub(_),r=this.y.redAdd(this.z).redSqr().redISub(d).redISub(f);var m=d.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m),t=h.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},o.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),a=r.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),c=t.redAdd(t);c=c.redIAdd(c);var u=c.redMul(a),f=s.redSqr().redISub(u.redAdd(u)),d=u.redISub(f),l=a.redSqr();l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var h=s.redMul(d).redISub(l),p=r.redAdd(r).redMul(n);return this.curve.jpoint(f,h,p)},o.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(n);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var s=a.redSqr(),c=n.redIAdd(n);c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var u=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(c),f=t.redMul(u);f=f.redIAdd(f),f=f.redIAdd(f);var d=this.x.redMul(s).redISub(f);d=d.redIAdd(d),d=d.redIAdd(d);var l=this.y.redMul(u.redMul(c.redISub(u)).redISub(a.redMul(s)));l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var h=this.z.redAdd(a).redSqr().redISub(r).redISub(s);return this.curve.jpoint(d,l,h)},o.prototype.mul=function(e,t){return e=new c(e,t),this.curve._wnafMul(this,e)},o.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},o.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}return!1},o.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},o.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(e,t,r){"use strict";function n(e){c.call(this,"mont",e),this.a=new a(e.a,16).toRed(this.red),this.b=new a(e.b,16).toRed(this.red),this.i4=new a(4).toRed(this.red).redInvm(),this.two=new a(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function i(e,t,r){c.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new a(t,16),this.z=new a(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}var o=r(56),a=r(5),s=r(1),c=o.base,u=r(9),f=u.utils;s(n,c),e.exports=n,n.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},s(i,c.BasePoint),n.prototype.decodePoint=function(e,t){return this.point(f.toArray(e,t),1)},n.prototype.point=function(e,t){return new i(this,e,t)},n.prototype.pointFromJSON=function(e){return i.fromJSON(this,e)},i.prototype.precompute=function(){},i.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},i.fromJSON=function(e,t){return new i(e,t[0],t[1]||e.one)},i.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},i.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},i.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),r=this.x.redSub(this.z),n=r.redSqr(),i=t.redSub(n),o=t.redMul(n),a=i.redMul(n.redAdd(this.curve.a24.redMul(i)));return this.curve.point(o,a)},i.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},i.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(r),s=i.redMul(n),c=t.z.redMul(a.redAdd(s).redSqr()),u=t.x.redMul(a.redISub(s).redSqr());return this.curve.point(c,u)},i.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=this,o=[];0!==t.cmpn(0);t.iushrn(1))o.push(t.andln(1));for(var a=o.length-1;a>=0;a--)0===o[a]?(r=r.diffAdd(n,i),n=n.dbl()):(n=r.diffAdd(n,i),r=r.dbl());return n},i.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},i.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},i.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},i.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},i.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(e,t,r){"use strict";function n(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,u.call(this,"edwards",e),this.a=new s(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new s(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new s(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),f(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function i(e,t,r,n,i){u.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new s(t,16),this.y=new s(r,16),this.z=n?new s(n,16):this.curve.one,this.t=i&&new s(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}var o=r(56),a=r(9),s=r(5),c=r(1),u=o.base,f=a.utils.assert;c(n,u),e.exports=n,n.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},n.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},n.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},n.prototype.pointFromX=function(e,t){e=new s(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=n.redMul(i.redInvm()),a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var c=a.fromRed().isOdd();return(t&&!c||!t&&c)&&(a=a.redNeg()),this.point(e,a)},n.prototype.pointFromY=function(e,t){e=new s(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.one),i=r.redMul(this.d).redAdd(this.one),o=n.redMul(i.redInvm());if(0===o.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return a.isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},n.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},c(i,u.BasePoint),n.prototype.pointFromJSON=function(e){return i.fromJSON(this,e)},n.prototype.point=function(e,t,r,n){return new i(this,e,t,r,n)},i.fromJSON=function(e,t){return new i(e,t[0],t[1],t[2])},i.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},i.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},i.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=n.redAdd(t),a=o.redSub(r),s=n.redSub(t),c=i.redMul(a),u=o.redMul(s),f=i.redMul(s),d=a.redMul(o);return this.curve.point(c,u,d,f)},i.prototype._projDbl=function(){var e,t,r,n=this.x.redAdd(this.y).redSqr(),i=this.x.redSqr(),o=this.y.redSqr();if(this.curve.twisted){var a=this.curve._mulA(i),s=a.redAdd(o);if(this.zOne)e=n.redSub(i).redSub(o).redMul(s.redSub(this.curve.two)),t=s.redMul(a.redSub(o)),r=s.redSqr().redSub(s).redSub(s);else{var c=this.z.redSqr(),u=s.redSub(c).redISub(c);e=n.redSub(i).redISub(o).redMul(u),t=s.redMul(a.redSub(o)),r=s.redMul(u)}}else{var a=i.redAdd(o),c=this.curve._mulC(this.c.redMul(this.z)).redSqr(),u=a.redSub(c).redSub(c);e=this.curve._mulC(n.redISub(a)).redMul(u),t=this.curve._mulC(a).redMul(i.redISub(o)),r=a.redMul(u)}return this.curve.point(e,t,r)},i.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},i.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),o=r.redSub(t),a=i.redSub(n),s=i.redAdd(n),c=r.redAdd(t),u=o.redMul(a),f=s.redMul(c),d=o.redMul(c),l=a.redMul(s);return this.curve.point(u,f,l,d)},i.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),o=this.x.redMul(e.x),a=this.y.redMul(e.y),s=this.curve.d.redMul(o).redMul(a),c=i.redSub(s),u=i.redAdd(s),f=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(a),d=n.redMul(c).redMul(f);return this.curve.twisted?(t=n.redMul(u).redMul(a.redSub(this.curve._mulA(o))),r=c.redMul(u)):(t=n.redMul(u).redMul(a.redSub(o)),r=this.curve._mulC(c).redMul(u)),this.curve.point(d,t,r)},i.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},i.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},i.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},i.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},i.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},i.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},i.prototype.getX=function(){return this.normalize(),this.x.fromRed()},i.prototype.getY=function(){return this.normalize(),this.y.fromRed()},i.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},i.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}return!1},i.prototype.toP=i.prototype.normalize,i.prototype.mixedAdd=i.prototype.add},function(e,t,r){"use strict";function n(e){"short"===e.type?this.curve=new s.curve.short(e):"edwards"===e.type?this.curve=new s.curve.edwards(e):this.curve=new s.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,c(this.g.validate(),"Invalid curve"),c(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function i(e,t){Object.defineProperty(o,e,{configurable:!0,enumerable:!0,get:function(){var r=new n(t);return Object.defineProperty(o,e,{configurable:!0,enumerable:!0,value:r}),r}})}var o=t,a=r(84),s=r(9),c=s.utils.assert;o.PresetCurve=n,i("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),i("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),i("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),i("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),i("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),i("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),i("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var u;try{u=r(303)}catch(e){u=void 0}i("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})},function(e,t,r){"use strict";t.sha1=r(298),t.sha224=r(299),t.sha256=r(136),t.sha384=r(300),t.sha512=r(137)},function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}var i=r(21),o=r(47),a=r(135),s=i.rotl32,c=i.sum32,u=i.sum32_5,f=a.ft_1,d=o.BlockHash,l=[1518500249,1859775393,2400959708,3395469782];i.inherits(n,d),e.exports=n,n.blockSize=512,n.outSize=160,n.hmacStrength=80,n.padLength=64,n.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=s(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],a=this.h[2],d=this.h[3],h=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),_=u(s(i,5),f(p,o,a,d),h,r[n],l[p]);h=d,d=a,a=s(o,30),o=i,i=_}this.h[0]=c(this.h[0],i),this.h[1]=c(this.h[1],o),this.h[2]=c(this.h[2],a),this.h[3]=c(this.h[3],d),this.h[4]=c(this.h[4],h)},n.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;o.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}var i=r(21),o=r(136);i.inherits(n,o),e.exports=n,n.blockSize=512,n.outSize=224,n.hmacStrength=192,n.padLength=64,n.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")}},function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;o.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}var i=r(21),o=r(137);i.inherits(n,o),e.exports=n,n.blockSize=1024,n.outSize=384,n.hmacStrength=192,n.padLength=128,n.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")}},function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function i(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function o(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function a(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}var s=r(21),c=r(47),u=s.rotl32,f=s.sum32,d=s.sum32_3,l=s.sum32_4,h=c.BlockHash;s.inherits(n,h),t.ripemd160=n,n.blockSize=512,n.outSize=160,n.hmacStrength=192,n.padLength=64,n.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],s=this.h[2],c=this.h[3],h=this.h[4],b=r,y=n,g=s,S=c,w=h,k=0;k<80;k++){var E=f(u(l(r,i(k,n,s,c),e[p[k]+t],o(k)),m[k]),h);r=h,h=c,c=u(s,10),s=n,n=E,E=f(u(l(b,i(79-k,y,g,S),e[_[k]+t],a(k)),v[k]),w),b=w,w=S,S=u(g,10),g=y,y=E}E=d(this.h[1],s,S),this.h[1]=d(this.h[2],c,w),this.h[2]=d(this.h[3],h,b),this.h[3]=d(this.h[4],r,y),this.h[4]=d(this.h[0],n,g),this.h[0]=E},n.prototype._digest=function(e){return"hex"===e?s.toHex32(this.h,"little"):s.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],_=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(e,t,r){"use strict";function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(t,r))}var i=r(21),o=r(15);e.exports=n,n.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),o(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},n.prototype.update=function(e,t){return this.inner.update(e,t),this},n.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},function(e,t,r){"use strict";e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);"string"==typeof e&&(u(s.curves.hasOwnProperty(e),"Unknown curve "+e),e=s.curves[e]),e instanceof s.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(5),a=r(305),s=r(9),c=s.utils,u=c.assert,f=r(306),d=r(307);e.exports=n,n.prototype.keyPair=function(e){return new f(this,e)},n.prototype.keyFromPrivate=function(e,t){return f.fromPrivate(this,e,t)},n.prototype.keyFromPublic=function(e,t){return f.fromPublic(this,e,t)},n.prototype.genKeyPair=function(e){e||(e={});for(var t=new a({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||s.rand(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new o(2));;){var i=new o(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},n.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},n.prototype.sign=function(e,t,r,n){"object"===(void 0===r?"undefined":i(r))&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new o(e,16));for(var s=this.n.byteLength(),c=t.getPrivate().toArray("be",s),u=e.toArray("be",s),f=new a({hash:this.hash,entropy:c,nonce:u,pers:n.pers,persEnc:n.persEnc||"utf8"}),l=this.n.sub(new o(1)),h=0;!0;h++){var p=n.k?n.k(h):new o(f.generate(this.n.byteLength()));if(p=this._truncateToN(p,!0),!(p.cmpn(1)<=0||p.cmp(l)>=0)){var _=this.g.mul(p);if(!_.isInfinity()){var m=_.getX(),v=m.umod(this.n);if(0!==v.cmpn(0)){var b=p.invm(this.n).mul(v.mul(t.getPrivate()).iadd(e));if(b=b.umod(this.n),0!==b.cmpn(0)){var y=(_.getY().isOdd()?1:0)|(0!==m.cmp(v)?2:0);return n.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),y^=1),new d({r:v,s:b,recoveryParam:y})}}}}}},n.prototype.verify=function(e,t,r,n){e=this._truncateToN(new o(e,16)),r=this.keyFromPublic(r,n),t=new d(t,"hex");var i=t.r,a=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s=a.invm(this.n),c=s.mul(e).umod(this.n),u=s.mul(i).umod(this.n);if(!this.curve._maxwellTrick){var f=this.g.mulAdd(c,r.getPublic(),u);return!f.isInfinity()&&0===f.getX().umod(this.n).cmp(i)}var f=this.g.jmulAdd(c,r.getPublic(),u);return!f.isInfinity()&&f.eqXToP(i)},n.prototype.recoverPubKey=function(e,t,r,n){u((3&r)===r,"The recovery param is more than two bits"),t=new d(t,n);var i=this.n,a=new o(e),s=t.r,c=t.s,f=1&r,l=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");s=l?this.curve.pointFromX(s.add(this.curve.n),f):this.curve.pointFromX(s,f);var h=t.r.invm(i),p=i.sub(a).mul(h).umod(i),_=c.mul(h).umod(i);return this.g.mulAdd(p,s,_)},n.prototype.getKeyRecoveryParam=function(e,t,r,n){if(t=new d(t,n),null!==t.recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")}},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=o.toArray(e.entropy,e.entropyEnc||"hex"),r=o.toArray(e.nonce,e.nonceEnc||"hex"),i=o.toArray(e.pers,e.persEnc||"hex");a(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,i)}var i=r(84),o=r(134),a=r(15);e.exports=n,n.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},n.prototype._hmac=function(){return new i.hmac(this.hash,this.K)},n.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},n.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=o.toArray(e,t),r=o.toArray(r,n),a(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},n.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=o.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var a=i.slice(0,e);return this._update(r),this._reseed++,o.encode(a,t)}},function(e,t,r){"use strict";function n(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var i=r(5),o=r(9),a=o.utils,s=a.assert;e.exports=n,n.fromPublic=function(e,t,r){return t instanceof n?t:new n(e,{pub:t,pubEnc:r})},n.fromPrivate=function(e,t,r){return t instanceof n?t:new n(e,{priv:t,privEnc:r})},n.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},n.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},n.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},n.prototype._importPrivate=function(e,t){this.priv=new i(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},n.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?s(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||s(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},n.prototype.derive=function(e){return e.mul(this.priv).getX()},n.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},n.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(e,t,r){"use strict";function n(e,t){if(e instanceof n)return e;this._importDER(e,t)||(d(e.r&&e.s,"Signature without r or s"),this.r=new c(e.r,16),this.s=new c(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function i(){this.place=0}function o(e,t){var r=e[t.place++];if(!(128&r))return r;for(var n=15&r,i=0,o=0,a=t.place;o<n;o++,a++)i<<=8,i|=e[a];return t.place=a,i}function a(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function s(e,t){if(t<128)return void e.push(t);var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}var c=r(5),u=r(9),f=u.utils,d=f.assert;e.exports=n,n.prototype._importDER=function(e,t){e=f.toArray(e,t);var r=new i;if(48!==e[r.place++])return!1;if(o(e,r)+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var n=o(e,r),a=e.slice(r.place,n+r.place);if(r.place+=n,2!==e[r.place++])return!1;var s=o(e,r);if(e.length!==s+r.place)return!1;var u=e.slice(r.place,s+r.place);return 0===a[0]&&128&a[1]&&(a=a.slice(1)),0===u[0]&&128&u[1]&&(u=u.slice(1)),this.r=new c(a),this.s=new c(u),this.recoveryParam=null,!0},n.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=a(t),r=a(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];s(n,t.length),n=n.concat(t),n.push(2),s(n,r.length);var i=n.concat(r),o=[48];return s(o,i.length),o=o.concat(i),f.encode(o,e)}},function(e,t,r){"use strict";function n(e){if(s("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof n))return new n(e);var e=o.curves[e].curve;this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=i.sha512}var i=r(84),o=r(9),a=o.utils,s=a.assert,c=a.parseBytes,u=r(309),f=r(310);e.exports=n,n.prototype.sign=function(e,t){e=c(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),o=this.encodePoint(i),a=this.hashInt(o,r.pubBytes(),e).mul(r.priv()),s=n.add(a).umod(this.curve.n);return this.makeSignature({R:i,S:s,Rencoded:o})},n.prototype.verify=function(e,t,r){e=c(e),t=this.makeSignature(t);var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),o=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(o)},n.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return a.intFromLE(e.digest()).umod(this.curve.n)},n.prototype.keyFromPublic=function(e){return u.fromPublic(this,e)},n.prototype.keyFromSecret=function(e){return u.fromSecret(this,e)},n.prototype.makeSignature=function(e){return e instanceof f?e:new f(this,e)},n.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},n.prototype.decodePoint=function(e){e=a.parseBytes(e);var t=e.length-1,r=e.slice(0,t).concat(-129&e[t]),n=0!=(128&e[t]),i=a.intFromLE(r);return this.curve.pointFromY(i,n)},n.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},n.prototype.decodeInt=function(e){return a.intFromLE(e)},n.prototype.isPoint=function(e){return e instanceof this.pointClass}},function(e,t,r){"use strict";function n(e,t){this.eddsa=e,this._secret=s(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=s(t.pub)}var i=r(9),o=i.utils,a=o.assert,s=o.parseBytes,c=o.cachedProperty;n.fromPublic=function(e,t){return t instanceof n?t:new n(e,{pub:t})},n.fromSecret=function(e,t){return t instanceof n?t:new n(e,{secret:t})},n.prototype.secret=function(){return this._secret},c(n,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),c(n,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),c(n,"privBytes",function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n}),c(n,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),c(n,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),c(n,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),n.prototype.sign=function(e){return a(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},n.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},n.prototype.getSecret=function(e){return a(this._secret,"KeyPair is public only"),o.encode(this.secret(),e)},n.prototype.getPublic=function(e){return o.encode(this.pubBytes(),e)},e.exports=n},function(e,t,r){"use strict";function n(e,t){this.eddsa=e,"object"!==(void 0===t?"undefined":i(t))&&(t=f(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),c(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof o&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(5),a=r(9),s=a.utils,c=s.assert,u=s.cachedProperty,f=s.parseBytes;u(n,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),u(n,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),u(n,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),u(n,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),n.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},n.prototype.toHex=function(){return s.encode(this.toBytes(),"hex").toUpperCase()},e.exports=n},function(e,t,r){"use strict";var n=r(48);t.certificate=r(322);var i=n.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});t.RSAPrivateKey=i;var o=n.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});t.RSAPublicKey=o;var a=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())});t.PublicKey=a;var s=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),c=n.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())});t.PrivateKey=c;var u=n.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});t.EncryptedPrivateKey=u;var f=n.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});t.DSAPrivateKey=f,t.DSAparam=n.define("DSAparam",function(){this.int()});var d=n.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(l),this.key("publicKey").optional().explicit(1).bitstr())});t.ECPrivateKey=d;var l=n.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});t.signature=n.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},function(e,t,r){"use strict";function n(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}var i=r(48),o=r(1);t.define=function(e,t){return new n(e,t)},n.prototype._createNamed=function(e){var t;try{t=r(313).runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(e){t=function(e){this._initNamed(e)}}return o(t,e),t.prototype._initNamed=function(t){e.call(this,t)},new t(this)},n.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(i.decoders[e])),this.decoders[e]},n.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},n.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(i.encoders[e])),this.encoders[e]},n.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)}},function(module,exports,__webpack_require__){"use strict";function Context(){}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},indexOf=__webpack_require__(314),Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,n=r.eval,i=r.execScript;!n&&i&&(i.call(r,"null"),n=r.eval),forEach(Object_keys(e),function(t){r[t]=e[t]}),forEach(globals,function(t){e[t]&&(r[t]=e[t])});var o=Object_keys(r),a=n.call(r,this.code);return forEach(Object_keys(r),function(t){(t in e||-1===indexOf(o,t))&&(e[t]=r[t])}),forEach(globals,function(t){t in e||defineProp(e,t,r[t])}),document.body.removeChild(t),a},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),r=this.runInContext(t);return forEach(Object_keys(t),function(r){e[r]=t[r]}),r},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}}),exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"===(void 0===e?"undefined":_typeof(e))&&forEach(Object_keys(e),function(r){t[r]=e[r]}),t}},function(e,t,r){"use strict";var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,r){"use strict";function n(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function i(e,t){this.path=e,this.rethrow(t)}var o=r(1);t.Reporter=n,n.prototype.isError=function(e){return e instanceof i},n.prototype.save=function(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},n.prototype.restore=function(e){var t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},n.prototype.enterKey=function(e){return this._reporterState.path.push(e)},n.prototype.exitKey=function(e){var t=this._reporterState;t.path=t.path.slice(0,e-1)},n.prototype.leaveKey=function(e,t,r){var n=this._reporterState;this.exitKey(e),null!==n.obj&&(n.obj[t]=r)},n.prototype.path=function(){return this._reporterState.path.join("/")},n.prototype.enterObject=function(){var e=this._reporterState,t=e.obj;return e.obj={},t},n.prototype.leaveObject=function(e){var t=this._reporterState,r=t.obj;return t.obj=e,r},n.prototype.error=function(e){var t,r=this._reporterState,n=e instanceof i;if(t=n?e:new i(r.path.map(function(e){return"["+JSON.stringify(e)+"]"}).join(""),e.message||e,e.stack),!r.options.partial)throw t;return n||r.errors.push(t),t},n.prototype.wrapResult=function(e){var t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},o(i,Error),i.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,i),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},function(e,t,r){"use strict";function n(e,t){var r={};this._baseState=r,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(49).Reporter,a=r(49).EncoderBuffer,s=r(49).DecoderBuffer,c=r(15),u=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],f=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(u),d=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];e.exports=n;var l=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];n.prototype.clone=function(){var e=this._baseState,t={};l.forEach(function(r){t[r]=e[r]});var r=new this.constructor(t.parent);return r._baseState=t,r},n.prototype._wrap=function(){var e=this._baseState;f.forEach(function(t){this[t]=function(){var r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}},this)},n.prototype._init=function(e){var t=this._baseState;c(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),c.equal(t.children.length,1,"Root node can have only one child")},n.prototype._useArgs=function(e){var t=this._baseState,r=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==r.length&&(c(null===t.children),t.children=r,r.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(c(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!==(void 0===e?"undefined":i(e))||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach(function(r){r==(0|r)&&(r|=0);var n=e[r];t[n]=r}),t}))},d.forEach(function(e){n.prototype[e]=function(){var t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}}),u.forEach(function(e){n.prototype[e]=function(){var t=this._baseState,r=Array.prototype.slice.call(arguments);return c(null===t.tag),t.tag=e,this._useArgs(r),this}}),n.prototype.use=function(e){c(e);var t=this._baseState;return c(null===t.use),t.use=e,this},n.prototype.optional=function(){return this._baseState.optional=!0,this},n.prototype.def=function(e){var t=this._baseState;return c(null===t.default),t.default=e,t.optional=!0,this},n.prototype.explicit=function(e){var t=this._baseState;return c(null===t.explicit&&null===t.implicit),t.explicit=e,this},n.prototype.implicit=function(e){var t=this._baseState;return c(null===t.explicit&&null===t.implicit),t.implicit=e,this},n.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},n.prototype.key=function(e){var t=this._baseState;return c(null===t.key),t.key=e,this},n.prototype.any=function(){return this._baseState.any=!0,this},n.prototype.choice=function(e){var t=this._baseState;return c(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},n.prototype.contains=function(e){var t=this._baseState;return c(null===t.use),t.contains=e,this},n.prototype._decode=function(e,t){var r=this._baseState;if(null===r.parent)return e.wrapResult(r.children[0]._decode(e,t));var n=r.default,i=!0,o=null;if(null!==r.key&&(o=e.enterKey(r.key)),r.optional){var a=null;if(null!==r.explicit?a=r.explicit:null!==r.implicit?a=r.implicit:null!==r.tag&&(a=r.tag),null!==a||r.any){if(i=this._peekTag(e,a,r.any),e.isError(i))return i}else{var c=e.save();try{null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t),i=!0}catch(e){i=!1}e.restore(c)}}var u;if(r.obj&&i&&(u=e.enterObject()),i){if(null!==r.explicit){var f=this._decodeTag(e,r.explicit);if(e.isError(f))return f;e=f}var d=e.offset;if(null===r.use&&null===r.choice){if(r.any)var c=e.save();var l=this._decodeTag(e,null!==r.implicit?r.implicit:r.tag,r.any);if(e.isError(l))return l;r.any?n=e.raw(c):e=l}if(t&&t.track&&null!==r.tag&&t.track(e.path(),d,e.length,"tagged"),t&&t.track&&null!==r.tag&&t.track(e.path(),e.offset,e.length,"content"),n=r.any?n:null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t),e.isError(n))return n;if(r.any||null!==r.choice||null===r.children||r.children.forEach(function(r){r._decode(e,t)}),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){var h=new s(n);n=this._getUse(r.contains,e._reporterState.obj)._decode(h,t)}}return r.obj&&i&&(n=e.leaveObject(u)),null===r.key||null===n&&!0!==i?null!==o&&e.exitKey(o):e.leaveKey(o,r.key,n),n},n.prototype._decodeGeneric=function(e,t,r){var n=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,n.args[0],r):/str$/.test(e)?this._decodeStr(t,e,r):"objid"===e&&n.args?this._decodeObjid(t,n.args[0],n.args[1],r):"objid"===e?this._decodeObjid(t,null,null,r):"gentime"===e||"utctime"===e?this._decodeTime(t,e,r):"null_"===e?this._decodeNull(t,r):"bool"===e?this._decodeBool(t,r):"objDesc"===e?this._decodeStr(t,e,r):"int"===e||"enum"===e?this._decodeInt(t,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,t._reporterState.obj)._decode(t,r):t.error("unknown tag: "+e)},n.prototype._getUse=function(e,t){var r=this._baseState;return r.useDecoder=this._use(e,t),c(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},n.prototype._decodeChoice=function(e,t){var r=this._baseState,n=null,i=!1;return Object.keys(r.choice).some(function(o){var a=e.save(),s=r.choice[o];try{var c=s._decode(e,t);if(e.isError(c))return!1;n={type:o,value:c},i=!0}catch(t){return e.restore(a),!1}return!0},this),i?n:e.error("Choice not matched")},n.prototype._createEncoderBuffer=function(e){return new a(e,this.reporter)},n.prototype._encode=function(e,t,r){var n=this._baseState;if(null===n.default||n.default!==e){var i=this._encodeValue(e,t,r);if(void 0!==i&&!this._skipDefault(i,t,r))return i}},n.prototype._encodeValue=function(e,t,r){var n=this._baseState;if(null===n.parent)return n.children[0]._encode(e,t||new o);var a=null;if(this.reporter=t,n.optional&&void 0===e){if(null===n.default)return;e=n.default}var s=null,c=!1;if(n.any)a=this._createEncoderBuffer(e);else if(n.choice)a=this._encodeChoice(e,t);else if(n.contains)s=this._getUse(n.contains,r)._encode(e,t),c=!0;else if(n.children)s=n.children.map(function(r){if("null_"===r._baseState.tag)return r._encode(null,t,e);if(null===r._baseState.key)return t.error("Child should have a key");var n=t.enterKey(r._baseState.key);if("object"!==(void 0===e?"undefined":i(e)))return t.error("Child expected, but input is not object");var o=r._encode(e[r._baseState.key],t,e);return t.leaveKey(n),o},this).filter(function(e){return e}),s=this._createEncoderBuffer(s);else if("seqof"===n.tag||"setof"===n.tag){if(!n.args||1!==n.args.length)return t.error("Too many args for : "+n.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");var u=this.clone();u._baseState.implicit=null,s=this._createEncoderBuffer(e.map(function(r){var n=this._baseState;return this._getUse(n.args[0],e)._encode(r,t)},u))}else null!==n.use?a=this._getUse(n.use,r)._encode(e,t):(s=this._encodePrimitive(n.tag,e),c=!0);var a;if(!n.any&&null===n.choice){var f=null!==n.implicit?n.implicit:n.tag,d=null===n.implicit?"universal":"context";null===f?null===n.use&&t.error("Tag could be omitted only for .use()"):null===n.use&&(a=this._encodeComposite(f,c,d,s))}return null!==n.explicit&&(a=this._encodeComposite(n.explicit,!1,"context",a)),a},n.prototype._encodeChoice=function(e,t){var r=this._baseState,n=r.choice[e.type];return n||c(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(e.value,t)},n.prototype._encodePrimitive=function(e,t){var r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},n.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},n.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(e)}},function(e,t,r){"use strict";var n=r(139);t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=n._reverse(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=n._reverse(t.tag)},function(e,t,r){"use strict";var n=t;n.der=r(140),n.pem=r(319)},function(e,t,r){"use strict";function n(e){a.call(this,e),this.enc="pem"}var i=r(1),o=r(4).Buffer,a=r(140);i(n,a),e.exports=n,n.prototype.decode=function(e,t){for(var r=e.toString().split(/[\r\n]+/g),n=t.label.toUpperCase(),i=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,c=-1,u=0;u<r.length;u++){var f=r[u].match(i);if(null!==f&&f[2]===n){if(-1!==s){if("END"!==f[1])break;c=u;break}if("BEGIN"!==f[1])break;s=u}}if(-1===s||-1===c)throw new Error("PEM section not found for: "+n);var d=r.slice(s+1,c).join("");d.replace(/[^a-z0-9\+\/=]+/gi,"");var l=new o(d,"base64");return a.prototype.decode.call(this,l,t)}},function(e,t,r){"use strict";var n=t;n.der=r(141),n.pem=r(321)},function(e,t,r){"use strict";function n(e){o.call(this,e),this.enc="pem"}var i=r(1),o=r(141);i(n,o),e.exports=n,n.prototype.encode=function(e,t){for(var r=o.prototype.encode.call(this,e),n=r.toString("base64"),i=["-----BEGIN "+t.label+"-----"],a=0;a<n.length;a+=64)i.push(n.slice(a,a+64));return i.push("-----END "+t.label+"-----"),i.join("\n")}},function(e,t,r){"use strict";var n=r(48),i=n.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),o=n.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),a=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional())}),s=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}),c=n.define("RelativeDistinguishedName",function(){this.setof(o)}),u=n.define("RDNSequence",function(){this.seqof(c)}),f=n.define("Name",function(){this.choice({rdnSequence:this.use(u)})}),d=n.define("Validity",function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))}),l=n.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),h=n.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(f),this.key("validity").use(d),this.key("subject").use(f),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(l).optional())}),p=n.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(h),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())});e.exports=p},function(e,t){e.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},function(e,t,r){"use strict";(function(t){var n=/Proc-Type: 4,ENCRYPTED\n\r?DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\n\r?\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?/m,i=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----\n/m,o=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?-----END \1-----$/m,a=r(54),s=r(80);e.exports=function(e,r){var c,u=e.toString(),f=u.match(n);if(f){var d="aes"+f[1],l=new t(f[2],"hex"),h=new t(f[3].replace(/\r?\n/g,""),"base64"),p=a(r,l.slice(0,8),parseInt(f[1],10)).key,_=[],m=s.createDecipheriv(d,p,l);_.push(m.update(h)),_.push(m.final()),c=t.concat(_)}else{var v=u.match(o);c=new t(v[2].replace(/\r?\n/g,""),"base64")}return{tag:u.match(i)[1],data:c}}}).call(t,r(4).Buffer)},function(e,t,r){"use strict";(function(t){function n(e,r,n,a,c){var f=u(n);if("ec"===f.type){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw new Error("wrong public key type");return i(e,r,f)}if("dsa"===f.type){if("dsa"!==a)throw new Error("wrong public key type");return o(e,r,f)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw new Error("wrong public key type");r=t.concat([c,r]);for(var d=f.modulus.byteLength(),l=[1],h=0;r.length+l.length+2<d;)l.push(255),h++;l.push(0);for(var p=-1;++p<r.length;)l.push(r[p]);l=new t(l);var _=s.mont(f.modulus);e=new s(e).toRed(_),e=e.redPow(new s(f.publicExponent)),e=new t(e.fromRed().toArray());var m=h<8?1:0;for(d=Math.min(e.length,l.length),e.length!==l.length&&(m=1),p=-1;++p<d;)m|=e[p]^l[p];return 0===m}function i(e,t,r){var n=f[r.data.algorithm.curve.join(".")];if(!n)throw new Error("unknown curve "+r.data.algorithm.curve.join("."));var i=new c(n),o=r.data.subjectPrivateKey.data;return i.verify(t,e,o)}function o(e,t,r){var n=r.data.p,i=r.data.q,o=r.data.g,c=r.data.pub_key,f=u.signature.decode(e,"der"),d=f.s,l=f.r;a(d,i),a(l,i);var h=s.mont(n),p=d.invm(i);return 0===o.toRed(h).redPow(new s(t).mul(p).mod(i)).fromRed().mul(c.toRed(h).redPow(l.mul(p).mod(i)).fromRed()).mod(n).mod(i).cmp(l)}function a(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}var s=r(5),c=r(9).ec,u=r(57),f=r(142);e.exports=n}).call(t,r(4).Buffer)},function(e,t,r){"use strict";(function(t){function n(e){this.curveType=s[e],this.curveType||(this.curveType={name:e}),this.curve=new o.ec(this.curveType.name),this.keys=void 0}function i(e,r,n){Array.isArray(e)||(e=e.toArray());var i=new t(e);if(n&&i.length<n){var o=new t(n-i.length);o.fill(0),i=t.concat([o,i])}return r?i.toString(r):i}var o=r(9),a=r(5);e.exports=function(e){return new n(e)};var s={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};s.p224=s.secp224r1,s.p256=s.secp256r1=s.prime256v1,s.p192=s.secp192r1=s.prime192v1,s.p384=s.secp384r1,s.p521=s.secp521r1,n.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},n.prototype.computeSecret=function(e,r,n){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),i(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),n,this.curveType.byteLength)},n.prototype.getPublicKey=function(e,t){var r=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(r[r.length-1]%2?r[0]=7:r[0]=6),i(r,e)},n.prototype.getPrivateKey=function(e){return i(this.keys.getPrivate(),e)},n.prototype.setPublicKey=function(e,r){return r=r||"utf8",t.isBuffer(e)||(e=new t(e,r)),this.keys._importPublic(e),this},n.prototype.setPrivateKey=function(e,r){r=r||"utf8",t.isBuffer(e)||(e=new t(e,r));var n=new a(e);return n=n.toString(16),this.keys._importPrivate(n),this}}).call(t,r(4).Buffer)},function(e,t,r){"use strict";t.publicEncrypt=r(328),t.privateDecrypt=r(329),t.privateEncrypt=function(e,r){return t.publicEncrypt(e,r,!0)},t.publicDecrypt=function(e,r){return t.privateDecrypt(e,r,!0)}},function(e,t,r){"use strict";(function(t){function n(e,r){var n=e.modulus.byteLength(),i=r.length,o=c("sha1").update(new t("")).digest(),a=o.length,l=2*a;if(i>n-l-2)throw new Error("message too long");var h=new t(n-i-l-2);h.fill(0);var p=n-a-1,_=s(a),m=f(t.concat([o,h,new t([1]),r],p),u(_,p)),v=f(_,u(m,a));return new d(t.concat([new t([0]),v,m],n))}function i(e,r,n){var i=r.length,a=e.modulus.byteLength();if(i>a-11)throw new Error("message too long");var s;return n?(s=new t(a-i-3),s.fill(255)):s=o(a-i-3),new d(t.concat([new t([0,n?1:2]),s,new t([0]),r],a))}function o(e,r){for(var n,i=new t(e),o=0,a=s(2*e),c=0;o<e;)c===a.length&&(a=s(2*e),c=0),(n=a[c++])&&(i[o++]=n);return i}var a=r(57),s=r(33),c=r(44),u=r(143),f=r(144),d=r(5),l=r(145),h=r(83);e.exports=function(e,t,r){var o;o=e.padding?e.padding:r?1:4;var s,c=a(e);if(4===o)s=n(c,t);else if(1===o)s=i(c,t,r);else{if(3!==o)throw new Error("unknown padding");if(s=new d(t),s.cmp(c.modulus)>=0)throw new Error("data too long for modulus")}return r?h(s,c):l(s,c)}}).call(t,r(4).Buffer)},function(e,t,r){"use strict";(function(t){function n(e,r){var n=(e.modulus,e.modulus.byteLength()),i=(r.length,d("sha1").update(new t("")).digest()),a=i.length;if(0!==r[0])throw new Error("decryption error");var u=r.slice(1,a+1),f=r.slice(a+1),l=c(u,s(f,a)),h=c(f,s(l,n-a-1));if(o(i,h.slice(0,a)))throw new Error("decryption error");for(var p=a;0===h[p];)p++;if(1!==h[p++])throw new Error("decryption error");return h.slice(p)}function i(e,t,r){for(var n=t.slice(0,2),i=2,o=0;0!==t[i++];)if(i>=t.length){o++;break}var a=t.slice(2,i-1);t.slice(i-1,i);if(("0002"!==n.toString("hex")&&!r||"0001"!==n.toString("hex")&&r)&&o++,a.length<8&&o++,o)throw new Error("decryption error");return t.slice(i)}function o(e,r){e=new t(e),r=new t(r);var n=0,i=e.length;e.length!==r.length&&(n++,i=Math.min(e.length,r.length));for(var o=-1;++o<i;)n+=e[o]^r[o];return n}var a=r(57),s=r(143),c=r(144),u=r(5),f=r(83),d=r(44),l=r(145);e.exports=function(e,r,o){var s;s=e.padding?e.padding:o?1:4;var c=a(e),d=c.modulus.byteLength();if(r.length>d||new u(r).cmp(c.modulus)>=0)throw new Error("decryption error");var h;h=o?l(new u(r),c):f(r,c);var p=new t(d-h.length);if(p.fill(0),h=t.concat([p,h],d),4===s)return n(c,h);if(1===s)return i(c,h,o);if(3===s)return h;throw new Error("unknown padding")}}).call(t,r(4).Buffer)},function(e,t,r){"use strict";(function(e,n){function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}function o(e,t){if("number"!=typeof e||e!==e)throw new TypeError("offset must be a number");if(e>_||e<0)throw new TypeError("offset must be a uint32");if(e>h||e>t)throw new RangeError("offset out of range")}function a(e,t,r){if("number"!=typeof e||e!==e)throw new TypeError("size must be a number");if(e>_||e<0)throw new TypeError("size must be a uint32");if(e+t>r||e>h)throw new RangeError("buffer too small")}function s(t,r,n,i){if(!(l.isBuffer(t)||t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof r)i=r,r=0,n=t.length;else if("function"==typeof n)i=n,n=t.length-r;else if("function"!=typeof i)throw new TypeError('"cb" argument must be a function');return o(r,t.length),a(n,r,t.length),c(t,r,n,i)}function c(e,t,r,i){if(n.browser){var o=e.buffer,a=new Uint8Array(o,t,r);return p.getRandomValues(a),i?void n.nextTick(function(){i(null,e)}):e}return i?void d(r,function(r,n){if(r)return i(r);n.copy(e,t),i(null,e)}):(d(r).copy(e,t),e)}function u(t,r,n){if(void 0===r&&(r=0),!(l.isBuffer(t)||t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return o(r,t.length),void 0===n&&(n=t.length-r),a(n,r,t.length),c(t,r,n)}var f=r(3),d=r(33),l=f.Buffer,h=f.kMaxLength,p=e.crypto||e.msCrypto,_=Math.pow(2,32)-1;p&&p.getRandomValues||!n.browser?(t.randomFill=s,t.randomFillSync=u):(t.randomFill=i,t.randomFillSync=i)}).call(t,r(19),r(23))},function(module,exports,__webpack_require__){"use strict";(function(process,global,module){var __WEBPACK_AMD_DEFINE_RESULT__,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
!function(){function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}var ERROR="input is invalid type",WINDOW="object"===("undefined"==typeof window?"undefined":_typeof(window)),root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"===("undefined"==typeof self?"undefined":_typeof(self)),NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"===(void 0===process?"undefined":_typeof(process))&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"===_typeof(module)&&module.exports,AMD=__webpack_require__(332),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===(void 0===e?"undefined":_typeof(e))&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var r=OUTPUT_TYPES[t];e[r]=createOutputMethod(r)}return e},nodeWrap=function nodeWrap(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null===e||void 0===e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};Md5.prototype.update=function(e){if(!this.finalized){var t,r=void 0===e?"undefined":_typeof(e);if("string"!==r){if("object"!==r)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw ERROR;t=!0}for(var n,i,o=0,a=e.length,s=this.blocks,c=this.buffer8;o<a;){if(this.hashed&&(this.hashed=!1,s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)if(ARRAY_BUFFER)for(i=this.start;o<a&&i<64;++o)c[i++]=e[o];else for(i=this.start;o<a&&i<64;++o)s[i>>2]|=e[o]<<SHIFT[3&i++];else if(ARRAY_BUFFER)for(i=this.start;o<a&&i<64;++o)n=e.charCodeAt(o),n<128?c[i++]=n:n<2048?(c[i++]=192|n>>6,c[i++]=128|63&n):n<55296||n>=57344?(c[i++]=224|n>>12,c[i++]=128|n>>6&63,c[i++]=128|63&n):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++o)),c[i++]=240|n>>18,c[i++]=128|n>>12&63,c[i++]=128|n>>6&63,c[i++]=128|63&n);else for(i=this.start;o<a&&i<64;++o)n=e.charCodeAt(o),n<128?s[i>>2]|=n<<SHIFT[3&i++]:n<2048?(s[i>>2]|=(192|n>>6)<<SHIFT[3&i++],s[i>>2]|=(128|63&n)<<SHIFT[3&i++]):n<55296||n>=57344?(s[i>>2]|=(224|n>>12)<<SHIFT[3&i++],s[i>>2]|=(128|n>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&n)<<SHIFT[3&i++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++o)),s[i>>2]|=(240|n>>18)<<SHIFT[3&i++],s[i>>2]|=(128|n>>12&63)<<SHIFT[3&i++],s[i>>2]|=(128|n>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&n)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,r,n,i,o,a=this.blocks;this.first?(e=a[0]-680876937,e=(e<<7|e>>>25)-271733879<<0,n=(-1732584194^2004318071&e)+a[1]-117830708,n=(n<<12|n>>>20)+e<<0,r=(-271733879^n&(-271733879^e))+a[2]-1126478375,r=(r<<17|r>>>15)+n<<0,t=(e^r&(n^e))+a[3]-1316259209,t=(t<<22|t>>>10)+r<<0):(e=this.h0,t=this.h1,r=this.h2,n=this.h3,e+=(n^t&(r^n))+a[0]-680876936,e=(e<<7|e>>>25)+t<<0,n+=(r^e&(t^r))+a[1]-389564586,n=(n<<12|n>>>20)+e<<0,r+=(t^n&(e^t))+a[2]+606105819,r=(r<<17|r>>>15)+n<<0,t+=(e^r&(n^e))+a[3]-1044525330,t=(t<<22|t>>>10)+r<<0),e+=(n^t&(r^n))+a[4]-176418897,e=(e<<7|e>>>25)+t<<0,n+=(r^e&(t^r))+a[5]+1200080426,n=(n<<12|n>>>20)+e<<0,r+=(t^n&(e^t))+a[6]-1473231341,r=(r<<17|r>>>15)+n<<0,t+=(e^r&(n^e))+a[7]-45705983,t=(t<<22|t>>>10)+r<<0,e+=(n^t&(r^n))+a[8]+1770035416,e=(e<<7|e>>>25)+t<<0,n+=(r^e&(t^r))+a[9]-1958414417,n=(n<<12|n>>>20)+e<<0,r+=(t^n&(e^t))+a[10]-42063,r=(r<<17|r>>>15)+n<<0,t+=(e^r&(n^e))+a[11]-1990404162,t=(t<<22|t>>>10)+r<<0,e+=(n^t&(r^n))+a[12]+1804603682,e=(e<<7|e>>>25)+t<<0,n+=(r^e&(t^r))+a[13]-40341101,n=(n<<12|n>>>20)+e<<0,r+=(t^n&(e^t))+a[14]-1502002290,r=(r<<17|r>>>15)+n<<0,t+=(e^r&(n^e))+a[15]+1236535329,t=(t<<22|t>>>10)+r<<0,e+=(r^n&(t^r))+a[1]-165796510,e=(e<<5|e>>>27)+t<<0,n+=(t^r&(e^t))+a[6]-1069501632,n=(n<<9|n>>>23)+e<<0,r+=(e^t&(n^e))+a[11]+643717713,r=(r<<14|r>>>18)+n<<0,t+=(n^e&(r^n))+a[0]-373897302,t=(t<<20|t>>>12)+r<<0,e+=(r^n&(t^r))+a[5]-701558691,e=(e<<5|e>>>27)+t<<0,n+=(t^r&(e^t))+a[10]+38016083,n=(n<<9|n>>>23)+e<<0,r+=(e^t&(n^e))+a[15]-660478335,r=(r<<14|r>>>18)+n<<0,t+=(n^e&(r^n))+a[4]-405537848,t=(t<<20|t>>>12)+r<<0,e+=(r^n&(t^r))+a[9]+568446438,e=(e<<5|e>>>27)+t<<0,n+=(t^r&(e^t))+a[14]-1019803690,n=(n<<9|n>>>23)+e<<0,r+=(e^t&(n^e))+a[3]-187363961,r=(r<<14|r>>>18)+n<<0,t+=(n^e&(r^n))+a[8]+1163531501,t=(t<<20|t>>>12)+r<<0,e+=(r^n&(t^r))+a[13]-1444681467,e=(e<<5|e>>>27)+t<<0,n+=(t^r&(e^t))+a[2]-51403784,n=(n<<9|n>>>23)+e<<0,r+=(e^t&(n^e))+a[7]+1735328473,r=(r<<14|r>>>18)+n<<0,t+=(n^e&(r^n))+a[12]-1926607734,t=(t<<20|t>>>12)+r<<0,i=t^r,e+=(i^n)+a[5]-378558,e=(e<<4|e>>>28)+t<<0,n+=(i^e)+a[8]-2022574463,n=(n<<11|n>>>21)+e<<0,o=n^e,r+=(o^t)+a[11]+1839030562,r=(r<<16|r>>>16)+n<<0,t+=(o^r)+a[14]-35309556,t=(t<<23|t>>>9)+r<<0,i=t^r,e+=(i^n)+a[1]-1530992060,e=(e<<4|e>>>28)+t<<0,n+=(i^e)+a[4]+1272893353,n=(n<<11|n>>>21)+e<<0,o=n^e,r+=(o^t)+a[7]-155497632,r=(r<<16|r>>>16)+n<<0,t+=(o^r)+a[10]-1094730640,t=(t<<23|t>>>9)+r<<0,i=t^r,e+=(i^n)+a[13]+681279174,e=(e<<4|e>>>28)+t<<0,n+=(i^e)+a[0]-358537222,n=(n<<11|n>>>21)+e<<0,o=n^e,r+=(o^t)+a[3]-722521979,r=(r<<16|r>>>16)+n<<0,t+=(o^r)+a[6]+76029189,t=(t<<23|t>>>9)+r<<0,i=t^r,e+=(i^n)+a[9]-640364487,e=(e<<4|e>>>28)+t<<0,n+=(i^e)+a[12]-421815835,n=(n<<11|n>>>21)+e<<0,o=n^e,r+=(o^t)+a[15]+530742520,r=(r<<16|r>>>16)+n<<0,t+=(o^r)+a[2]-995338651,t=(t<<23|t>>>9)+r<<0,e+=(r^(t|~n))+a[0]-198630844,e=(e<<6|e>>>26)+t<<0,n+=(t^(e|~r))+a[7]+1126891415,n=(n<<10|n>>>22)+e<<0,r+=(e^(n|~t))+a[14]-1416354905,r=(r<<15|r>>>17)+n<<0,t+=(n^(r|~e))+a[5]-57434055,t=(t<<21|t>>>11)+r<<0,e+=(r^(t|~n))+a[12]+1700485571,e=(e<<6|e>>>26)+t<<0,n+=(t^(e|~r))+a[3]-1894986606,n=(n<<10|n>>>22)+e<<0,r+=(e^(n|~t))+a[10]-1051523,r=(r<<15|r>>>17)+n<<0,t+=(n^(r|~e))+a[1]-2054922799,t=(t<<21|t>>>11)+r<<0,e+=(r^(t|~n))+a[8]+1873313359,e=(e<<6|e>>>26)+t<<0,n+=(t^(e|~r))+a[15]-30611744,n=(n<<10|n>>>22)+e<<0,r+=(e^(n|~t))+a[6]-1560198380,r=(r<<15|r>>>17)+n<<0,t+=(n^(r|~e))+a[13]+1309151649,t=(t<<21|t>>>11)+r<<0,e+=(r^(t|~n))+a[4]-145523070,e=(e<<6|e>>>26)+t<<0,n+=(t^(e|~r))+a[11]-1120210379,n=(n<<10|n>>>22)+e<<0,r+=(e^(n|~t))+a[2]+718787259,r=(r<<15|r>>>17)+n<<0,t+=(n^(r|~e))+a[9]-343485551,t=(t<<21|t>>>11)+r<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=r-1732584194<<0,this.h3=n+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+r<<0,this.h3=this.h3+n<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,r,n="",i=this.array(),o=0;o<15;)e=i[o++],t=i[o++],r=i[o++],n+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|r>>>6)]+BASE64_ENCODE_CHAR[63&r];return e=i[o],n+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}()}).call(exports,__webpack_require__(23),__webpack_require__(19),__webpack_require__(40)(module))},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,r){"use strict";t.decode=t.parse=r(334),t.encode=t.stringify=r(335)},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var f=0;f<u;++f){var d,l,h,p,_=e[f].replace(s,"%20"),m=_.indexOf(r);m>=0?(d=_.substr(0,m),l=_.substr(m+1)):(d=_,l=""),h=decodeURIComponent(d),p=decodeURIComponent(l),n(a,h)?i(a[h])?a[h].push(p):a[h]=[a[h],p]:a[h]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){switch(void 0===e?"undefined":i(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,c){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===(void 0===e?"undefined":i(e))?n(s(e),function(i){var s=encodeURIComponent(o(i))+r;return a(e[i])?n(e[i],function(e){return s+encodeURIComponent(o(e))}).join(t):s+encodeURIComponent(o(e[i]))}).join(t):c?encodeURIComponent(o(c))+r+encodeURIComponent(o(e)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){"use strict";var n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,c,u){"object"===a(t)?e.exports=t=c(r(0),r(26),r(146),r(147),r(12),r(16),r(35),r(58),r(148),r(59),r(149),r(150),r(151),r(36),r(152),r(10),r(2),r(153),r(154),r(155),r(156),r(157),r(158),r(159),r(160),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168)):(i=[r(0),r(26),r(146),r(147),r(12),r(16),r(35),r(58),r(148),r(59),r(149),r(150),r(151),r(36),r(152),r(10),r(2),r(153),r(154),r(155),r(156),r(157),r(158),r(159),r(160),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168)],n=c,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o))}(0,function(e){return e})},function(e,t,r){"use strict";(function(e){var r,n,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*! useragent-util - ver 1.1.0 created:2021-5-7 7:46:12 PM */
!function(a,s){if("object"==o(t)&&"object"==o(e))e.exports=s();else{n=[],r=s,void 0!==(i="function"==typeof r?r.apply(t,n):r)&&(e.exports=i)}}(self,function(){return function(){var e={499:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.WSReporterStatus=t.ErrorCode=t.CompressType=t.ProductType=t.ProtocolType=t.LogType=void 0,function(e){e[e.WebSocket=0]="WebSocket"}(t.LogType||(t.LogType={})),function(e){e[e.JSON=0]="JSON",e[e.PB=1]="PB"}(t.ProtocolType||(t.ProtocolType={})),function(e){e[e.RTC=1]="RTC",e[e.Live=2]="Live",e[e.vod=3]="vod"}(t.ProductType||(t.ProductType={})),function(e){e[e.NO_COMPRESS=0]="NO_COMPRESS",e[e.SNAPPY=1]="SNAPPY",e[e.LZ4=2]="LZ4"}(t.CompressType||(t.CompressType={})),function(e){e[e.Error_NOURL=0]="Error_NOURL"}(t.ErrorCode||(t.ErrorCode={})),function(e){e[e.Init=0]="Init",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected",e[e.Disconnecting=3]="Disconnecting",e[e.Disconnected=4]="Disconnected"}(t.WSReporterStatus||(t.WSReporterStatus={}))},805:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.LogReporter=void 0;var o=r(499),a=r(418),s=r(359),c=r(610),u=function(e){function t(t){var r=e.call(this)||this;return t.wsUrl&&WebSocket&&(r.wsReporter=new s.WsReporter(t.wsUrl,t.wsConfig),r.wsReporter.on("onFail",function(e){r.emit("onError",{code:-1,message:"",data:e})})),t.webtrackingUrl&&(r.webtrackingReporter=new c.WebtrackingReporter(t.webtrackingUrl)),r.wsReporter||r.emit("onError",{code:o.ErrorCode.Error_NOURL,reason:"error ws url"}),r.config=t,r}return i(t,e),t.prototype.send=function(e){var t;null===(t=this.getReporter())||void 0===t||t.send(e)},t.prototype.close=function(){var e;null===(e=this.getReporter())||void 0===e||e.close()},t.prototype.getReporter=function(){return this.wsReporter?this.wsReporter:this.webtrackingReporter?this.webtrackingReporter:null},t}(a.default);t.LogReporter=u},610:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebtrackingReporter=void 0;var o=function(e){function t(t){var r=e.call(this)||this;return r.baseUrl=t,"?"!==r.baseUrl[r.baseUrl.length-1]&&(r.baseUrl+="?"),r}return i(t,e),t.prototype.send=function(e){window&&window.Image?(new Image).src=this.baseUrl+"?"+this.data2String(e):wx&&wx.request&&(console.log("wx request"),wx.request({url:this.baseUrl+"?"+this.data2String(e),method:"GET"}))},t.prototype.close=function(){},t.prototype.data2String=function(e){var t="";for(var r in e&&!e.APIVersion&&(e.APIVersion="0.6.0"),e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=r+"="+e[r]);return t},t}(r(418).default);t.WebtrackingReporter=o},163:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.HeartBeatManager=void 0;var o=function(e){function t(t){var r=e.call(this)||this;return r.timerId=0,r.secondIndex=0,r.secondMax=0,r.retryIndex=0,r.gapTime=t||5e3,r.secondMax=3*Math.round(r.gapTime/1e3)+2,r}return i(t,e),t.prototype.start=function(){var e=this;0===this.timerId&&(this.secondIndex=0,this.timerId=window.setInterval(function(){++e.secondIndex,1e3*e.secondIndex%e.gapTime==0&&e.emit("onHeartBeatTimer"),e.secondIndex>=e.secondMax&&e.excuteRetry()},1e3))},t.prototype.stop=function(){this.timerId&&(clearInterval(this.timerId),this.timerId=0)},t.prototype.reconnectedFailed=function(){var e=this;setTimeout(function(){e.excuteRetry()},5e3)},t.prototype.recvHeartbeatAck=function(){this.secondIndex=0,this.retryIndex=0},t.prototype.excuteRetry=function(){this.emit("onReconnect",!(this.retryIndex<3)),++this.retryIndex},t}(r(418).default);t.HeartBeatManager=o},483:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageCenter=void 0;var r=function(){function e(){this.messageArr=[]}return Object.defineProperty(e.prototype,"allMessage",{get:function(){return this.messageArr},enumerable:!1,configurable:!0}),e.prototype.addMessage=function(e){this.messageArr.push(e)},e.prototype.getMessage=function(){return this.messageArr.splice(0)},e}();t.MessageCenter=r},33:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Packager=t.MessageType=void 0;var n,i=r(499);!function(e){e[e.Heartbeat=0]="Heartbeat",e[e.Heartbact_ack=1]="Heartbact_ack",e[e.Log=2]="Log"}(n=t.MessageType||(t.MessageType={}));var o=function(){function e(e){this.encoder=new TextEncoder,this.product=e.product?e.product:i.ProductType.RTC,this.compressType=void 0!==e.compressType?e.compressType:i.CompressType.NO_COMPRESS}return e.prototype.getStringLogPackage=function(e,t){var r=new Uint8Array(14);r[0]=n.Log,r[1]=i.ProtocolType.JSON,r[2]=this.product,r[3]=this.compressType,r[4]=1,r[5]=1,this.set4ByteNumber(r,t,6);var o=this.encoder.encode(e);this.set4ByteNumber(r,o.byteLength,10);var a=new Uint8Array(o.byteLength+r.length);return a.set(r,0),a.set(o,r.length),a.buffer},e.prototype.getHeartBeatPackage=function(){var e=new Uint8Array(10);return e[0]=n.Heartbeat,e[1]=i.ProtocolType.JSON,e[2]=this.product,e.buffer},e.prototype.parsePackage=function(e){var t=this;return new Promise(function(r,i){e.arrayBuffer().then(function(e){if(e&&e.byteLength>=10){var o={cmd:0},a=new Uint8Array(e);switch(a[0]){case n.Heartbact_ack:o.cmd=n.Heartbact_ack,o.lastIndex=t.get4ByteNumber(a,3),r(o);break;default:i({code:-1,reason:"message type:"+a[0]})}}else i({code:-1,reason:"buffer length "+e.byteLength})}).catch(function(e){i(e)})})},e.prototype.set4ByteNumber=function(e,t,r){var n=t.toString(16);r+=4;for(var i=0;i<4;++i){if(!(n.length>=2)){if(n.length){var o=parseInt(n,16);e[r-i-1]=o}break}var a=parseInt(n.slice(n.length-2,n.length),16);n=n.substring(0,n.length-2),e[r-i-1]=a}},e.prototype.get4ByteNumber=function(e,t){for(var r="",n=t;n<t+4&&n<e.byteLength;++n){var i=e[n].toString(16);i.length<2&&(i="0"+i),r+=i}return parseInt(r,16)},e}();t.Packager=o},848:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketClient=t.ConnectState=void 0;var o,a=r(33),s=r(163),c=r(418),u=r(483);!function(e){e[e.Connecting=0]="Connecting",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected"}(o=t.ConnectState||(t.ConnectState={}));var f=function(e){function t(t,r){var n=e.call(this)||this;return n.messageCenter=new u.MessageCenter,n.wsUrl=t,n.heartBeatManager=new s.HeartBeatManager(r.heartBeatGap),n.heartBeatManager.on("onHeartBeatTimer",n.sendHeartBeatPackage.bind(n)),n.heartBeatManager.on("onReconnect",n.onReconnect.bind(n)),n.packager=new a.Packager(r),n.ws=new WebSocket(t),n.initEvent(),n.wsState=o.Connecting,n.emit("onConnectStateChange"),n}return i(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this.wsState},enumerable:!1,configurable:!0}),t.prototype.send=function(e,t){this.messageCenter.addMessage({index:t,log:e}),this.sendPackage(this.packager.getStringLogPackage(JSON.stringify(e),t))},t.prototype.close=function(){this.wsState=o.Disconnected,this.heartBeatManager.stop(),this.ws.removeEventListener("open",this.onOpen.bind(this)),this.ws.removeEventListener("message",this.onMesssage.bind(this)),this.ws.removeEventListener("close",this.onClose.bind(this)),this.ws.removeEventListener("error",this.onError.bind(this)),this.ws.close(),this.emit("onConnectStateChange")},t.prototype.onOpen=function(e){this.wsState=o.Connected,this.emit("onConnectStateChange"),this.heartBeatManager.start(),this.sendHeartBeatPackage()},t.prototype.onMesssage=function(e){var t=this;this.packager.parsePackage(e.data).then(function(e){if(a.MessageType.Heartbact_ack===e.cmd&&(t.heartBeatManager.recvHeartbeatAck(),e.lastIndex))for(var r=0;r<t.messageCenter.allMessage.length;++r)if(t.messageCenter.allMessage[r].index>=e.lastIndex){t.messageCenter.allMessage[r].index===e.lastIndex&&(r+=1),t.messageCenter.allMessage.splice(0,r);break}}).catch(function(e){console.log("error pkg",e)})},t.prototype.onClose=function(e){this.wsState===o.Connecting&&this.heartBeatManager.reconnectedFailed(),this.wsState=o.Connected,this.emit("onConnectStateChange")},t.prototype.onError=function(e){console.log("onError:",e)},t.prototype.initEvent=function(){this.ws.addEventListener("open",this.onOpen.bind(this)),this.ws.addEventListener("message",this.onMesssage.bind(this)),this.ws.addEventListener("close",this.onClose.bind(this)),this.ws.addEventListener("error",this.onError.bind(this))},t.prototype.sendPackage=function(e){this.ws.send(e)},t.prototype.sendHeartBeatPackage=function(){this.sendPackage(this.packager.getHeartBeatPackage())},t.prototype.onReconnect=function(e){if(this.close(),e){var t=this.messageCenter.getMessage(),r=[];t.forEach(function(e){r.push(e.log)}),console.warn("onConnectFail",r),this.emit("onConnectFail",r)}else this.ws=new WebSocket(this.wsUrl),this.initEvent(),this.wsState=o.Connecting,this.emit("onConnectStateChange")},t}(c.default);t.WebsocketClient=f},359:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.WsReporter=void 0;var o=r(499),a=r(848),s=r(483),c=function(e){function t(t,r){var n=e.call(this)||this;return n.logIndex=1,n.messageCache=new s.MessageCenter,n.config=r||{product:o.ProductType.RTC,defaultProtocol:o.ProtocolType.JSON},n.wsUrl=t,n.wsClient=new a.WebsocketClient(n.wsUrl,n.config),n.wsClient.on("onConnectStateChange",n.onWebsocketStateChange.bind(n)),n.wsClient.on("onConnectFail",n.onWebsocketConnectFail.bind(n)),n}return i(t,e),t.prototype.send=function(e){this.wsClient.state===a.ConnectState.Connected?this.realSendLog(e):this.messageCache.addMessage(e)},t.prototype.onWebsocketStateChange=function(){if(this.wsClient.state===a.ConnectState.Connected){var e=this.messageCache.getMessage();if(e.length>0)for(var t=0;t<e.length;++t)this.realSendLog(e[t])}},t.prototype.onWebsocketConnectFail=function(e){var t=this.messageCache.getMessage();this.emit("onFail",e.concat(t))},t.prototype.close=function(){this.wsClient.state!==a.ConnectState.Disconnected&&this.wsClient.close(),this.wsClient.off("onConnectStateChange",this.onWebsocketStateChange.bind(this))},t.prototype.initClient=function(){this.wsClient=new a.WebsocketClient(this.wsUrl,this.config),this.wsClient.on("onConnectStateChange",this.onWebsocketStateChange.bind(this))},t.prototype.realSendLog=function(e){this.wsClient.send(e,this.logIndex),this.logIndex+=1},t}(r(418).default);t.WsReporter=c},903:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(805);window&&(window.LogReporter=n.LogReporter),e.exports=n.LogReporter,t.default=n.LogReporter},418:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._eventMap={}}return e.prototype.listeners=function(e){return this._eventMap[e]||[]},e.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=this._eventMap[e];return!!Array.isArray(i)&&(i.forEach(function(e){return e.apply(t,r)}),!0)},e.prototype.off=function(e,t){var r=this._eventMap[e];return Array.isArray(r)&&(this._eventMap[e]=r.filter(function(e){return e!==t})),this},e.prototype.getListeners=function(e){var t=[];return void 0===e?t:this._eventMap[e]?this._eventMap[e]:t},e.prototype.removeAllListeners=function(e){return void 0===e?this._eventMap={}:this._eventMap[e]&&(this._eventMap[e]=[]),this},e.prototype.on=function(e,t){return this._eventMap[e]?this._eventMap[e].push(t):this._eventMap[e]=[t],this},e.prototype.once=function(e,t){var r=this,n=function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];r.off(e,n),t.apply(r,i)};return this.on(e,n),this},e}();t.default=r}},t={};return function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(903)}()})}).call(t,r(40)(e))},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o={Login:"/app/v1/login",Gslb:"/gslb/v1/allocate",STSRefresh:"/gslb/v1/stsupdate",Auth:"/auth/v1/token",Create:"/signaling/v1/create",Join:"/signaling/v1/join",Leave:"/signaling/v1/leave",Publish:"/signaling/v1/publish",Republish:"/signaling/v1/republish",UnPublish:"/signaling/v1/unpublish",ICECandidate:"/signaling/v1/icecandidate",Subscribe:"/signaling/v1/subscribe",ReSubscribe:"/signaling/v1/resubscribe",UnSubscribe:"/signaling/v1/unsubscribe",Answer:"/signaling/v1/answer",Polling:"/signaling/v1/polling",PollingResponse:"/signaling/v1/response",RoleUpdate:"/signaling/v1/roleupdate",Adapt:"/gslb/v1/adapt",Status:"/signaling/v1/status"},a=function(){function e(){n(this,e),this._availableSlb="",this._availableServer=""}return i(e,[{key:"Init",value:function(e,t){e&&e.length?this._availableSlb=e[0]:this._availableSlb="",t&&t.length?this._availableServer=t[0]:this._availableServer=""}},{key:"getGslbUrl",value:function(e){return e&&e.length?e[0]+o.Gslb:""}},{key:"getAdaptUrl",value:function(e){return e&&e.length?e[0]+o.Adapt:""}},{key:"getSTSRefreshUrl",value:function(e){return e&&e.length?e[0]+o.STSRefresh:""}},{key:"serverUrl",get:function(){return this._availableServer}},{key:"AnswerUrl",get:function(){return this._availableSlb+o.Answer}},{key:"UnSubscribeUrl",get:function(){return this._availableSlb+o.UnSubscribe}},{key:"ReSubscribeUrl",get:function(){return this._availableSlb+o.ReSubscribe}},{key:"SubscribeUrl",get:function(){return this._availableSlb+o.Subscribe}},{key:"UnPublishUrl",get:function(){return this._availableSlb+o.UnPublish}},{key:"PublishUrl",get:function(){return this._availableSlb+o.Publish}},{key:"RepublishUrl",get:function(){return this._availableSlb+o.Republish}},{key:"ICECandidateUrl",get:function(){return this._availableSlb+o.ICECandidate}},{key:"PollingResponseUrl",get:function(){return this._availableSlb+o.PollingResponse}},{key:"PollingUrl",get:function(){return this._availableSlb+o.Polling}},{key:"LeaveUrl",get:function(){return this._availableSlb+o.Leave}},{key:"JoinUrl",get:function(){return this._availableSlb+o.Join}},{key:"RoleUpdate",get:function(){return this._availableSlb+o.RoleUpdate}},{key:"StatusUrl",get:function(){return this._availableSlb+o.Status}},{key:"WSUrl",get:function(){return this._availableSlb.replace("https","wss")+"/signaling/v2/ws"}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this._options={},this.initOption(t)}return i(e,[{key:"initOption",value:function(e){var t=e||{};t.isDebug=this._getValue(t,"isDebug",!1),t.isReceiveOnly=this._getValue(t,"isReceiveOnly",!1),t.customPlay=this._getValue(t,"customPlay",!1),this._mergeOption(t)}},{key:"_getValue",value:function(e,t,r){return e.hasOwnProperty(t)?e[t]:r}},{key:"_getFunction",value:function(e,t){obj.hasOwnProperty(t)}},{key:"_mergeOption",value:function(e){if(this._options){if(e)for(var t in e)this._options[t]=e[t]}else this._options=e}},{key:"isDebug",get:function(){return this._options.isDebug}},{key:"customPlay",get:function(){return this._options.customPlay}},{key:"isReceiveOnly",get:function(){return!!this._options.isReceiveOnly}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(97),s=n(a),c=r(30),u=n(c),f=r(85),d=(n(f),function(){function e(){i(this,e),this._userName="",this._sessionId="",this._userId="",this._channel="",this._appid="",this._nonce="",this._timestamp=0,this._gslb=[],this._token="",this._publishCallid="",this._turn={},this._message="",this._type=""}return o(e,[{key:"updateAuthInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return!(!e||(this._message=this._validateAuthInfo(e),this._message))&&(this._sessionId=s.default.create(32),this._userId=e.userid,this._channel=e.channel,this._appid=e.appid,this._nonce=e.nonce,this._timestamp=e.timestamp,this._gslb=u.default.prefixAPI(e.gslb),this._token=e.token,this._publishCallid=u.default.random(32),this._type="alirtc",this._userName=t||this._userId,e.turn?this._turn={username:this._userId+"?appid="+this._appid+"&session="+this._sessionId+"&channel="+this._channel+"&nonce="+this._nonce+"&timestamp="+this._timestamp,credential:e.turn.password}:this._turn={username:this._userId+"?appid="+this._appid+"&session="+this._sessionId+"&channel="+this._channel+"&nonce="+this._nonce+"&timestamp="+this._timestamp+"&tokensid=false",credential:"hello1234"},!0)}},{key:"getErrorMessage",value:function(){return this._message}},{key:"_validateAuthInfo",value:function(e){var t="#",r="";return e.appid?e.channel?e.nonce?e.userid?e.timestamp?e.token?e.gslb||(r="gslb"):r="token":r="timestamp":r="userid":r="nonce":r="channel":r="appid",r?t=t.replace("#",r):/[^\d^\w^\-]+/.test(e.userid)?"(userid)":""}},{key:"userName",get:function(){return this._userName}},{key:"userId",get:function(){return this._userId}},{key:"channel",get:function(){return this._channel}},{key:"appid",get:function(){return this._appid}},{key:"nonce",get:function(){return this._nonce}},{key:"timestamp",get:function(){return this._timestamp}},{key:"gslb",get:function(){return this._gslb}},{key:"token",get:function(){return this._token}},{key:"publishCallId",get:function(){return this._publishCallid}},{key:"sessionId",get:function(){return this._sessionId}},{key:"turn",get:function(){return this._turn}},{key:"type",get:function(){return this._type}},{key:"isGrtn",get:function(){return"grtn"===this._type}}]),e}());t.default=d},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a={TRACE:-1,DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},s=function(){function e(){i(this,e),this._logLevel=a.NONE,this._localLogList=[]}return o(e,[{key:"debug",value:function(){var e=Array.prototype.slice.call(arguments),t=this._getNowTime()+" [DEBUG] ";if(this.saveLocalMemory(t+JSON.stringify(e)),a.DEBUG>=this._logLevel){var r;(r=console).log.apply(r,[t].concat(n(e)))}}},{key:"info",value:function(){var e=Array.prototype.slice.call(arguments),t=this._getNowTime()+"[INFO] ";if(this.saveLocalMemory(t+JSON.stringify(e)),a.INFO>=this._logLevel){var r;(r=console).log.apply(r,[t].concat(n(e)))}}},{key:"warning",value:function(){var e=Array.prototype.slice.call(arguments),t=this._getNowTime()+" [WARNING] ";if(this.saveLocalMemory(t+JSON.stringify(e)),a.WARNING>=this._logLevel){var r;(r=console).log.apply(r,[t,"color:#F0E68C;"].concat(n(e)))}}},{key:"error",value:function(){var e=Array.prototype.slice.call(arguments),t=this._getNowTime()+" [ERROR] ";if(this.saveLocalMemory(t+JSON.stringify(e)),a.ERROR>=this._logLevel){var r;(r=console).log.apply(r,[t,"color:#FF0000;"].concat(n(e)))}}},{key:"setLogLevel",value:function(e){this._logLevel=e}},{key:"getLogLevel",value:function(){return this._logLevel}},{key:"enableLogUpload",value:function(){}},{key:"disableLogUpload",value:function(){}},{key:"saveLocalMemory",value:function(e){this._isSaveLocalLog()&&this._localLogList.push(e)}},{key:"exportLocalLog",value:function(){this._exportRaw((new Date).getTime(),JSON.stringify(this._localLogList))}},{key:"_isSaveLocalLog",value:function(){return!(!window.localStorage.getItem("AliRtcLogFlag")&&this._logLevel!=a.TRACE)}},{key:"_getNowTime",value:function(){return"%c ["+(new Date).toISOString()+"] AliRTC-SDK "}},{key:"_exportRaw",value:function(e,t){var r=window.URL||window.webkitURL||window,n=new Blob([t]),i=document.createElementNS("http://www.w3.org/1999/xhtml","a");i.href=r.createObjectURL(n),i.download=e,this._fakeClick(i)}},{key:"_fakeClick",value:function(e){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}]),e}();t.Logger=s,t.LogLevel=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SignalingManager=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(343),u=r(42),f=n(u),d=r(14),l=n(d),h=r(50),p=n(h),_=r(41),m=n(_),v=r(17),b=n(v),y=r(63),g=n(y),S=r(7),w=n(S),k=r(96),E=n(k),R=r(169),C=r(345),A=r(11),O=n(A),T=r(30),M=n(T),P={HTTP:"http",WEBSOCKET:"websocket"},I={Communication:"communication",InteractiveLive:"interactive_live",CdnLive:"cdn_live",Interactive:"interactive",Live:"live"};t.SignalingManager=function(e){function t(e,r,n,a,s){i(this,t);var c=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return c._type=P.HTTP,c._authInfo=e,c._apiManager=r,c._channelInfo=n,c._log=a,c._webtrackingclient=s,c._signaling=null,c._arch="",c}return a(t,e),s(t,[{key:"joinChannel",value:function(e){var t=this;return this._createSignaling(),new Promise(function(r,n){var i=(new Date).getTime();t._getGslb(e).then(function(o){t._arch=o.arch,t._authInfo.isGrtn?t._grtnJoinChannel(o,e,i).then(function(e){r(e)}).catch(function(e){n(e)}):t._rtcJoinChannel(o,e,i).then(function(e){r(e)}).catch(function(e){n(e)})}).catch(function(e){n(e)})})}},{key:"getAdapt",value:function(){var e=this;return new Promise(function(t,r){var n=(e._authInfo.appid,e._arch,e._authInfo.nonce,e._authInfo.channel,e._authInfo.sessionId,e._authInfo.timestamp,e._authInfo.userId,M.default.random(32),e._authInfo.token,{os_name:"H5",os_sdk:0,os_version:"0",os_cpuabi:"",devicename:"",brand:"",platform:"",access:"",carrier:"UNKNOWN",cpu_type:"",udid:g.default.uuid,screen_resolution:""}),i=e._apiManager.getAdaptUrl(e._authInfo.gslb)+"?appid="+e._authInfo.appid+"&arch="+e._arch+"&nonce="+e._authInfo.nonce+"&room="+e._authInfo.channel+"&session="+e._authInfo.sessionId+"&timestamp="+e._authInfo.timestamp+"&userid="+e._authInfo.userId+"&tid="+M.default.random(32)+"&token="+e._authInfo.token+"&tokensid=false";fetch(i,{body:JSON.stringify(n),method:"POST"}).then(function(e){t(e.json())}).catch(function(e){r(e)})})}},{key:"roleUpdate",value:function(e,t){return this._signaling.roleUpdate(this._getRoleUpdateParams(e,t))}},{key:"leave",value:function(){return this._signaling.leave()}},{key:"leaveSync",value:function(){return this._signaling.leaveSync()}},{key:"uploadStatus",value:function(e){this._signaling.uploadStatus(e)}},{key:"stop",value:function(){this._signaling.stop()}},{key:"cancel",value:function(){return this._signaling.cancel()}},{key:"publish",value:function(e){return this._signaling.publish(e)}},{key:"iceCandidate",value:function(e,t,r){return this._signaling.iceCandidate(e,t,r)}},{key:"republish",value:function(e){return this._signaling.republish(e)}},{key:"unpublish",value:function(){return this._signaling.unpublish()}},{key:"subscribe",value:function(e,t,r){return this._signaling.subscribe(e,t,r)}},{key:"resubscribe",value:function(e,t,r){return this._signaling.resubscribe(e,t,r)}},{key:"unsubscribe",value:function(e){return this._signaling.unsubscribe(e)}},{key:"answer",value:function(e,t,r){return this._signaling.answer(e,t,r)}},{key:"_createSignaling",value:function(){var e=this;this._authInfo.isGrtn?this._signaling=new C.RoomServerSignaling(this._authInfo):this._signaling=new c.HttpSignaling(this._authInfo,this._apiManager),this._signaling.addEventListener(p.default.TimeOut,function(){e.dispatchEvent(p.default.TimeOut)}),this._signaling.addEventListener(p.default.Join,function(t){e.dispatchEvent(p.default.Join,t)}),this._signaling.addEventListener(p.default.StatusNotify,function(t){e.dispatchEvent(p.default.StatusNotify,t)}),this._signaling.addEventListener(p.default.Offer,function(t){e.dispatchEvent(p.default.Offer,t)}),this._signaling.addEventListener(p.default.Publishers,function(t){e.dispatchEvent(p.default.Publishers,t)}),this._signaling.addEventListener(p.default.UnPublish,function(t){e.dispatchEvent(p.default.UnPublish,t)}),this._signaling.addEventListener(p.default.Leave,function(t){e.dispatchEvent(p.default.Leave,t)}),this._signaling.addEventListener(p.default.SignalError,function(t){e.dispatchEvent(p.default.SignalError,t)}),this._signaling.addEventListener(p.default.Bye,function(t){e.dispatchEvent(p.default.Bye,t)})}},{key:"_getGslb",value:function(e){var t=this;return new Promise(function(r,n){var i={appid:t._authInfo.appid,room:t._authInfo.channel,session:t._authInfo.sessionId,userid:t._authInfo.userId,nonce:t._authInfo.nonce,timestamp:t._authInfo.timestamp,token:t._authInfo.token,channelprofile:null===e?I.CdnLive:void 0,tokensid:!1};e&&(e.isChannelProfileCdnLive?(i.channelprofile=I.CdnLive,e.isClientRoleLive?i.clientrole=I.Live:i.clientrole=I.Interactive):e.isChannelProfileInteractiveLive?(i.channelprofile=I.InteractiveLive,e.isClientRoleLive?i.clientrole=I.Live:i.clientrole=I.InteractiveLive):i.channelprofile=I.Communication),t._authInfo.isGrtn&&(i.arch=t._authInfo.type),f.default.post(t._apiManager.getGslbUrl(t._authInfo.gslb),i).then(function(e){r(e)}).catch(function(e){n(e)})})}},{key:"_getJoinParamsSync",value:function(e){return new Promise(function(t,r){var n={sdkagent:"SDK/"+m.default.version+" "+b.default.systemName+"/"+b.default.systemVersion+" UDID/"+g.default.uuid},i={WebSDK:w.default.browserName+"-"+w.default.browserVersion+" MultipleStream",NeedSDPUnified:E.default.supportInfo.needSDPUnified};e.isChannelProfileCdnLive?(i.channelProfile="cdn_live",e.isClientRoleLive?i.clientrole=I.Live:i.clientrole=I.InteractiveLive):e.isChannelProfileInteractiveLive?(i.channelProfile=I.InteractiveLive,e.isClientRoleLive?i.clientrole=I.Live:i.clientrole=I.Interactive):i.channelProfile=I.Communication,n.configure=i,E.default.supportInfo.checkNeedSDPUnified().then(function(e){n.configure.NeedSDPUnified=e,t(JSON.stringify(n))}).catch(function(e){t(JSON.stringify(n))})})}},{key:"_getRoleUpdateParams",value:function(e,t){return JSON.stringify({seq:this._seq,clientrole:e==R.ClientRole.Live?I.Live:I.Interactive})}},{key:"_rtcJoinChannel",value:function(e,t,r){var n=this;return new Promise(function(i,o){if(n._apiManager.Init(e.slbs,e.servers),null===t)i(e);else{n._authInfo.turn.urls=n._changePort(e.routers);var a=(new Date).getTime();n._getJoinParamsSync(t).then(function(t){n._signaling.joinChannel(t).then(function(t){n._log.reportJoinRoom((new Date).getTime()-a,0,e.tid,a-r,e),i()}).catch(function(e){n._log.reportJoinRoom((new Date).getTime()-a,e.code,e.tid,a-r,e),o(e)})}).catch(function(e){o(e)})}})}},{key:"_grtnJoinChannel",value:function(e,t,r){var n=this;return new Promise(function(i,o){if(e.roomservers.length){n._apiManager.Init(e.slbs,e.roomservers);var a=(new Date).getTime(),s="";s=window&&window.location&&"http"===window.location.protocol?"ws://":"wss://";for(var c="",u=0;u<e.roomservers.length;++u)if(e.roomservers[u].indexOf(s)>-1){c=e.roomservers[u];break}if(c){var f=void 0;f=t.isChannelProfileInteractiveLive?I.InteractiveLive:I.Communication,n._signaling.joinChannel(c,t.isClientRoleLive?I.Live:I.Interactive,f).then(function(e){n._log.reportJoinRoom((new Date).getTime()-a,0,e.tid,a-r,e),i(e)}).catch(function(e){n._log.reportJoinRoom((new Date).getTime()-a,error.code,error.tid,a-r,error),o(error)})}else o({code:O.default.ERROR_NO_MATCH_ROOMSERVER,message:"no roomserver match"})}else o({code:O.default.ERROR_NO_ROOMSERVER,message:"no roomservers"})})}},{key:"_changePort",value:function(e){if(e)for(var t=e.length-1;t>=0;--t){var r=e[t];if(-1!=r.indexOf("udp")){var n=r.indexOf(":",5),i=r.indexOf("?"),o=r.substring(0,n+1),a=r.substring(i,r.length);e.splice(t,1,o+"80"+a,o+"3478"+a,o+"50000"+a)}}return e}}]),t}(l.default)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HttpSignaling=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(42),u=n(c),f=r(344),d=r(50),l=n(d),h=r(170),p=r(30),_=n(p),m=r(11),v=n(m);t.HttpSignaling=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._apiManager=r,n._authInfo=e,n._seq=0,n._initListener(),n}return a(t,e),s(t,[{key:"joinChannel",value:function(e){var t=this;return new Promise(function(r,n){var i=_.default.random(32);t._httplistener.addEventListener(i,function(e){r(e)},t,!0),u.default.postBody(t._apiManager.JoinUrl,{appid:t._authInfo.appid,"display-name":t._authInfo.userName,room:t._authInfo.channel,userid:t._authInfo.userId,session:t._authInfo.sessionId,nonce:t._authInfo.nonce,timestamp:t._authInfo.timestamp,token:t._authInfo.token,tid:i,tokensid:!1,server:t._apiManager.serverUrl},e).then(function(e){t._httplistener.reset(),t._httplistener.start(0)}).catch(function(e){n(e&&e.code&&e.description?{errorCode:e.code,message:e.description}:e)})})}},{key:"roleUpdate",value:function(e){var t=this;return new Promise(function(r,n){var i=_.default.random(32);u.default.postBody(t._apiManager.RoleUpdate,{appid:t._authInfo.appid,userid:t._authInfo.userId,room:t._authInfo.channel,session:t._authInfo.sessionId,nonce:t._authInfo.nonce,timestamp:t._authInfo.timestamp,token:t._authInfo.token,tokensid:!1,"display-name":t._authInfo.userName,tid:i,server:t._apiManager.serverUrl},e).then(function(e){r()}).catch(function(e){n(e)}),++t._seq})}},{key:"leave",value:function(){var e=this;return new Promise(function(t,r){var n=_.default.random(32);e._httplistener.addEventListener(n,function(e){t(e)},e,!0),u.default.post(e._apiManager.LeaveUrl,{appid:e._authInfo.appid,room:e._authInfo.channel,userid:e._authInfo.userId,session:e._authInfo.sessionId,token:e._authInfo.token,tid:n,server:e._apiManager.serverUrl}).then(function(e){}).catch(function(e){r(e)})})}},{key:"leaveSync",value:function(){try{var e=_.default.random(32);u.default.post(this._apiManager.LeaveUrl,{appid:this._authInfo.appid,room:this._authInfo.channel,userid:this._authInfo.userId,session:this._authInfo.sessionId,token:this._authInfo.token,tid:e,server:this._apiManager.serverUrl}).then(function(e){}).catch(function(e){})}catch(e){}}},{key:"uploadStatus",value:function(e){var t=this;return new Promise(function(r,n){var i=_.default.random(32);++t._seq,u.default.postBody(t._apiManager.StatusUrl,{appid:t._authInfo.appid,session:t._authInfo.sessionId,server:t._apiManager.serverUrl,token:t._authInfo.token,room:t._authInfo.channel,tid:i},JSON.stringify({event:"statusreport",seq:t._seq,status:{userId:t._authInfo.userId,status:e}})).then(function(e){}).catch(function(e){})})}},{key:"stop",value:function(){this._httplistener.stop()}},{key:"cancel",value:function(){return this._httplistener.cancel()}},{key:"publish",value:function(e){var t=this;return new Promise(function(r,n){var i=_.default.random(32);t._httplistener.addEventListener(i,function(e){r(e)}),u.default.ajaxPost(t._apiManager.PublishUrl,{appid:t._authInfo.appid,session:t._authInfo.sessionId,callid:t._authInfo.publishCallId,tid:i,server:t._apiManager.serverUrl,token:t._authInfo.token},e).then(function(e){}).catch(function(e){n(e)})})}},{key:"iceCandidate",value:function(e,t,r){var n=this;return new Promise(function(i,o){var a=_.default.random(32),s={appid:n._authInfo.appid,session:n._authInfo.sessionId,tid:a,server:n._apiManager.serverUrl,token:n._authInfo.token};s.callid=e||n._authInfo.publishCallId,t&&(s.callee=t),n._httplistener.addEventListener(a,function(e){i(e)},n,!0),u.default.ajaxPost(n._apiManager.ICECandidateUrl,s,r).then(function(e){}).catch(function(e){e.tid=a,o(e)})})}},{key:"unsubscribe",value:function(e){var t=this;return new Promise(function(r,n){var i=_.default.random(32);t._httplistener.addEventListener(i,function(e){r(e)},t,!0),u.default.post(t._apiManager.UnSubscribeUrl,{appid:t._authInfo.appid,session:t._authInfo.sessionId,callid:e,tid:i,server:t._apiManager.serverUrl,token:t._authInfo.token}).then(function(e){}).catch(function(e){e.tid=i,n(e)})})}},{key:"republish",value:function(e){var t=this;return new Promise(function(r,n){var i=_.default.random(32);t._httplistener.addEventListener(i,function(e){r(e)},t,!0),u.default.ajaxPost(t._apiManager.RepublishUrl,{appid:t._authInfo.appid,session:t._authInfo.sessionId,callid:t._authInfo.publishCallId,tid:i,server:t._apiManager.serverUrl,token:t._authInfo.token},e).then(function(e){}).catch(function(e){e.tid=i,n(e)})})}},{key:"unpublish",value:function(){var e=this;return new Promise(function(t,r){var n=_.default.random(32);e._httplistener.addEventListener(n,function(e){t(e)},e,!0),u.default.post(e._apiManager.UnPublishUrl,{appid:e._authInfo.appid,session:e._authInfo.sessionId,callid:e._authInfo.publishCallId,tid:n,server:e._apiManager.serverUrl,token:e._authInfo.token}).then(function(e){}).catch(function(e){e.tid=n,r(e)})})}},{key:"subscribe",value:function(e,t,r){var n=this;return new Promise(function(i,o){var a=_.default.random(32);n._httplistener.addEventListener(a,function(e){e.code?o(33620257==e.code?{errorCode:v.default.ERROR_H5_COMPATIBLE_MODE,message:e.description}:e):i(e)}),u.default.ajaxPost(n._apiManager.SubscribeUrl,{appid:n._authInfo.appid,session:n._authInfo.sessionId,callid:e,callee:t,tid:a,server:n._apiManager.serverUrl,token:n._authInfo.token},r).then(function(e){}).catch(function(e){e&&(e.tid=a),o(e)})})}},{key:"resubscribe",value:function(e,t,r){var n=this;return new Promise(function(i,o){var a=_.default.random(32);n._httplistener.addEventListener(a,function(e){i(e)},n,!0),u.default.ajaxPost(n._apiManager.ReSubscribeUrl,{appid:n._authInfo.appid,session:n._authInfo.sessionId,callid:e,callee:t,tid:a,server:n._apiManager.serverUrl,token:n._authInfo.token},r).then(function(e){}).catch(function(e){e.tid=a,o(e)})})}},{key:"answer",value:function(e,t,r){var n=this;return new Promise(function(i,o){var a=_.default.random(32);n._httplistener.addEventListener(a,function(e){i(e)},n,!0),u.default.ajaxPost(n._apiManager.AnswerUrl,{appid:n._authInfo.appid,session:n._authInfo.sessionId,callid:e,callee:t,tid:a,server:n._apiManager.serverUrl,token:n._authInfo.token},r).then(function(e){}).catch(function(e){e.tid=a,o(e)})})}},{key:"_initListener",value:function(){var e=this;this._httplistener=new f.HttpSignalingListener(this._authInfo,this._apiManager),this._httplistener.addEventListener(l.default.TimeOut,function(){e.dispatchEvent(l.default.TimeOut)}),this._httplistener.addEventListener(l.default.Join,function(t){e._response(t.tid),e.dispatchEvent(l.default.Join,t)}),this._httplistener.addEventListener(l.default.StatusNotify,function(t){e._response(t.tid),e.dispatchEvent(l.default.StatusNotify,t)}),this._httplistener.addEventListener(l.default.Offer,function(t){e._response(t.tid),e.dispatchEvent(l.default.Offer,t)}),this._httplistener.addEventListener(l.default.Publishers,function(t){e._response(t.tid),e.dispatchEvent(l.default.Publishers,t)}),this._httplistener.addEventListener(l.default.UnPublish,function(t){e._response(t.tid),e.dispatchEvent(l.default.UnPublish,t)}),this._httplistener.addEventListener(l.default.Leave,function(t){e._response(t.tid),e.dispatchEvent(l.default.Leave,t)}),this._httplistener.addEventListener(l.default.SignalError,function(t){e._response(t.tid),e.dispatchEvent(l.default.SignalError,t)}),this._httplistener.addEventListener(l.default.Bye,function(t){e._response(t.tid),e.dispatchEvent(l.default.Bye,t)})}},{key:"_response",value:function(e,t){u.default.ajaxPost(this._apiManager.PollingResponseUrl,{appid:this._authInfo.appid,session:this._authInfo.sessionId,server:this._apiManager.serverUrl,token:this._authInfo.token,tid:e},JSON.stringify({code:0,description:"success",data:{event:t,contentType:"sophon",content:"test"}})).then(function(e){}).catch(function(e){})}}]),t}(h.SignalingBase)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HttpSignalingListener=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(50),u=n(c),f=r(42),d=n(f),l=r(14),h=n(l);t.HttpSignalingListener=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._authInfo=e,n._apiManager=r,n._disposed=!1,n._canceled=!1,n._longPollingHandle=null,n._seq=0,n._nosessionIndex=0,n._heartBeatTimerIndex=0,n._reqFialdIndex=0,n}return a(t,e),s(t,[{key:"stop",value:function(){this.cancel(),this._stopHeartBeatTimer()}},{key:"reset",value:function(){this._disposed=!1}},{key:"cancel",value:function(){this._canceled=!0,this._longPollingHandle&&(clearTimeout(this._longPollingHandle),this._longPollingHandle=null,this._nosessionIndex=0)}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.cancel(),this._canceled=!1,this._longPollingHandle=setTimeout(function(){e._listen()},t)}},{key:"_restart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this._canceled||this.start(e)}},{key:"_listen",value:function(){var e=this;new Promise(function(t,r){return e._disposed?void r({errorCode:0}):e._authInfo.userId&&e._authInfo.token?(++e._seq,void d.default.get(e._apiManager.PollingUrl,{appid:e._authInfo.appid,session:e._authInfo.sessionId,server:e._apiManager.serverUrl,token:e._authInfo.token,merge:!0,seq:e._seq}).then(function(e){return e}).catch(function(e){return e}).then(function(r){r&&void 0!==r.datalist?(r.datalist?e._onSignalingDataList(r.datalist):e._onSignalingData(r),e._resetHeartBeatTimer(),e._restart(0),e._reqFialdIndex=0):(++e._reqFialdIndex,e._reqFialdIndex<=10?e._restart(0):e._reqFialdIndex<=100?e._restart(1e3):e._restart(5e3)),t()})):void t(null)})}},{key:"_resetHeartBeatTimer",value:function(){this._stopHeartBeatTimer(),this._startHeartBeatTimer()}},{key:"_stopHeartBeatTimer",value:function(){this._heartBeatTimerIndex&&clearTimeout(this._heartBeatTimerIndex),this._heartBeatTimerIndex=0}},{key:"_startHeartBeatTimer",value:function(){var e=this;this._heartBeatTimerIndex=setTimeout(function(t){e._disposed=!0,e.cancel(),e.dispatchEvent(u.default.TimeOut,{})},9e4)}},{key:"_onSignalingDataList",value:function(e){var t=this;e&&e.forEach(function(e){if(e)if(0==e.code)t._onSignalingData(e.data);else{var r=e.data;r.code=r.code?r.code:e.code,r.description=r.description?r.description:e.description,t._onSignalingData(r)}})}},{key:"_onSignalingData",value:function(e){e.event&&this.dispatchEvent(e.event,e),e.tid&&this.dispatchEvent(e.tid,e)}}]),t}(h.default)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RoomServerSignaling=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(170),u=r(346),f=r(350),d=n(f),l=r(30),h=n(l),p={CONNECTIONING:0,CONNECTED:1,DISCONNECTED:2,RECONECTING:3};t.RoomServerSignaling=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._signalingStatus=p.DISCONNECTED,r._initRoomServerClient(e),r}return a(t,e),s(t,[{key:"isConnecting",value:function(){return this._signalingStatus===p.CONNECTIONING}},{key:"isConnected",value:function(){return this._signalingStatus===p.CONNECTED}},{key:"isDisconnected",value:function(){return this._signalingStatus===p.DISCONNECTED}},{key:"isReconnecting",value:function(){return this._signalingStatus===p.RECONECTING}},{key:"joinChannel",value:function(e,t,r){var n=this;return new Promise(function(i,o){n._signalingStatus=p.CONNECTIONING,n._roomServerClient.joinChannel(e,t,r).then(function(e){n._signalingStatus=p.CONNECTED,i(e)}).catch(function(e){n._signalingStatus=p.DISCONNECTED,o(e)})})}},{key:"uploadStatus",value:function(e){return this._roomServerClient.uploadStatus(e)}},{key:"leave",value:function(){var e=this;return new Promise(function(t,r){e._roomServerClient.leave().then(function(r){e._signalingStatus=p.DISCONNECTED,t(r)}).catch(function(e){r(e)})})}},{key:"publish",value:function(e){return this._roomServerClient.publish(e)}},{key:"_initRoomServerClient",value:function(e){this._roomServerClient=new u.Roomserverclient(this,e)}},{key:"setChannelProfile",value:function(e,t,r){p.DISCONNECTED===this._signalingStatus?this._channelProfileManager.setChannelProfile(e)?t&&t():r&&r({code:d.default.ERROR_CHANNELPROFILE_VALUE,reason:"channelprofile wrong"}):r&&r({code:d.default.ERROR_CHANNELPROFILE,reason:"can not set channelprofile"})}},{key:"setRole",value:function(e,t,r){var n=this;if(p.CONNECTED===this._signalingStatus){var i=this._channelProfileManager.getClientRole(e);this._channelProfileManager.isInteractiveLive?i?this._roomServerClient.roleUpdate(i,function(){n._channelProfileManager.setRole(e),t&&t()},function(e){r&&r(e)}):r&&r({code:d.default.ERROR_ROLE_VALUE,reason:"role wrong"}):t&&t()}else p.DISCONNECTED===this._signalingStatus?this._channelProfileManager.setRole(e)?t&&t():r&&r({code:d.default.ERROR_ROLE_VALUE,reason:"role wrong"}):r&&r({code:d.default.ERROR_CONNECTING_ROLE,reason:"connecting try later"})}},{key:"rejoin",value:function(e,t,r,n){var i=this;return this._checkAuthInfo(this._authInfo)?this._compareAuthInfo(this._authInfo,e)?void(p.DISCONNECTED===this._signalingStatus?(this._reconnectUids=t,this._authInfo=e,this._authInfo.session=h.default.random(32),this._getGslb(function(t){p.RECONECTING,i._roomServerClient.joinChannel(t,i._channelProfileManager.getRole(),i._channelProfileManager.getChannelProfile(),i._authInfo,function(){i._signalingStatus=p.CONNECTED,r&&r()},function(t){i.joinChannel(e,function(){r&&r()},function(e){i._reconnectUids=[],n&&n(e)})})},function(e){i._reconnectUids=[],i._signalingStatus=p.DISCONNECTED,onFial&&onFial(e)})):r&&r()):void(n&&n({code:d.default.ERROR_WRONG_AUTHINFO,reason:"wrong authinfo"})):void(n&&n({code:d.default.ERROR_NOT_LOGIN,reason:"not logged in"}))}},{key:"unpublish",value:function(e,t){this._roomServerClient.unpublish(e,t)}},{key:"subscribe",value:function(e,t,r){var n=this._userManager.getUserInfo(e);n?t&&t(n.pullstreamurl):r&&r({code:d.default.ERROR_NO_USER,reason:"user not exist"})}},{key:"unsubscribe",value:function(e,t,r){t&&t()}},{key:"muteLocal",value:function(e,t,r){this._roomServerClient.muteLocal(e,t,r)}},{key:"unmuteLocal",value:function(e,t,r){this._roomServerClient.unmuteLocal(e,t,r)}},{key:"destroy",value:function(e,t){this._roomServerClient.leave(e,t)}},{key:"_getGslb",value:function(e,t){var r={appid:this._authInfo.appid,channelid:this._authInfo.channelid,userid:this._authInfo.userid,nonce:this._authInfo.nonce,timestamp:this._authInfo.timestamp,session:this._authInfo.session,token:this._authInfo.token,tokensid:!0,tcpturn:!1,arch:"grtn",channelprofile:this._channelProfileManager.getChannelProfile()},n=this._authInfo.gslb[0]+"/gslb/v1/allocate?",i=!0;for(var o in r)i?i=!1:n+="&",n+=o+"="+r[o];wx.request({url:n,data:{},header:{},method:"GET",dataType:"json",responseType:"text",success:function(t){var r=t&&t.data&&t.data.data&&t.data.data.roomservers?t.data.data.roomservers:[];e&&e(r)},fail:function(e){t&&t(e)}})}},{key:"_retryConnect",value:function(){var e=this;this._retryIndex>=5||(++this._retryIndex,this._signalingStatus=p.RECONECTING,this._roomServerClient.joinChannel(null,this._channelProfileManager.getRole(),this._channelProfileManager.getChannelProfile(),this._authInfo,function(){e._signalingStatus=p.CONNECTED,e._retryIndex=0},function(t){e._signalingStatus=p.DISCONNECTED,setTimeout(function(){e._retryConnect()},4e3)}))}},{key:"_checkAuthInfo",value:function(e){return!!(e&&e.appid&&e.channelid&&e.userid&&e.nonce&&e.timestamp&&e.token)}},{key:"_compareAuthInfo",value:function(e,t){return!(!this._checkAuthInfo(e)||!this._checkAuthInfo(t)||e.appid!==t.appid||e.channelid!==t.channelid||e.userid!==t.userid)}}]),t}(c.SignalingBase)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Roomserverclient=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(14),u=n(c),f=r(171),d=n(f),l=r(347),h=r(349),p=r(30),_=n(p);t.Roomserverclient=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._authInfo=r,n._signaling=e,n._keepAliveTimer=0,n._roomServers=null,n._initMessageCenter(),n._callbackManager=new h.CallbackManager,n._publishUrl="",n._signal="",n._callid="",n._seqIndex=0,n._muteLocalAudio=!1,n._muteLocalVideo=!1,n}return a(t,e),s(t,[{key:"joinChannel",value:function(e,t,r){var n=this;return new Promise(function(i,o){var a=e+"?authtype=app&appid="+n._authInfo.appid+"&channelid="+n._authInfo.channel+"&userid="+n._authInfo.userId+"&nonce="+n._authInfo.nonce+"&timestamp="+n._authInfo.timestamp+"&token="+n._authInfo.token+"&tid="+_.default.random(32);n._messageCenter.connectRoomServer(a).then(function(){var e=void 0;e=n._createPkg(d.default.JOINCHANNEL),e.data.configure={clientrole:t,channelprofile:r},n._callbackManager.addEventMapCallback(e.msgtype,e.tid,function(e){i(e)},function(e){o(e)}),n._messageCenter.sendMessage(e)}).catch(function(e){o(e)})})}},{key:"uploadStatus",value:function(e){var t=this;return new Promise(function(r,n){var i=t._createPkg(d.default.STATUSREPORT);i.data.status=e,t._callbackManager.addEventMapCallback(i.msgtype,i.tid,function(e){r(e)},function(e){n(e)}),t._messageCenter.sendMessage(i)})}},{key:"leave",value:function(){var e=this;return new Promise(function(t,r){if(e._authInfo){var n=e._createPkg(d.default.LEAVECHANNEL);e._callbackManager.addEventMapCallback(n.msgtype,n.tid,function(e){t(e)},function(e){r(e)}),e._messageCenter.sendMessage(n)}})}},{key:"publish",value:function(e,t){var r=this,n=this._createPkg(d.default.REFRESHURL);this._callbackManager.addEventMapCallback(d.default.REFRESHURL,n.tid,function(t){r._publishUrl=t&&t.pushstreamurl?t.pushstreamurl:r._publishUrl,e&&e(r._publishUrl)},function(t){e&&e(r._publishUrl)}),this._messageCenter.sendMessage(n),this.unpublish(function(){setTimeout(function(){var e=r._createPkg(d.default.PUBLISH);r._callbackManager.addEventMapCallback(d.default.PUBLISH,e.tid,function(e){},function(e){}),r._messageCenter.sendMessage(e)},3e3)},function(e){})}},{key:"roleUpdate",value:function(e,t,r){var n=this._createPkg(d.default.ROLEUPDATE);n.data.clientrole=e,this._callbackManager.addEventMapCallback(n.msgtype,n.tid,t,r),this._messageCenter.sendMessage(n)}},{key:"unpublish",value:function(e,t){var r=this._createPkg(d.default.UNPUBLISH);this._callbackManager.addEventMapCallback(d.default.UNPUBLISH,r.tid,function(){e&&e()},function(e){t&&t(e)}),this._messageCenter.sendMessage(r)}},{key:"_createPkg",value:function(e){++this._seqIndex;var t={version:1,msgtype:e,tid:_.default.random(32),header:{appid:this._authInfo.appid,channelid:String(this._authInfo.channel),sessionid:this._authInfo.sessionId,userid:this._authInfo.userId},data:{seq:this._seqIndex}};switch(e){case d.default.JOINCHANNEL:case d.default.STATUSREPORT:case d.default.ROLEUPDATE:case d.default.RECONNECT:t.header.displayName=this._authInfo.displayName;break;case d.default.REFRESHURL:t.header.displayName=this._authInfo.displayName,t.data.sessionid=this._authInfo.session,t.data.signal=this._signal,t.data.pushstreamurl=this._publishUrl,t.data.users=[];break;case d.default.PUBLISH:case d.default.UNPUBLISH:this._callid||(this._callid=_.default.random(32)),t.msgtype=d.default.PUBLISH,t.data.users=[{userid:this._authInfo.userid,sessionid:this._authInfo.session,displayname:this._authInfo.displayName,callid:this._callid,subscribe:{signal:this._signal,pullstreamurl:this._publishUrl},tracks:[]}],d.default.PUBLISH===e&&(t.data.users[0].tracks.push({msid:"sophon_audio"}),t.data.users[0].tracks.push({msid:"sophon_video_camera_large"}));break;case d.default.KEEPALIVE:case d.default.LEAVECHANNEL:}return t}},{key:"_startKeepAlive",value:function(){var e=this;this._keepAliveTimer||(this._keepAliveTimer=setInterval(function(){e._messageCenter.sendMessage(e._createPkg(d.default.KEEPALIVE))},5e3))}},{key:"_stopKeepAlive",value:function(){this._keepAliveTimer&&clearInterval(this._keepAliveTimer),this._keepAliveTimer=0}},{key:"_initMessageCenter",value:function(){var e=this;this._messageCenter=new l.MessageCenter,this._messageCenter.addEventListener(d.default.JOINCHANNEL,function(t){e._onJoinResponse(t)}),this._messageCenter.addEventListener(d.default.LEAVECHANNEL,function(t){e._onLeaveResponse(t)}),this._messageCenter.addEventListener(d.default.PUBLISH,function(t){e._onPublishResponse(t)}),this._messageCenter.addEventListener(d.default.NOTIFYPUBLISH,function(t){e._onNotifyPublish(t)}),this._messageCenter.addEventListener(d.default.NOTIFYSTATUS,function(t){e._onNotifyStatus(t)}),this._messageCenter.addEventListener(d.default.NOTIFYLEAVE,function(t){e._onNotifyLeave(t)}),this._messageCenter.addEventListener(d.default.STATUSREPORT,function(t){e._onStatusReportResponse(t)}),this._messageCenter.addEventListener(d.default.REFRESHURL,function(t){e._onRefreshUrl(t)}),this._messageCenter.addEventListener(d.default.ROLEUPDATE,function(t){e._onRoleUpdate(t)}),this._messageCenter.addEventListener(d.default.WSCLOSE,function(t){e._signaling.isDisconnected()||(e._messageCenter.disconnect(),e.dispatchEvent(d.default.WSCLOSE,t))}),this._messageCenter.addEventListener(d.default.RECONNECT,function(t){e._onReconectResponse(t)}),this._messageCenter.addEventListener(d.default.WSERROR,function(t){e._onWSError(t)})}},{key:"_onJoinResponse",value:function(e){e&&200==e.code?(this._startKeepAlive(),this._publishUrl=e.data.pushstreamurl,this._signal=e.data.signal,this._callbackManager.excuteEventMapCallback(d.default.JOINCHANNEL,e.tid,!0,e),e.data.users&&e.data.users.length&&this.dispatchEvent(d.default.NOTIFYPUBLISH,e.data.users)):400==e.code?this._callbackManager.excuteEventMapCallback(d.default.JOINCHANNEL,e.tid,!1,{reason:"channel profile mismatched"}):this._callbackManager.excuteEventMapCallback(d.default.JOINCHANNEL,null,!1,e)}},{key:"_onLeaveResponse",value:function(e){e&&200==e.code?(this._stopKeepAlive(),this._messageCenter.disconnect(),this._callbackManager.excuteEventMapCallback(d.default.LEAVECHANNEL,e.tid,!0,null)):this._callbackManager.excuteEventMapCallback(d.default.LEAVECHANNEL,e.tid,!1,e)}},{key:"_onPublishResponse",value:function(e){e&&200==e.code?this._callbackManager.excuteEventMapCallback(d.default.PUBLISH,e.tid,!0,this._publishUrl):this._callbackManager.excuteEventMapCallback(d.default.PUBLISH,e.tid,!1,null)}},{key:"_onStatusReportResponse",value:function(e){e&&200==e.code?this._callbackManager.excuteEventMapCallback(d.default.STATUSREPORT,e.tid,!0,null):this._callbackManager.excuteEventMapCallback(d.default.STATUSREPORT,e.tid,!1,e)}},{key:"_onRefreshUrl",value:function(e){e&&200==e.code?this._callbackManager.excuteEventMapCallback(d.default.REFRESHURL,e.tid,!0,e.data):this._callbackManager.excuteEventMapCallback(d.default.REFRESHURL,e.tid,!1,e)}},{key:"_onRoleUpdate",value:function(e){e&&200===e.code?this._callbackManager.excuteEventMapCallback(d.default.ROLEUPDATE,e.tid,!0,null):this._callbackManager.excuteEventMapCallback(d.default.ROLEUPDATE,e.tid,!1,e)}},{key:"_onReconectResponse",value:function(e){e&&200==e.code?(this._startKeepAlive(),this._publishUrl=e.data.pushstreamurl,this._signal=e.data.signal,this._callbackManager.excuteEventMapCallback(d.default.RECONNECT,null,!0,null),e.data.users&&e.data.users.length&&this.dispatchEvent(d.default.NOTIFYPUBLISH,e.data.users)):400==e.code?this._callbackManager.excuteEventMapCallback(d.default.RECONNECT,null,!1,{reason:"channel profile mismatched"}):this._callbackManager.excuteEventMapCallback(d.default.RECONNECT,null,!1,e)}},{key:"_onNotifyPublish",value:function(e){e&&e.length&&this.dispatchEvent(d.default.NOTIFYPUBLISH,e)}},{key:"_onNotifyStatus",value:function(e){if(e&&e.length){for(var t=0;t<e.length;++t){var r=this._parseStatusValue(e[t].status);e[t].muteAudio=r.muteAudio,e[t].muteVideo=r.muteVideo}this.dispatchEvent(d.default.NOTIFYSTATUS,e)}}},{key:"_onNotifyLeave",value:function(e){e&&e.length&&this.dispatchEvent(d.default.NOTIFYLEAVE,e)}},{key:"_onWSError",value:function(e){this._signaling.isReconnecting()&&this._messageCenter.disconnect(),this.dispatchEvent(d.default.WSERROR,e)}},{key:"_getMuteStatus",value:function(e){return"audio"===e?this._muteLocalAudio?"":(this._muteLocalAudio=!0,this._getStatusValue()):"video"===e?this._muteLocalVideo?"":(this._muteLocalVideo=!0,this._getStatusValue()):"all"===e?this._muteLocalAudio&&this._muteLocalVideo?"":(this._muteLocalAudio=!0,this._muteLocalVideo=!0,this._getStatusValue()):void 0}},{key:"_getUnmuteStatus",value:function(e){return"audio"===e?this._muteLocalAudio?(this._muteLocalAudio=!1,this._getStatusValue()):"":"video"===e?this._muteLocalVideo?(this._muteLocalVideo=!1,this._getStatusValue()):"":"all"===e?this._muteLocalAudio||this._muteLocalVideo?(this._muteLocalAudio=!1,this._muteLocalVideo=!1,this._getStatusValue()):"":void 0}},{key:"_getStatusValue",value:function(){for(var e=this._muteLocalAudio?8:0,t=this._muteLocalVideo?16:0,r=(5+e+t).toString(16);r.length<16;)r="0"+r;return r}},{key:"_parseStatusValue",value:function(e){var t=parseInt(e,16),r=!!(2&t),n=!!(8&t),i=!!(16&t);return{muteAudio:r||n,muteVideo:i}}}]),t}(u.default)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MessageCenter=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(14),u=n(c),f=r(348),d=r(171),l=n(d),h=function(){function e(t){a(this,e),this._package=t,this._index=0,this._reconnectSuccess=!0}return s(e,[{key:"addCount",value:function(){++this._index}},{key:"getPackage",value:function(){return this._package}},{key:"tid",get:function(){return this._package.tid}},{key:"index",get:function(){return this._index}}]),e}();t.MessageCenter=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._monitorTimer=0,e._monitorArr=[],e._websocket=new f.WebsocketClient(e._recvMessage.bind(e),e._onError.bind(e),e._onClose.bind(e)),e}return o(t,e),s(t,[{key:"connectRoomServer",value:function(e){return this._websocket.connect(e)}},{key:"sendMessage",value:function(e){this._monitorArr.push(new h(e)),this._websocket.sendMessage(e),this._startMonitorTimer()}},{key:"disconnect",value:function(){this._destroyWebSocket(),this._stopMonitorTimer()}},{key:"destroy",value:function(){this._websocket=null,this._clearCache()}},{key:"_recvMessage",value:function(e){if(e&&e.data)try{var t=JSON.parse(e.data);if(!t)return;switch(this._deleteSendPackageCache(t.tid),t.msgtype){case l.default.JOINCHANNEL:this._onJoinSuccess(t);break;case l.default.LEAVECHANNEL:this._onLeaveSuccess(t);break;case l.default.PUBLISH:this._onPublishSuccess(t);break;case l.default.STATUSREPORT:this._onStatusReport(t);break;case l.default.REFRESHURL:this._onRefreshUrl(t);break;case l.default.NOTIFYPUBLISH:this._onNotifyPublish(t);break;case l.default.NOTIFYSTATUS:this._onNotifyStatus(t);break;case l.default.NOTIFYLEAVE:this._onNotifyLeave(t);break;case l.default.ROLEUPDATE:this._onRoleUpdate(t);break;case l.default.BYE:this._onBye(t);break;case l.default.RECONNECT:this._onReconnect(t)}}catch(e){}}},{key:"_onError",value:function(e){this.dispatchEvent(l.default.WSERROR,e)}},{key:"_onClose",value:function(e){this.dispatchEvent(l.default.WSCLOSE,e)}},{key:"_onJoinSuccess",value:function(e){this.dispatchEvent(l.default.JOINCHANNEL,e)}},{key:"_onLeaveSuccess",value:function(e){this.dispatchEvent(l.default.LEAVECHANNEL,e)}},{key:"_onPublishSuccess",value:function(e){this.dispatchEvent(l.default.PUBLISH,e)}},{key:"_onStatusReport",value:function(e){this.dispatchEvent(l.default.STATUSREPORT,e)}},{key:"_onRefreshUrl",value:function(e){this.dispatchEvent(l.default.REFRESHURL,e)}},{key:"_onRoleUpdate",value:function(e){this.dispatchEvent(l.default.ROLEUPDATE,e)}},{key:"_onNotifyPublish",value:function(e){this._websocket.sendMessage(this._createResponsePkg(l.default.NOTIFYPUBLISH,e.tid)),e.data&&e.data.users&&this.dispatchEvent(l.default.NOTIFYPUBLISH,e.data.users)}},{key:"_onNotifyStatus",value:function(e){this._websocket.sendMessage(this._createResponsePkg(l.default.NOTIFYSTATUS,e.tid)),e.data&&e.data.status&&this.dispatchEvent(l.default.NOTIFYSTATUS,e.data.status)}},{key:"_onNotifyLeave",value:function(e){this._websocket.sendMessage(this._createResponsePkg(l.default.NOTIFYLEAVE,e.tid)),e.data&&e.data.users&&this.dispatchEvent(l.default.NOTIFYLEAVE,e.data.users)}},{key:"_onBye",value:function(e){this._websocket.sendMessage(this._createResponsePkg(l.default.BYE,e))}},{key:"_onReconnect",value:function(e){this.dispatchEvent(l.default.RECONNECT,e)}},{key:"_createResponsePkg",value:function(e,t){return{version:1,code:0,tid:t,msgtype:e,header:{timestamp:0},data:{}}}},{key:"_deleteSendPackageCache",value:function(e){for(var t=0;t<this._monitorArr.length;++t)if(this._monitorArr[t].tid===e){this._monitorArr.splice(t,1);break}}},{key:"_startMonitorTimer",value:function(){var e=this;this._monitorTimer||(this._monitorTimer=setInterval(function(){e._onMonitorTimer()},1e3))}},{key:"_stopMonitorTimer",value:function(){this._monitorTimer&&clearInterval(this._monitorTimer),this._monitorTimer=0}},{key:"_onMonitorTimer",value:function(){for(var e=0,t=0;t<this._monitorArr.length;++t)this._monitorArr[t].addCount(),this._monitorArr[t].index>=9&&(e=t+1),this._monitorArr[t].index%3==0&&this._websocket.sendMessage(this._monitorArr[t].getPackage());e>0&&this._monitorArr.splice(0,e)}},{key:"_clearCache",value:function(){this._monitorArr&&this._monitorArr.splice(0,this._monitorArr.length)}},{key:"_destroyWebSocket",value:function(){this._websocket&&this._websocket.destroy()}}]),t}(u.default)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o={UNINIT:0,CONNECTING:1,CONNECTED:2,DISCONNECTED:3,RECONNECTING:4};t.WebsocketClient=function(){function e(t,r,i){n(this,e),this._ws=null,this._socketConnected=o.UNINIT,this._recvMsgCallback=t,this._onError=r,this._onClose=i,this._wsUrl="",this._retryIndex=0}return i(e,[{key:"connect",value:function(e,t,r){var n=this;return new Promise(function(t,r){n._wsUrl=e,n._socketConnected=o.CONNECTING,n._ws=new WebSocket(n._wsUrl),n._ws?(n._ws.onopen=function(){n._socketConnected=o.CONNECTED,t()},n._ws.onerror=function(e){n._onError(e)},n._ws.onclose=function(e){o.CONNECTING===n._socketConnected?(n._socketConnected=o.DISCONNECTED,r(e)):o.CONNECTED===n._socketConnected&&(n._socketConnected=o.DISCONNECTED,n._onClose(e))},n._ws.onmessage=function(e){n._recvMsgCallback(e)}):r()})}},{key:"sendMessage",value:function(e){o.CONNECTED===this._socketConnected&&this._ws&&e&&this._ws.send(JSON.stringify(e))}},{key:"disconnect",value:function(){this._ws&&this._ws.close(),this._ws=null,this._socketConnected=o.UNINIT,this._wsUrl="",this._retryIndex=0}},{key:"destroy",value:function(){this.disconnect(),this._recvMsgCallback=null,this._onClose=null,this._onError=null}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.CallbackManager=function(){function e(){n(this,e),this._callBackMap={}}return i(e,[{key:"addEventMapCallback",value:function(e,t,r,n){e&&(this._initEvent(e),this._callBackMap[e].push({tid:t,onSuccess:r,onFail:n}))}},{key:"excuteEventMapCallback",value:function(e,t,r,n){if(!e)return"";var i=null;if(this._callBackMap[e])for(var o=0;o<this._callBackMap[e].length;++o)if(this._callBackMap[e][o].tid==t)return i=this._callBackMap[e].splice(o,1)[0],r?i.onSuccess&&i.onSuccess(n):i.onFail&&i.onFail(n),e}},{key:"_initEvent",value:function(e){this._callBackMap[e]||(this._callBackMap[e]=[])}}]),e}()},function(e,t,r){"use strict";e.exports={ERROR_CREATE_WS_FAIL:100001,ERROR_WS_DISCONNECT:100002,ERROR_CHANNELPROFILE_VALUE:100010,ERROR_CHANNELPROFILE:100011,ERROR_ROLE_VALUE:100015,ERROR_CONNECTING_ROLE:100016,ERROR_CHANNELPROFILE_MISMATCHED:100017,ERROR_AUDIENCE_PUBLISH:100018,ERROR_CAN_NOT_MUTE:100019,ERROR_REPEAT_JOIN:100100,ERROR_NOT_LOGIN:100101,ERROR_WRONG_AUTHINFO:100102,ERROR_NO_USER:10200}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.WebTrackingClient=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(63),c=n(s),u=r(17),f=n(u),d=r(41),l=n(d),h=r(7),p=n(h);t.WebTrackingClient=function(){function e(){i(this,e);var t=window.location.href.indexOf("file://")>-1?"http://":"//";this._baseUrl=t+"alirtc.cn-shanghai.log.aliyuncs.com/logstores/client_h5/track",this._index=0,this._initParam()}return a(e,[{key:"uploadCreateInstance",value:function(){var e={evetid:70011};this._report(e),p.default.isUnknow&&this.reportUnknowBrowser()}},{key:"reportJoinChannel",value:function(e,t){var r={evetid:70012,args:JSON.stringify({jnnonce:e?e.nonce:"",jntoken:e?e.token:"",jntm:e?e.timestamp:""})};this._param=o({},this._param,{apid:e?e.appid:"",usrid:e?e.userid:"",channelid:e?e.channel:"",usrn:t||""}),this._report(r)}},{key:"reportJoinChannelRes",value:function(e,t){var r={evetid:70013,args:JSON.stringify({rslt:e,ct:t})};this._report(r)}},{key:"reportGetAuthInfo",value:function(e,t,r){this._param.sesid=r;var n={evetid:70014,args:JSON.stringify({asty:e,rslt:t})};this._report(n)}},{key:"reportLeaveChannel",value:function(){var e={evetid:70015};this._report(e)}},{key:"reportUnknowBrowser",value:function(){var e={evetid:70016,args:JSON.stringify({ua:navigator.userAgent})};this._report(e)}},{key:"_initParam",value:function(){this._param||(this._param={APIVersion:"0.6.0",apid:"",usrid:"",statsvrs:"0.1.0",sesid:"",channelid:"",usrn:"",osn:f.default.systemName,osv:f.default.systemVersion,udid:c.default.uuid,sdkv:l.default.version,bt:p.default.browserName,bv:p.default.browserVersion})}},{key:"_report",value:function(e){++this._index;var t=o({},this._param,{tm:(new Date).getTime(),idx:this._index},e);(new Image).src=this._baseUrl+"?"+this._data2String(t)}},{key:"_data2String",value:function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=r+"="+e[r]);return t}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.RtcMediaDeviceFactory=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(17),s=n(a),c=r(353),u=n(c),f=r(357),d=n(f),l=r(7),h=n(l),p=r(358),_=n(p),m=r(39),v=(n(m),r(362)),b=n(v),y=r(363),g=n(y),S=r(175),w=n(S),k=r(60),E=n(k);t.RtcMediaDeviceFactory=function(){function e(){i(this,e)}return o(e,null,[{key:"createMediaDeviceManager",value:function(e,t){return s.default.isIos?new u.default(e,t):s.default.isAndroid?new d.default(e,t):h.default.isElectron?new _.default(e,t):h.default.isFirefox?new b.default(e,t):h.default.isSafari||h.default.isQQBrowser?new g.default(e,t):h.default.isChrome||h.default.isEdge||h.default.isSogou?new w.default(e,t):new E.default(e,t)}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(172),u=n(c),f=r(8),d=(n(f),function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n._videoProfile.width=480,n._videoProfile.height=640,n}return a(t,e),s(t,[{key:"getDevices",value:function(){var e=this;return new Promise(function(t,r){navigator.mediaDevices.enumerateDevices().then(function(r){var n=[],i=[],o=[];r.forEach(function(e){"audioinput"==e.kind?i.push(e):"audiooutput"===e.kind&&o.push(e)}),n.push({kind:"videoinput",facingMode:"user",label:""}),n.push({kind:"videoinput",facingMode:"environment",label:""});var a={videoDevices:n,audioDevices:i,audioOutputDevices:o};e._log.reportGetDevice(a),t(a)}).catch(function(t){e._log.reportGetDevice(t),r(t)})})}},{key:"_checkResolution",value:function(e,t,r,n){var i={video:{width:r,height:n}};t?i.video.facingMode={exact:t}:e&&(i.video.deviceId={exact:e});navigator.mediaDevices.getSupportedConstraints();return new Promise(function(e,t){navigator.mediaDevices.getUserMedia(i).then(function(t){t.getTracks().forEach(function(e){e.stop()}),e({width:r,height:n})}).catch(function(e){t(e)})})}},{key:"_getPreviewStream",value:function(){var e=this;return new Promise(function(t,r){e._getHoldCameraTrack().then(function(){var r=e._holdCameraTrack.clone(),n=new MediaStream;n.addTrack(r),t(n)}).catch(function(e){r(e)})})}},{key:"_getCameraVideoHoldsConstraints",value:function(){var e={};return this._cameraInfo.facingMode||this._cameraInfo.deviceId?(e.video=this._videoProfile.getVideoConstraints(),this._cameraInfo.facingMode?e.video.facingMode={exact:this._cameraInfo.facingMode}:this._cameraInfo.deviceId&&(e.video.deviceId={exact:this._cameraInfo.deviceId})):e.video=this._videoProfile.getVideoConstraints(),e=this._addAspectRatio(e)}}]),t}(u.default));t.default=d},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this._maxBitrate=t}return i(e,[{key:"_checkValueType",value:function(e){return"number"==typeof e&&NaN!=e}},{key:"maxBitrate",set:function(e){this._checkValueType(e)&&(this._maxBitrate=e)},get:function(){return this._maxBitrate}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(174),c=function(e){return e&&e.__esModule?e:{default:e}}(s),u="never",f=function(e){function t(e,r,o,a){n(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,o,a));return s._curosr=u,s}return o(t,e),a(t,[{key:"cursor",set:function(e){"always"!=e&&"motion"!=e&&u!=e||(this._curosr=e)},get:function(){return this._curosr}}]),t}(c.default);t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={FPS_15:[{width:120,height:120,bitrate:50},{width:160,height:120,bitrate:65},{width:180,height:180,bitrate:100},{width:240,height:120,bitrate:120},{width:320,height:180,bitrate:140},{width:240,height:240,bitrate:140},{width:320,height:240,bitrate:200},{width:424,height:240,bitrate:220},{width:360,height:360,bitrate:260},{width:480,height:360,bitrate:320},{width:640,height:360,bitrate:400},{width:480,height:480,bitrate:400},{width:640,height:480,bitrate:500},{width:848,height:480,bitrate:610},{width:960,height:720,bitrate:910},{width:1280,height:720,bitrate:1130},{width:1920,height:1080,bitrate:2080}],FPS_30:[{width:360,height:360,bitrate:400},{width:480,height:360,bitrate:490},{width:640,height:360,bitrate:600},{width:480,height:480,bitrate:600},{width:640,height:480,bitrate:750},{width:848,height:480,bitrate:930},{width:960,height:720,bitrate:1380},{width:1280,height:720,bitrate:1710},{width:1920,height:1080,bitrate:3150},{width:2560,height:1440,bitrate:4850},{width:3840,height:2160,bitrate:6500}]}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(172),c=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(e,r){n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return o._videoDeviceMap={},o}return o(t,e),a(t,[{key:"getDevices",value:function(){var e=this;return new Promise(function(t,r){navigator.mediaDevices.enumerateDevices().then(function(r){var n=[],i=[],o=[];r.forEach(function(t){"audioinput"==t.kind?i.push(t):"videoinput"===t.kind?t.label&&(t.label.indexOf("front")>-1?(n.push({kind:"videoinput",facingMode:"user",label:""}),e._videoDeviceMap.user=t.deviceId):t.label.indexOf("back")>-1&&(n.push({kind:"videoinput",facingMode:"environment",label:""}),e._videoDeviceMap.environment=t.deviceId)):"audiooutput"===t.kind&&o.push(t)});var a={videoDevices:n,audioDevices:i,audioOutputDevices:o};e._log.reportGetDevice(a),t(a)}).catch(function(t){e._log.reportGetDevice(t),r(t)})})}}]),t}(c.default);t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},u=r(175),f=n(u),d=r(8),l=n(d),h=function(e){function t(e,r){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return a(t,e),s(t,[{key:"getPublishStream",value:function(){var e=this;return new Promise(function(t,r){e._checkSupport().then(function(){if(e._publishStream)t(e._publishStream);else{e._publishStream=new MediaStream;var n=!1,i=!1,o=!1;if(e._enableCamera)e._getCameraVideoTrack().then(function(r){if(e._publishStream.addTrack(r),r.enabled=e._common.configLocalCameraPublish,e._labelMap[r.id]=l.default.LargeVideo,i=!0,n&&o)return void t(e._publishStream)}).catch(function(t){e.releasePublishStream(),r(t)});else if(i=!0,n&&o)return void t(e._publishStream);var a=void 0;if(a=e._externalScreenTrack?e._externalScreenTrack:e._canvasScreenShare.getScreenShareVideoTrack(),e._common.configLocalScreenPublish)if(e._externalScreenTrack){if(a.enabled=e._common.configLocalScreenPublish,e._labelMap[a.id]=l.default.ScreenShareVideo,e._publishStream.addTrack(a),o=!0,n&&i)return void t(e._publishStream)}else e._canvasScreenShare.startScreenShare().then(function(){}).catch(function(t){e._common.configLocalScreenPublish=!1}).then(function(){if(a.enabled=e._common.configLocalScreenPublish,e._labelMap[a.id]=l.default.ScreenShareVideo,e._publishStream.addTrack(a),o=!0,n&&i)return void t(e._publishStream)});else if(a.enabled=e._common.configLocalScreenPublish,e._labelMap[a.id]=l.default.ScreenShareVideo,e._publishStream.addTrack(a),o=!0,n&&i)return void t(e._publishStream);e._getAudioTrack().then(function(r){if(e._publishStream.addTrack(r),r.enabled=e._common.configLocalAudioPublish,n=!0,o&&i)return void t(e._publishStream)}).catch(function(t){e.releasePublishStream(),r(t)})}}).catch(function(e){r(e)})})}},{key:"releasePublishStream",value:function(){this._canvasScreenShare.relaeaseStream(),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"releasePublishStream",this).call(this)}}]),t}(f.default);t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(7),s=n(a),c=r(18),u=n(c),f=r(360),d=n(f),l=function(){function e(t,r){i(this,e),this._screenProfile=t,this._screenShareCanvas=document.createElement("canvas"),this._screenShareCanvas.width=this._screenProfile.width,this._screenShareCanvas.height=this._screenProfile.height,this._screenShareVideo=document.createElement("video"),this._screenShareVideo.autoplay=!0,this._context=this._screenShareCanvas.getContext("2d"),this._canvasVideoTrack=null,this._screenShareTrack=null,this._screenShareAudioTrack=null,this._timerId=null,this._errorCallback=r,this._video=null,this._timerMinGap=20,this._timerGap=60,this._lastTimeStamp=0,this._workerTimer=new d.default,this._aspectRatio=(this._screenProfile.width/this._screenProfile.height).toFixed(3)}return o(e,[{key:"getScreenShareAudioTrack",value:function(){return this._screenShareAudioTrack}},{key:"getScreenShareVideoTrack",value:function(){return this._canvasVideoTrack||(this._screenShareCanvas.width=this._screenProfile.width,this._screenShareCanvas.height=this._screenProfile.height,this._canvasVideoTrack=this._screenShareCanvas.captureStream(this._screenProfile.frameRate).getVideoTracks()[0]),this._canvasVideoTrack}},{key:"startScreenShare",value:function(){var e=this;return new Promise(function(t,r){e.stopScreenShare();var n=e._screenProfile.width,i=e._screenProfile.height,o=e._screenProfile.frameRate;e._timerGap=1e3/(e._screenProfile.frameRate+1),s.default.isElectron?e._startElectronScreenShare(n,i,o).then(function(){t()}).catch(function(e){r(e)}):s.default.isChrome||s.default.isEdge||s.default.isSogou?e._startChromeScreenShare(n,i,o).then(function(){t()}).catch(function(e){r(e)}):s.default.isFirefox?e._startFirefoxScreenShare(n,i,o).then(function(){t()}).catch(function(e){r(e)}):r()})}},{key:"stopScreenShare",value:function(){this._stopTimer(),this._screenShareTrack&&this._screenShareTrack.stop(),this._screenShareVideo.srcObject=null,this._screenShareAudioTrack&&this._screenShareAudioTrack.stop(),this._screenShareAudioTrack=null,this._screenShareTrack=null}},{key:"relaeaseStream",value:function(){this.stopScreenShare(),this._canvasVideoTrack&&this._canvasVideoTrack.stop(),this._canvasVideoTrack=null}},{key:"_startTimer",value:function(){var e=this;this._workerTimer.isSupport?this._workerTimer.startTimer(function(){e._onTimer()},this._timerGap,this._timerMinGap):(this._stopTimer(),this._timerId=setInterval(function(){e._onTimer()},20)),this._onTimer()}},{key:"_stopTimer",value:function(){this._workerTimer.isSupport?this._workerTimer.stopTimer():(this._timerId&&clearInterval(this._timerId),this._timerId=null)}},{key:"_onTimer",value:function(){var e=(new Date).getTime();if(e-this._lastTimeStamp>this._timerGap){this._lastTimeStamp=e,this._context.clearRect(0,0,this._screenShareCanvas.width,this._screenShareCanvas.height);var t=this._screenShareVideo.videoWidth,r=this._screenShareVideo.videoHeight,n=(t/r).toFixed(3);if(n==this._aspectRatio)this._context.drawImage(this._screenShareVideo,0,0);else if(this._aspectRatio>n)if(Math.abs(this._screenShareCanvas.height-r)>5){var i=this._screenShareCanvas.height/r,o=t*i;this._context.drawImage(this._screenShareVideo,.5*(this._screenShareCanvas.width-o),0,o,this._screenShareCanvas.height)}else this._context.drawImage(this._screenShareVideo,.5*(this._screenShareCanvas.width-t),0);else if(Math.abs(this._screenShareCanvas.width-t)>5){var a=this._screenShareCanvas.width/t,s=r*a;this._context.drawImage(this._screenShareVideo,0,.5*(this._screenShareCanvas.height-s),this._screenShareCanvas.width,s)}else this._context.drawImage(this._screenShareVideo,0,.5*(this._screenShareCanvas.height-r))}}},{key:"_excuteScreenShareErrorCallback",value:function(e){this._errorCallback&&this._errorCallback(e)}},{key:"_startBackgroundAudio",value:function(){var e=this;this._video||navigator.mediaDevices.getUserMedia({audio:!0}).then(function(t){e._video=document.createElement("video"),e._video.autoplay=!0,e._video.volume=0,e._video.srcObject=t}).catch(function(e){})}},{key:"_startElectronScreenShare",value:function(e,t,r){var n=this;return new Promise(function(r,i){navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{chromeMediaSource:"screen",minWidth:e,maxWidth:e,minHeight:t,maxHeight:t}}}).then(function(e){n._screenShareTrack=e.getVideoTracks()[0],n._screenShareTrack.onended=function(e){n._excuteScreenShareErrorCallback(u.default.parseScreenShareDeviceError(e))},n._screenShareVideo.srcObject=e,n._startTimer(),r()}).catch(function(e){i(e)})})}},{key:"_startElectronDesktopAudio",value:function(){return new Promise(function(e,t){navigator.mediaDevices.getUserMedia({video:{mandatory:{chromeMediaSource:"desktop"}},audio:{mandatory:{chromeMediaSource:"desktop"}}}).then(function(e){}).catch(function(e){})})}},{key:"_startChromeScreenShare",value:function(e,t,r){var n=this;return new Promise(function(i,o){navigator.mediaDevices.getDisplayMedia({video:{width:e,height:t,frameRate:r},audio:!0}).then(function(e){n._screenShareAudioTrack=e.getAudioTracks()[0],n._screenShareTrack=e.getVideoTracks()[0],n._screenShareTrack.onended=function(e){n._excuteScreenShareErrorCallback(u.default.parseScreenShareDeviceError(e))},n._screenShareAudioTrack&&e.removeTrack(n._screenShareAudioTrack),n._screenShareVideo.srcObject=e,n._workerTimer.isSupport||n._startBackgroundAudio(),n._startTimer(),i()}).catch(function(e){n._excuteScreenShareErrorCallback(u.default.parseScreenShareDeviceError(e)),o(e)})})}},{key:"_startFirefoxScreenShare",value:function(e,t,r){var n=this;navigator.mediaDevices.getUserMedia({video:{mediaSource:"screen"}}).then(function(e){n._screenShareTrack=e.getVideoTracks()[0],n._screenShareTrack.onended=function(e){},n._screenShareVideo.srcObject=e,n._startTimer(),resolve()}).catch(function(e){n._excuteScreenShareErrorCallback(u.default.parseScreenShareDeviceError(e)),reject(e)})}},{key:"_startSafariScreenShare",value:function(e,t,r){var n=this;return new Promise(function(i,o){navigator.mediaDevices.getDisplayMedia({video:{width:e,height:t,frameRate:r}}).then(function(e){n._screenShareTrack=e.getVideoTracks()[0],n._screenShareTrack.onended=function(e){n._excuteScreenShareErrorCallback(u.default.parseScreenShareDeviceError(e))},n._screenShareVideo.srcObject=e,n._workerTimer.isSupport||n._startBackgroundAudio(),n._startTimer(),i()}).catch(function(e){n._excuteScreenShareErrorCallback(u.default.parseScreenShareDeviceError(e)),o(e)})})}}]),e}();t.default=l},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this._worker=null,this._callback=null}return i(e,[{key:"startTimer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;e&&(this._callback=e,this._releaseWorker(),this._createWorker(t,r),this._worker.postMessage({cmd:1}))}},{key:"stopTimer",value:function(){this._worker&&(this._worker.postMessage({cmd:2}),this._releaseWorker())}},{key:"_onTimer",value:function(){this._callback&&this._callback.apply()}},{key:"_createWorker",value:function(e,t){var r=this,n="var timerId=0;function startTimer(){if(!timerId){var ts=new Date().getTime();timerId=setInterval(function(){var newTS=new Date().getTime();var gap=newTS-ts;if(gap>="+e+"){ts=newTS;this.postMessage({cmd:3})}},"+t+");}};this.onmessage=function(event){if(event.data){if(event.data.cmd===1){startTimer()}else if(event.data.cmd===2){stopTimer()}}};function stopTimer(){if(timerId){clearInterval(timerId);timerId=0}};",i=window.URL||window.webkitURL||window.mozURL||window.msURL,o=new Blob([n],{type:"text/javascript"}),a=i.createObjectURL(o);this._worker=new Worker(a),this._worker.objectURL=a;var s=(new Date).getTime();this._worker.onmessage=function(e){if(e.data&&3===e.data.cmd){var t=(new Date).getTime();s=t,r._onTimer()}}}},{key:"_releaseWorker",value:function(){this._worker&&(this._worker.terminate(),this._worker=null)}},{key:"isSupport",get:function(){return"undefined"!=typeof Worker}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.audioTrackArr=t,this.useGainNode=!0,this.audioContextConstructor=null}return i(e,[{key:"getMixedAudioTrack",value:function(){var e=this;return this.audioContextConstructor||(this.audioContextConstructor=new AudioContext),this.audioContext=this.audioContextConstructor,this.audioSource=[],this.useGainNode&&(this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination),this.gainNode.gain.value=0),this.audioTrackArr.forEach(function(t){var r=new MediaStream;r.addTrack(t);var n=e.audioContext.createMediaStreamSource(r);e.useGainNode&&n.connect(e.gainNode),e.audioSource.push(n)}),this.audioDestination=this.audioContext.createMediaStreamDestination(),this.audioSource.forEach(function(t){t.connect(e.audioDestination)}),this.audioDestination.stream.getAudioTracks()[0]}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(60),c=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(e,r){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return o(t,e),a(t,[{key:"_checkResolution",value:function(e,t,r,n){var i={audio:!1,video:{width:{exact:r}}};return i.video={width:r,height:n},e&&(i.video.deviceId={exact:e}),new Promise(function(e,t){navigator.mediaDevices.getUserMedia(i).then(function(t){t.getTracks().forEach(function(e){e.stop()}),e({width:r,height:n})}).catch(function(e){t(e)})})}}]),t}(c.default);t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(60),u=n(c),f=r(8),d=n(f),l=r(18),h=n(l),p=r(13),_=n(p),m=r(7),v=n(m),b=function(e){function t(e,r){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return a(t,e),s(t,[{key:"enableHighDefinitionPreview",value:function(e){return this._enableHighDefinitionPreview=e,this._preViewStream&&this._localVideoElement&&(this._releasePreviewStream(),this.getPreViewStream(this._localVideoElement)),!0}},{key:"getPublishStream",value:function(){var e=this;return new Promise(function(t,r){e._checkSupport().then(function(){if(e._publishStream)t(e._publishStream);else if(e._publishStream=new MediaStream,e._common.isAudioOnly)e._getAudioTrack().then(function(r){e._publishStream.addTrack(r),r.enabled=e._common.configLocalAudioPublish,e._labelMap[r.id]=d.default.Audio,t(e._publishStream)}).catch(function(t){e.releasePublishStream(),r(t)});else{var n=!1,i=!1,o=!1;if(v.default.isSupportScreenShare){var a=void 0;if(a=e._externalScreenTrack?e._externalScreenTrack:e._canvasScreenShare.getScreenShareVideoTrack(),e._common.configLocalScreenPublish)if(e._externalScreenTrack){if(a.enabled=e._common.configLocalScreenPublish,e._labelMap[a.id]=d.default.ScreenShareVideo,e._publishStream.addTrack(a),o=!0,n&&i)return void t(e._publishStream)}else e._canvasScreenShare.startScreenShare().then(function(){}).catch(function(t){e._common.configLocalScreenPublish=!1}).then(function(){if(a.enabled=e._common.configLocalScreenPublish,e._labelMap[a.id]=d.default.ScreenShareVideo,e._publishStream.addTrack(a),o=!0,n&&i)return void t(e._publishStream)});else if(a.enabled=e._common.configLocalScreenPublish,e._labelMap[a.id]=d.default.ScreenShareVideo,e._publishStream.addTrack(a),o=!0,n&&i)return void t(e._publishStream)}else o=!0;if(e._getAudioTrack().then(function(r){if(e._publishStream.addTrack(r),r.enabled=e._common.configLocalAudioPublish,n=!0,e._labelMap[r.id]=d.default.Audio,i&&o)return void t(e._publishStream)}).catch(function(t){e.releasePublishStream(),r(t)}),e._enableCamera)e._getCameraVideoTrack().then(function(t){e._publishStream.addTrack(t),t.enabled=e._common.configLocalCameraPublish,e._labelMap[t.id]=d.default.LargeVideo}).catch(function(t){var n=h.default.parseVideoDeviceError(t);e._common.configLocalCameraPublish=!1,e._common.configLocalAudioPublish?e._common.dispatchEvent(_.default.OnError,n):r(n)}).then(function(){if(i=!0,n&&o)return void t(e._publishStream)});else if(i=!0,n)return void t(e._publishStream)}}).catch(function(e){r(e)})})}},{key:"_getPreviewConstraints",value:function(){var e=this._videoProfile.getVideoConstraints();return(this._cameraInfo.facingMode||this._cameraInfo.deviceId)&&(this._cameraInfo.facingMode?e.video.facingMode={exact:this._cameraInfo.facingMode}:this._cameraInfo.deviceId&&(e.video||(e.video={}),e.video.deviceId={exact:this._cameraInfo.deviceId})),e.video&&1!=e.video?this._enableHighDefinitionPreview&&e.width<=1280&&e.height<=720?(e.video.width=1280,e.video.height=720):(e.video.width=e.width,e.video.height=e.height):this._enableHighDefinitionPreview&&e.width&&e.width<=1280&&e.height&&e.height<=720?e.video={width:1280,height:720}:e.video={width:e.width,height:e.height},e.video.frameRate=e.frameRate,e=this._addAspectRatio(e)}},{key:"_getPreviewStream",value:function(){var e=this;return new Promise(function(t,r){var n=e._getPreviewConstraints();navigator.mediaDevices.getUserMedia(n).then(function(e){t(e)}).catch(function(e){r(e)})})}},{key:"_checkResolution",value:function(e,t,r,n){var i={audio:!1,video:{width:{ideal:r}}};return e&&(i.video.deviceId={exact:e}),new Promise(function(e,t){navigator.mediaDevices.getUserMedia(i).then(function(t){var i=r,o=n;t.getTracks().forEach(function(e){if("video"===e.kind){var t=e.getSettings();t&&(i=t.width,o=t.height)}e.stop()}),e({width:i,height:o})}).catch(function(e){t(e)})})}}]),t}(u.default);t.default=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(365),i=(0,n.adapterFactory)({window:"undefined"==typeof window?void 0:window});t.default=i},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},n=a.log,i=a.detectBrowser(t),o={browserDetails:i,commonShim:p,extractVersion:a.extractVersion,disableLog:a.disableLog,disableWarnings:a.disableWarnings,sdp:m};switch(i.browser){case"chrome":if(!c||!c.shimPeerConnection||!r.shimChrome)return n("Chrome shim is not included in this adapter release."),o;if(null===i.version)return n("Chrome shim can not determine version, not shimming."),o;n("adapter.js shimming chrome."),o.browserShim=c,p.shimAddIceCandidateNullOrEmpty(t,i),c.shimGetUserMedia(t,i),c.shimMediaStream(t,i),c.shimPeerConnection(t,i),c.shimOnTrack(t,i),c.shimAddTrackRemoveTrack(t,i),c.shimGetSendersWithDtmf(t,i),c.shimGetStats(t,i),c.shimSenderReceiverGetStats(t,i),c.fixNegotiationNeeded(t,i),p.shimRTCIceCandidate(t,i),p.shimConnectionState(t,i),p.shimMaxMessageSize(t,i),p.shimSendThrowTypeError(t,i),p.removeExtmapAllowMixed(t,i);break;case"firefox":if(!f||!f.shimPeerConnection||!r.shimFirefox)return n("Firefox shim is not included in this adapter release."),o;n("adapter.js shimming firefox."),o.browserShim=f,p.shimAddIceCandidateNullOrEmpty(t,i),f.shimGetUserMedia(t,i),f.shimPeerConnection(t,i),f.shimOnTrack(t,i),f.shimRemoveStream(t,i),f.shimSenderGetStats(t,i),f.shimReceiverGetStats(t,i),f.shimRTCDataChannel(t,i),f.shimAddTransceiver(t,i),f.shimGetParameters(t,i),f.shimCreateOffer(t,i),f.shimCreateAnswer(t,i),p.shimRTCIceCandidate(t,i),p.shimConnectionState(t,i),p.shimMaxMessageSize(t,i),p.shimSendThrowTypeError(t,i);break;case"safari":if(!l||!r.shimSafari)return n("Safari shim is not included in this adapter release."),o;n("adapter.js shimming safari."),o.browserShim=l,p.shimAddIceCandidateNullOrEmpty(t,i),l.shimRTCIceServerUrls(t,i),l.shimCreateOfferLegacy(t,i),l.shimCallbacksAPI(t,i),l.shimLocalStreamsAPI(t,i),l.shimRemoteStreamsAPI(t,i),l.shimTrackEventTransceiver(t,i),l.shimGetUserMedia(t,i),l.shimAudioContext(t,i),p.shimRTCIceCandidate(t,i),p.shimMaxMessageSize(t,i),p.shimSendThrowTypeError(t,i),p.removeExtmapAllowMixed(t,i);break;default:n("Unsupported browser!")}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.adapterFactory=i;var o=r(29),a=n(o),s=r(366),c=n(s),u=r(369),f=n(u),d=r(372),l=n(d),h=r(373),p=n(h),_=r(176),m=n(_)},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function o(e){if("object"!==(void 0===e?"undefined":h(e))||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)v.wrapPeerConnectionEvent(e,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(n){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(e){return e.track&&e.track.id===n.track.id}):{track:n.track};var o=new Event("track");o.track=n.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],r.dispatchEvent(o)}),t.stream.getTracks().forEach(function(n){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(e){return e.track&&e.track.id===n.id}):{track:n};var o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],r.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}}function a(e){if("object"===(void 0===e?"undefined":h(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var i=r.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(function(e){r._senders.push(t(r,e))})};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach(function(e){var r=t._senders.find(function(t){return t.track===e});r&&t._senders.splice(t._senders.indexOf(r),1)})}}else if("object"===(void 0===e?"undefined":h(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function s(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,r=Array.prototype.slice.call(arguments),n=r[0],i=r[1],o=r[2];if(arguments.length>0&&"function"==typeof n)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof n))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){r[t]=e.stat(t)}),t[r.id]=r}),t},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){var c=function(e){i(s(a(e)))};return t.apply(this,[c,n])}return new Promise(function(r,n){t.apply(e,[function(e){r(s(a(e)))},n])}).then(i,o)}}}function c(e){if("object"===(void 0===e?"undefined":h(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach(function(t){return t._pc=e}),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return v.filterStats(t,e.track,!0)})}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=n.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),v.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return v.filterStats(t,e.track,!1)})}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],r=void 0,n=void 0,o=void 0;return this.getSenders().forEach(function(e){e.track===t&&(r?o=!0:r=e)}),this.getReceivers().forEach(function(e){return e.track===t&&(n?o=!0:n=e),e.track===t}),o||r&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}}function u(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var n=this.getSenders();r.apply(this,arguments);var i=this.getSenders().filter(function(e){return-1===n.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]}),i.apply(this,arguments)}}function f(e,t){function r(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}function i(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:r})}if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return u(e);var o=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=o.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var a=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(function(e){if(r.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){var n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}a.apply(this,[t])};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[r.id];if(o)o.addTrack(t),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))});else{var a=new e.MediaStream([t]);this._streams[r.id]=a,this._reverseStreams[a.id]=r,this.addStream(a)}return this.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(t){var i=e.RTCPeerConnection.prototype[t],o=n({},t,function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?i.apply(this,[function(n){var i=r(e,n);t[0].apply(null,[i])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):i.apply(this,arguments).then(function(t){return r(e,t)})});e.RTCPeerConnection.prototype[t]=o[t]});var c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=i(this,arguments[0]),c.apply(this,arguments)):c.apply(this,arguments)};var f=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=f.get.apply(this);return""===e.type?e:r(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var r=void 0;Object.keys(this._streams).forEach(function(n){t._streams[n].getTracks().find(function(t){return e.track===t})&&(r=t._streams[n])}),r&&(1===r.getTracks().length?this.removeStream(this._reverseStreams[r.id]):r.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}}function d(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t],i=n({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=i[t]})}function l(e,t){v.wrapPeerConnectionEvent(e,"negotiationneeded",function(e){var r=e.target;if(!(t.version<72||r.getConfiguration&&"plan-b"===r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return e})}Object.defineProperty(t,"__esModule",{value:!0}),t.shimGetDisplayMedia=t.shimGetUserMedia=void 0;var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=r(367);Object.defineProperty(t,"shimGetUserMedia",{enumerable:!0,get:function(){return p.shimGetUserMedia}});var _=r(368);Object.defineProperty(t,"shimGetDisplayMedia",{enumerable:!0,get:function(){return _.shimGetDisplayMedia}}),t.shimMediaStream=i,t.shimOnTrack=o,t.shimGetSendersWithDtmf=a,t.shimGetStats=s,t.shimSenderReceiverGetStats=c,t.shimAddTrackRemoveTrackWithNative=u,t.shimAddTrackRemoveTrack=f,t.shimPeerConnection=d,t.fixNegotiationNeeded=l;var m=r(29),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(m)},function(e,t,r){"use strict";function n(e,t){var r=e&&e.navigator;if(r.mediaDevices){var n=function(e){if("object"!==(void 0===e?"undefined":i(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n="object"===i(e[r])?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var a={};"number"==typeof n.ideal?(a[o("min",r)]=n.ideal,t.optional.push(a),a={},a[o("max",r)]=n.ideal,t.optional.push(a)):(a[o("",r)]=n.ideal,t.optional.push(a))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",r)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,r)]=n[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,o){if(t.version>=61)return o(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===i(e.audio)){var a=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"===i(e.video)){var c=e.video.facingMode;c=c&&("object"===(void 0===c?"undefined":i(c))?c:{ideal:c});var u=t.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||u)){delete e.video.facingMode;var f=void 0;if("environment"===c.exact||"environment"===c.ideal?f=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(f=["front"]),f)return r.mediaDevices.enumerateDevices().then(function(t){t=t.filter(function(e){return"videoinput"===e.kind});var r=t.find(function(e){return f.some(function(t){return e.label.toLowerCase().includes(t)})});return!r&&t.length&&f.includes("back")&&(r=t[t.length-1]),r&&(e.video.deviceId=c.exact?{exact:r.deviceId}:{ideal:r.deviceId}),e.video=n(e.video),s("chrome: "+JSON.stringify(e)),o(e)})}e.video=n(e.video)}return s("chrome: "+JSON.stringify(e)),o(e)},a=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},c=function(e,t,n){o(e,function(e){r.webkitGetUserMedia(e,t,function(e){n&&n(a(e))})})};if(r.getUserMedia=c.bind(r),r.mediaDevices.getUserMedia){var u=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return o(e,function(e){return u(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(a(e))})})}}}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.shimGetUserMedia=n;var o=r(29),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=a.log},function(e,t,r){"use strict";function n(e,t){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&e.navigator.mediaDevices)return"function"!=typeof t?void console.error("shimGetDisplayMedia: getSourceId argument is not a function"):void(e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(function(t){var n=r.video&&r.video.width,i=r.video&&r.video.height,o=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},n&&(r.video.mandatory.maxWidth=n),i&&(r.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(r)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.shimGetDisplayMedia=n},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){"object"===(void 0===e?"undefined":p(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function o(e,t){if("object"===(void 0===e?"undefined":p(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t],i=n({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=i[t]});var r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),n=e[0],o=e[1],a=e[2];return i.apply(this,[n||null]).then(function(e){if(t.version<53&&!o)try{e.forEach(function(e){e.type=r[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach(function(t,n){e.set(n,Object.assign({},t,{type:r[t.type]||t.type}))})}return e}).then(o,a)}}}function a(e){if("object"===(void 0===e?"undefined":p(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach(function(t){return t._pc=e}),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function s(e){if("object"===(void 0===e?"undefined":p(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,r=t.apply(this,[]);return r.forEach(function(t){return t._pc=e}),r}),b.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function c(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;b.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(r){r.track&&e.getTracks().includes(r.track)&&t.removeTrack(r)})})}function u(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function f(e){if("object"===(void 0===e?"undefined":p(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],r=e&&"sendEncodings"in e;r&&e.sendEncodings.forEach(function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var n=t.apply(this,arguments);if(r){var i=n.sender,o=i.getParameters();"encodings"in o&&(1!==o.encodings.length||0!==Object.keys(o.encodings[0]).length)||(o.encodings=e.sendEncodings,i.sendEncodings=e.sendEncodings,this.setParametersPromises.push(i.setParameters(o).then(function(){delete i.sendEncodings}).catch(function(){delete i.sendEncodings})))}return n})}}function d(e){if("object"===(void 0===e?"undefined":p(e))&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function l(e){if("object"===(void 0===e?"undefined":p(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,r=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(e,r)}).finally(function(){e.setParametersPromises=[]}):t.apply(this,arguments)}}}function h(e){if("object"===(void 0===e?"undefined":p(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,r=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(e,r)}).finally(function(){e.setParametersPromises=[]}):t.apply(this,arguments)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.shimGetDisplayMedia=t.shimGetUserMedia=void 0;var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=r(370);Object.defineProperty(t,"shimGetUserMedia",{enumerable:!0,get:function(){return _.shimGetUserMedia}});var m=r(371);Object.defineProperty(t,"shimGetDisplayMedia",{enumerable:!0,get:function(){return m.shimGetDisplayMedia}}),t.shimOnTrack=i,t.shimPeerConnection=o,t.shimSenderGetStats=a,t.shimReceiverGetStats=s,t.shimRemoveStream=c,t.shimRTCDataChannel=u,t.shimAddTransceiver=f,t.shimGetParameters=d,t.shimCreateOffer=l,t.shimCreateAnswer=h;var v=r(29),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(v)},function(e,t,r){"use strict";function n(e,t){var r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,n){a.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){var o=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},s=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":i(e))&&"object"===i(e.audio)&&(e=JSON.parse(JSON.stringify(e)),o(e.audio,"autoGainControl","mozAutoGainControl"),o(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e)},n&&n.prototype.getSettings){var c=n.prototype.getSettings;n.prototype.getSettings=function(){var e=c.apply(this,arguments);return o(e,"mozAutoGainControl","autoGainControl"),o(e,"mozNoiseSuppression","noiseSuppression"),e}}if(n&&n.prototype.applyConstraints){var u=n.prototype.applyConstraints;n.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":i(e))&&(e=JSON.parse(JSON.stringify(e)),o(e,"autoGainControl","mozAutoGainControl"),o(e,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[e])}}}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.shimGetUserMedia=n;var o=r(29),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o)},function(e,t,r){"use strict";function n(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){var n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}Object.defineProperty(t,"__esModule",{value:!0}),t.shimGetDisplayMedia=n},function(e,t,r){"use strict";function n(e){if("object"===(void 0===e?"undefined":l(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(function(n){return t.call(r,n,e)}),e.getVideoTracks().forEach(function(n){return t.call(r,n,e)})},e.RTCPeerConnection.prototype.addTrack=function(e){for(var r=this,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i&&i.forEach(function(e){r._localStreams?r._localStreams.includes(e)||r._localStreams.push(e):r._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var r=this._localStreams.indexOf(e);if(-1!==r){this._localStreams.splice(r,1);var n=e.getTracks();this.getSenders().forEach(function(e){n.includes(e.track)&&t.removeTrack(e)})}})}}function i(e){if("object"===(void 0===e?"undefined":l(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}})})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}})}),t.apply(e,arguments)}}}function o(e){if("object"===(void 0===e?"undefined":l(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i};var s=function(e,t,r){var n=i.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=s,s=function(e,t,r){var n=o.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.setRemoteDescription=s,s=function(e,t,r){var n=a.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=s}}function a(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices,n=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(e){return n(s(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}.bind(t))}function s(e){return e&&void 0!==e.video?Object.assign({},e,{video:p.compactObject(e.video)}):e}function c(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(p.deprecated("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,n.push(o)):n.push(e.iceServers[i])}e.iceServers=n}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function u(e){"object"===(void 0===e?"undefined":l(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function f(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=this.getTransceivers().find(function(e){return"audio"===e.receiver.track.kind});!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var n=this.getTransceivers().find(function(e){return"video"===e.receiver.track.kind});!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}function d(e){"object"!==(void 0===e?"undefined":l(e))||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.shimLocalStreamsAPI=n,t.shimRemoteStreamsAPI=i,t.shimCallbacksAPI=o,t.shimGetUserMedia=a,t.shimConstraints=s,t.shimRTCIceServerUrls=c,t.shimTrackEventTransceiver=u,t.shimCreateOfferLegacy=f,t.shimAudioContext=d;var h=r(29),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(h)},function(e,t,r){"use strict";function n(e){if(e.RTCIceCandidate&&!(e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(void 0===e?"undefined":u(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&(e=JSON.parse(JSON.stringify(e)),e.candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var r=new t(e),n=d.default.parseCandidate(e.candidate),i=Object.assign(r,n);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,h.wrapPeerConnectionEvent(e,"icecandidate",function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t})}}function i(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var r=function(e){if(!e||!e.sdp)return!1;var t=d.default.splitSections(e.sdp);return t.shift(),t.some(function(e){var t=d.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},n=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var r=parseInt(t[1],10);return r!==r?-1:r},i=function(e){var r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r},o=function(e,r){var n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);var i=d.default.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?n=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(n=2147483637),n},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){var e=n(arguments[0]),s=i(e),c=o(arguments[0],e),u=void 0;u=0===s&&0===c?Number.POSITIVE_INFINITY:0===s||0===c?Math.max(s,c):Math.min(s,c);var f={};Object.defineProperty(f,"maxMessageSize",{get:function(){return u}}),this._sctp=f}return a.apply(this,arguments)}}}function o(e){function t(e,t){var r=e.send;e.send=function(){var n=arguments[0],i=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=r.apply(this,arguments);return t(e,this),e},h.wrapPeerConnectionEvent(e,"datachannel",function(e){return t(e.channel,e.target),e})}}function a(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(e){var r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}}function s(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var n=t.sdp.split("\n").filter(function(e){return"a=extmap-allow-mixed"!==e.trim()}).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return r.apply(this,arguments)}}}function c(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var r=e.RTCPeerConnection.prototype.addIceCandidate;r&&0!==r.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.shimRTCIceCandidate=n,t.shimMaxMessageSize=i,t.shimSendThrowTypeError=o,t.shimConnectionState=a,t.removeExtmapAllowMixed=s,t.shimAddIceCandidateNullOrEmpty=c;var f=r(176),d=function(e){return e&&e.__esModule?e:{default:e}}(f),l=r(29),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l)}]);